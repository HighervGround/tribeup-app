{"version":3,"file":"UnifiedGameCard-CvWmvZ13.js","sources":["../../src/components/UnifiedGameCard.tsx","../../src/hooks/useGameCard.ts"],"sourcesContent":["import React, { useState } from 'react';\nimport { Card, CardContent } from './ui/card';\nimport { Badge } from './ui/badge';\nimport { Button } from './ui/button';\nimport { Avatar, AvatarFallback } from './ui/avatar';\nimport { ClickableAvatar } from './ui/clickable-avatar';\nimport { ImageWithFallback } from './figma/ImageWithFallback';\nimport { MapPin, Calendar, Users, Clock, Star } from 'lucide-react';\nimport { useGameCard } from '../hooks/useGameCard';\nimport { formatTimeString } from '../lib/dateUtils';\n\ninterface Game {\n  id: string;\n  title: string;\n  sport: string;\n  sportColor?: string;\n  location: string;\n  date: string;\n  time: string;\n  description: string;\n  imageUrl?: string;\n  currentPlayers: number;\n  maxPlayers: number;\n  isJoined: boolean;\n  cost?: string;\n  category?: string;\n  host?: {\n    id?: string;\n    name: string;\n    avatar?: string;\n  };\n  rating?: number;\n  [key: string]: any;\n}\n\ninterface UnifiedGameCardProps {\n  game: Game;\n  variant?: 'full' | 'simple' | 'compact';\n  showImage?: boolean;\n  showJoinButton?: boolean;\n  onSelect?: (gameId: string) => void;\n  onJoinLeave?: (gameId: string) => void;\n}\n\n/**\n * Unified GameCard component that handles all game card variants\n * Replaces SimpleGameCard components in HomeScreen and SearchDiscovery\n */\nexport function UnifiedGameCard({ \n  game, \n  variant = 'simple',\n  showImage = false,\n  showJoinButton = true,\n  onSelect,\n  onJoinLeave\n}: UnifiedGameCardProps) {\n  const [isHovered, setIsHovered] = useState(false);\n  const {\n    handleCardClick,\n    handleJoinClick,\n    isLoading,\n    getButtonText,\n    getButtonVariant,\n    getCategoryBadge,\n    getPlayerCount,\n    getJoinStatus\n  } = useGameCard(game, { onSelect, onJoinLeave });\n\n  // Full variant (original GameCard)\n  if (variant === 'full') {\n    return (\n      <div\n        onMouseEnter={() => setIsHovered(true)}\n        onMouseLeave={() => setIsHovered(false)}\n      >\n        <Card \n          className={`overflow-hidden cursor-pointer transition-all duration-200 ease-out ${\n            isHovered ? 'shadow-medium' : 'shadow-subtle'\n          }`}\n          onClick={handleCardClick}\n        >\n          <div className=\"relative overflow-hidden\">\n            {game.imageUrl ? (\n              <div className=\"aspect-video overflow-hidden\">\n                <ImageWithFallback\n                  src={game.imageUrl}\n                  alt={game.sport}\n                  className=\"w-full h-full object-cover transition-transform duration-300 ease-out\"\n                />\n              </div>\n            ) : (\n              <div className=\"h-16 bg-gradient-to-r from-blue-50 to-purple-50 flex items-center justify-center\">\n                <Badge variant=\"secondary\" className=\"text-sm\">\n                  {game.sport}\n                </Badge>\n              </div>\n            )}\n            \n            {/* Gradient overlay on hover */}\n            <div\n              className={`absolute inset-0 bg-gradient-to-t from-black/20 to-transparent transition-opacity duration-200 ${\n                isHovered ? 'opacity-10' : 'opacity-0'\n              }`}\n            />\n            \n            {/* Date/Time Block - Top Left */}\n            <div className=\"absolute top-3 left-3 bg-background/95 backdrop-blur-sm rounded-lg px-3 py-2 min-w-[80px]\">\n              <div className=\"flex items-center gap-1 mb-1\">\n                <Calendar className=\"w-3 h-3 text-muted-foreground\" />\n                <span className=\"text-xs text-muted-foreground\">{game.date}</span>\n              </div>\n              <div className=\"text-sm font-medium\">{game.time}</div>\n            </div>\n\n            {/* Sport Tag - Top Right */}\n            <div className=\"absolute top-3 right-3\">\n              <Badge className={`${game.sportColor || 'bg-primary'} text-white border-none`}>\n                {game.sport}\n              </Badge>\n            </div>\n\n            {/* Join status indicator */}\n            {game.isJoined && (\n              <div className=\"absolute bottom-3 right-3 w-6 h-6 bg-success rounded-full flex items-center justify-center\">\n                <div className=\"w-2 h-2 bg-white rounded-full\" />\n              </div>\n            )}\n          </div>\n\n          <CardContent className=\"p-4\">\n            <div className=\"space-y-3\">\n              <div>\n                <h3 className=\"font-semibold text-lg mb-1\">{game.title}</h3>\n                <div className=\"flex items-center gap-2 text-sm text-muted-foreground\">\n                  <MapPin className=\"w-4 h-4\" />\n                  <span>{game.location}</span>\n                </div>\n              </div>\n              \n              {/* Host info */}\n              {game.host && (\n                <div className=\"flex items-center gap-2 text-sm\">\n                  <ClickableAvatar\n                    userId={game.host.id}\n                    src={game.host.avatar}\n                    alt={game.host.name}\n                    size=\"sm\"\n                  />\n                  <span className=\"text-muted-foreground\">Hosted by {game.host.name}</span>\n                </div>\n              )}\n              \n              <div className=\"flex items-center justify-between\">\n                <div className=\"flex items-center gap-1 text-sm text-muted-foreground\">\n                  <Users className=\"w-4 h-4\" />\n                  <span>{getPlayerCount()}</span>\n                </div>\n                \n                {showJoinButton && (\n                  <Button \n                    size=\"sm\" \n                    variant={getButtonVariant(game)}\n                    onClick={handleJoinClick}\n                    className=\"transition-all duration-200\"\n                    disabled={isLoading || (game.currentPlayers >= game.maxPlayers && !game.isJoined)}\n                  >\n                    {game.currentPlayers >= game.maxPlayers && !game.isJoined ? 'Game Full' : getButtonText(game)}\n                  </Button>\n                )}\n              </div>\n            </div>\n          </CardContent>\n        </Card>\n      </div>\n    );\n  }\n\n  // Simple variant (for HomeScreen and SearchDiscovery)\n  return (\n    <div \n      className=\"bg-card rounded-lg p-4 border border-border cursor-pointer hover:shadow-md transition-shadow\"\n      onClick={handleCardClick}\n    >\n      {/* Header with title and category badge */}\n      <div className=\"flex items-start justify-between mb-3\">\n        <div className=\"flex-1 pr-4\">\n          <div className=\"flex items-center gap-2 mb-1\">\n            <h3 className=\"font-semibold text-lg\">{game.title}</h3>\n            {getCategoryBadge() && (\n              <span className={`inline-block text-xs px-2 py-1 rounded-full font-medium ${getCategoryBadge()?.className}`}>\n                {getCategoryBadge()?.text}\n              </span>\n            )}\n          </div>\n          <p className=\"text-sm text-muted-foreground\">{game.sport}</p>\n          \n          {/* Host info for simple variant */}\n          {game.host && (\n            <div className=\"flex items-center gap-2 mt-2 text-sm\">\n              <ClickableAvatar\n                userId={game.host.id}\n                src={game.host.avatar}\n                alt={game.host.name}\n                size=\"sm\"\n              />\n              <span className=\"text-muted-foreground\">Hosted by {game.host.name}</span>\n            </div>\n          )}\n        </div>\n        <div className=\"text-right flex-shrink-0\">\n          {game.cost && <div className=\"text-sm font-medium\">{game.cost}</div>}\n          <div className=\"text-xs text-muted-foreground\">\n            {getPlayerCount()}\n          </div>\n        </div>\n      </div>\n      \n      {/* Game details */}\n      <div className=\"space-y-2 text-sm\">\n        <div className=\"flex items-center gap-2\">\n          <MapPin className=\"w-4 h-4 text-muted-foreground\" />\n          <span>{game.location}</span>\n        </div>\n        <div className=\"flex items-center gap-2\">\n          <Users className=\"w-4 h-4 text-muted-foreground\" />\n          <span>{getPlayerCount()}</span>\n        </div>\n        <div className=\"flex items-center gap-2\">\n          <Clock className=\"w-4 h-4 text-muted-foreground\" />\n          <span>{game.date} at {formatTimeString(game.time)}</span>\n        </div>\n      </div>\n      \n      <p className=\"text-sm text-muted-foreground mt-3\">{game.description}</p>\n      \n      {/* Footer with join status and button */}\n      {showJoinButton && (\n        <div className=\"flex items-center justify-between mt-3\">\n          {getJoinStatus() ? (\n            <span className={`inline-block ${getJoinStatus()?.className}`}>\n              {getJoinStatus()?.text}\n            </span>\n          ) : (\n            <div></div>\n          )}\n          \n          <button\n            onClick={handleJoinClick}\n            disabled={isLoading}\n            className={`px-3 py-1 rounded text-sm font-medium transition-colors ${\n              isLoading \n                ? 'opacity-50 cursor-not-allowed' \n                : game.isJoined \n                  ? 'bg-destructive/20 text-destructive dark:bg-destructive/30 dark:text-destructive hover:bg-destructive/30 dark:hover:bg-destructive/40' \n                  : 'bg-primary text-primary-foreground hover:bg-primary/90'\n            }`}\n          >\n            {getButtonText(game)}\n          </button>\n        </div>\n      )}\n    </div>\n  );\n}\n\nexport default UnifiedGameCard;\n","import { useNavigate } from 'react-router-dom';\nimport { useGameJoinToggle } from './useGameJoinToggle';\n\ninterface Game {\n  id: string;\n  title: string;\n  sport: string;\n  location: string;\n  date: string;\n  time: string;\n  description: string;\n  currentPlayers: number;\n  maxPlayers: number;\n  isJoined: boolean;\n  cost?: string;\n  category?: string;\n  [key: string]: any;\n}\n\ninterface UseGameCardOptions {\n  onSelect?: (gameId: string) => void;\n  onJoinLeave?: (gameId: string) => void;\n}\n\n/**\n * Custom hook for common game card functionality\n * Centralizes navigation, join/leave logic, and event handling\n */\nexport function useGameCard(game: Game, options: UseGameCardOptions = {}) {\n  const navigate = useNavigate();\n  const joinToggle = useGameJoinToggle();\n  \n  const handleCardClick = () => {\n    if (options.onSelect) {\n      options.onSelect(game.id);\n    } else {\n      navigate(`/game/${game.id}`);\n    }\n  };\n  \n  const handleJoinClick = (e: React.MouseEvent) => {\n    e.stopPropagation();\n    \n    if (options.onJoinLeave) {\n      // Use custom join/leave handler if provided (legacy support)\n      options.onJoinLeave(game.id);\n    } else {\n      // Use the centralized toggle logic\n      joinToggle.toggleJoin(game, e);\n    }\n  };\n  \n  /**\n   * Get category badge for time-based categorization\n   */\n  const getCategoryBadge = () => {\n    if (game.category === 'today') {\n      return {\n        text: 'Today',\n        className: 'bg-orange-100 text-orange-800 dark:bg-orange-900/30 dark:text-orange-300'\n      };\n    } else if (game.category === 'tomorrow') {\n      return {\n        text: 'Tomorrow', \n        className: 'bg-blue-100 text-blue-800 dark:bg-blue-900/30 dark:text-blue-300'\n      };\n    }\n    return null;\n  };\n  \n  /**\n   * Check if the game is full\n   */\n  const isFull = game.currentPlayers >= game.maxPlayers;\n  \n  /**\n   * Get formatted player count string\n   */\n  const getPlayerCount = () => `${game.currentPlayers}/${game.maxPlayers} players`;\n  \n  /**\n   * Get join status indicator props\n   */\n  const getJoinStatus = () => {\n    if (!game.isJoined) return null;\n    \n    return {\n      text: 'Joined âœ“',\n      className: 'bg-success/20 text-success dark:bg-success/30 dark:text-success text-xs px-2 py-1 rounded'\n    };\n  };\n  \n  return {\n    // Event handlers\n    handleCardClick,\n    handleJoinClick,\n    \n    // Join/leave functionality\n    ...joinToggle,\n    \n    // Computed values\n    getCategoryBadge,\n    isFull,\n    getPlayerCount,\n    getJoinStatus,\n    \n    // Game data\n    game,\n  };\n}\n"],"names":["UnifiedGameCard","game","variant","showImage","showJoinButton","onSelect","onJoinLeave","isHovered","setIsHovered","useState","handleCardClick","handleJoinClick","isLoading","getButtonText","getButtonVariant","getCategoryBadge","getPlayerCount","getJoinStatus","options","navigate","useNavigate","joinToggle","useGameJoinToggle","isFull","currentPlayers","maxPlayers","id","e","stopPropagation","toggleJoin","category","text","className","isJoined","useGameCard","jsx","onMouseEnter","onMouseLeave","children","jsxs","Card","onClick","imageUrl","ImageWithFallback","src","alt","sport","Badge","Calendar","date","time","sportColor","CardContent","title","MapPin","location","host","ClickableAvatar","userId","avatar","name","size","Users","Button","disabled","cost","Clock","formatTimeString","description"],"mappings":"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"}