{"version":3,"file":"CreateGame-Dvj7nO4l.js","sources":["../../src/hooks/useLocationSearch.ts","../../src/lib/systemConfig.ts","../../src/components/CreateGame.tsx","../../src/hooks/useGeolocation.ts"],"sourcesContent":["import { useState, useCallback, useEffect } from 'react';\n\ninterface LocationSuggestion {\n  place_id: string;\n  description: string;\n  structured_formatting: {\n    main_text: string;\n    secondary_text: string;\n  };\n}\n\ninterface Coordinates {\n  lat: number;\n  lng: number;\n}\n\n// Declare global Google Maps types\ndeclare global {\n  interface Window {\n    google: any;\n    initGoogleMaps: () => void;\n  }\n}\n\nexport function useLocationSearch() {\n  const [suggestions, setSuggestions] = useState<LocationSuggestion[]>([]);\n  const [loading, setLoading] = useState(false);\n  const [googleMapsLoaded, setGoogleMapsLoaded] = useState(false);\n\n  const GOOGLE_API_KEY = (import.meta as any).env?.VITE_GOOGLE_PLACES_API_KEY || 'AIzaSyATPbnuTvpYDDY0vLrKy0IoS80A27rpq-4';\n  \n  // Debug API key on component mount\n  useEffect(() => {\n    console.log('üîë API Key status:', {\n      hasKey: !!GOOGLE_API_KEY,\n      keyLength: GOOGLE_API_KEY?.length,\n      keyPrefix: GOOGLE_API_KEY?.substring(0, 10) + '...',\n      envVars: Object.keys((import.meta as any).env || {}).filter(k => k.includes('GOOGLE'))\n    });\n  }, [GOOGLE_API_KEY]);\n\n  // Using new Google Places API (Text Search) with OpenStreetMap fallback\n  useEffect(() => {\n    console.log('üåê Using new Google Places API with OpenStreetMap fallback');\n    setGoogleMapsLoaded(false); // Not using SDK, using REST API directly\n  }, []);\n\n  // Geocoding using Google Geocoding API (v3 is still supported)\n  const geocodeLocation = useCallback(async (address: string): Promise<Coordinates | null> => {\n    try {\n      console.log('üåç Geocoding address with Google:', address);\n      \n      // Try Google Geocoding API first\n      if (GOOGLE_API_KEY && GOOGLE_API_KEY !== 'demo_key') {\n        const response = await fetch(\n          `https://maps.googleapis.com/maps/api/geocode/json?address=${encodeURIComponent(address)}&key=${GOOGLE_API_KEY}`\n        );\n        \n        if (response.ok) {\n          const data = await response.json();\n          console.log('üåç Google Geocoding response:', data);\n          \n          if (data.results && data.results.length > 0) {\n            const location = data.results[0].geometry.location;\n            const coords = {\n              lat: location.lat,\n              lng: location.lng\n            };\n            console.log('‚úÖ Google geocoded coordinates:', coords);\n            return coords;\n          }\n        } else {\n          console.log('‚ö†Ô∏è Google Geocoding API error:', response.status);\n        }\n      }\n      \n      // Fallback to OpenStreetMap\n      console.log('üó∫Ô∏è Falling back to OpenStreetMap geocoding...');\n      const response = await fetch(\n        `https://nominatim.openstreetmap.org/search?format=json&q=${encodeURIComponent(address)}&limit=1`,\n        {\n          headers: {\n            'User-Agent': 'TribeUp Sports App'\n          }\n        }\n      );\n      \n      if (!response.ok) throw new Error('Geocoding failed');\n      \n      const data = await response.json();\n      console.log('üåç OpenStreetMap geocoding response:', data);\n      \n      if (data.length > 0) {\n        const coords = {\n          lat: parseFloat(data[0].lat),\n          lng: parseFloat(data[0].lon)\n        };\n        console.log('‚úÖ OpenStreetMap geocoded coordinates:', coords);\n        return coords;\n      }\n      \n      console.log('‚ö†Ô∏è No geocoding results found');\n      return null;\n    } catch (error) {\n      console.error('‚ùå Geocoding error:', error);\n      return null;\n    }\n  }, [GOOGLE_API_KEY]);\n\n  // Search for location suggestions with proximity bias\n  const searchLocations = useCallback(async (query: string, userLat?: number, userLng?: number) => {\n    console.log('üîç searchLocations called with:', { query, userLat, userLng, queryLength: query?.length });\n    \n    if (!query.trim()) {\n      console.log('‚ùå Empty query, clearing suggestions');\n      setSuggestions([]);\n      return;\n    }\n\n    console.log('üîç Starting location search for:', query);\n    setLoading(true);\n    \n    // Fallback function for OpenStreetMap\n    const tryOpenStreetMapSearch = async () => {\n      try {\n        console.log('üó∫Ô∏è Trying OpenStreetMap for query:', query);\n        let searchUrl = `https://nominatim.openstreetmap.org/search?format=json&q=${encodeURIComponent(query)}&limit=5&addressdetails=1`;\n        \n        if (userLat && userLng) {\n          searchUrl += `&lat=${userLat}&lon=${userLng}&bounded=1&viewbox=${userLng-0.1},${userLat+0.1},${userLng+0.1},${userLat-0.1}`;\n          console.log('üìç Added location bias to OpenStreetMap search');\n        }\n        \n        console.log('üì° OpenStreetMap URL:', searchUrl);\n        \n        const response = await fetch(searchUrl, {\n          headers: {\n            'User-Agent': 'TribeUp Sports App'\n          }\n        });\n        \n        console.log('üì• OpenStreetMap response status:', response.status, response.statusText);\n        \n        if (response.ok) {\n          const data = await response.json();\n          console.log('‚úÖ OpenStreetMap response data:', data);\n          \n          if (data && data.length > 0) {\n            const suggestions: LocationSuggestion[] = data.map((place: any, index: number) => ({\n              place_id: place.place_id || `osm-${index}`,\n              description: place.display_name,\n              structured_formatting: {\n                main_text: place.name || place.display_name.split(',')[0],\n                secondary_text: place.display_name.split(',').slice(1, 3).join(',').trim()\n              }\n            }));\n\n            console.log('üéØ OpenStreetMap suggestions processed:', suggestions);\n            setSuggestions(suggestions);\n            return;\n          } else {\n            console.log('‚ö†Ô∏è OpenStreetMap returned empty results for query:', query);\n          }\n        } else {\n          console.log('‚ùå OpenStreetMap API error:', response.status, response.statusText);\n          const errorText = await response.text();\n          console.log('‚ùå Error details:', errorText);\n        }\n      } catch (error) {\n        console.error('‚ùå OpenStreetMap search error:', error);\n      }\n      \n      // If all APIs fail\n      console.log('‚ùå All location APIs failed, showing no suggestions');\n      setSuggestions([]);\n    };\n    \n    try {\n      // Try new Google Places API first (Text Search)\n      if (GOOGLE_API_KEY && GOOGLE_API_KEY !== 'demo_key' && GOOGLE_API_KEY !== 'your_anon_key_here') {\n        console.log('üåê Trying new Google Places API (Text Search)...');\n        \n        const requestBody = {\n          textQuery: query,\n          maxResultCount: 5,\n          locationBias: userLat && userLng ? {\n            circle: {\n              center: { latitude: userLat, longitude: userLng },\n              radius: 50000\n            }\n          } : undefined\n        };\n        \n        console.log('üì§ Google Places API request:', requestBody);\n        \n        const response = await fetch(\n          `https://places.googleapis.com/v1/places:searchText`,\n          {\n            method: 'POST',\n            headers: {\n              'Content-Type': 'application/json',\n              'X-Goog-Api-Key': GOOGLE_API_KEY,\n              'X-Goog-FieldMask': 'places.id,places.displayName,places.formattedAddress,places.location'\n            },\n            body: JSON.stringify(requestBody)\n          }\n        );\n        \n        console.log('üì• Google Places API response status:', response.status);\n        \n        if (response.ok) {\n          const data = await response.json();\n          console.log('‚úÖ Google Places API response:', data);\n          \n          if (data.places && data.places.length > 0) {\n            const suggestions: LocationSuggestion[] = data.places.map((place: any, index: number) => {\n              const displayName = place.displayName?.text || '';\n              const formattedAddress = place.formattedAddress || '';\n              \n              // Prioritize display name for description, but include address context if needed\n              const description = displayName ? \n                (formattedAddress ? `${displayName}, ${formattedAddress}` : displayName) :\n                formattedAddress || 'Unknown location';\n              \n              return {\n                place_id: place.id || `google-${index}`,\n                description: description,\n                structured_formatting: {\n                  main_text: displayName || formattedAddress?.split(',')[0] || 'Unknown',\n                  secondary_text: formattedAddress || ''\n                }\n              };\n            });\n            \n            console.log('üéØ Google Places API suggestions:', suggestions);\n            setSuggestions(suggestions);\n            setLoading(false);\n            return;\n          } else {\n            console.log('‚ö†Ô∏è Google Places API returned no results');\n          }\n        } else {\n          const errorText = await response.text();\n          console.log('‚ùå Google Places API error:', response.status, errorText);\n        }\n      }\n      \n      // Fallback to OpenStreetMap if Google fails\n      console.log('üó∫Ô∏è Falling back to OpenStreetMap...');\n      await tryOpenStreetMapSearch();\n      \n    } catch (error) {\n      console.error('‚ùå Location search error:', error);\n      setSuggestions([]);\n    } finally {\n      setLoading(false);\n    }\n  }, []); // No dependencies needed for OpenStreetMap\n\n  // Debug function for testing in browser console\n  useEffect(() => {\n    if (typeof window !== 'undefined') {\n      (window as any).debugLocationSearch = async (query: string) => {\n        console.log('üß™ Debug location search for:', query);\n        await searchLocations(query);\n      };\n    }\n  }, [searchLocations]);\n\n  return {\n    suggestions,\n    loading,\n    searchLocations,\n    geocodeLocation\n  };\n}\n","// System configuration service for runtime configurable settings\nimport { supabase } from './supabase';\n\nexport interface SystemConfigValue {\n  key: string;\n  value: any;\n  description?: string;\n  category: string;\n  is_public: boolean;\n  created_at: string;\n  updated_at: string;\n}\n\nexport interface SystemConfigCache {\n  [key: string]: {\n    value: any;\n    timestamp: number;\n    ttl: number;\n  };\n}\n\nclass SystemConfigService {\n  private static instance: SystemConfigService;\n  private cache: SystemConfigCache = {};\n  private readonly CACHE_TTL = 5 * 60 * 1000; // 5 minutes\n\n  private constructor() {}\n\n  public static getInstance(): SystemConfigService {\n    if (!SystemConfigService.instance) {\n      SystemConfigService.instance = new SystemConfigService();\n    }\n    return SystemConfigService.instance;\n  }\n\n  private async fetchConfigValue(key: string): Promise<any> {\n    try {\n      const { data, error } = await supabase\n        .from('system_config')\n        .select('value')\n        .eq('key', key)\n        .single();\n\n      if (error) {\n        if (error.code === 'PGRST116') {\n          // No rows returned - config doesn't exist\n          console.warn(`Config key '${key}' not found in database`);\n          return null;\n        }\n        throw error;\n      }\n\n      return this.parseConfigValue(data.value);\n    } catch (error) {\n      console.log(`‚ö†Ô∏è system_config table not found or error fetching '${key}', using default`);\n      return null;\n    }\n  }\n\n  private parseConfigValue(value: any): any {\n    // Parse JSON strings back to their original types\n    if (typeof value === 'string') {\n      try {\n        // Try to parse as JSON first\n        const parsed = JSON.parse(value);\n        return parsed;\n      } catch {\n        // If parsing fails, keep as string\n        // Handle boolean strings\n        if (value === 'true') return true;\n        if (value === 'false') return false;\n        // Handle numeric strings\n        if (!isNaN(Number(value)) && value !== '') {\n          return Number(value);\n        }\n        return value;\n      }\n    }\n\n    return value;\n  }\n\n  // Get a configuration value with caching\n  async get<T = string>(key: string, defaultValue?: T): Promise<T> {\n    // Check cache first\n    const cached = this.cache[key];\n    if (cached && Date.now() - cached.timestamp < cached.ttl) {\n      return cached.value as T;\n    }\n\n    const value = await this.fetchConfigValue(key);\n\n    // Cache the result\n    this.cache[key] = {\n      value,\n      timestamp: Date.now(),\n      ttl: this.CACHE_TTL\n    };\n\n    return (value !== null ? value : defaultValue) as T;\n  }\n}\n\nexport const systemConfig = SystemConfigService.getInstance();\n","import React, { useState, useEffect, useRef } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport { Button } from './ui/button';\nimport { Card, CardContent, CardHeader, CardTitle } from './ui/card';\nimport { Progress } from './ui/progress';\nimport { Input } from './ui/input';\nimport { Textarea } from './ui/textarea';\nimport { Alert, AlertDescription } from './ui/alert';\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from './ui/select';\nimport { ArrowLeft, CheckCircle, Loader2, MapPin, Clock, Users, DollarSign, AlertCircle } from 'lucide-react';\nimport { useAppStore } from '../store/appStore';\nimport { SupabaseService } from '../lib/supabaseService';\nimport { useLocationSearch } from '../hooks/useLocationSearch';\nimport { useGeolocation } from '../hooks/useGeolocation';\nimport { systemConfig } from '../lib/systemConfig';\n\ninterface FormData {\n  sport: string;\n  title: string;\n  description: string;\n  date: string;\n  time: string;\n  duration: string;\n  location: string;\n  latitude: number | null;\n  longitude: number | null;\n  maxPlayers: string;\n  cost: string;\n  requirements: string;\n  skillLevel: string;\n  minEloRating: string;\n  maxEloRating: string;\n  minReputation: string;\n  competitiveMode: boolean;\n}\n\nconst sportOptions = [\n  { value: 'basketball', label: 'Basketball', icon: 'üèÄ' },\n  { value: 'soccer', label: 'Soccer', icon: '‚öΩ' },\n  { value: 'tennis', label: 'Tennis', icon: 'üéæ' },\n  { value: 'pickleball', label: 'Pickleball', icon: 'ü•í' },\n  { value: 'volleyball', label: 'Volleyball', icon: 'üèê' },\n  { value: 'football', label: 'Football', icon: 'üèà' },\n  { value: 'baseball', label: 'Baseball', icon: '‚öæ' },\n];\n\nconst steps = [\n  { id: 1, title: 'What & When', fields: ['sport', 'date', 'time', 'duration'] },\n  { id: 2, title: 'Where & Who', fields: ['location', 'maxPlayers', 'cost'] },\n  { id: 3, title: 'Review & Create', fields: [] },\n];\n\n// Quick times default values (will be loaded from system config)\nconst DEFAULT_QUICK_TIMES = [\n  '09:00', '12:00', '15:00', '17:00', '18:00', '19:00', '20:00', '21:00'\n];\n\nfunction CreateGame() {\n  const navigate = useNavigate();\n  const [currentStep, setCurrentStep] = useState(1);\n  const [isSubmitting, setIsSubmitting] = useState(false);\n  const [errors, setErrors] = useState<Record<string, string>>({});\n  const [submitError, setSubmitError] = useState<string | null>(null);\n  const [showLocationSuggestions, setShowLocationSuggestions] = useState(false);\n  const [quickTimes, setQuickTimes] = useState<string[]>(DEFAULT_QUICK_TIMES);\n  \n  // Location hooks\n  const { latitude: userLat, longitude: userLng, error: geoError } = useGeolocation();\n  const { searchLocations, loading: isLocationLoading, suggestions, geocodeLocation } = useLocationSearch();\n  const { user } = useAppStore();\n  const navigationRef = useRef<HTMLDivElement>(null);\n  const [navigationHeight, setNavigationHeight] = useState(0);\n\n  // Smart defaults\n  const getDefaultDate = () => {\n    const tomorrow = new Date();\n    tomorrow.setDate(tomorrow.getDate() + 1);\n    return tomorrow.toISOString().split('T')[0];\n  };\n  \n  const [formData, setFormData] = useState({\n    title: '',\n    sport: '',\n    date: getDefaultDate(), // Default to tomorrow\n    time: '',\n    duration: '60', // Will be updated from system config\n    location: '',\n    latitude: null as number | null,\n    longitude: null as number | null,\n    maxPlayers: '10', // Will be updated from system config\n    cost: 'FREE',\n    imageUrl: ''\n  });\n\n  // Load system configuration on component mount\n  useEffect(() => {\n    const loadSystemConfig = async () => {\n      try {\n        // Load quick time slots from system config\n        const timeSlots = await systemConfig.get<string[]>('quick_time_slots', [\n          '09:00', '12:00', '15:00', '17:00', '18:00', '19:00', '20:00', '21:00'\n        ]);\n        setQuickTimes(timeSlots || DEFAULT_QUICK_TIMES);\n\n        // Load default max players\n        const defaultMaxPlayers = await systemConfig.get<number>('max_players_per_game', 10);\n        \n        setFormData(prev => ({\n          ...prev,\n          maxPlayers: (defaultMaxPlayers || 10).toString()\n        }));\n      } catch (error) {\n        console.error('Error loading system config:', error);\n        // Ensure we have fallback values even if config loading fails\n        setQuickTimes(DEFAULT_QUICK_TIMES);\n        setFormData(prev => ({\n          ...prev,\n          maxPlayers: '10'\n        }));\n      }\n    };\n\n    loadSystemConfig();\n  }, []);\n\n  // Update sport-specific defaults when sport changes\n  useEffect(() => {\n    const updateSportDefaults = async () => {\n      if (formData.sport) {\n        try {\n          const defaultDuration = await systemConfig.get(\n            `sport_${formData.sport}_duration`, \n            60\n          );\n          \n          setFormData(prev => ({\n            ...prev,\n            duration: defaultDuration ? defaultDuration.toString() : '60'\n          }));\n        } catch (error) {\n          console.error('Error loading sport defaults:', error);\n        }\n      }\n    };\n\n    updateSportDefaults();\n  }, [formData.sport]);\n\n  // Sport-based defaults\n  const sportDefaults = {\n    basketball: { maxPlayers: 10 },\n    soccer: { maxPlayers: 22 },\n    football: { maxPlayers: 22 },\n    tennis: { maxPlayers: 4 },\n    volleyball: { maxPlayers: 12 },\n    baseball: { maxPlayers: 18 },\n    hockey: { maxPlayers: 12 },\n    badminton: { maxPlayers: 4 },\n    pickleball: { maxPlayers: 4 },\n    golf: { maxPlayers: 4 },\n    running: { maxPlayers: 20 },\n    cycling: { maxPlayers: 15 },\n    swimming: { maxPlayers: 8 },\n    yoga: { maxPlayers: 15 },\n    crossfit: { maxPlayers: 12 }\n  };\n\n  // Smart time suggestions based on current time and day\n  const getSmartTimes = () => {\n    const now = new Date();\n    const currentHour = now.getHours();\n    const isWeekend = now.getDay() === 0 || now.getDay() === 6;\n    \n    if (isWeekend) {\n      // Weekend: suggest morning and afternoon times\n      return ['09:00', '10:00', '11:00', '14:00', '15:00', '16:00', '17:00'];\n    } else {\n      // Weekday: suggest evening times after work\n      if (currentHour < 17) {\n        return ['17:00', '18:00', '19:00', '20:00', '21:00'];\n      } else {\n        return ['18:00', '19:00', '20:00', '21:00'];\n      }\n    }\n  };\n  \n  const popularTimes = getSmartTimes();\n\n  // Recent locations (stored in localStorage)\n  const [recentLocations, setRecentLocations] = useState<string[]>(() => {\n    try {\n      return JSON.parse(localStorage.getItem('recentGameLocations') || '[]');\n    } catch {\n      return [];\n    }\n  });\n\n  // Note: Removed auto-populate location to avoid interfering with user input\n  // Users can manually click the location button to use their current location\n  // This prevents the location field from being auto-filled and interfering with search suggestions\n\n  useEffect(() => {\n    if (!user) {\n      navigate('/auth');\n    }\n  }, [user, navigate]);\n\n  // Dynamic navigation height calculation\n  useEffect(() => {\n    const updateNavigationHeight = () => {\n      if (navigationRef.current) {\n        const height = navigationRef.current.offsetHeight;\n        setNavigationHeight(height);\n      }\n    };\n\n    updateNavigationHeight();\n    window.addEventListener('resize', updateNavigationHeight);\n    \n    return () => window.removeEventListener('resize', updateNavigationHeight);\n  }, [currentStep, isSubmitting]);\n\n  const generateGameTitle = (sport: string, time: string, location: string) => {\n    if (!sport || !time || !location) return '';\n    \n    const hour = parseInt(time.split(':')[0]);\n    let timeOfDay = 'Morning';\n    if (hour >= 12 && hour < 17) timeOfDay = 'Afternoon';\n    else if (hour >= 17) timeOfDay = 'Evening';\n    \n    // Smart location extraction - prioritize venue names over addresses\n    const extractSmartLocationName = (fullLocation: string): string => {\n      const parts = fullLocation.split(',').map(p => p.trim());\n      \n      // If the first part looks like a venue name (not a street address), use it\n      const firstPart = parts[0];\n      \n      // Check if first part starts with a number (likely a street address)\n      if (!/^\\d/.test(firstPart)) {\n        // First part doesn't start with a number, likely a venue name\n        return firstPart;\n      }\n      \n      // Common landmark/venue keywords that should be prioritized\n      const landmarkKeywords = [\n        'park', 'center', 'centre', 'court', 'field', 'stadium', 'gym', 'club', \n        'recreation', 'community', 'sports', 'athletic', 'fitness', 'plaza', \n        'square', 'beach', 'lake', 'river', 'trail', 'complex', 'facility',\n        'ymca', 'school', 'university', 'college', 'library', 'museum'\n      ];\n      \n      // Look for parts that contain landmark keywords\n      for (const part of parts) {\n        const lowerPart = part.toLowerCase();\n        if (landmarkKeywords.some(keyword => lowerPart.includes(keyword))) {\n          return part;\n        }\n      }\n      \n      // Look for parts that are likely business names (contain common business words)\n      const businessKeywords = [\n        'starbucks', 'mcdonalds', 'walmart', 'target', 'costco', 'whole foods',\n        'restaurant', 'cafe', 'coffee', 'hotel', 'mall', 'store', 'shop'\n      ];\n      \n      for (const part of parts) {\n        const lowerPart = part.toLowerCase();\n        if (businessKeywords.some(keyword => lowerPart.includes(keyword))) {\n          return part;\n        }\n      }\n      \n      // If it's a street address, clean it up\n      const cleanedPart = firstPart\n        .replace(/^\\d+\\s+/, '') // Remove leading numbers (street addresses)\n        .replace(/\\s+(st|street|ave|avenue|rd|road|blvd|boulevard|dr|drive|ln|lane|way|ct|court)$/i, '') // Remove street suffixes\n        .trim();\n      \n      return cleanedPart || firstPart;\n    };\n    \n    const locationName = extractSmartLocationName(location);\n    const sportName = sport.charAt(0).toUpperCase() + sport.slice(1);\n    \n    const templates = [\n      `${timeOfDay} ${sportName} at ${locationName}`,\n      `${sportName} Game - ${locationName}`,\n      `${timeOfDay} ${sportName} Session`,\n      `${locationName} ${sportName} Meetup`,\n      `${sportName} @ ${locationName}`,\n    ];\n    \n    return templates[Math.floor(Math.random() * templates.length)];\n  };\n\n  const checkForDuplicateGame = async (sport: string, date: string, time: string, location: string): Promise<string | null> => {\n    if (!sport || !date || !time || !location) return null;\n    \n    try {\n      const games = await SupabaseService.getGames();\n      const duplicates = games.filter(game => {\n        const sameDate = game.date === date;\n        const sameTime = Math.abs(new Date(`2000-01-01T${game.time}`).getTime() - new Date(`2000-01-01T${time}`).getTime()) < 3600000; // Within 1 hour\n        const sameSport = game.sport.toLowerCase() === sport.toLowerCase();\n        const sameLocation = game.location.toLowerCase().includes(location.toLowerCase()) || location.toLowerCase().includes(game.location.toLowerCase());\n        \n        return sameDate && sameTime && sameSport && sameLocation;\n      });\n      \n      if (duplicates.length > 0) {\n        return `Similar ${sport} game already exists at ${location} on ${date} around ${time}`;\n      }\n      \n      return null;\n    } catch (error) {\n      console.error('Error checking duplicates:', error);\n      return null;\n    }\n  };\n\n  const validateField = (name: string, value: string): string | null => {\n    switch (name) {\n      case 'date':\n        if (!value) return null;\n        const today = new Date();\n        const chosen = new Date(value + 'T00:00:00');\n        if (chosen < new Date(today.toDateString())) {\n          return 'Date cannot be in the past';\n        }\n        return null;\n        \n      case 'time':\n        if (!value) return null;\n        const hour = parseInt(value.split(':')[0]);\n        if (hour < 6 || hour > 23) {\n          return 'Unusual time - games typically happen 6 AM - 11 PM';\n        }\n        if (hour >= 2 && hour <= 5) {\n          return 'Did you mean PM instead of AM?';\n        }\n        return null;\n        \n      case 'maxPlayers':\n        if (!value) return null;\n        const num = parseInt(value);\n        if (num < 2) return 'Need at least 2 players';\n        if (num > 100) return 'That seems like a lot of players - double check?';\n        \n        // Smart capacity check based on sport\n        const sportLower = formData.sport?.toLowerCase();\n        if (sportLower === 'tennis' && num > 4) return 'Tennis usually has 2-4 players';\n        if (sportLower === 'basketball' && num > 10) return 'Basketball usually has 6-10 players';\n        if (sportLower === 'soccer' && num > 22) return 'Soccer usually has up to 22 players';\n        \n        return null;\n        \n      case 'location':\n        if (!value) return null;\n        if (value.length < 3) return 'Location too short';\n        if (value.toLowerCase().includes('ocean') || value.toLowerCase().includes('sea')) {\n          return 'Are you sure this location is correct?';\n        }\n        if (value.toLowerCase().includes('home') || value.toLowerCase().includes('house')) {\n          return 'Consider using a public venue for safety';\n        }\n        return null;\n        \n      case 'cost':\n        if (!value) return null;\n        const cost = parseFloat(value);\n        if (cost < 0) return 'Cost cannot be negative';\n        if (cost > 500) return 'That seems expensive - double check?';\n        return null;\n        \n      case 'duration':\n        if (!value) return null;\n        const duration = parseInt(value);\n        if (duration < 15) return 'Duration should be at least 15 minutes';\n        if (duration > 480) return 'Duration seems too long - max 8 hours';\n        if (duration > 240) return 'That\\'s a long game - are you sure?';\n        return null;\n        \n      default:\n        return null;\n    }\n  };\n\n  const handleInputChange = (name: string, value: string) => {\n    setFormData(prev => {\n      const newData = { ...prev, [name]: value };\n      \n      // Auto-generate title when sport, time, or location changes (only if title is empty or matches previous auto-generated title)\n      const currentAutoTitle = generateGameTitle(prev.sport, prev.time, prev.location);\n      const newAutoTitle = generateGameTitle(\n        name === 'sport' ? value : prev.sport,\n        name === 'time' ? value : prev.time,\n        name === 'location' ? value : prev.location\n      );\n      \n      if ((name === 'sport' || name === 'time' || name === 'location') && \n          (!prev.title || prev.title === currentAutoTitle) && newAutoTitle) {\n        newData.title = newAutoTitle;\n      }\n      \n      // Auto-set max players based on sport\n      if (name === 'sport' && sportDefaults[value.toLowerCase()]) {\n        const sportDefault = sportDefaults[value.toLowerCase()];\n        newData.maxPlayers = (sportDefault?.maxPlayers || 10).toString();\n      }\n      \n      // Save location to recent locations\n      if (name === 'location' && value.trim()) {\n        const updated = [value, ...recentLocations.filter(loc => loc !== value)].slice(0, 5);\n        setRecentLocations(updated);\n        localStorage.setItem('recentGameLocations', JSON.stringify(updated));\n      }\n      \n      return newData;\n    });\n    \n    // Real-time validation\n    const fieldError = validateField(name, value);\n    setErrors(prev => {\n      if (fieldError) {\n        return { ...prev, [name]: fieldError };\n      } else {\n        const { [name]: _removed, ...rest } = prev;\n        return rest;\n      }\n    });\n\n    // Check for duplicate games when all key fields are filled\n    if (name === 'location' && formData.sport && formData.date && formData.time && value) {\n      checkForDuplicateGame(formData.sport, formData.date, formData.time, value).then(duplicateError => {\n        if (duplicateError) {\n          setErrors(prev => ({ ...prev, duplicate: duplicateError }));\n        } else {\n          setErrors(prev => {\n            const { duplicate: _removed, ...rest } = prev;\n            return rest;\n          });\n        }\n      });\n    }\n    \n    // Note: Removed auto-advance to give users full control over form progression\n    // Users can manually click \"Next\" when ready to proceed\n  };\n  \n  const isStepComplete = (step: number): boolean => {\n    const stepFields = steps[step - 1]?.fields || [];\n    const isComplete = stepFields.every(field => {\n      const value = formData[field as keyof typeof formData];\n      return value != null && value.toString().trim() !== '';\n    });\n    \n    console.log('[CreateGame] isStepComplete - Step:', step, 'Fields:', stepFields, 'Complete:', isComplete, 'FormData:', formData);\n    return isComplete;\n  };\n\n  const validateCurrentStep = (): boolean => {\n    const stepErrors: Record<string, string> = {};\n    if (currentStep === 1) {\n      if (!formData.sport) stepErrors.sport = 'Please select a sport.';\n      if (!formData.date) stepErrors.date = 'Please choose a date.';\n      if (!formData.time) stepErrors.time = 'Please choose a time.';\n      if (!formData.duration) stepErrors.duration = 'Please set a duration.';\n      if (formData.date) {\n        const today = new Date();\n        const chosen = new Date(formData.date + 'T00:00:00');\n        if (chosen < new Date(today.toDateString())) {\n          stepErrors.date = 'Date cannot be in the past.';\n        }\n      }\n      if (formData.duration) {\n        const duration = parseInt(formData.duration);\n        if (duration < 15) stepErrors.duration = 'Duration should be at least 15 minutes.';\n        if (duration > 480) stepErrors.duration = 'Duration seems too long - max 8 hours.';\n      }\n    }\n    if (currentStep === 2) {\n      if (!formData.location.trim()) stepErrors.location = 'Location is required.';\n      const mp = parseInt(formData.maxPlayers, 10);\n      if (!formData.maxPlayers) stepErrors.maxPlayers = 'Max players is required.';\n      else if (Number.isNaN(mp) || mp <= 0) stepErrors.maxPlayers = 'Enter a valid number greater than 0.';\n      if (!formData.cost) stepErrors.cost = 'Please select a cost option.';\n    }\n    // Step 3 is now \"Review & Create\" - no validation needed\n    \n    console.log('[CreateGame] Validation - Step:', currentStep, 'Errors:', stepErrors, 'FormData:', formData);\n    setErrors(stepErrors);\n    return Object.keys(stepErrors).length === 0;\n  };\n\n  const handleNext = () => {\n    if (!validateCurrentStep()) return;\n    if (currentStep < steps.length) setCurrentStep(currentStep + 1);\n  };\n\n  const handleBack = () => {\n    if (currentStep > 1) {\n      setCurrentStep(currentStep - 1);\n    } else {\n      navigate(-1);\n    }\n  };\n\n  const handleSubmit = async () => {\n    if (!validateCurrentStep()) return;\n    setIsSubmitting(true);\n    setSubmitError(null);\n    try {\n      const { user } = useAppStore.getState();\n      console.log('[CreateGame] submit clicked. user =', user?.id);\n      if (!user) {\n        throw new Error('You must be logged in to create a game');\n      }\n\n      const gameData = {\n        title: formData.title,\n        sport: formData.sport,\n        date: formData.date,\n        time: formData.time,\n        duration: parseInt(formData.duration) || 60,\n        location: formData.location,\n        latitude: formData.latitude,\n        longitude: formData.longitude,\n        maxPlayers: parseInt(formData.maxPlayers) || 10,\n        cost: formData.cost || 'Free',\n        description: '', // Default empty description\n        imageUrl: formData.imageUrl\n        // Note: Removed skill-related fields as they don't exist in current database schema\n        // TODO: Add skill fields to database schema if needed\n      };\n      console.log('[CreateGame] creating game with data =', gameData);\n      await SupabaseService.createGame(gameData as any);\n      navigate('/');\n    } catch (error) {\n      console.error('Error creating game:', error);\n      setSubmitError(error instanceof Error ? error.message : 'Failed to create game');\n    } finally {\n      setIsSubmitting(false);\n    }\n  };\n\n  const progress = (currentStep / steps.length) * 100;\n  const selectedSport = sportOptions.find(sport => sport.value === formData.sport);\n\n  const renderField = (name: string, label: string, type: string = 'text', options?: Array<{ value: string; label: string; icon?: React.ReactNode }>) => {\n    const value = formData[name as keyof typeof formData] as string;\n    const error = errors[name];\n    const isValid = value && !error;\n\n    if (type === 'select') {\n      return (\n        <div className=\"space-y-2\">\n          <label className=\"text-sm font-medium text-foreground\">{label}</label>\n          <select \n            value={value} \n            onChange={(e) => handleInputChange(name, e.target.value)}\n            className={`w-full p-3 border rounded-lg transition-colors bg-background text-foreground ${\n              error ? 'border-destructive bg-destructive/10' : \n              isValid ? 'border-green-500 bg-green-50 dark:bg-green-950/50 dark:border-green-400' : \n              'border-input hover:border-ring focus:border-ring focus:ring-2 focus:ring-ring/20'\n            }`}\n          >\n            <option value=\"\" className=\"bg-background text-foreground\">Select {label.toLowerCase()}</option>\n            {options?.map((option) => (\n              <option key={option.value} value={option.value} className=\"bg-background text-foreground\">\n                {option.label}\n              </option>\n            ))}\n          </select>\n          {error && <p className=\"text-sm text-destructive flex items-center gap-1\">\n            <span>‚ö†Ô∏è</span> {error}\n          </p>}\n          {isValid && !error && <p className=\"text-sm text-green-600 dark:text-green-400 flex items-center gap-1\">\n            <span>‚úÖ</span> Looks good!\n          </p>}\n        </div>\n      );\n    } else if (type === 'textarea') {\n      return (\n        <div className=\"space-y-2\">\n          <label className=\"text-sm font-medium flex items-center gap-2\">\n            {label}\n            {steps[currentStep - 1].fields.includes(name) && (\n              <span className=\"text-destructive\">*</span>\n            )}\n          </label>\n          <Textarea\n            value={value}\n            onChange={(e) => handleInputChange(name, e.target.value)}\n            placeholder={`Enter ${label.toLowerCase()}`}\n            className={`resize-none ${error ? 'border-destructive' : ''}`}\n            rows={3}\n          />\n          {error && (\n            <p className=\"text-sm text-destructive\">{error}</p>\n          )}\n        </div>\n      );\n    } else {\n      return (\n        <div className=\"space-y-2\">\n          <label className=\"text-sm font-medium flex items-center gap-2\">\n            {label}\n            {steps[currentStep - 1].fields.includes(name) && (\n              <span className=\"text-destructive\">*</span>\n            )}\n          </label>\n          <Input\n            type={type}\n            value={formData[name]}\n            onChange={(e) => handleInputChange(name, e.target.value)}\n            placeholder={`Enter ${label.toLowerCase()}`}\n            min={type === 'date' ? new Date().toISOString().split('T')[0] : undefined}\n            className={`transition-colors ${\n              error ? 'border-red-500 bg-red-50' : \n              isValid ? 'border-green-500 bg-green-50' : \n              'border-gray-300'\n            }`}\n          />\n          {error && <p className=\"text-sm text-red-500 dark:text-red-400 flex items-center gap-1\">\n            <span>‚ö†Ô∏è</span> {error}\n          </p>}\n          {isValid && !error && <p className=\"text-sm text-green-600 dark:text-green-400 flex items-center gap-1\">\n            <span>‚úÖ</span> Looks good!\n          </p>}\n        </div>\n      );\n    }\n  };\n\n  return (\n    <div className=\"min-h-screen bg-background\" style={{ paddingBottom: `${navigationHeight + 16}px` }}>\n      <div className=\"max-w-2xl mx-auto px-4 py-6\">\n        {/* Header */}\n        <div className=\"sticky top-0 bg-background/95 backdrop-blur-sm border-b border-border z-10\">\n          <div className=\"flex items-center justify-between px-4 py-4\">\n            <div className=\"flex items-center gap-4\">\n              <Button variant=\"ghost\" size=\"icon\" onClick={handleBack}>\n                <ArrowLeft className=\"w-5 h-5\" />\n              </Button>\n              <div>\n                <h1 className=\"text-xl font-semibold\">Create Game</h1>\n                <p className=\"text-sm text-muted-foreground\">\n                  {steps[currentStep - 1].title}\n                </p>\n              </div>\n            </div>\n          </div>\n        </div>\n\n        {/* Progress Bar */}\n        <div className=\"px-4 pb-4\">\n          <Progress value={progress} className=\"h-2\" />\n        </div>\n      </div>\n\n      <div className=\"px-4 pt-6\" style={{ paddingBottom: `${navigationHeight + 16}px` }}>\n        {/* Selected Sport Preview */}\n        {selectedSport && (\n          <div className=\"mb-6\">\n            <Card>\n              <CardContent className=\"pt-6\">\n                <div className=\"flex items-center gap-4\">\n                  <div className=\"w-12 h-12 bg-primary/10 rounded-lg flex items-center justify-center text-2xl\">\n                    {selectedSport.icon}\n                  </div>\n                  <div>\n                    <h3 className=\"font-semibold\">{formData.title || 'New Game'}</h3>\n                    <p className=\"text-sm text-muted-foreground\">{selectedSport.label}</p>\n                  </div>\n                </div>\n              </CardContent>\n            </Card>\n          </div>\n        )}\n\n        {/* Form Steps */}\n        {currentStep === 1 && (\n          <div className=\"space-y-6\">\n            <Card>\n              <CardHeader>\n                <CardTitle className=\"flex items-center gap-2\">\n                  <div className=\"w-8 h-8 bg-primary/10 rounded-full flex items-center justify-center text-primary font-semibold text-sm\">\n                    1\n                  </div>\n                  What & When\n                </CardTitle>\n              </CardHeader>\n              <CardContent className=\"space-y-6\">\n                {/* Sport Selection */}\n                <div className=\"space-y-2\">\n                  <label className=\"block text-sm font-medium text-foreground\">\n                    Sport\n                  </label>\n                  <div className=\"grid grid-cols-3 sm:grid-cols-4 gap-2\">\n                    {sportOptions.map((sport) => (\n                      <button\n                        key={sport.value}\n                        type=\"button\"\n                        onClick={() => handleInputChange('sport', sport.value)}\n                        className={`p-2 rounded-lg border-2 transition-all duration-200 ${\n                          formData.sport === sport.value\n                            ? 'border-primary bg-primary/10 text-primary'\n                            : 'border-input hover:border-ring text-foreground bg-background'\n                        }`}\n                      >\n                        <div className=\"text-lg mb-1\">{sport.icon}</div>\n                        <div className=\"text-xs font-medium\">{sport.label}</div>\n                      </button>\n                    ))}\n                  </div>\n                  {errors.sport && (\n                    <p className=\"text-sm text-destructive\">{errors.sport}</p>\n                  )}\n                </div>\n\n                {renderField('date', 'Date', 'date')}\n                \n                {/* Quick Time Selection */}\n                <div className=\"space-y-3\">\n                  <label className=\"block text-sm font-medium text-foreground\">\n                    Time\n                  </label>\n                  \n                  {/* Quick Time Buttons */}\n                  <div className=\"grid grid-cols-4 gap-2\">\n                    {(quickTimes || DEFAULT_QUICK_TIMES).map((timeOption) => (\n                      <button\n                        key={timeOption}\n                        type=\"button\"\n                        onClick={() => handleInputChange('time', timeOption)}\n                        className={`px-2 py-2 text-xs rounded-md border transition-colors ${\n                          formData.time === timeOption\n                            ? 'bg-primary text-primary-foreground border-primary'\n                            : 'bg-background text-foreground border-input hover:bg-muted hover:border-ring'\n                        }`}\n                      >\n                        {/* Convert 24-hour to 12-hour for display */}\n                        {new Date(`2000-01-01T${timeOption}:00`).toLocaleTimeString('en-US', {\n                          hour: 'numeric',\n                          minute: '2-digit',\n                          hour12: true\n                        })}\n                      </button>\n                    ))}\n                  </div>\n                  \n                  {/* Custom Time Input */}\n                  <div className=\"space-y-1\">\n                    <label className=\"text-xs text-muted-foreground\">Or enter custom time:</label>\n                    <Input\n                      type=\"time\"\n                      value={formData.time}\n                      onChange={(e) => handleInputChange('time', e.target.value)}\n                      className={errors.time ? 'border-destructive' : ''}\n                      placeholder=\"Select time\"\n                    />\n                  </div>\n                  \n                  {errors.time && (\n                    <p className=\"text-sm text-destructive\">{errors.time}</p>\n                  )}\n                </div>\n\n                {/* Duration Selection */}\n                <div className=\"space-y-3\">\n                  <label className=\"block text-sm font-medium text-foreground\">\n                    Duration <span className=\"text-destructive\">*</span>\n                  </label>\n                  \n                  {/* Quick Duration Buttons */}\n                  <div className=\"grid grid-cols-4 gap-2\">\n                    {['30', '60', '90', '120'].map((durationOption) => (\n                      <button\n                        key={durationOption}\n                        type=\"button\"\n                        onClick={() => handleInputChange('duration', durationOption)}\n                        className={`px-2 py-2 text-xs rounded-md border transition-colors ${\n                          formData.duration === durationOption\n                            ? 'bg-primary text-primary-foreground border-primary'\n                            : 'bg-background text-foreground border-input hover:bg-muted hover:border-ring'\n                        }`}\n                      >\n                        {durationOption} min\n                      </button>\n                    ))}\n                  </div>\n                  \n                  {/* Custom Duration Input */}\n                  <div className=\"space-y-1\">\n                    <label className=\"text-xs text-muted-foreground\">Or enter custom duration (minutes):</label>\n                    <Input\n                      type=\"number\"\n                      value={formData.duration}\n                      onChange={(e) => handleInputChange('duration', e.target.value)}\n                      className={errors.duration ? 'border-destructive' : ''}\n                      placeholder=\"Duration in minutes\"\n                      min=\"15\"\n                      max=\"480\"\n                    />\n                  </div>\n                  \n                  {errors.duration && (\n                    <p className=\"text-sm text-destructive\">{errors.duration}</p>\n                  )}\n                </div>\n              </CardContent>\n            </Card>\n          </div>\n        )}\n\n        {currentStep === 2 && (\n          <div className=\"space-y-6\">\n            <Card>\n              <CardHeader>\n                <CardTitle className=\"flex items-center gap-2\">\n                  <div className=\"w-8 h-8 bg-primary/10 rounded-full flex items-center justify-center text-primary font-semibold text-sm\">\n                    2\n                  </div>\n                  Where & Who\n                </CardTitle>\n              </CardHeader>\n              <CardContent className=\"space-y-6\">\n                {/* Location Input Field */}\n                <div className=\"space-y-2\">\n                  <label className=\"block text-sm font-medium text-foreground\">\n                    Location\n                  </label>\n                  <div className=\"relative\">\n                    <Input\n                      value={formData.location}\n                      onChange={(e) => {\n                        handleInputChange('location', e.target.value);\n                        console.log('Location input changed:', e.target.value);\n                        if (e.target.value.length > 2) {\n                          console.log('Triggering location search for:', e.target.value);\n                          searchLocations(e.target.value, userLat || undefined, userLng || undefined);\n                          setShowLocationSuggestions(true);\n                        } else {\n                          console.log('Hiding location suggestions');\n                          setShowLocationSuggestions(false);\n                        }\n                      }}\n                      placeholder=\"Enter location or address\"\n                      className={errors.location ? 'border-destructive' : ''}\n                    />\n                    <div className=\"absolute right-3 top-1/2 transform -translate-y-1/2 flex gap-2\">\n                      {isLocationLoading && <Loader2 className=\"w-4 h-4 animate-spin text-muted-foreground\" />}\n                      <Button\n                        type=\"button\"\n                        variant=\"ghost\"\n                        size=\"sm\"\n                        className=\"h-6 w-6 p-0\"\n                        onClick={async () => {\n                          if (userLat && userLng) {\n                            try {\n                              const response = await fetch(\n                                `https://nominatim.openstreetmap.org/reverse?format=json&lat=${userLat}&lon=${userLng}`\n                              );\n                              const data = await response.json();\n                              const address = data.display_name || `${userLat.toFixed(4)}, ${userLng.toFixed(4)}`;\n                              setFormData(prev => ({\n                                ...prev,\n                                location: address,\n                                latitude: userLat,\n                                longitude: userLng\n                              }));\n                            } catch (error) {\n                              console.error('Reverse geocoding failed:', error);\n                              setFormData(prev => ({\n                                ...prev,\n                                location: `${userLat.toFixed(4)}, ${userLng.toFixed(4)}`,\n                                latitude: userLat,\n                                longitude: userLng\n                              }));\n                            }\n                          }\n                        }}\n                        disabled={!userLat || !userLng}\n                        title={userLat && userLng ? \"Use my current location\" : geoError || \"Location not available\"}\n                      >\n                        <MapPin className=\"w-4 h-4\" />\n                      </Button>\n                    </div>\n                  </div>\n                  \n                  {/* Location Suggestions */}\n                  {showLocationSuggestions && (\n                    <div className=\"border border-border rounded-md bg-background shadow-lg max-h-48 overflow-y-auto\">\n                      {suggestions.length > 0 ? (\n                        suggestions.map((suggestion) => (\n                          <button\n                            key={suggestion.place_id}\n                            type=\"button\"\n                            className=\"w-full text-left px-3 py-2 hover:bg-muted border-b border-border last:border-b-0 flex items-center gap-2\"\n                            onClick={async () => {\n                              setFormData(prev => {\n                                // Generate auto title when location is selected\n                                const newTitle = prev.sport && prev.time ? \n                                  generateGameTitle(prev.sport, prev.time, suggestion.description) : \n                                  prev.title;\n                                \n                                return { \n                                  ...prev, \n                                  location: suggestion.description,\n                                  title: newTitle || prev.title\n                                };\n                              });\n                              setShowLocationSuggestions(false);\n                              \n                              const coords = await geocodeLocation(suggestion.description);\n                              if (coords) {\n                                setFormData(prev => ({\n                                  ...prev,\n                                  latitude: coords.lat,\n                                  longitude: coords.lng\n                                }));\n                              }\n                            }}\n                          >\n                            <MapPin className=\"w-4 h-4 text-muted-foreground flex-shrink-0\" />\n                            <div>\n                              <div className=\"font-medium\">{suggestion.structured_formatting.main_text}</div>\n                              <div className=\"text-sm text-muted-foreground\">{suggestion.structured_formatting.secondary_text}</div>\n                            </div>\n                          </button>\n                        ))\n                      ) : (\n                        <div className=\"px-3 py-2 text-sm text-muted-foreground\">\n                          {isLocationLoading ? 'Searching...' : 'No suggestions found. Try typing a more specific location.'}\n                        </div>\n                      )}\n                    </div>\n                  )}\n                  \n                  {errors.location && (\n                    <p className=\"text-sm text-destructive\">{errors.location}</p>\n                  )}\n                </div>\n\n                {renderField('maxPlayers', 'Max Players', 'number')}\n                \n                {/* Cost Selection */}\n                <div className=\"space-y-2\">\n                  <label className=\"text-sm font-medium text-foreground\">\n                    Cost <span className=\"text-destructive\">*</span>\n                  </label>\n                  <Select value={formData.cost} onValueChange={(value) => handleInputChange('cost', value)}>\n                    <SelectTrigger className={errors.cost ? 'border-destructive' : ''}>\n                      <SelectValue placeholder=\"Select cost\" />\n                    </SelectTrigger>\n                    <SelectContent>\n                      <SelectItem value=\"FREE\">Free</SelectItem>\n                      <SelectItem value=\"$5\">$5 per person</SelectItem>\n                      <SelectItem value=\"$10\">$10 per person</SelectItem>\n                      <SelectItem value=\"$15\">$15 per person</SelectItem>\n                      <SelectItem value=\"$20\">$20 per person</SelectItem>\n                      <SelectItem value=\"custom\">Custom amount</SelectItem>\n                    </SelectContent>\n                  </Select>\n                  {errors.cost && (\n                    <p className=\"text-sm text-destructive flex items-center gap-1\">\n                      <span>‚ö†Ô∏è</span> {errors.cost}\n                    </p>\n                  )}\n                  {formData.cost && !errors.cost && (\n                    <p className=\"text-sm text-green-600 dark:text-green-400 flex items-center gap-1\">\n                      <span>‚úÖ</span> Looks good!\n                    </p>\n                  )}\n                </div>\n              </CardContent>\n            </Card>\n          </div>\n        )}\n\n        {currentStep === 3 && (\n          <div className=\"space-y-6\">\n            <Card>\n              <CardHeader>\n                <CardTitle className=\"flex items-center gap-2\">\n                  <div className=\"w-8 h-8 bg-primary/10 rounded-full flex items-center justify-center text-primary font-semibold text-sm\">\n                    3\n                  </div>\n                  Review & Create\n                </CardTitle>\n              </CardHeader>\n              <CardContent className=\"space-y-6\">\n                {/* Game Summary */}\n                <div className=\"space-y-4\">\n                  <h3 className=\"text-lg font-semibold\">Game Summary</h3>\n                  \n                  <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n                    <div className=\"space-y-2\">\n                      <div className=\"flex items-center gap-2\">\n                        <span className=\"text-sm font-medium text-muted-foreground\">Sport:</span>\n                        <span className=\"text-sm\">{selectedSport?.icon} {selectedSport?.label}</span>\n                      </div>\n                      <div className=\"flex items-center gap-2\">\n                        <span className=\"text-sm font-medium text-muted-foreground\">Date:</span>\n                        <span className=\"text-sm\">{formData.date}</span>\n                      </div>\n                      <div className=\"flex items-center gap-2\">\n                        <span className=\"text-sm font-medium text-muted-foreground\">Time:</span>\n                        <span className=\"text-sm\">\n                          {formData.time ? new Date(`2000-01-01T${formData.time}:00`).toLocaleTimeString('en-US', {\n                            hour: 'numeric',\n                            minute: '2-digit',\n                            hour12: true\n                          }) : ''}\n                        </span>\n                      </div>\n                      <div className=\"flex items-center gap-2\">\n                        <span className=\"text-sm font-medium text-muted-foreground\">Duration:</span>\n                        <span className=\"text-sm\">{formData.duration} minutes</span>\n                      </div>\n                      {/* Skill level removed - not stored in database */}\n                    </div>\n                    \n                    <div className=\"space-y-2\">\n                      <div className=\"flex items-center gap-2\">\n                        <span className=\"text-sm font-medium text-muted-foreground\">Location:</span>\n                        <span className=\"text-sm\">{formData.location}</span>\n                      </div>\n                      <div className=\"flex items-center gap-2\">\n                        <span className=\"text-sm font-medium text-muted-foreground\">Max Players:</span>\n                        <span className=\"text-sm\">{formData.maxPlayers}</span>\n                      </div>\n                      <div className=\"flex items-center gap-2\">\n                        <span className=\"text-sm font-medium text-muted-foreground\">Cost:</span>\n                        <span className=\"text-sm\">{formData.cost}</span>\n                      </div>\n                      {/* Min reputation removed - not stored in database */}\n                    </div>\n                  </div>\n\n                  {/* ELO Requirements removed - not stored in database */}\n                </div>\n\n                {/* Ready to Create Alert */}\n                <Alert>\n                  <CheckCircle className=\"h-4 w-4\" />\n                  <AlertDescription>\n                    Ready to create \"{formData.title}\" for {formData.maxPlayers} players \n                    on {formData.date} at {formData.time ? new Date(`2000-01-01T${formData.time}:00`).toLocaleTimeString('en-US', {\n                      hour: 'numeric',\n                      minute: '2-digit',\n                      hour12: true\n                    }) : ''}?\n                  </AlertDescription>\n                </Alert>\n                \n                {errors.duplicate && (\n                  <div className=\"mt-2\">\n                    <p className=\"text-sm text-yellow-700 mt-1\">{errors.duplicate}</p>\n                    <p className=\"text-xs text-yellow-600 mt-2\">You can still create this game if it's intentional.</p>\n                  </div>\n                )}\n              </CardContent>\n            </Card>\n          </div>\n        )}\n        \n        {/* Submit Error Display */}\n        {submitError && (\n          <div className=\"mt-4\">\n            <Alert variant=\"destructive\">\n              <AlertDescription>{submitError}</AlertDescription>\n            </Alert>\n          </div>\n        )}\n      </div>\n\n      {/* Mobile Navigation */}\n      <div ref={navigationRef} className=\"fixed bottom-0 left-0 right-0 bg-background/95 backdrop-blur-sm border-t border-border safe-area-inset-bottom z-50\">\n        <div className=\"px-4 py-3 pb-safe\">\n          {/* Step Indicator for Mobile */}\n          <div className=\"flex justify-center mb-3 sm:hidden\">\n            <div className=\"flex items-center gap-2\">\n              {steps.map((step, index) => (\n                <div key={step.id} className=\"flex items-center\">\n                  <div className={`w-6 h-6 rounded-full flex items-center justify-center text-xs font-medium transition-colors ${\n                    currentStep === step.id \n                      ? 'bg-primary text-primary-foreground' \n                      : currentStep > step.id \n                        ? 'bg-green-500 text-white' \n                        : 'bg-muted text-muted-foreground'\n                  }`}>\n                    {currentStep > step.id ? '‚úì' : step.id}\n                  </div>\n                  {index < steps.length - 1 && (\n                    <div className={`w-8 h-0.5 mx-1 ${\n                      currentStep > step.id ? 'bg-green-500' : 'bg-muted'\n                    }`} />\n                  )}\n                </div>\n              ))}\n            </div>\n          </div>\n          \n          {/* Navigation Buttons */}\n          <div className=\"flex justify-between items-center gap-3\">\n            {currentStep > 1 ? (\n              <Button \n                variant=\"outline\" \n                onClick={handleBack}\n                className=\"min-h-[48px] px-4 sm:px-6 flex-1 max-w-[120px] touch-manipulation text-sm sm:text-base\"\n                size=\"lg\"\n              >\n                <ArrowLeft className=\"w-4 h-4 mr-1 sm:mr-2\" />\n                <span className=\"hidden sm:inline\">Previous</span>\n                <span className=\"sm:hidden\">Back</span>\n              </Button>\n            ) : (\n              <Button \n                variant=\"ghost\" \n                onClick={() => navigate(-1)}\n                className=\"min-h-[48px] px-4 touch-manipulation text-sm sm:text-base\"\n                size=\"lg\"\n              >\n                Cancel\n              </Button>\n            )}\n            \n            {/* Progress indicator for larger screens */}\n            <div className=\"hidden sm:flex items-center gap-2 text-sm text-muted-foreground\">\n              Step {currentStep} of {steps.length}\n            </div>\n            \n            {currentStep < steps.length ? (\n              <Button \n                onClick={handleNext}\n                disabled={!isStepComplete(currentStep) || Object.keys(errors).some(key => key !== 'duplicate')}\n                className=\"min-h-[48px] px-4 sm:px-6 flex-1 max-w-[120px] touch-manipulation text-sm sm:text-base\"\n                size=\"lg\"\n              >\n                <span className=\"hidden sm:inline\">Continue</span>\n                <span className=\"sm:hidden\">Next</span>\n                <ArrowLeft className=\"w-4 h-4 ml-1 sm:ml-2 rotate-180\" />\n              </Button>\n            ) : (\n              <Button \n                onClick={handleSubmit}\n                disabled={!isStepComplete(currentStep) || Object.keys(errors).some(key => key !== 'duplicate') || isSubmitting}\n                className=\"min-h-[48px] px-4 sm:px-6 flex-1 max-w-[140px] touch-manipulation text-sm sm:text-base\"\n                size=\"lg\"\n              >\n                {isSubmitting ? (\n                  <>\n                    <Loader2 className=\"w-4 h-4 mr-1 sm:mr-2 animate-spin\" />\n                    <span className=\"hidden sm:inline\">Creating...</span>\n                    <span className=\"sm:hidden\">Wait...</span>\n                  </>\n                ) : (\n                  <>\n                    <CheckCircle className=\"w-4 h-4 mr-1 sm:mr-2\" />\n                    <span className=\"hidden sm:inline\">Create Game</span>\n                    <span className=\"sm:hidden\">Create</span>\n                  </>\n                )}\n              </Button>\n            )}\n          </div>\n          \n          {/* Validation Status for Mobile */}\n          {!isStepComplete(currentStep) && (\n            <div className=\"mt-2 text-center\">\n              <p className=\"text-xs text-muted-foreground\">\n                Complete required fields to continue\n              </p>\n            </div>\n          )}\n          \n          {/* Debug Info - Remove in production */}\n          {process.env.NODE_ENV === 'development' && (\n            <div className=\"mt-2 text-xs text-muted-foreground text-center\">\n              Debug: Step {currentStep} complete: {isStepComplete(currentStep) ? 'Yes' : 'No'} | \n              Errors: {Object.keys(errors).filter(key => key !== 'duplicate').length} | \n              Submitting: {isSubmitting ? 'Yes' : 'No'}\n            </div>\n          )}\n        </div>\n      </div>\n    </div>\n  );\n}\n\nexport default CreateGame;","import { useState, useEffect } from 'react';\n\ninterface GeolocationState {\n  latitude: number | null;\n  longitude: number | null;\n  error: string | null;\n  loading: boolean;\n}\n\ninterface GeolocationOptions {\n  enableHighAccuracy?: boolean;\n  timeout?: number;\n  maximumAge?: number;\n}\n\nexport function useGeolocation(options: GeolocationOptions = {}) {\n  const [state, setState] = useState<GeolocationState>({\n    latitude: null,\n    longitude: null,\n    error: null,\n    loading: true,\n  });\n\n  useEffect(() => {\n    console.log('useGeolocation hook initializing...');\n    \n    if (!navigator.geolocation) {\n      console.log('Geolocation not supported');\n      setState(prev => ({\n        ...prev,\n        error: 'Geolocation is not supported by this browser',\n        loading: false,\n      }));\n      return;\n    }\n\n    const handleSuccess = (position: GeolocationPosition) => {\n      console.log('GPS location obtained:', position.coords.latitude, position.coords.longitude);\n      setState({\n        latitude: position.coords.latitude,\n        longitude: position.coords.longitude,\n        error: null,\n        loading: false,\n      });\n    };\n\n    const handleError = (error: GeolocationPositionError) => {\n      let errorMessage = 'Unable to retrieve location';\n      \n      switch (error.code) {\n        case error.PERMISSION_DENIED:\n          errorMessage = 'Location access denied by user';\n          break;\n        case error.POSITION_UNAVAILABLE:\n          errorMessage = 'Location information unavailable';\n          break;\n        case error.TIMEOUT:\n          errorMessage = 'Location request timed out';\n          break;\n      }\n\n      console.log('GPS error:', errorMessage, error);\n      setState(prev => ({\n        ...prev,\n        error: errorMessage,\n        loading: false,\n      }));\n    };\n\n    const geoOptions: PositionOptions = {\n      enableHighAccuracy: options.enableHighAccuracy ?? true,\n      timeout: options.timeout ?? 10000,\n      maximumAge: options.maximumAge ?? 300000, // 5 minutes\n    };\n\n    console.log('Requesting GPS permission with options:', geoOptions);\n    navigator.geolocation.getCurrentPosition(handleSuccess, handleError, geoOptions);\n  }, [options.enableHighAccuracy, options.timeout, options.maximumAge]);\n\n  return state;\n}\n\n// Utility function to calculate distance between two coordinates\nexport function calculateDistance(\n  lat1: number,\n  lon1: number,\n  lat2: number,\n  lon2: number\n): number {\n  const R = 3959; // Earth's radius in miles\n  const dLat = (lat2 - lat1) * (Math.PI / 180);\n  const dLon = (lon2 - lon1) * (Math.PI / 180);\n  const a =\n    Math.sin(dLat / 2) * Math.sin(dLat / 2) +\n    Math.cos(lat1 * (Math.PI / 180)) *\n      Math.cos(lat2 * (Math.PI / 180)) *\n      Math.sin(dLon / 2) *\n      Math.sin(dLon / 2);\n  const c = 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1 - a));\n  return R * c;\n}\n\n// Format distance for display\nexport function formatDistance(miles: number): string {\n  if (miles < 0.1) return 'Less than 0.1 mi';\n  if (miles < 1) return `${(miles * 5280).toFixed(0)} ft`;\n  return `${miles.toFixed(1)} mi`;\n}\n"],"names":["useLocationSearch","suggestions","setSuggestions","useState","loading","setLoading","googleMapsLoaded","setGoogleMapsLoaded","GOOGLE_API_KEY","useEffect","geocodeLocation","useCallback","async","address","response","fetch","encodeURIComponent","ok","data","json","results","length","location","geometry","lat","lng","headers","Error","parseFloat","lon","error","searchLocations","query","userLat","userLng","trim","requestBody","textQuery","maxResultCount","locationBias","circle","center","latitude","longitude","radius","method","body","JSON","stringify","places","map","place","index","displayName","text","formattedAddress","description","place_id","id","structured_formatting","main_text","split","secondary_text","searchUrl","display_name","name","slice","join","tryOpenStreetMapSearch","window","debugLocationSearch","SystemConfigService","static","cache","CACHE_TTL","constructor","getInstance","instance","fetchConfigValue","key","supabase","from","select","eq","single","code","this","parseConfigValue","value","parse","isNaN","Number","get","defaultValue","cached","Date","now","timestamp","ttl","systemConfig","sportOptions","label","icon","steps","title","fields","DEFAULT_QUICK_TIMES","CreateGame","navigate","useNavigate","currentStep","setCurrentStep","isSubmitting","setIsSubmitting","errors","setErrors","submitError","setSubmitError","showLocationSuggestions","setShowLocationSuggestions","quickTimes","setQuickTimes","geoError","options","state","setState","navigator","geolocation","prev","geoOptions","enableHighAccuracy","timeout","maximumAge","getCurrentPosition","position","coords","errorMessage","PERMISSION_DENIED","POSITION_UNAVAILABLE","TIMEOUT","useGeolocation","isLocationLoading","user","useAppStore","navigationRef","useRef","navigationHeight","setNavigationHeight","formData","setFormData","sport","date","tomorrow","setDate","getDate","toISOString","getDefaultDate","time","duration","maxPlayers","cost","imageUrl","timeSlots","defaultMaxPlayers","toString","loadSystemConfig","defaultDuration","updateSportDefaults","sportDefaults","basketball","soccer","football","tennis","volleyball","baseball","hockey","badminton","pickleball","golf","running","cycling","swimming","yoga","crossfit","currentHour","getHours","getDay","getSmartTimes","recentLocations","setRecentLocations","localStorage","getItem","updateNavigationHeight","current","height","offsetHeight","addEventListener","removeEventListener","generateGameTitle","hour","parseInt","timeOfDay","locationName","fullLocation","parts","p","firstPart","test","landmarkKeywords","part","lowerPart","toLowerCase","some","keyword","includes","businessKeywords","replace","extractSmartLocationName","sportName","charAt","toUpperCase","templates","Math","floor","random","handleInputChange","newData","currentAutoTitle","newAutoTitle","sportDefault","updated","filter","loc","setItem","fieldError","today","toDateString","num","sportLower","validateField","_removed","rest","SupabaseService","getGames","game","sameDate","sameTime","abs","getTime","sameSport","sameLocation","checkForDuplicateGame","then","duplicateError","duplicate","isStepComplete","step","every","field","validateCurrentStep","stepErrors","mp","Object","keys","handleBack","progress","selectedSport","find","renderField","type","isValid","jsxs","className","children","onChange","e","target","option","jsx","Textarea","placeholder","rows","Input","min","style","paddingBottom","Button","variant","size","onClick","ArrowLeft","Progress","Card","CardContent","CardHeader","CardTitle","timeOption","toLocaleTimeString","minute","hour12","durationOption","max","Loader2","toFixed","disabled","MapPin","suggestion","newTitle","Select","onValueChange","SelectTrigger","SelectValue","SelectContent","SelectItem","Alert","CheckCircle","AlertDescription","ref","getState","gameData","createGame","message","Fragment"],"mappings":"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"}