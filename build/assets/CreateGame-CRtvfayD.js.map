{"version":3,"file":"CreateGame-CRtvfayD.js","sources":["../../src/hooks/useGeolocation.ts","../../src/hooks/useLocationSearch.ts","../../src/components/CreateGame.tsx"],"sourcesContent":["import { useState, useEffect } from 'react';\n\ninterface GeolocationState {\n  latitude: number | null;\n  longitude: number | null;\n  error: string | null;\n  loading: boolean;\n}\n\ninterface GeolocationOptions {\n  enableHighAccuracy?: boolean;\n  timeout?: number;\n  maximumAge?: number;\n}\n\nexport function useGeolocation(options: GeolocationOptions = {}) {\n  const [state, setState] = useState<GeolocationState>({\n    latitude: null,\n    longitude: null,\n    error: null,\n    loading: true,\n  });\n\n  useEffect(() => {\n    console.log('useGeolocation hook initializing...');\n    \n    if (!navigator.geolocation) {\n      console.log('Geolocation not supported');\n      setState(prev => ({\n        ...prev,\n        error: 'Geolocation is not supported by this browser',\n        loading: false,\n      }));\n      return;\n    }\n\n    const handleSuccess = (position: GeolocationPosition) => {\n      console.log('GPS location obtained:', position.coords.latitude, position.coords.longitude);\n      setState({\n        latitude: position.coords.latitude,\n        longitude: position.coords.longitude,\n        error: null,\n        loading: false,\n      });\n    };\n\n    const handleError = (error: GeolocationPositionError) => {\n      let errorMessage = 'Unable to retrieve location';\n      \n      switch (error.code) {\n        case error.PERMISSION_DENIED:\n          errorMessage = 'Location access denied by user';\n          break;\n        case error.POSITION_UNAVAILABLE:\n          errorMessage = 'Location information unavailable';\n          break;\n        case error.TIMEOUT:\n          errorMessage = 'Location request timed out';\n          break;\n      }\n\n      console.log('GPS error:', errorMessage, error);\n      setState(prev => ({\n        ...prev,\n        error: errorMessage,\n        loading: false,\n      }));\n    };\n\n    const geoOptions: PositionOptions = {\n      enableHighAccuracy: options.enableHighAccuracy ?? true,\n      timeout: options.timeout ?? 10000,\n      maximumAge: options.maximumAge ?? 300000, // 5 minutes\n    };\n\n    console.log('Requesting GPS permission with options:', geoOptions);\n    navigator.geolocation.getCurrentPosition(handleSuccess, handleError, geoOptions);\n  }, [options.enableHighAccuracy, options.timeout, options.maximumAge]);\n\n  return state;\n}\n\n// Utility function to calculate distance between two coordinates\nexport function calculateDistance(\n  lat1: number,\n  lon1: number,\n  lat2: number,\n  lon2: number\n): number {\n  const R = 3959; // Earth's radius in miles\n  const dLat = (lat2 - lat1) * (Math.PI / 180);\n  const dLon = (lon2 - lon1) * (Math.PI / 180);\n  const a =\n    Math.sin(dLat / 2) * Math.sin(dLat / 2) +\n    Math.cos(lat1 * (Math.PI / 180)) *\n      Math.cos(lat2 * (Math.PI / 180)) *\n      Math.sin(dLon / 2) *\n      Math.sin(dLon / 2);\n  const c = 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1 - a));\n  return R * c;\n}\n\n// Format distance for display\nexport function formatDistance(miles: number): string {\n  if (miles < 0.1) return 'Less than 0.1 mi';\n  if (miles < 1) return `${(miles * 5280).toFixed(0)} ft`;\n  return `${miles.toFixed(1)} mi`;\n}\n","import { useState, useCallback } from 'react';\n\ninterface LocationSuggestion {\n  place_id: string;\n  description: string;\n  structured_formatting: {\n    main_text: string;\n    secondary_text: string;\n  };\n}\n\ninterface Coordinates {\n  lat: number;\n  lng: number;\n}\n\nexport function useLocationSearch() {\n  const [suggestions, setSuggestions] = useState<LocationSuggestion[]>([]);\n  const [loading, setLoading] = useState(false);\n\n  const GOOGLE_API_KEY = (import.meta as any).env?.VITE_GOOGLE_PLACES_API_KEY || 'AIzaSyATPbnuTvpYDDY0vLrKy0IoS80A27rpq-4';\n\n  // Simple geocoding using Google Places API or fallback\n  const geocodeLocation = useCallback(async (address: string): Promise<Coordinates | null> => {\n    try {\n      // Try Google Geocoding API first\n      if (GOOGLE_API_KEY && GOOGLE_API_KEY !== 'demo_key') {\n        const response = await fetch(\n          `https://maps.googleapis.com/maps/api/geocode/json?address=${encodeURIComponent(address)}&key=${GOOGLE_API_KEY}`\n        );\n        \n        if (response.ok) {\n          const data = await response.json();\n          if (data.results && data.results.length > 0) {\n            const location = data.results[0].geometry.location;\n            return {\n              lat: location.lat,\n              lng: location.lng\n            };\n          }\n        }\n      }\n      \n      // Fallback to OpenStreetMap\n      const response = await fetch(\n        `https://nominatim.openstreetmap.org/search?format=json&q=${encodeURIComponent(address)}&limit=1`\n      );\n      \n      if (!response.ok) throw new Error('Geocoding failed');\n      \n      const data = await response.json();\n      if (data.length > 0) {\n        return {\n          lat: parseFloat(data[0].lat),\n          lng: parseFloat(data[0].lon)\n        };\n      }\n      \n      return null;\n    } catch (error) {\n      console.error('Geocoding error:', error);\n      return null;\n    }\n  }, [GOOGLE_API_KEY]);\n\n  // Search for location suggestions with proximity bias\n  const searchLocations = useCallback(async (query: string, userLat?: number, userLng?: number) => {\n    if (!query.trim()) {\n      setSuggestions([]);\n      return;\n    }\n\n    setLoading(true);\n    try {\n      // Try Google Places Autocomplete API first\n      if (GOOGLE_API_KEY && GOOGLE_API_KEY !== 'demo_key') {\n        let placesUrl = `https://maps.googleapis.com/maps/api/place/autocomplete/json?input=${encodeURIComponent(query)}&key=${GOOGLE_API_KEY}&types=establishment|geocode`;\n        \n        if (userLat && userLng) {\n          placesUrl += `&location=${userLat},${userLng}&radius=50000`;\n        }\n        \n        const response = await fetch(placesUrl);\n        if (response.ok) {\n          const data = await response.json();\n          if (data.predictions && data.predictions.length > 0) {\n            const suggestions: LocationSuggestion[] = data.predictions.map((prediction: any) => ({\n              place_id: prediction.place_id,\n              description: prediction.description,\n              structured_formatting: {\n                main_text: prediction.structured_formatting.main_text,\n                secondary_text: prediction.structured_formatting.secondary_text || ''\n              }\n            }));\n            setSuggestions(suggestions);\n            setLoading(false);\n            return;\n          }\n        }\n      }\n      \n      // Fallback to OpenStreetMap\n      let searchUrl = `https://nominatim.openstreetmap.org/search?format=json&q=${encodeURIComponent(query)}&limit=5&addressdetails=1`;\n      \n      if (userLat && userLng) {\n        searchUrl += `&lat=${userLat}&lon=${userLng}&bounded=1&viewbox=${userLng-0.1},${userLat+0.1},${userLng+0.1},${userLat-0.1}`;\n      }\n      \n      const response = await fetch(searchUrl);\n      const data = await response.json();\n      \n      const suggestions: LocationSuggestion[] = data.map((place: any, index: number) => ({\n        place_id: place.place_id || `osm-${index}`,\n        description: place.display_name,\n        structured_formatting: {\n          main_text: place.name || place.display_name.split(',')[0],\n          secondary_text: place.display_name.split(',').slice(1, 3).join(',').trim()\n        }\n      }));\n\n      setSuggestions(suggestions);\n    } catch (error) {\n      console.error('Location search error:', error);\n      // Fallback to mock suggestions\n      const mockSuggestions: LocationSuggestion[] = [\n        {\n          place_id: '1',\n          description: `${query} Community Center`,\n          structured_formatting: {\n            main_text: `${query} Community Center`,\n            secondary_text: 'Recreation Center'\n          }\n        },\n        {\n          place_id: '2', \n          description: `${query} Park`,\n          structured_formatting: {\n            main_text: `${query} Park`,\n            secondary_text: 'Public Park'\n          }\n        },\n        {\n          place_id: '3',\n          description: `${query} Sports Complex`,\n          structured_formatting: {\n            main_text: `${query} Sports Complex`,\n            secondary_text: 'Athletic Facility'\n          }\n        }\n      ];\n      setSuggestions(mockSuggestions);\n    } finally {\n      setLoading(false);\n    }\n  }, [GOOGLE_API_KEY]);\n\n  return {\n    suggestions,\n    loading,\n    searchLocations,\n    geocodeLocation\n  };\n}\n","import React, { useState, useEffect } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport { Button } from './ui/button';\nimport { Input } from './ui/input';\nimport { Card, CardContent, CardHeader, CardTitle } from './ui/card';\nimport { Textarea } from './ui/textarea';\nimport { Progress } from './ui/progress';\nimport { Alert, AlertDescription } from './ui/alert';\nimport { \n  ArrowLeft, \n  CheckCircle,\n  Loader2,\n  MapPin,\n  Navigation\n} from 'lucide-react';\nimport { SupabaseService } from '../lib/supabaseService';\nimport { useAppStore } from '../store/appStore';\nimport { useGeolocation } from '../hooks/useGeolocation';\nimport { useLocationSearch } from '../hooks/useLocationSearch';\n\ninterface FormData {\n  sport: string;\n  title: string;\n  description: string;\n  date: string;\n  time: string;\n  duration: string;\n  location: string;\n  latitude: number | null;\n  longitude: number | null;\n  maxPlayers: string;\n  cost: string;\n  requirements: string;\n}\n\nconst sportOptions = [\n  { value: 'basketball', label: 'Basketball', icon: 'üèÄ' },\n  { value: 'soccer', label: 'Soccer', icon: '‚öΩ' },\n  { value: 'tennis', label: 'Tennis', icon: 'üéæ' },\n  { value: 'pickleball', label: 'Pickleball', icon: 'ü•í' },\n  { value: 'volleyball', label: 'Volleyball', icon: 'üèê' },\n  { value: 'football', label: 'Football', icon: 'üèà' },\n  { value: 'baseball', label: 'Baseball', icon: '‚öæ' },\n];\n\nconst steps = [\n  { id: 1, title: 'Game Details', fields: ['sport', 'title', 'description'] },\n  { id: 2, title: 'Date & Time', fields: ['date', 'time', 'duration'] },\n  { id: 3, title: 'Location & Players', fields: ['location', 'maxPlayers', 'cost', 'requirements'] },\n];\n\nexport function CreateGame() {\n  const navigate = useNavigate();\n  const [currentStep, setCurrentStep] = useState(1);\n  const [isSubmitting, setIsSubmitting] = useState(false);\n  const [errors, setErrors] = useState<Record<string, string>>({});\n  const [submitError, setSubmitError] = useState<string | null>(null);\n  const [showLocationSuggestions, setShowLocationSuggestions] = useState(false);\n  \n  // Location hooks\n  const { latitude: userLat, longitude: userLng, error: geoError } = useGeolocation();\n  const { suggestions, loading: locationLoading, searchLocations, geocodeLocation } = useLocationSearch();\n  \n  const [formData, setFormData] = useState<FormData>({\n    sport: '',\n    title: '',\n    description: '',\n    date: '',\n    time: '',\n    duration: '',\n    location: '',\n    latitude: null,\n    longitude: null,\n    maxPlayers: '',\n    cost: '',\n    requirements: '',\n  });\n\n  // Auto-populate location when GPS is available and location field is empty\n  useEffect(() => {\n    console.log('Location effect triggered:', { \n      userLat, \n      userLng, \n      location: formData.location, \n      latitude: formData.latitude,\n      geoError \n    });\n    \n    // Only auto-fill if we have GPS coordinates and no location is set yet\n    if (userLat && userLng && !formData.location.trim()) {\n      console.log('Auto-filling location with GPS coordinates');\n      \n      // Auto-fill with coordinates and try to get address\n      const autoFillLocation = async () => {\n        try {\n          console.log('Fetching reverse geocoding for:', userLat, userLng);\n          \n          // Try Google Geocoding API first if available\n          const googleApiKey = (import.meta as any).env?.VITE_GOOGLE_PLACES_API_KEY;\n          let response;\n          \n          if (googleApiKey) {\n            response = await fetch(\n              `https://maps.googleapis.com/maps/api/geocode/json?latlng=${userLat},${userLng}&key=${googleApiKey}`\n            );\n          } else {\n            response = await fetch(\n              `https://nominatim.openstreetmap.org/reverse?format=json&lat=${userLat}&lon=${userLng}&addressdetails=1`\n            );\n          }\n          \n          if (!response.ok) {\n            throw new Error(`HTTP ${response.status}`);\n          }\n          \n          const data = await response.json();\n          console.log('Reverse geocoding response:', data);\n          \n          // Create a more readable address\n          let address = '';\n          \n          if (googleApiKey && data.results && data.results.length > 0) {\n            // Google Geocoding API response\n            address = data.results[0].formatted_address;\n          } else if (data.address) {\n            // OpenStreetMap response\n            const parts: string[] = [];\n            if (data.address.house_number && data.address.road) {\n              parts.push(`${data.address.house_number} ${data.address.road}`);\n            } else if (data.address.road) {\n              parts.push(data.address.road);\n            }\n            if (data.address.city || data.address.town || data.address.village) {\n              parts.push(data.address.city || data.address.town || data.address.village);\n            }\n            if (data.address.state) {\n              parts.push(data.address.state);\n            }\n            address = parts.join(', ');\n          }\n          \n          // Fallback to display_name if address parsing fails\n          if (!address) {\n            address = data.display_name || `${userLat.toFixed(4)}, ${userLng.toFixed(4)}`;\n          }\n          \n          console.log('Setting location to:', address);\n          setFormData(prev => ({\n            ...prev,\n            location: address,\n            latitude: userLat,\n            longitude: userLng\n          }));\n        } catch (error) {\n          console.error('Reverse geocoding failed:', error);\n          // Fallback to coordinates if reverse geocoding fails\n          const fallbackLocation = `${userLat.toFixed(4)}, ${userLng.toFixed(4)}`;\n          console.log('Using fallback location:', fallbackLocation);\n          \n          setFormData(prev => ({\n            ...prev,\n            location: fallbackLocation,\n            latitude: userLat,\n            longitude: userLng\n          }));\n        }\n      };\n      \n      autoFillLocation();\n    }\n  }, [userLat, userLng, geoError]);\n\n  const handleInputChange = (name: string, value: string) => {\n    setFormData(prev => ({ ...prev, [name]: value }));\n    // Clear error on change\n    if (errors[name]) {\n      setErrors(prev => {\n        const { [name]: _removed, ...rest } = prev;\n        return rest;\n      });\n    }\n  };\n\n  const validateCurrentStep = (): boolean => {\n    const stepErrors: Record<string, string> = {};\n    if (currentStep === 1) {\n      if (!formData.sport) stepErrors.sport = 'Please select a sport.';\n      if (!formData.title.trim()) stepErrors.title = 'Game title is required.';\n      if (!formData.description.trim()) stepErrors.description = 'Description is required.';\n    }\n    if (currentStep === 2) {\n      if (!formData.date) stepErrors.date = 'Please choose a date.';\n      if (!formData.time) stepErrors.time = 'Please choose a time.';\n      if (formData.date) {\n        const today = new Date();\n        const chosen = new Date(formData.date + 'T00:00:00');\n        if (chosen < new Date(today.toDateString())) {\n          stepErrors.date = 'Date cannot be in the past.';\n        }\n      }\n    }\n    if (currentStep === 3) {\n      if (!formData.location.trim()) stepErrors.location = 'Location is required.';\n      const mp = parseInt(formData.maxPlayers, 10);\n      if (!formData.maxPlayers) stepErrors.maxPlayers = 'Max players is required.';\n      else if (Number.isNaN(mp) || mp <= 0) stepErrors.maxPlayers = 'Enter a valid number greater than 0.';\n      if (!formData.cost) stepErrors.cost = 'Please select a cost option.';\n    }\n    setErrors(stepErrors);\n    return Object.keys(stepErrors).length === 0;\n  };\n\n  const handleNext = () => {\n    if (!validateCurrentStep()) return;\n    if (currentStep < steps.length) setCurrentStep(currentStep + 1);\n  };\n\n  const handleBack = () => {\n    if (currentStep > 1) {\n      setCurrentStep(currentStep - 1);\n    } else {\n      navigate(-1);\n    }\n  };\n\n  const handleSubmit = async () => {\n    if (!validateCurrentStep()) return;\n    setIsSubmitting(true);\n    setSubmitError(null);\n    try {\n      const { user } = useAppStore.getState();\n      console.log('[CreateGame] submit clicked. user =', user?.id);\n      if (!user) {\n        throw new Error('You must be logged in to create a game');\n      }\n\n      const gameData = {\n        title: formData.title,\n        sport: formData.sport,\n        location: formData.location,\n        date: formData.date,\n        time: formData.time,\n        cost: formData.cost || 'Free',\n        maxPlayers: parseInt(formData.maxPlayers),\n        description: formData.description,\n        creatorId: user.id,\n      };\n      console.log('[CreateGame] creating game with data =', gameData);\n      await SupabaseService.createGame(gameData as any);\n      navigate('/');\n    } catch (error) {\n      console.error('Error creating game:', error);\n      setSubmitError(error instanceof Error ? error.message : 'Failed to create game');\n    } finally {\n      setIsSubmitting(false);\n    }\n  };\n\n  const progress = (currentStep / steps.length) * 100;\n  const selectedSport = sportOptions.find(sport => sport.value === formData.sport);\n\n  const renderField = (name: string, label: string, type: string = 'text', options?: any[]) => {\n    return (\n      <div className=\"space-y-2\">\n        <label className=\"text-sm font-medium flex items-center gap-2\">\n          {label}\n          {steps[currentStep - 1].fields.includes(name) && (\n            <span className=\"text-destructive\">*</span>\n          )}\n        </label>\n        \n        {type === 'select' && options ? (\n          <select \n            value={formData[name]} \n            onChange={(e) => handleInputChange(name, e.target.value)}\n            className={`w-full p-2 border rounded-md ${errors[name] ? 'border-destructive' : ''}`}\n          >\n            <option value=\"\">Select {label.toLowerCase()}</option>\n            {options.map((option) => (\n              <option key={option.value} value={option.value}>\n                {option.icon} {option.label}\n              </option>\n            ))}\n          </select>\n        ) : type === 'textarea' ? (\n          <Textarea\n            value={formData[name]}\n            onChange={(e) => handleInputChange(name, e.target.value)}\n            placeholder={`Enter ${label.toLowerCase()}`}\n            className={`resize-none ${errors[name] ? 'border-destructive' : ''}`}\n            rows={3}\n          />\n        ) : (\n          <Input\n            type={type}\n            value={formData[name]}\n            onChange={(e) => handleInputChange(name, e.target.value)}\n            placeholder={`Enter ${label.toLowerCase()}`}\n            min={type === 'date' ? new Date().toISOString().split('T')[0] : undefined}\n            className={errors[name] ? 'border-destructive' : ''}\n          />\n        )}\n        {errors[name] && (\n          <p className=\"text-sm text-destructive\">{errors[name]}</p>\n        )}\n      </div>\n    );\n  };\n\n  return (\n    <div className=\"min-h-screen bg-background\">\n      {/* Header */}\n      <div className=\"sticky top-0 bg-background/95 backdrop-blur-sm border-b border-border z-10\">\n        <div className=\"flex items-center justify-between px-4 py-4\">\n          <div className=\"flex items-center gap-4\">\n            <Button variant=\"ghost\" size=\"icon\" onClick={handleBack}>\n              <ArrowLeft className=\"w-5 h-5\" />\n            </Button>\n            <div>\n              <h1 className=\"text-xl font-semibold\">Create Game</h1>\n              <p className=\"text-sm text-muted-foreground\">\n                {steps[currentStep - 1].title}\n              </p>\n            </div>\n          </div>\n        </div>\n\n        {/* Progress Bar */}\n        <div className=\"px-4 pb-4\">\n          <Progress value={progress} className=\"h-2\" />\n        </div>\n      </div>\n\n      <div className=\"px-4 pb-40 pt-6\">\n        {/* Selected Sport Preview */}\n        {selectedSport && (\n          <div className=\"mb-6\">\n            <Card>\n              <CardContent className=\"pt-6\">\n                <div className=\"flex items-center gap-4\">\n                  <div className=\"w-12 h-12 bg-primary/10 rounded-lg flex items-center justify-center text-2xl\">\n                    {selectedSport.icon}\n                  </div>\n                  <div>\n                    <h3 className=\"font-semibold\">{formData.title || 'New Game'}</h3>\n                    <p className=\"text-sm text-muted-foreground\">{selectedSport.label}</p>\n                  </div>\n                </div>\n              </CardContent>\n            </Card>\n          </div>\n        )}\n\n        {/* Form Steps */}\n        {currentStep === 1 && (\n          <div className=\"space-y-6\">\n            <Card>\n              <CardHeader>\n                <CardTitle className=\"flex items-center gap-2\">\n                  <div className=\"w-8 h-8 bg-primary/10 rounded-full flex items-center justify-center text-primary font-semibold text-sm\">\n                    1\n                  </div>\n                  Game Details\n                </CardTitle>\n              </CardHeader>\n              <CardContent className=\"space-y-6\">\n                {renderField('sport', 'Sport', 'select', sportOptions)}\n                {renderField('title', 'Game Title')}\n                {renderField('description', 'Description', 'textarea')}\n              </CardContent>\n            </Card>\n          </div>\n        )}\n\n        {currentStep === 2 && (\n          <div className=\"space-y-6\">\n            <Card>\n              <CardHeader>\n                <CardTitle className=\"flex items-center gap-2\">\n                  <div className=\"w-8 h-8 bg-primary/10 rounded-full flex items-center justify-center text-primary font-semibold text-sm\">\n                    2\n                  </div>\n                  Date & Time\n                </CardTitle>\n              </CardHeader>\n              <CardContent className=\"space-y-6\">\n                {renderField('date', 'Date', 'date')}\n                {renderField('time', 'Time', 'time')}\n                {renderField('duration', 'Duration', 'select', [\n                  { value: '30min', label: '30 minutes' },\n                  { value: '1hr', label: '1 hour' },\n                  { value: '1.5hr', label: '1.5 hours' },\n                  { value: '2hr', label: '2 hours' },\n                  { value: '3hr', label: '3 hours' },\n                ])}\n              </CardContent>\n            </Card>\n          </div>\n        )}\n\n        {currentStep === 3 && (\n          <div className=\"space-y-6\">\n            <Card>\n              <CardHeader>\n                <CardTitle className=\"flex items-center gap-2\">\n                  <div className=\"w-8 h-8 bg-primary/10 rounded-full flex items-center justify-center text-primary font-semibold text-sm\">\n                    3\n                  </div>\n                  Location & Players\n                </CardTitle>\n              </CardHeader>\n              <CardContent className=\"space-y-6\">\n                {/* Enhanced Location Field with GPS */}\n                <div className=\"space-y-2\">\n                  <label className=\"text-sm font-medium\">Location</label>\n                  <div className=\"relative\">\n                    <Input\n                      value={formData.location}\n                      onChange={(e) => {\n                        handleInputChange('location', e.target.value);\n                        if (e.target.value.length > 2) {\n                          searchLocations(e.target.value, userLat || undefined, userLng || undefined);\n                          setShowLocationSuggestions(true);\n                        } else {\n                          setShowLocationSuggestions(false);\n                        }\n                      }}\n                      placeholder=\"Enter location or address\"\n                      className={errors.location ? 'border-destructive' : ''}\n                    />\n                    <div className=\"absolute right-3 top-1/2 transform -translate-y-1/2 flex gap-2\">\n                      {locationLoading && <Loader2 className=\"w-4 h-4 animate-spin text-muted-foreground\" />}\n                      <Button\n                        type=\"button\"\n                        variant=\"ghost\"\n                        size=\"sm\"\n                        className=\"h-6 w-6 p-0\"\n                        onClick={async () => {\n                          if (userLat && userLng) {\n                            // Use reverse geocoding to get address from coordinates\n                            try {\n                              const response = await fetch(\n                                `https://nominatim.openstreetmap.org/reverse?format=json&lat=${userLat}&lon=${userLng}`\n                              );\n                              const data = await response.json();\n                              const address = data.display_name || `${userLat.toFixed(4)}, ${userLng.toFixed(4)}`;\n                              setFormData(prev => ({\n                                ...prev,\n                                location: address,\n                                latitude: userLat,\n                                longitude: userLng\n                              }));\n                            } catch (error) {\n                              console.error('Reverse geocoding failed:', error);\n                              setFormData(prev => ({\n                                ...prev,\n                                location: `${userLat.toFixed(4)}, ${userLng.toFixed(4)}`,\n                                latitude: userLat,\n                                longitude: userLng\n                              }));\n                            }\n                          }\n                        }}\n                        disabled={!userLat || !userLng}\n                        title={userLat && userLng ? \"Use my current location\" : geoError || \"Location not available\"}\n                      >\n                        <Navigation className=\"w-4 h-4\" />\n                      </Button>\n                    </div>\n                  </div>\n                  \n                  {/* Location Suggestions */}\n                  {showLocationSuggestions && suggestions.length > 0 && (\n                    <div className=\"border border-border rounded-md bg-background shadow-lg max-h-48 overflow-y-auto\">\n                      {suggestions.map((suggestion) => (\n                        <button\n                          key={suggestion.place_id}\n                          type=\"button\"\n                          className=\"w-full text-left px-3 py-2 hover:bg-muted border-b border-border last:border-b-0 flex items-center gap-2\"\n                          onClick={async () => {\n                            setFormData(prev => ({ ...prev, location: suggestion.description }));\n                            setShowLocationSuggestions(false);\n                            \n                            // Try to geocode the selected location\n                            const coords = await geocodeLocation(suggestion.description);\n                            if (coords) {\n                              setFormData(prev => ({\n                                ...prev,\n                                latitude: coords.lat,\n                                longitude: coords.lng\n                              }));\n                            }\n                          }}\n                        >\n                          <MapPin className=\"w-4 h-4 text-muted-foreground flex-shrink-0\" />\n                          <div>\n                            <div className=\"font-medium\">{suggestion.structured_formatting.main_text}</div>\n                            <div className=\"text-sm text-muted-foreground\">{suggestion.structured_formatting.secondary_text}</div>\n                          </div>\n                        </button>\n                      ))}\n                    </div>\n                  )}\n                  \n                  {errors.location && (\n                    <p className=\"text-sm text-destructive\">{errors.location}</p>\n                  )}\n                  \n                  {/* Location Status */}\n                  {formData.latitude && formData.longitude && (\n                    <div className=\"flex items-center gap-2 text-sm text-green-600\">\n                      <MapPin className=\"w-3 h-3\" />\n                      <span>üìç Location coordinates saved ({formData.latitude.toFixed(4)}, {formData.longitude.toFixed(4)})</span>\n                    </div>\n                  )}\n                  \n                  {userLat && userLng && !formData.latitude && (\n                    <div className=\"flex items-center gap-2 text-sm text-blue-600\">\n                      <Navigation className=\"w-3 h-3\" />\n                      <span>üéØ Your location detected - use GPS button to auto-fill</span>\n                    </div>\n                  )}\n                  \n                  {geoError && (\n                    <div className=\"text-sm text-amber-600\">\n                      üìç {geoError}\n                    </div>\n                  )}\n                </div>\n                \n                {renderField('maxPlayers', 'Max Players', 'number')}\n                {renderField('cost', 'Cost', 'select', [\n                  { value: 'FREE', label: 'Free' },\n                  { value: '$5', label: '$5 per person' },\n                  { value: '$10', label: '$10 per person' },\n                  { value: '$15', label: '$15 per person' },\n                  { value: '$20', label: '$20 per person' },\n                  { value: 'custom', label: 'Custom amount' },\n                ])}\n                {renderField('requirements', 'Requirements (Optional)', 'textarea')}\n              </CardContent>\n            </Card>\n          </div>\n        )}\n\n        {/* Sticky Actions */}\n        <div className=\"sticky bottom-0 left-0 right-0 bg-background/95 backdrop-blur supports-[backdrop-filter]:bg-background/60 border-t border-border px-4 py-4 mt-8\">\n          <div className=\"flex gap-3\">\n            <Button \n              variant=\"outline\" \n              onClick={handleBack}\n              className=\"w-auto px-4\"\n              disabled={isSubmitting}\n            >\n              {currentStep === 1 ? 'Cancel' : 'Back'}\n            </Button>\n            \n            {currentStep < steps.length ? (\n            <Button onClick={handleNext} className=\"flex-1\" disabled={isSubmitting || Object.keys(errors).length > 0}>\n              Next Step\n            </Button>\n          ) : (\n            <Button \n              onClick={handleSubmit} \n              disabled={isSubmitting}\n              className=\"flex-1\"\n            >\n              {isSubmitting ? (\n                <>\n                  <Loader2 className=\"w-4 h-4 mr-2 animate-spin\" />\n                  Creating Game...\n                </>\n              ) : (\n                <>\n                  <CheckCircle className=\"w-4 h-4 mr-2\" />\n                  Create Game\n                </>\n              )}\n            </Button>\n          )}\n          </div>\n        </div>\n\n        {/* Form Summary (Step 3) */}\n        {submitError && (\n          <div className=\"mt-4\">\n            <Alert variant=\"destructive\">\n              <AlertDescription>{submitError}</AlertDescription>\n            </Alert>\n          </div>\n        )}\n\n        {currentStep === 3 && formData.sport && (\n          <div className=\"mt-6\">\n            <Alert>\n              <CheckCircle className=\"h-4 w-4\" />\n              <AlertDescription>\n                Ready to create \"{formData.title}\" for {formData.maxPlayers} players \n                on {formData.date} at {formData.time}?\n              </AlertDescription>\n            </Alert>\n          </div>\n        )}\n      </div>\n    </div>\n  );\n}"],"names":["useGeolocation","options","state","setState","useState","useEffect","prev","handleSuccess","position","handleError","error","errorMessage","geoOptions","useLocationSearch","suggestions","setSuggestions","loading","setLoading","GOOGLE_API_KEY","geocodeLocation","useCallback","address","response","data","location","searchLocations","query","userLat","userLng","placesUrl","prediction","searchUrl","place","index","mockSuggestions","sportOptions","steps","CreateGame","navigate","useNavigate","currentStep","setCurrentStep","isSubmitting","setIsSubmitting","errors","setErrors","submitError","setSubmitError","showLocationSuggestions","setShowLocationSuggestions","geoError","locationLoading","formData","setFormData","googleApiKey","parts","fallbackLocation","handleInputChange","name","value","_removed","rest","validateCurrentStep","stepErrors","today","mp","handleNext","handleBack","handleSubmit","user","useAppStore","gameData","SupabaseService","progress","selectedSport","sport","renderField","label","type","jsxs","jsx","e","option","Textarea","Input","Button","ArrowLeft","Progress","Card","CardContent","CardHeader","CardTitle","Loader2","Navigation","suggestion","coords","MapPin","Fragment","CheckCircle","Alert","AlertDescription"],"mappings":"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"}