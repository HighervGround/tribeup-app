{"version":3,"file":"dateUtils-But3d3jk.js","sources":["../../src/lib/dateUtils.ts"],"sourcesContent":["// Utility functions for consistent event date/time formatting\n\nfunction toLocalDate(date: Date) {\n  // Normalize to local midnight for comparisons\n  return new Date(date.getFullYear(), date.getMonth(), date.getDate());\n}\n\nfunction safeParse(dateStr?: string, timeStr?: string): Date | null {\n  if (!dateStr && !timeStr) return null;\n  // Try ISO first\n  if (dateStr && !timeStr) {\n    const d = new Date(dateStr);\n    return isNaN(d.getTime()) ? null : d;\n  }\n  if (!dateStr && timeStr) {\n    const d = new Date(timeStr);\n    return isNaN(d.getTime()) ? null : d;\n  }\n  // Combine date and time into local date\n  try {\n    // Support formats like 2025-08-28 and 8:30 PM\n    const [y, m, d] = (dateStr as string).split('-').map(Number);\n    if (!y || !m || !d) throw new Error('bad date');\n    let hours = 0, minutes = 0;\n    if (timeStr) {\n      const match = (timeStr as string).trim().match(/^(\\d{1,2})(?::(\\d{2}))?\\s*(AM|PM)?$/i);\n      if (match) {\n        hours = parseInt(match[1], 10);\n        minutes = match[2] ? parseInt(match[2], 10) : 0;\n        const meridiem = match[3]?.toUpperCase();\n        if (meridiem) {\n          if (meridiem === 'PM' && hours < 12) hours += 12;\n          if (meridiem === 'AM' && hours === 12) hours = 0;\n        }\n      }\n    }\n    const dt = new Date(y, m - 1, d, hours, minutes);\n    return isNaN(dt.getTime()) ? null : dt;\n  } catch {\n    return null;\n  }\n}\n\nfunction formatTime(dt: Date, locale?: string) {\n  return new Intl.DateTimeFormat(locale || undefined, {\n    hour: 'numeric',\n    minute: '2-digit',\n    hour12: true\n  }).format(dt);\n}\n\nfunction formatMonthDay(dt: Date, locale?: string) {\n  return new Intl.DateTimeFormat(locale || undefined, {\n    month: 'short',\n    day: 'numeric'\n  }).format(dt);\n}\n\nexport function formatEventHeader(dateStr?: string, timeStr?: string, locale?: string) {\n  const now = new Date();\n  const parsed = safeParse(dateStr, timeStr);\n  if (!parsed) {\n    // Fallback to simple join if parsing fails\n    const datePart = dateStr || '';\n    const timePart = timeStr || '';\n    return {\n      label: [datePart, timePart].filter(Boolean).join(' · '),\n      aria: `Event ${[datePart, timePart].filter(Boolean).join(' at ')}`,\n      isPast: false,\n      isToday: false,\n      date: datePart,\n      time: timePart,\n    };\n  }\n\n  const today = toLocalDate(now);\n  const eventDate = toLocalDate(parsed);\n  const diffDays = Math.round((eventDate.getTime() - today.getTime()) / 86400000);\n\n  const timeLabel = timeStr ? formatTime(parsed, locale) : '';\n  let dateLabel = '';\n  let isToday = false;\n\n  if (diffDays === 0) {\n    dateLabel = 'Today';\n    isToday = true;\n  } else if (diffDays === 1) {\n    dateLabel = 'Tomorrow';\n  } else {\n    dateLabel = formatMonthDay(parsed, locale);\n  }\n\n  const label = [dateLabel, timeLabel].filter(Boolean).join(' · ');\n  const aria = `Event ${dateLabel}${timeLabel ? ` at ${timeLabel}` : ''}`;\n  const isPast = parsed.getTime() < now.getTime();\n\n  return {\n    label,\n    aria,\n    isPast,\n    isToday,\n    date: dateLabel,\n    time: timeLabel,\n  };\n}\n\nexport function formatCalendarInfo(dateStr?: string, timeStr?: string, locale?: string) {\n  const parsed = safeParse(dateStr, timeStr);\n  if (!parsed) {\n    return { date: dateStr || '', time: timeStr || '' };\n  }\n  return {\n    date: formatMonthDay(parsed, locale),\n    time: formatTime(parsed, locale),\n  };\n}\n\n// Convert 24-hour time string to 12-hour format\nexport function formatTimeString(timeStr: string): string {\n  if (!timeStr) return '';\n  \n  try {\n    // Parse time string like \"14:30\" or \"14:30:00\"\n    const [hours, minutes] = timeStr.split(':').map(Number);\n    if (isNaN(hours) || isNaN(minutes)) return timeStr;\n    \n    const date = new Date();\n    date.setHours(hours, minutes, 0, 0);\n    \n    return new Intl.DateTimeFormat('en-US', {\n      hour: 'numeric',\n      minute: '2-digit',\n      hour12: true\n    }).format(date);\n  } catch {\n    return timeStr; // Return original if parsing fails\n  }\n}\n"],"names":["toLocalDate","date","safeParse","dateStr","timeStr","d","y","m","hours","minutes","match","meridiem","dt","formatTime","locale","formatMonthDay","formatEventHeader","now","parsed","datePart","timePart","today","eventDate","diffDays","timeLabel","dateLabel","isToday","label","aria","isPast","formatCalendarInfo","formatTimeString"],"mappings":"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"}