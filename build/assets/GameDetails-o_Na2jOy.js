import{c as E,a as M,r as j,t as g,i as de,j as e,C,d as $,e as S,B as p,b as k,A as Z,f as ee,u as me,k as he,l as ue,m as xe,L as fe,S as pe}from"./index-BP2KWh-A.js";import{B as P}from"./badge-COiDfPaT.js";import{A as K,a as q}from"./avatar-_JOoX_Zh.js";import{S as se}from"./separator-BXxQ-BtP.js";import{I as je}from"./ImageWithFallback-IqksgXga.js";import{u as ge}from"./useDeepLinks-CdfpvYOv.js";import{I as T}from"./input-M7-INsWF.js";import{X as ye}from"./x-CqTTaQW7.js";import{U as ve}from"./user-F90j25qI.js";import{M as L}from"./mail-WG6iDawm.js";import{S as O,C as te}from"./share-2-BPnbgxQk.js";import{M as D}from"./map-pin-BoUV1lx8.js";import{C as ae}from"./calendar-B7NkKeBz.js";import{U as re}from"./users-DbgmbBor.js";import{M as Y}from"./message-square-DMOo93Kw.js";import{A as Ne}from"./arrow-left-BEf2Fmbk.js";import{S as we,a as Q}from"./star-BSPe6mhZ.js";import{F as be}from"./flag-6GaXZKPV.js";import{K as Ce}from"./keyboard-iqCaxnEn.js";import{N as ke}from"./navigation-ClFtdQ3f.js";import"./index-DPhlQSAt.js";import"./index-BeL9kzYG.js";import"./index-D6gu9K0y.js";import"./index-B5dcZ9Mn.js";/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $e=[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]],V=E("copy",$e);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Se=[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]],Pe=E("dollar-sign",Se);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ae=[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]],Te=E("phone",Ae);function Ge(){const{joinGame:t,leaveGame:s,updateGame:n,setLoading:r,setError:o}=M(),i=M(m=>m.games),c=j.useCallback(async m=>{const l=i.find(h=>h.id===m);if(!l)return g.error("Game not found"),!1;if(l.isJoined)return g("Already joined",{description:"You are already part of this game"}),!1;if(l.currentPlayers>=l.maxPlayers)return g.error("Game is full",{description:"This game has reached maximum capacity"}),!1;try{return r(!0),await new Promise(h=>setTimeout(h,800)),t(m),g.success("Joined game!",{description:`You're now part of ${l.title}`}),!0}catch{return o("Failed to join game"),g.error("Failed to join game",{description:"Please try again later"}),!1}finally{r(!1)}},[i,t,r,o]),u=j.useCallback(async m=>{const l=i.find(h=>h.id===m);if(!l)return g.error("Game not found"),!1;if(!l.isJoined)return g("Not joined",{description:"You are not part of this game"}),!1;try{return r(!0),await new Promise(h=>setTimeout(h,500)),s(m),g.success("Left game successfully",{description:`You've left ${l.title}`}),!0}catch{return o("Failed to leave game"),g.error("Failed to leave game",{description:"Please try again later"}),!1}finally{r(!1)}},[i,s,r,o]),x=j.useCallback(async m=>{const l=i.find(h=>h.id===m);return l?l.isJoined?await u(m):await c(m):!1},[i,c,u]),d=j.useCallback(async(m,l)=>{try{return r(!0),await new Promise(h=>setTimeout(h,1e3)),n(m,{description:`${l?`CANCELLED: ${l}`:"CANCELLED"}`}),g.success("Game cancelled",{description:l||"The game has been cancelled"}),!0}catch{return o("Failed to cancel game"),g.error("Failed to cancel game",{description:"Please try again later"}),!1}finally{r(!1)}},[n,r,o]);return{joinGame:c,leaveGame:u,toggleGameParticipation:x,cancelGame:d}}function Me(t,s=!0){const n=j.useCallback(r=>{if(!s)return;const o=r.target;if(!((o.tagName==="INPUT"||o.tagName==="TEXTAREA"||o.contentEditable==="true")&&!["Escape","Enter"].includes(r.key)))for(const c of t){if(c.disabled)continue;const u=c.key.toLowerCase()===r.key.toLowerCase(),x=!!c.ctrlKey===r.ctrlKey,d=!!c.metaKey===r.metaKey,m=!!c.shiftKey===r.shiftKey,l=!!c.altKey===r.altKey;if(u&&x&&d&&m&&l){r.preventDefault(),r.stopPropagation();try{c.action()}catch(h){console.error("Error executing custom shortcut:",h)}break}}},[t,s]);j.useEffect(()=>{if(s)return document.addEventListener("keydown",n),()=>{document.removeEventListener("keydown",n)}},[s,n])}function Le({isOpen:t,onClose:s,gameTitle:n,gameId:r,onJoinSuccess:o}){const{signUp:i,signInWithOAuth:c}=de(),[u,x]=j.useState("signup"),[d,m]=j.useState({name:"",email:"",phone:""}),[l,h]=j.useState(!1),[N,b]=j.useState("");if(!t)return null;const w=async y=>{y.preventDefault(),h(!0),b("");try{await i(d.email,"temp-password-"+Date.now(),{name:d.name,email:d.email,phone:d.phone,pendingGameId:r}),x("verify"),g.success("Account created! Check your email to verify and join the game.")}catch(a){b(a.message)}finally{h(!1)}},A=async y=>{try{h(!0),await c(y,{pendingGameId:r}),g.success(`Signing in with ${y}...`),s()}catch(a){g.error(a.message||"Social login failed")}finally{h(!1)}};return e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-50",children:e.jsxs(C,{className:"w-full max-w-md",children:[e.jsxs($,{className:"flex flex-row items-center justify-between",children:[e.jsx(S,{className:"text-lg",children:u==="signup"?`Join "${n}"`:"Check Your Email"}),e.jsx(p,{variant:"ghost",size:"icon",onClick:s,children:e.jsx(ye,{className:"w-4 h-4"})})]}),e.jsx(k,{children:u==="signup"?e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs(p,{variant:"outline",className:"w-full",onClick:()=>A("google"),disabled:l,children:[e.jsxs("svg",{className:"w-4 h-4 mr-2",viewBox:"0 0 24 24",children:[e.jsx("path",{fill:"currentColor",d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"}),e.jsx("path",{fill:"currentColor",d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"}),e.jsx("path",{fill:"currentColor",d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"}),e.jsx("path",{fill:"currentColor",d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"})]}),"Continue with Google"]}),e.jsxs(p,{variant:"outline",className:"w-full",onClick:()=>A("apple"),disabled:l,children:[e.jsx("svg",{className:"w-4 h-4 mr-2",fill:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{d:"M18.71 19.5c-.83 1.24-1.71 2.45-3.05 2.47-1.34.03-1.77-.79-3.29-.79-1.53 0-2 .77-3.27.82-1.31.05-2.3-1.32-3.14-2.53C4.25 17 2.94 12.45 4.7 9.39c.87-1.52 2.43-2.48 4.12-2.51 1.28-.02 2.5.87 3.29.87.78 0 2.26-1.07 3.81-.91.65.03 2.47.26 3.64 1.98-.09.06-2.17 1.28-2.15 3.81.03 3.02 2.65 4.03 2.68 4.04-.03.07-.42 1.44-1.38 2.83M13 3.5c.73-.83 1.94-1.46 2.94-1.5.13 1.17-.34 2.35-1.04 3.19-.69.85-1.83 1.51-2.95 1.42-.15-1.15.41-2.35 1.05-3.11z"})}),"Continue with Apple"]})]}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-0 flex items-center",children:e.jsx("span",{className:"w-full border-t"})}),e.jsx("div",{className:"relative flex justify-center text-xs uppercase",children:e.jsx("span",{className:"bg-background px-2 text-muted-foreground",children:"Or continue with email"})})]}),e.jsxs("form",{onSubmit:w,className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx(T,{type:"text",placeholder:"Your name",value:d.name,onChange:y=>m(a=>({...a,name:y.target.value})),required:!0,className:"pl-10"}),e.jsx(ve,{className:"w-4 h-4 absolute left-3 top-3 text-muted-foreground"})]}),e.jsxs("div",{className:"relative",children:[e.jsx(T,{type:"email",placeholder:"Email address",value:d.email,onChange:y=>m(a=>({...a,email:y.target.value})),required:!0,className:"pl-10"}),e.jsx(L,{className:"w-4 h-4 absolute left-3 top-3 text-muted-foreground"})]}),e.jsxs("div",{className:"relative",children:[e.jsx(T,{type:"tel",placeholder:"Phone (optional)",value:d.phone,onChange:y=>m(a=>({...a,phone:y.target.value})),className:"pl-10"}),e.jsx(Te,{className:"w-4 h-4 absolute left-3 top-3 text-muted-foreground"})]}),N&&e.jsx(Z,{variant:"destructive",children:e.jsx(ee,{children:N})}),e.jsx(p,{type:"submit",className:"w-full",disabled:l,children:l?"Creating Account...":"Join Game"})]}),e.jsx("p",{className:"text-xs text-muted-foreground text-center",children:"By joining, you agree to our Terms of Service and Privacy Policy"})]}):e.jsxs("div",{className:"text-center space-y-4",children:[e.jsx("div",{className:"w-16 h-16 mx-auto bg-primary/10 rounded-full flex items-center justify-center",children:e.jsx(L,{className:"w-8 h-8 text-primary"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold mb-2",children:"Check your email"}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:["We sent a verification link to ",e.jsx("strong",{children:d.email})]}),e.jsxs("p",{className:"text-sm text-muted-foreground mt-2",children:['Click the link to verify your account and automatically join "',n,'"']})]}),e.jsx(p,{variant:"outline",onClick:s,className:"w-full",children:"Got it"})]})})]})})}function De({game:t,isOpen:s,onClose:n}){const[r,o]=j.useState(!1);if(!s)return null;const i=`${window.location.origin}/public/game/${t.id}`,c=`Join me for ${t.sport} at ${t.location} on ${t.date}!`,u=async()=>{try{await navigator.clipboard.writeText(i),o(!0),g.success("Link copied to clipboard!"),setTimeout(()=>o(!1),2e3)}catch{g.error("Failed to copy link")}},x=async()=>{if(navigator.share)try{await navigator.share({title:`Join ${t.title}`,text:c,url:i})}catch{}else u()},d=()=>{const h=encodeURIComponent(`Join me for ${t.sport}!`),N=encodeURIComponent(`
Hi!

I'm organizing a ${t.sport} game and would love for you to join:

ðŸ“ ${t.location}
ðŸ“… ${t.date} at ${t.time}
ðŸ’° ${t.cost||"Free"}
ðŸ‘¥ ${t.currentPlayers}/${t.maxPlayers} players

${t.description?t.description+`

`:""}RSVP here: ${i}

Hope to see you there!
    `.trim());window.open(`mailto:?subject=${h}&body=${N}`)},m=()=>{const h=encodeURIComponent(`${c} RSVP: ${i}`);window.open(`sms:?body=${h}`)},l=()=>{const h=encodeURIComponent(`${c} RSVP: ${i}`);window.open(`https://wa.me/?text=${h}`)};return e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-50",children:e.jsxs(C,{className:"w-full max-w-md",children:[e.jsx($,{children:e.jsxs(S,{className:"flex items-center gap-2",children:[e.jsx(O,{className:"w-5 h-5"}),"Share Game"]})}),e.jsxs(k,{className:"space-y-6",children:[e.jsxs("div",{className:"bg-muted/50 rounded-lg p-4",children:[e.jsx("h3",{className:"font-semibold mb-2",children:t.title}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsx("div",{className:"flex items-center gap-2",children:e.jsx(P,{variant:"secondary",children:t.sport})}),e.jsxs("div",{className:"flex items-center gap-2 text-muted-foreground",children:[e.jsx(D,{className:"w-4 h-4"}),e.jsx("span",{children:t.location})]}),e.jsxs("div",{className:"flex items-center gap-2 text-muted-foreground",children:[e.jsx(ae,{className:"w-4 h-4"}),e.jsx("span",{children:t.date})]}),e.jsxs("div",{className:"flex items-center gap-2 text-muted-foreground",children:[e.jsx(te,{className:"w-4 h-4"}),e.jsx("span",{children:t.time})]}),e.jsxs("div",{className:"flex items-center gap-2 text-muted-foreground",children:[e.jsx(re,{className:"w-4 h-4"}),e.jsxs("span",{children:[t.currentPlayers,"/",t.maxPlayers," players"]})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium mb-2 block",children:"Public RSVP Link"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(T,{value:i,readOnly:!0,className:"flex-1"}),e.jsx(p,{variant:"outline",size:"sm",onClick:u,className:r?"bg-green-50 text-green-700":"",children:e.jsx(V,{className:"w-4 h-4"})})]}),e.jsx("p",{className:"text-xs text-muted-foreground mt-2",children:"Anyone with this link can view game details and RSVP"})]}),e.jsx(se,{}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-medium mb-3",children:"Share via"}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs(p,{variant:"outline",onClick:x,className:"flex items-center gap-2",children:[e.jsx(O,{className:"w-4 h-4"}),"Share"]}),e.jsxs(p,{variant:"outline",onClick:d,className:"flex items-center gap-2",children:[e.jsx(L,{className:"w-4 h-4"}),"Email"]}),e.jsxs(p,{variant:"outline",onClick:m,className:"flex items-center gap-2",children:[e.jsx(Y,{className:"w-4 h-4"}),"SMS"]}),e.jsxs(p,{variant:"outline",onClick:l,className:"flex items-center gap-2",children:[e.jsx(Y,{className:"w-4 h-4"}),"WhatsApp"]})]})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx(p,{variant:"outline",onClick:n,className:"flex-1",children:"Close"}),e.jsxs(p,{onClick:u,className:"flex-1",children:[e.jsx(V,{className:"w-4 h-4 mr-2"}),"Copy Link"]})]})]})]})})}class G{static API_KEY="3d49d90fb511ba08385a88435f10825c";static BASE_URL="https://api.openweathermap.org/data/2.5";static CONFIG={temperatureUnit:"fahrenheit",updateInterval:3600,includeHourlyForecast:!0,rainThreshold:.1,windThreshold:15};static async getCurrentWeather(s,n){try{const r=await fetch(`${this.BASE_URL}/weather?lat=${s}&lon=${n}&appid=${this.API_KEY}&units=imperial`);if(!r.ok)throw new Error(`Weather API error: ${r.status}`);const o=await r.json();return this.transformWeatherData(o)}catch(r){return console.error("Error fetching weather:",r),this.getMockWeatherData()}}static async getGameWeather(s,n,r){try{const o=await fetch(`${this.BASE_URL}/forecast?lat=${s}&lon=${n}&appid=${this.API_KEY}&units=imperial`);if(!o.ok)throw new Error(`Weather API error: ${o.status}`);const i=await o.json(),c=r.getTime();let u=i.list[0],x=Math.abs(new Date(u.dt*1e3).getTime()-c);for(const d of i.list){const m=new Date(d.dt*1e3).getTime(),l=Math.abs(m-c);l<x&&(x=l,u=d)}return this.transformWeatherData(u)}catch(o){return console.error("Error fetching game weather:",o),this.getMockWeatherData()}}static transformWeatherData(s){const n=Math.round(s.main.temp),r=s.weather[0].main,o=s.weather[0].description,i=s.rain?.["1h"]||s.snow?.["1h"]||0;return{temperature:n,condition:r,description:this.capitalizeWords(o),humidity:s.main.humidity,windSpeed:Math.round(s.wind.speed),precipitation:i,icon:this.getWeatherIcon(r),isOutdoorFriendly:this.isOutdoorFriendly(r,n,i,s.wind.speed),alerts:this.generateWeatherAlerts(r,n,i,s.wind.speed)}}static isOutdoorFriendly(s,n,r,o){return!(n<40||n>95||r>this.CONFIG.rainThreshold||o>this.CONFIG.windThreshold||["Thunderstorm","Tornado","Squall"].includes(s))}static generateWeatherAlerts(s,n,r,o){const i=[];return n<50?i.push("ðŸ§¥ Dress warmly - temperature below 50Â°F"):n>85&&i.push("â˜€ï¸ Stay hydrated - high temperature expected"),r>this.CONFIG.rainThreshold&&i.push("ðŸŒ§ï¸ Rain expected - consider indoor backup plan"),o>12&&i.push("ðŸ’¨ Windy conditions - secure loose items"),s==="Thunderstorm"&&i.push("âš¡ Thunderstorm warning - move indoors immediately"),i}static getWeatherIcon(s){return{Clear:"â˜€ï¸",Clouds:"â˜ï¸",Rain:"ðŸŒ§ï¸",Drizzle:"ðŸŒ¦ï¸",Thunderstorm:"â›ˆï¸",Snow:"â„ï¸",Mist:"ðŸŒ«ï¸",Fog:"ðŸŒ«ï¸",Haze:"ðŸŒ«ï¸"}[s]||"ðŸŒ¤ï¸"}static capitalizeWords(s){return s.replace(/\b\w/g,n=>n.toUpperCase())}static getMockWeatherData(){return{temperature:72,condition:"Clear",description:"Clear Sky",humidity:65,windSpeed:8,precipitation:0,icon:"â˜€ï¸",isOutdoorFriendly:!0,alerts:[]}}static isConfigured(){return this.API_KEY!=="demo_key"&&this.API_KEY.length>0}static getWeatherRecommendation(s){return s.isOutdoorFriendly?s.temperature<60?"Cool weather - dress in layers and bring warm clothing.":s.temperature>80?"Warm weather - bring water and sun protection.":"Great weather for outdoor activities!":"Weather conditions may not be ideal for outdoor activities. Consider rescheduling or moving indoors."}}function X(t){return new Date(t.getFullYear(),t.getMonth(),t.getDate())}function ie(t,s){if(!t&&!s)return null;if(t&&!s){const n=new Date(t);return isNaN(n.getTime())?null:n}if(!t&&s){const n=new Date(s);return isNaN(n.getTime())?null:n}try{const[n,r,o]=t.split("-").map(Number);if(!n||!r||!o)throw new Error("bad date");let i=0,c=0;if(s){const x=s.trim().match(/^(\d{1,2})(?::(\d{2}))?\s*(AM|PM)?$/i);if(x){i=parseInt(x[1],10),c=x[2]?parseInt(x[2],10):0;const d=x[3]?.toUpperCase();d&&(d==="PM"&&i<12&&(i+=12),d==="AM"&&i===12&&(i=0))}}const u=new Date(n,r-1,o,i,c);return isNaN(u.getTime())?null:u}catch{return null}}function ne(t,s){return new Intl.DateTimeFormat(void 0,{hour:"numeric",minute:"2-digit"}).format(t)}function oe(t,s){return new Intl.DateTimeFormat(void 0,{month:"short",day:"numeric"}).format(t)}function Ee(t,s,n){const r=new Date,o=ie(t,s);if(!o){const b=t||"",w=s||"";return{label:[b,w].filter(Boolean).join(" Â· "),aria:`Event ${[b,w].filter(Boolean).join(" at ")}`,isPast:!1,isToday:!1,date:b,time:w}}const i=X(r),c=X(o),u=Math.round((c.getTime()-i.getTime())/864e5),x=s?ne(o):"";let d="",m=!1;u===0?(d="Today",m=!0):u===1?d="Tomorrow":d=oe(o);const l=[d,x].filter(Boolean).join(" Â· "),h=`Event ${d}${x?` at ${x}`:""}`,N=o.getTime()<r.getTime();return{label:l,aria:h,isPast:N,isToday:m,date:d,time:x}}function Ie(t,s,n){const r=ie(t,s);return r?{date:oe(r),time:ne(r)}:{date:t||"",time:s||""}}function Fe({game:t}){const[s,n]=j.useState(null),[r,o]=j.useState(!0);return j.useEffect(()=>{(async()=>{if(t.latitude&&t.longitude){const c=new Date(`${t.date} ${t.time}`),u=await G.getGameWeather(t.latitude,t.longitude,c);n(u)}else if(t.location)try{const u=await(await fetch(`https://api.openweathermap.org/geo/1.0/direct?q=${encodeURIComponent(t.location)}&limit=1&appid=3d49d90fb511ba08385a88435f10825c`)).json();if(u&&u.length>0){const{lat:x,lon:d}=u[0],m=new Date(`${t.date} ${t.time}`),l=await G.getGameWeather(x,d,m);n(l)}}catch(c){console.error("Weather geocoding error:",c)}o(!1)})()},[t.latitude,t.longitude,t.location,t.date,t.time]),r?e.jsx("div",{className:"text-sm text-muted-foreground",children:"Loading weather..."}):s?e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-2xl",children:s.icon}),e.jsxs("div",{children:[e.jsxs("div",{className:"font-medium",children:[s.temperature,"Â°F"]}),e.jsx("div",{className:"text-sm text-muted-foreground",children:s.description})]})]}),e.jsxs("div",{className:"text-right text-sm text-muted-foreground",children:[e.jsxs("div",{children:["Humidity: ",s.humidity,"%"]}),e.jsxs("div",{children:["Wind: ",s.windSpeed," mph"]})]})]}),s.alerts&&s.alerts.length>0&&e.jsx("div",{className:"space-y-1",children:s.alerts.map((i,c)=>e.jsx("div",{className:"text-xs bg-yellow-50 text-yellow-800 p-2 rounded",children:i},c))}),e.jsx("div",{className:"text-xs text-muted-foreground",children:G.getWeatherRecommendation(s)})]}):e.jsx("div",{className:"text-sm text-muted-foreground",children:"Weather unavailable"})}function ls(){const t=me(),{gameId:s}=he(),n=ue(),r=xe(),{user:o}=M(),{toggleGameParticipation:i}=Ge(),{navigateToChat:c,navigateToUser:u}=ge(),[x,d]=j.useState(!1),[m,l]=j.useState([]),[h,N]=j.useState(!1),[b,w]=j.useState(!1),[A,y]=j.useState(!1),a=n.find(f=>f.id===s);if(j.useEffect(()=>{s&&(async()=>{N(!0);try{const v=await pe.getGameParticipants(s);l(v)}catch(v){console.error("Error loading players:",v),l([])}finally{N(!1)}})()},[s]),Me([{key:"j",description:"Join/Leave game",action:()=>{a&&!r&&U()},disabled:!a||r},{key:"u",description:"Share game",action:()=>{a&&R()},disabled:!a},{key:"l",description:"Get directions",action:()=>{a&&B()},disabled:!a}]),!a)return e.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("h1",{className:"text-2xl mb-4",children:"Game not found"}),e.jsx("p",{className:"text-muted-foreground mb-4",children:"The game you're looking for doesn't exist or has been removed."}),e.jsx(p,{onClick:()=>t("/"),children:"Go Home"})]})});const I=Ee(a.date,a.time),F=Ie(a.date,a.time),W=a.currentPlayers>=a.maxPlayers,J=a.tags,U=async()=>{if(!o){w(!0);return}await i(a.id)},le=async()=>{w(!1),s&&await i(s)},ce=()=>{t(-1)},z=(f,v)=>{c("direct",f)},R=async()=>{y(!0)},B=()=>{const f=a.location||"Location not specified",v=encodeURIComponent(f),H=`https://maps.google.com/maps?q=${v}&t=m&z=16`;try{if(navigator.userAgent.match(/(iPhone|iPad|iPod|Android)/)){const _=`maps://maps.google.com/maps?q=${v}`;window.location.href=_,setTimeout(()=>{window.open(H,"_blank")},1e3)}else window.open(H,"_blank");g.success("Opening directions...")}catch{g.error("Failed to open directions")}};return e.jsxs("div",{className:"min-h-screen bg-background",children:[e.jsxs("div",{className:"sticky top-0 bg-background/95 backdrop-blur-sm border-b border-border z-10",children:[e.jsxs("div",{className:"flex items-center justify-between px-4 py-4",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(p,{variant:"ghost",size:"icon",onClick:ce,"aria-label":"Go back",children:e.jsx(Ne,{className:"w-5 h-5"})}),e.jsxs("div",{role:"text","aria-label":`Event: ${a.title}. ${I.aria}`,children:[e.jsx("h1",{className:"text-xl font-semibold line-clamp-2",children:a.title}),e.jsx("p",{className:"text-sm text-muted-foreground",children:I.label})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(p,{variant:"ghost",size:"icon",onClick:R,"data-action":"share","aria-label":"Share game",title:"Share game (U)",children:e.jsx(we,{className:"w-5 h-5"})}),e.jsx(p,{variant:"ghost",size:"icon","aria-label":"Report game",children:e.jsx(be,{className:"w-5 h-5"})})]})]}),e.jsx("div",{className:"hidden lg:block px-4 pb-2",children:e.jsxs("div",{className:"flex items-center gap-4 text-xs text-muted-foreground",children:[e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(Ce,{className:"w-3 h-3"}),"Shortcuts:"]}),e.jsx("span",{children:"J = Join/Leave"}),e.jsx("span",{children:"U = Share"}),e.jsx("span",{children:"L = Directions"}),e.jsx("span",{children:"? = All shortcuts"})]})})]}),e.jsxs("div",{className:"px-4 py-6 space-y-6",id:"main-content",children:[e.jsxs(C,{children:[a.imageUrl&&e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"aspect-video overflow-hidden rounded-t-lg",children:e.jsx(je,{src:a.imageUrl,alt:`${a.sport} game`,className:"w-full h-full object-cover"})}),e.jsx("div",{className:"absolute top-4 right-4",children:e.jsx(P,{className:`${a.sportColor} text-white border-none`,children:a.sport})})]}),!a.imageUrl&&e.jsx("div",{className:"p-4 border-b",children:e.jsx(P,{className:`${a.sportColor} text-white border-none`,children:a.sport})}),e.jsxs(k,{className:"p-6",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-6",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(ae,{className:"w-5 h-5 text-muted-foreground"}),e.jsxs("div",{children:[e.jsx("div",{children:F.date}),e.jsx("div",{className:"text-sm text-muted-foreground",children:F.time})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(te,{className:"w-5 h-5 text-muted-foreground"}),e.jsxs("div",{children:[e.jsx("div",{children:"2 hours"}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"Duration"})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(re,{className:"w-5 h-5 text-muted-foreground"}),e.jsxs("div",{children:[e.jsxs("div",{children:[a.currentPlayers,"/",a.maxPlayers]}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"Players"})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Pe,{className:"w-5 h-5 text-muted-foreground"}),e.jsxs("div",{children:[e.jsx("div",{children:a.cost}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"Cost"})]})]})]}),e.jsx("div",{className:"flex flex-wrap gap-2 mb-6",children:Array.isArray(J)&&J.map(f=>e.jsx(P,{variant:"secondary",children:f},f))}),e.jsx(p,{onClick:U,disabled:!a.isJoined&&W||r,className:"w-full h-12",variant:a.isJoined?"outline":"default","data-action":"join-game",title:`${a.isJoined?"Leave":"Join"} game (J)`,children:r?e.jsxs(e.Fragment,{children:[e.jsx(fe,{className:"w-4 h-4 mr-2 animate-spin"}),a.isJoined?"Leaving...":"Joining..."]}):W&&!a.isJoined?"Game is Full":a.isJoined?"Leave Game":o?"Join Game":"Join Game - Sign Up"})]})]}),e.jsxs(C,{children:[e.jsx($,{children:e.jsxs(S,{className:"flex items-center gap-2",children:[e.jsx(D,{className:"w-5 h-5"}),"Location"]})}),e.jsx(k,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{children:e.jsx("div",{children:a.location})}),e.jsx("div",{className:"aspect-video bg-muted rounded-lg flex items-center justify-center",children:a.latitude&&a.longitude||a.location?e.jsx("iframe",{src:`https://www.google.com/maps/embed/v1/place?key=AIzaSyCs_MsE3qt74h6eIR04QJqmf2FYgSys4UQ&q=${a.latitude&&a.longitude?`${a.latitude},${a.longitude}`:encodeURIComponent(a.location)}&zoom=15`,width:"100%",height:"100%",style:{border:0},allowFullScreen:!0,loading:"lazy",referrerPolicy:"no-referrer-when-downgrade",className:"rounded-lg",title:"Game location map"}):e.jsxs("div",{className:"text-center text-muted-foreground",children:[e.jsx(D,{className:"w-8 h-8 mx-auto mb-2"}),e.jsx("p",{children:"Map not available"})]})}),e.jsxs(p,{variant:"outline",className:"w-full",onClick:B,"data-action":"directions",title:"Get directions (L)",children:[e.jsx(ke,{className:"w-4 h-4 mr-2"}),"Get Directions"]})]})})]}),(a.latitude&&a.longitude||a.location)&&e.jsxs(C,{children:[e.jsx($,{children:e.jsx(S,{className:"flex items-center gap-2",children:"â˜€ï¸ Weather Forecast"})}),e.jsx(k,{children:e.jsx(Fe,{game:a})})]}),e.jsxs(C,{children:[e.jsx($,{children:e.jsx(S,{children:"About This Game"})}),e.jsx(k,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsx("p",{className:`text-sm leading-relaxed ${x?"":"line-clamp-3"}`,children:a.description}),a.description.length>150&&e.jsx(p,{variant:"ghost",size:"sm",onClick:()=>d(!x),className:"p-0 h-auto",children:x?"Show less":"Show more"}),e.jsxs("div",{children:[e.jsx("h4",{className:"mb-2",children:"Requirements"}),e.jsx("ul",{className:"space-y-1",children:["Athletic shoes required","Bring water bottle","No experience necessary"].map((f,v)=>e.jsxs("li",{className:"text-sm text-muted-foreground flex items-start gap-2",children:[e.jsx("span",{className:"w-1 h-1 bg-muted-foreground rounded-full mt-2 flex-shrink-0"}),f]},v))})]})]})})]}),e.jsxs(C,{children:[e.jsx($,{children:e.jsx(S,{children:"Game Host"})}),e.jsx(k,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{className:"flex items-center gap-3",children:e.jsxs("button",{onClick:()=>u("host1"),className:"flex items-center gap-3 hover:opacity-80 transition-opacity","data-action":"view-profile",children:[e.jsx(K,{children:e.jsx(q,{children:a.createdBy?.charAt(0)||"U"})}),e.jsxs("div",{children:[e.jsx("div",{children:a.createdBy||"Unknown"}),e.jsxs("div",{className:"flex items-center gap-1 text-sm text-muted-foreground",children:[e.jsx(Q,{className:"w-3 h-3 fill-current text-warning"}),"No rating yet"]})]})]})}),e.jsx(p,{variant:"outline",size:"sm",onClick:()=>z("host1",a.createdBy||"Host"),children:"Message"})]})})]}),e.jsxs(C,{children:[e.jsx($,{children:e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs(S,{children:["Players (",m.length,"/",a.maxPlayers,")"]})})}),e.jsx(k,{children:e.jsx("div",{className:"space-y-3",children:m.map((f,v)=>e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(K,{children:e.jsx(q,{children:f.avatar})}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:()=>u(f.id),className:"hover:text-primary transition-colors cursor-pointer",children:f.name}),f.isHost&&e.jsx(P,{variant:"secondary",className:"text-xs px-2 py-0",children:"Host"})]}),e.jsxs("div",{className:"flex items-center gap-1 text-sm text-muted-foreground",children:[e.jsx(Q,{className:"w-3 h-3 fill-current text-warning"}),f.rating]})]})]}),!f.isHost&&e.jsx(p,{variant:"ghost",size:"sm",onClick:()=>z(f.id,f.name),children:"Message"})]}),v<m.length-1&&e.jsx(se,{className:"mt-3"})]},f.id))})})]}),a.isJoined&&e.jsx(Z,{className:"border-success text-success-foreground",children:e.jsx(ee,{children:"You're joined! See you on the field!"})})]}),e.jsx(Le,{isOpen:b,onClose:()=>w(!1),gameTitle:a.title,gameId:a.id,onJoinSuccess:le}),e.jsx(De,{isOpen:A,onClose:()=>y(!1),game:a})]})}export{ls as GameDetails,ls as default};
//# sourceMappingURL=GameDetails-o_Na2jOy.js.map
