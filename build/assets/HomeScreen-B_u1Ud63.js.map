{"version":3,"file":"HomeScreen-B_u1Ud63.js","sources":["../../node_modules/@tanstack/query-core/build/modern/queryObserver.js","../../node_modules/@tanstack/query-core/build/modern/mutationObserver.js","../../node_modules/@tanstack/react-query/build/modern/IsRestoringProvider.js","../../node_modules/@tanstack/react-query/build/modern/QueryErrorResetBoundary.js","../../node_modules/@tanstack/react-query/build/modern/errorBoundaryUtils.js","../../node_modules/@tanstack/react-query/build/modern/suspense.js","../../node_modules/@tanstack/react-query/build/modern/useBaseQuery.js","../../node_modules/@tanstack/react-query/build/modern/useQuery.js","../../node_modules/@tanstack/react-query/build/modern/useMutation.js","../../src/hooks/useUserPresence.ts","../../src/hooks/useGames.ts","../../src/components/GameCardSkeleton.tsx","../../src/components/HomeScreen.tsx"],"sourcesContent":["// src/queryObserver.ts\nimport { focusManager } from \"./focusManager.js\";\nimport { notifyManager } from \"./notifyManager.js\";\nimport { fetchState } from \"./query.js\";\nimport { Subscribable } from \"./subscribable.js\";\nimport { pendingThenable } from \"./thenable.js\";\nimport {\n  isServer,\n  isValidTimeout,\n  noop,\n  replaceData,\n  resolveEnabled,\n  resolveStaleTime,\n  shallowEqualObjects,\n  timeUntilStale\n} from \"./utils.js\";\nimport { timeoutManager } from \"./timeoutManager.js\";\nvar QueryObserver = class extends Subscribable {\n  constructor(client, options) {\n    super();\n    this.options = options;\n    this.#client = client;\n    this.#selectError = null;\n    this.#currentThenable = pendingThenable();\n    this.bindMethods();\n    this.setOptions(options);\n  }\n  #client;\n  #currentQuery = void 0;\n  #currentQueryInitialState = void 0;\n  #currentResult = void 0;\n  #currentResultState;\n  #currentResultOptions;\n  #currentThenable;\n  #selectError;\n  #selectFn;\n  #selectResult;\n  // This property keeps track of the last query with defined data.\n  // It will be used to pass the previous data and query to the placeholder function between renders.\n  #lastQueryWithDefinedData;\n  #staleTimeoutId;\n  #refetchIntervalId;\n  #currentRefetchInterval;\n  #trackedProps = /* @__PURE__ */ new Set();\n  bindMethods() {\n    this.refetch = this.refetch.bind(this);\n  }\n  onSubscribe() {\n    if (this.listeners.size === 1) {\n      this.#currentQuery.addObserver(this);\n      if (shouldFetchOnMount(this.#currentQuery, this.options)) {\n        this.#executeFetch();\n      } else {\n        this.updateResult();\n      }\n      this.#updateTimers();\n    }\n  }\n  onUnsubscribe() {\n    if (!this.hasListeners()) {\n      this.destroy();\n    }\n  }\n  shouldFetchOnReconnect() {\n    return shouldFetchOn(\n      this.#currentQuery,\n      this.options,\n      this.options.refetchOnReconnect\n    );\n  }\n  shouldFetchOnWindowFocus() {\n    return shouldFetchOn(\n      this.#currentQuery,\n      this.options,\n      this.options.refetchOnWindowFocus\n    );\n  }\n  destroy() {\n    this.listeners = /* @__PURE__ */ new Set();\n    this.#clearStaleTimeout();\n    this.#clearRefetchInterval();\n    this.#currentQuery.removeObserver(this);\n  }\n  setOptions(options) {\n    const prevOptions = this.options;\n    const prevQuery = this.#currentQuery;\n    this.options = this.#client.defaultQueryOptions(options);\n    if (this.options.enabled !== void 0 && typeof this.options.enabled !== \"boolean\" && typeof this.options.enabled !== \"function\" && typeof resolveEnabled(this.options.enabled, this.#currentQuery) !== \"boolean\") {\n      throw new Error(\n        \"Expected enabled to be a boolean or a callback that returns a boolean\"\n      );\n    }\n    this.#updateQuery();\n    this.#currentQuery.setOptions(this.options);\n    if (prevOptions._defaulted && !shallowEqualObjects(this.options, prevOptions)) {\n      this.#client.getQueryCache().notify({\n        type: \"observerOptionsUpdated\",\n        query: this.#currentQuery,\n        observer: this\n      });\n    }\n    const mounted = this.hasListeners();\n    if (mounted && shouldFetchOptionally(\n      this.#currentQuery,\n      prevQuery,\n      this.options,\n      prevOptions\n    )) {\n      this.#executeFetch();\n    }\n    this.updateResult();\n    if (mounted && (this.#currentQuery !== prevQuery || resolveEnabled(this.options.enabled, this.#currentQuery) !== resolveEnabled(prevOptions.enabled, this.#currentQuery) || resolveStaleTime(this.options.staleTime, this.#currentQuery) !== resolveStaleTime(prevOptions.staleTime, this.#currentQuery))) {\n      this.#updateStaleTimeout();\n    }\n    const nextRefetchInterval = this.#computeRefetchInterval();\n    if (mounted && (this.#currentQuery !== prevQuery || resolveEnabled(this.options.enabled, this.#currentQuery) !== resolveEnabled(prevOptions.enabled, this.#currentQuery) || nextRefetchInterval !== this.#currentRefetchInterval)) {\n      this.#updateRefetchInterval(nextRefetchInterval);\n    }\n  }\n  getOptimisticResult(options) {\n    const query = this.#client.getQueryCache().build(this.#client, options);\n    const result = this.createResult(query, options);\n    if (shouldAssignObserverCurrentProperties(this, result)) {\n      this.#currentResult = result;\n      this.#currentResultOptions = this.options;\n      this.#currentResultState = this.#currentQuery.state;\n    }\n    return result;\n  }\n  getCurrentResult() {\n    return this.#currentResult;\n  }\n  trackResult(result, onPropTracked) {\n    return new Proxy(result, {\n      get: (target, key) => {\n        this.trackProp(key);\n        onPropTracked?.(key);\n        if (key === \"promise\" && !this.options.experimental_prefetchInRender && this.#currentThenable.status === \"pending\") {\n          this.#currentThenable.reject(\n            new Error(\n              \"experimental_prefetchInRender feature flag is not enabled\"\n            )\n          );\n        }\n        return Reflect.get(target, key);\n      }\n    });\n  }\n  trackProp(key) {\n    this.#trackedProps.add(key);\n  }\n  getCurrentQuery() {\n    return this.#currentQuery;\n  }\n  refetch({ ...options } = {}) {\n    return this.fetch({\n      ...options\n    });\n  }\n  fetchOptimistic(options) {\n    const defaultedOptions = this.#client.defaultQueryOptions(options);\n    const query = this.#client.getQueryCache().build(this.#client, defaultedOptions);\n    return query.fetch().then(() => this.createResult(query, defaultedOptions));\n  }\n  fetch(fetchOptions) {\n    return this.#executeFetch({\n      ...fetchOptions,\n      cancelRefetch: fetchOptions.cancelRefetch ?? true\n    }).then(() => {\n      this.updateResult();\n      return this.#currentResult;\n    });\n  }\n  #executeFetch(fetchOptions) {\n    this.#updateQuery();\n    let promise = this.#currentQuery.fetch(\n      this.options,\n      fetchOptions\n    );\n    if (!fetchOptions?.throwOnError) {\n      promise = promise.catch(noop);\n    }\n    return promise;\n  }\n  #updateStaleTimeout() {\n    this.#clearStaleTimeout();\n    const staleTime = resolveStaleTime(\n      this.options.staleTime,\n      this.#currentQuery\n    );\n    if (isServer || this.#currentResult.isStale || !isValidTimeout(staleTime)) {\n      return;\n    }\n    const time = timeUntilStale(this.#currentResult.dataUpdatedAt, staleTime);\n    const timeout = time + 1;\n    this.#staleTimeoutId = timeoutManager.setTimeout(() => {\n      if (!this.#currentResult.isStale) {\n        this.updateResult();\n      }\n    }, timeout);\n  }\n  #computeRefetchInterval() {\n    return (typeof this.options.refetchInterval === \"function\" ? this.options.refetchInterval(this.#currentQuery) : this.options.refetchInterval) ?? false;\n  }\n  #updateRefetchInterval(nextInterval) {\n    this.#clearRefetchInterval();\n    this.#currentRefetchInterval = nextInterval;\n    if (isServer || resolveEnabled(this.options.enabled, this.#currentQuery) === false || !isValidTimeout(this.#currentRefetchInterval) || this.#currentRefetchInterval === 0) {\n      return;\n    }\n    this.#refetchIntervalId = timeoutManager.setInterval(() => {\n      if (this.options.refetchIntervalInBackground || focusManager.isFocused()) {\n        this.#executeFetch();\n      }\n    }, this.#currentRefetchInterval);\n  }\n  #updateTimers() {\n    this.#updateStaleTimeout();\n    this.#updateRefetchInterval(this.#computeRefetchInterval());\n  }\n  #clearStaleTimeout() {\n    if (this.#staleTimeoutId) {\n      timeoutManager.clearTimeout(this.#staleTimeoutId);\n      this.#staleTimeoutId = void 0;\n    }\n  }\n  #clearRefetchInterval() {\n    if (this.#refetchIntervalId) {\n      timeoutManager.clearInterval(this.#refetchIntervalId);\n      this.#refetchIntervalId = void 0;\n    }\n  }\n  createResult(query, options) {\n    const prevQuery = this.#currentQuery;\n    const prevOptions = this.options;\n    const prevResult = this.#currentResult;\n    const prevResultState = this.#currentResultState;\n    const prevResultOptions = this.#currentResultOptions;\n    const queryChange = query !== prevQuery;\n    const queryInitialState = queryChange ? query.state : this.#currentQueryInitialState;\n    const { state } = query;\n    let newState = { ...state };\n    let isPlaceholderData = false;\n    let data;\n    if (options._optimisticResults) {\n      const mounted = this.hasListeners();\n      const fetchOnMount = !mounted && shouldFetchOnMount(query, options);\n      const fetchOptionally = mounted && shouldFetchOptionally(query, prevQuery, options, prevOptions);\n      if (fetchOnMount || fetchOptionally) {\n        newState = {\n          ...newState,\n          ...fetchState(state.data, query.options)\n        };\n      }\n      if (options._optimisticResults === \"isRestoring\") {\n        newState.fetchStatus = \"idle\";\n      }\n    }\n    let { error, errorUpdatedAt, status } = newState;\n    data = newState.data;\n    let skipSelect = false;\n    if (options.placeholderData !== void 0 && data === void 0 && status === \"pending\") {\n      let placeholderData;\n      if (prevResult?.isPlaceholderData && options.placeholderData === prevResultOptions?.placeholderData) {\n        placeholderData = prevResult.data;\n        skipSelect = true;\n      } else {\n        placeholderData = typeof options.placeholderData === \"function\" ? options.placeholderData(\n          this.#lastQueryWithDefinedData?.state.data,\n          this.#lastQueryWithDefinedData\n        ) : options.placeholderData;\n      }\n      if (placeholderData !== void 0) {\n        status = \"success\";\n        data = replaceData(\n          prevResult?.data,\n          placeholderData,\n          options\n        );\n        isPlaceholderData = true;\n      }\n    }\n    if (options.select && data !== void 0 && !skipSelect) {\n      if (prevResult && data === prevResultState?.data && options.select === this.#selectFn) {\n        data = this.#selectResult;\n      } else {\n        try {\n          this.#selectFn = options.select;\n          data = options.select(data);\n          data = replaceData(prevResult?.data, data, options);\n          this.#selectResult = data;\n          this.#selectError = null;\n        } catch (selectError) {\n          this.#selectError = selectError;\n        }\n      }\n    }\n    if (this.#selectError) {\n      error = this.#selectError;\n      data = this.#selectResult;\n      errorUpdatedAt = Date.now();\n      status = \"error\";\n    }\n    const isFetching = newState.fetchStatus === \"fetching\";\n    const isPending = status === \"pending\";\n    const isError = status === \"error\";\n    const isLoading = isPending && isFetching;\n    const hasData = data !== void 0;\n    const result = {\n      status,\n      fetchStatus: newState.fetchStatus,\n      isPending,\n      isSuccess: status === \"success\",\n      isError,\n      isInitialLoading: isLoading,\n      isLoading,\n      data,\n      dataUpdatedAt: newState.dataUpdatedAt,\n      error,\n      errorUpdatedAt,\n      failureCount: newState.fetchFailureCount,\n      failureReason: newState.fetchFailureReason,\n      errorUpdateCount: newState.errorUpdateCount,\n      isFetched: newState.dataUpdateCount > 0 || newState.errorUpdateCount > 0,\n      isFetchedAfterMount: newState.dataUpdateCount > queryInitialState.dataUpdateCount || newState.errorUpdateCount > queryInitialState.errorUpdateCount,\n      isFetching,\n      isRefetching: isFetching && !isPending,\n      isLoadingError: isError && !hasData,\n      isPaused: newState.fetchStatus === \"paused\",\n      isPlaceholderData,\n      isRefetchError: isError && hasData,\n      isStale: isStale(query, options),\n      refetch: this.refetch,\n      promise: this.#currentThenable,\n      isEnabled: resolveEnabled(options.enabled, query) !== false\n    };\n    const nextResult = result;\n    if (this.options.experimental_prefetchInRender) {\n      const finalizeThenableIfPossible = (thenable) => {\n        if (nextResult.status === \"error\") {\n          thenable.reject(nextResult.error);\n        } else if (nextResult.data !== void 0) {\n          thenable.resolve(nextResult.data);\n        }\n      };\n      const recreateThenable = () => {\n        const pending = this.#currentThenable = nextResult.promise = pendingThenable();\n        finalizeThenableIfPossible(pending);\n      };\n      const prevThenable = this.#currentThenable;\n      switch (prevThenable.status) {\n        case \"pending\":\n          if (query.queryHash === prevQuery.queryHash) {\n            finalizeThenableIfPossible(prevThenable);\n          }\n          break;\n        case \"fulfilled\":\n          if (nextResult.status === \"error\" || nextResult.data !== prevThenable.value) {\n            recreateThenable();\n          }\n          break;\n        case \"rejected\":\n          if (nextResult.status !== \"error\" || nextResult.error !== prevThenable.reason) {\n            recreateThenable();\n          }\n          break;\n      }\n    }\n    return nextResult;\n  }\n  updateResult() {\n    const prevResult = this.#currentResult;\n    const nextResult = this.createResult(this.#currentQuery, this.options);\n    this.#currentResultState = this.#currentQuery.state;\n    this.#currentResultOptions = this.options;\n    if (this.#currentResultState.data !== void 0) {\n      this.#lastQueryWithDefinedData = this.#currentQuery;\n    }\n    if (shallowEqualObjects(nextResult, prevResult)) {\n      return;\n    }\n    this.#currentResult = nextResult;\n    const shouldNotifyListeners = () => {\n      if (!prevResult) {\n        return true;\n      }\n      const { notifyOnChangeProps } = this.options;\n      const notifyOnChangePropsValue = typeof notifyOnChangeProps === \"function\" ? notifyOnChangeProps() : notifyOnChangeProps;\n      if (notifyOnChangePropsValue === \"all\" || !notifyOnChangePropsValue && !this.#trackedProps.size) {\n        return true;\n      }\n      const includedProps = new Set(\n        notifyOnChangePropsValue ?? this.#trackedProps\n      );\n      if (this.options.throwOnError) {\n        includedProps.add(\"error\");\n      }\n      return Object.keys(this.#currentResult).some((key) => {\n        const typedKey = key;\n        const changed = this.#currentResult[typedKey] !== prevResult[typedKey];\n        return changed && includedProps.has(typedKey);\n      });\n    };\n    this.#notify({ listeners: shouldNotifyListeners() });\n  }\n  #updateQuery() {\n    const query = this.#client.getQueryCache().build(this.#client, this.options);\n    if (query === this.#currentQuery) {\n      return;\n    }\n    const prevQuery = this.#currentQuery;\n    this.#currentQuery = query;\n    this.#currentQueryInitialState = query.state;\n    if (this.hasListeners()) {\n      prevQuery?.removeObserver(this);\n      query.addObserver(this);\n    }\n  }\n  onQueryUpdate() {\n    this.updateResult();\n    if (this.hasListeners()) {\n      this.#updateTimers();\n    }\n  }\n  #notify(notifyOptions) {\n    notifyManager.batch(() => {\n      if (notifyOptions.listeners) {\n        this.listeners.forEach((listener) => {\n          listener(this.#currentResult);\n        });\n      }\n      this.#client.getQueryCache().notify({\n        query: this.#currentQuery,\n        type: \"observerResultsUpdated\"\n      });\n    });\n  }\n};\nfunction shouldLoadOnMount(query, options) {\n  return resolveEnabled(options.enabled, query) !== false && query.state.data === void 0 && !(query.state.status === \"error\" && options.retryOnMount === false);\n}\nfunction shouldFetchOnMount(query, options) {\n  return shouldLoadOnMount(query, options) || query.state.data !== void 0 && shouldFetchOn(query, options, options.refetchOnMount);\n}\nfunction shouldFetchOn(query, options, field) {\n  if (resolveEnabled(options.enabled, query) !== false && resolveStaleTime(options.staleTime, query) !== \"static\") {\n    const value = typeof field === \"function\" ? field(query) : field;\n    return value === \"always\" || value !== false && isStale(query, options);\n  }\n  return false;\n}\nfunction shouldFetchOptionally(query, prevQuery, options, prevOptions) {\n  return (query !== prevQuery || resolveEnabled(prevOptions.enabled, query) === false) && (!options.suspense || query.state.status !== \"error\") && isStale(query, options);\n}\nfunction isStale(query, options) {\n  return resolveEnabled(options.enabled, query) !== false && query.isStaleByTime(resolveStaleTime(options.staleTime, query));\n}\nfunction shouldAssignObserverCurrentProperties(observer, optimisticResult) {\n  if (!shallowEqualObjects(observer.getCurrentResult(), optimisticResult)) {\n    return true;\n  }\n  return false;\n}\nexport {\n  QueryObserver\n};\n//# sourceMappingURL=queryObserver.js.map","// src/mutationObserver.ts\nimport { getDefaultState } from \"./mutation.js\";\nimport { notifyManager } from \"./notifyManager.js\";\nimport { Subscribable } from \"./subscribable.js\";\nimport { hashKey, shallowEqualObjects } from \"./utils.js\";\nvar MutationObserver = class extends Subscribable {\n  #client;\n  #currentResult = void 0;\n  #currentMutation;\n  #mutateOptions;\n  constructor(client, options) {\n    super();\n    this.#client = client;\n    this.setOptions(options);\n    this.bindMethods();\n    this.#updateResult();\n  }\n  bindMethods() {\n    this.mutate = this.mutate.bind(this);\n    this.reset = this.reset.bind(this);\n  }\n  setOptions(options) {\n    const prevOptions = this.options;\n    this.options = this.#client.defaultMutationOptions(options);\n    if (!shallowEqualObjects(this.options, prevOptions)) {\n      this.#client.getMutationCache().notify({\n        type: \"observerOptionsUpdated\",\n        mutation: this.#currentMutation,\n        observer: this\n      });\n    }\n    if (prevOptions?.mutationKey && this.options.mutationKey && hashKey(prevOptions.mutationKey) !== hashKey(this.options.mutationKey)) {\n      this.reset();\n    } else if (this.#currentMutation?.state.status === \"pending\") {\n      this.#currentMutation.setOptions(this.options);\n    }\n  }\n  onUnsubscribe() {\n    if (!this.hasListeners()) {\n      this.#currentMutation?.removeObserver(this);\n    }\n  }\n  onMutationUpdate(action) {\n    this.#updateResult();\n    this.#notify(action);\n  }\n  getCurrentResult() {\n    return this.#currentResult;\n  }\n  reset() {\n    this.#currentMutation?.removeObserver(this);\n    this.#currentMutation = void 0;\n    this.#updateResult();\n    this.#notify();\n  }\n  mutate(variables, options) {\n    this.#mutateOptions = options;\n    this.#currentMutation?.removeObserver(this);\n    this.#currentMutation = this.#client.getMutationCache().build(this.#client, this.options);\n    this.#currentMutation.addObserver(this);\n    return this.#currentMutation.execute(variables);\n  }\n  #updateResult() {\n    const state = this.#currentMutation?.state ?? getDefaultState();\n    this.#currentResult = {\n      ...state,\n      isPending: state.status === \"pending\",\n      isSuccess: state.status === \"success\",\n      isError: state.status === \"error\",\n      isIdle: state.status === \"idle\",\n      mutate: this.mutate,\n      reset: this.reset\n    };\n  }\n  #notify(action) {\n    notifyManager.batch(() => {\n      if (this.#mutateOptions && this.hasListeners()) {\n        const variables = this.#currentResult.variables;\n        const context = this.#currentResult.context;\n        if (action?.type === \"success\") {\n          this.#mutateOptions.onSuccess?.(action.data, variables, context);\n          this.#mutateOptions.onSettled?.(action.data, null, variables, context);\n        } else if (action?.type === \"error\") {\n          this.#mutateOptions.onError?.(action.error, variables, context);\n          this.#mutateOptions.onSettled?.(\n            void 0,\n            action.error,\n            variables,\n            context\n          );\n        }\n      }\n      this.listeners.forEach((listener) => {\n        listener(this.#currentResult);\n      });\n    });\n  }\n};\nexport {\n  MutationObserver\n};\n//# sourceMappingURL=mutationObserver.js.map","\"use client\";\n\n// src/IsRestoringProvider.ts\nimport * as React from \"react\";\nvar IsRestoringContext = React.createContext(false);\nvar useIsRestoring = () => React.useContext(IsRestoringContext);\nvar IsRestoringProvider = IsRestoringContext.Provider;\nexport {\n  IsRestoringProvider,\n  useIsRestoring\n};\n//# sourceMappingURL=IsRestoringProvider.js.map","\"use client\";\n\n// src/QueryErrorResetBoundary.tsx\nimport * as React from \"react\";\nimport { jsx } from \"react/jsx-runtime\";\nfunction createValue() {\n  let isReset = false;\n  return {\n    clearReset: () => {\n      isReset = false;\n    },\n    reset: () => {\n      isReset = true;\n    },\n    isReset: () => {\n      return isReset;\n    }\n  };\n}\nvar QueryErrorResetBoundaryContext = React.createContext(createValue());\nvar useQueryErrorResetBoundary = () => React.useContext(QueryErrorResetBoundaryContext);\nvar QueryErrorResetBoundary = ({\n  children\n}) => {\n  const [value] = React.useState(() => createValue());\n  return /* @__PURE__ */ jsx(QueryErrorResetBoundaryContext.Provider, { value, children: typeof children === \"function\" ? children(value) : children });\n};\nexport {\n  QueryErrorResetBoundary,\n  useQueryErrorResetBoundary\n};\n//# sourceMappingURL=QueryErrorResetBoundary.js.map","\"use client\";\n\n// src/errorBoundaryUtils.ts\nimport * as React from \"react\";\nimport { shouldThrowError } from \"@tanstack/query-core\";\nvar ensurePreventErrorBoundaryRetry = (options, errorResetBoundary) => {\n  if (options.suspense || options.throwOnError || options.experimental_prefetchInRender) {\n    if (!errorResetBoundary.isReset()) {\n      options.retryOnMount = false;\n    }\n  }\n};\nvar useClearResetErrorBoundary = (errorResetBoundary) => {\n  React.useEffect(() => {\n    errorResetBoundary.clearReset();\n  }, [errorResetBoundary]);\n};\nvar getHasError = ({\n  result,\n  errorResetBoundary,\n  throwOnError,\n  query,\n  suspense\n}) => {\n  return result.isError && !errorResetBoundary.isReset() && !result.isFetching && query && (suspense && result.data === void 0 || shouldThrowError(throwOnError, [result.error, query]));\n};\nexport {\n  ensurePreventErrorBoundaryRetry,\n  getHasError,\n  useClearResetErrorBoundary\n};\n//# sourceMappingURL=errorBoundaryUtils.js.map","// src/suspense.ts\nvar defaultThrowOnError = (_error, query) => query.state.data === void 0;\nvar ensureSuspenseTimers = (defaultedOptions) => {\n  if (defaultedOptions.suspense) {\n    const MIN_SUSPENSE_TIME_MS = 1e3;\n    const clamp = (value) => value === \"static\" ? value : Math.max(value ?? MIN_SUSPENSE_TIME_MS, MIN_SUSPENSE_TIME_MS);\n    const originalStaleTime = defaultedOptions.staleTime;\n    defaultedOptions.staleTime = typeof originalStaleTime === \"function\" ? (...args) => clamp(originalStaleTime(...args)) : clamp(originalStaleTime);\n    if (typeof defaultedOptions.gcTime === \"number\") {\n      defaultedOptions.gcTime = Math.max(\n        defaultedOptions.gcTime,\n        MIN_SUSPENSE_TIME_MS\n      );\n    }\n  }\n};\nvar willFetch = (result, isRestoring) => result.isLoading && result.isFetching && !isRestoring;\nvar shouldSuspend = (defaultedOptions, result) => defaultedOptions?.suspense && result.isPending;\nvar fetchOptimistic = (defaultedOptions, observer, errorResetBoundary) => observer.fetchOptimistic(defaultedOptions).catch(() => {\n  errorResetBoundary.clearReset();\n});\nexport {\n  defaultThrowOnError,\n  ensureSuspenseTimers,\n  fetchOptimistic,\n  shouldSuspend,\n  willFetch\n};\n//# sourceMappingURL=suspense.js.map","\"use client\";\n\n// src/useBaseQuery.ts\nimport * as React from \"react\";\nimport { isServer, noop, notifyManager } from \"@tanstack/query-core\";\nimport { useQueryClient } from \"./QueryClientProvider.js\";\nimport { useQueryErrorResetBoundary } from \"./QueryErrorResetBoundary.js\";\nimport {\n  ensurePreventErrorBoundaryRetry,\n  getHasError,\n  useClearResetErrorBoundary\n} from \"./errorBoundaryUtils.js\";\nimport { useIsRestoring } from \"./IsRestoringProvider.js\";\nimport {\n  ensureSuspenseTimers,\n  fetchOptimistic,\n  shouldSuspend,\n  willFetch\n} from \"./suspense.js\";\nfunction useBaseQuery(options, Observer, queryClient) {\n  if (process.env.NODE_ENV !== \"production\") {\n    if (typeof options !== \"object\" || Array.isArray(options)) {\n      throw new Error(\n        'Bad argument type. Starting with v5, only the \"Object\" form is allowed when calling query related functions. Please use the error stack to find the culprit call. More info here: https://tanstack.com/query/latest/docs/react/guides/migrating-to-v5#supports-a-single-signature-one-object'\n      );\n    }\n  }\n  const isRestoring = useIsRestoring();\n  const errorResetBoundary = useQueryErrorResetBoundary();\n  const client = useQueryClient(queryClient);\n  const defaultedOptions = client.defaultQueryOptions(options);\n  client.getDefaultOptions().queries?._experimental_beforeQuery?.(\n    defaultedOptions\n  );\n  if (process.env.NODE_ENV !== \"production\") {\n    if (!defaultedOptions.queryFn) {\n      console.error(\n        `[${defaultedOptions.queryHash}]: No queryFn was passed as an option, and no default queryFn was found. The queryFn parameter is only optional when using a default queryFn. More info here: https://tanstack.com/query/latest/docs/framework/react/guides/default-query-function`\n      );\n    }\n  }\n  defaultedOptions._optimisticResults = isRestoring ? \"isRestoring\" : \"optimistic\";\n  ensureSuspenseTimers(defaultedOptions);\n  ensurePreventErrorBoundaryRetry(defaultedOptions, errorResetBoundary);\n  useClearResetErrorBoundary(errorResetBoundary);\n  const isNewCacheEntry = !client.getQueryCache().get(defaultedOptions.queryHash);\n  const [observer] = React.useState(\n    () => new Observer(\n      client,\n      defaultedOptions\n    )\n  );\n  const result = observer.getOptimisticResult(defaultedOptions);\n  const shouldSubscribe = !isRestoring && options.subscribed !== false;\n  React.useSyncExternalStore(\n    React.useCallback(\n      (onStoreChange) => {\n        const unsubscribe = shouldSubscribe ? observer.subscribe(notifyManager.batchCalls(onStoreChange)) : noop;\n        observer.updateResult();\n        return unsubscribe;\n      },\n      [observer, shouldSubscribe]\n    ),\n    () => observer.getCurrentResult(),\n    () => observer.getCurrentResult()\n  );\n  React.useEffect(() => {\n    observer.setOptions(defaultedOptions);\n  }, [defaultedOptions, observer]);\n  if (shouldSuspend(defaultedOptions, result)) {\n    throw fetchOptimistic(defaultedOptions, observer, errorResetBoundary);\n  }\n  if (getHasError({\n    result,\n    errorResetBoundary,\n    throwOnError: defaultedOptions.throwOnError,\n    query: client.getQueryCache().get(defaultedOptions.queryHash),\n    suspense: defaultedOptions.suspense\n  })) {\n    throw result.error;\n  }\n  ;\n  client.getDefaultOptions().queries?._experimental_afterQuery?.(\n    defaultedOptions,\n    result\n  );\n  if (defaultedOptions.experimental_prefetchInRender && !isServer && willFetch(result, isRestoring)) {\n    const promise = isNewCacheEntry ? (\n      // Fetch immediately on render in order to ensure `.promise` is resolved even if the component is unmounted\n      fetchOptimistic(defaultedOptions, observer, errorResetBoundary)\n    ) : (\n      // subscribe to the \"cache promise\" so that we can finalize the currentThenable once data comes in\n      client.getQueryCache().get(defaultedOptions.queryHash)?.promise\n    );\n    promise?.catch(noop).finally(() => {\n      observer.updateResult();\n    });\n  }\n  return !defaultedOptions.notifyOnChangeProps ? observer.trackResult(result) : result;\n}\nexport {\n  useBaseQuery\n};\n//# sourceMappingURL=useBaseQuery.js.map","\"use client\";\n\n// src/useQuery.ts\nimport { QueryObserver } from \"@tanstack/query-core\";\nimport { useBaseQuery } from \"./useBaseQuery.js\";\nfunction useQuery(options, queryClient) {\n  return useBaseQuery(options, QueryObserver, queryClient);\n}\nexport {\n  useQuery\n};\n//# sourceMappingURL=useQuery.js.map","\"use client\";\n\n// src/useMutation.ts\nimport * as React from \"react\";\nimport {\n  MutationObserver,\n  noop,\n  notifyManager,\n  shouldThrowError\n} from \"@tanstack/query-core\";\nimport { useQueryClient } from \"./QueryClientProvider.js\";\nfunction useMutation(options, queryClient) {\n  const client = useQueryClient(queryClient);\n  const [observer] = React.useState(\n    () => new MutationObserver(\n      client,\n      options\n    )\n  );\n  React.useEffect(() => {\n    observer.setOptions(options);\n  }, [observer, options]);\n  const result = React.useSyncExternalStore(\n    React.useCallback(\n      (onStoreChange) => observer.subscribe(notifyManager.batchCalls(onStoreChange)),\n      [observer]\n    ),\n    () => observer.getCurrentResult(),\n    () => observer.getCurrentResult()\n  );\n  const mutate = React.useCallback(\n    (variables, mutateOptions) => {\n      observer.mutate(variables, mutateOptions).catch(noop);\n    },\n    [observer]\n  );\n  if (result.error && shouldThrowError(observer.options.throwOnError, [result.error])) {\n    throw result.error;\n  }\n  return { ...result, mutate, mutateAsync: result.mutate };\n}\nexport {\n  useMutation\n};\n//# sourceMappingURL=useMutation.js.map","import { useState, useEffect } from 'react';\nimport { supabase } from '../lib/supabase';\n\ninterface UserPresence {\n  userId: string;\n  lastSeen: Date;\n  isOnline: boolean;\n}\n\nexport function useUserPresence() {\n  const [onlineUsers, setOnlineUsers] = useState<UserPresence[]>([]);\n  const [isLoading, setIsLoading] = useState(true);\n\n  useEffect(() => {\n    let intervalId: NodeJS.Timeout;\n    let presenceChannel: any;\n\n    const updatePresence = async () => {\n      try {\n        // Get current user\n        const { data: { user } } = await supabase.auth.getUser();\n        if (!user) return;\n\n        // Update user's last seen timestamp\n        await supabase\n          .from('user_presence')\n          .upsert({\n            user_id: user.id,\n            last_seen: new Date().toISOString(),\n            is_online: true\n          });\n\n        // Get all users who were active in the last 5 minutes\n        const fiveMinutesAgo = new Date(Date.now() - 5 * 60 * 1000).toISOString();\n        \n        const { data: presenceData, error } = await supabase\n          .from('user_presence')\n          .select('user_id, last_seen, is_online')\n          .gte('last_seen', fiveMinutesAgo)\n          .eq('is_online', true);\n\n        if (error) {\n          console.error('Error fetching user presence:', error);\n          return;\n        }\n\n        // Transform data and update state\n        const users = (presenceData || []).map(p => ({\n          userId: p.user_id,\n          lastSeen: new Date(p.last_seen),\n          isOnline: p.is_online\n        }));\n\n        setOnlineUsers(users);\n        setIsLoading(false);\n      } catch (error) {\n        console.error('Error updating presence:', error);\n        setIsLoading(false);\n      }\n    };\n\n    // Set up real-time presence tracking\n    const setupPresence = async () => {\n      const { data: { user } } = await supabase.auth.getUser();\n      if (!user) {\n        setIsLoading(false);\n        return;\n      }\n\n      // Create presence channel\n      presenceChannel = supabase.channel('user-presence', {\n        config: {\n          presence: {\n            key: user.id,\n          },\n        },\n      });\n\n      // Track presence changes\n      presenceChannel\n        .on('presence', { event: 'sync' }, () => {\n          const state = presenceChannel.presenceState();\n          const users = Object.values(state).flat().map((presence: any) => ({\n            userId: presence.user_id,\n            lastSeen: new Date(),\n            isOnline: true\n          }));\n          setOnlineUsers(users);\n          setIsLoading(false);\n        })\n        .on('presence', { event: 'join' }, ({ key, newPresences }) => {\n          console.log('User joined:', key, newPresences);\n        })\n        .on('presence', { event: 'leave' }, ({ key, leftPresences }) => {\n          console.log('User left:', key, leftPresences);\n        })\n        .subscribe(async (status) => {\n          if (status === 'SUBSCRIBED') {\n            await presenceChannel.track({\n              user_id: user.id,\n              online_at: new Date().toISOString(),\n            });\n          }\n        });\n\n      // Update presence every 30 seconds\n      intervalId = setInterval(updatePresence, 30000);\n      \n      // Initial update\n      updatePresence();\n    };\n\n    setupPresence();\n\n    // Cleanup\n    return () => {\n      if (intervalId) {\n        clearInterval(intervalId);\n      }\n      if (presenceChannel) {\n        presenceChannel.unsubscribe();\n      }\n    };\n  }, []);\n\n  return {\n    onlineUsers,\n    onlineCount: onlineUsers.length,\n    isLoading\n  };\n}\n","import { useQuery, useMutation, useQueryClient } from '@tanstack/react-query';\nimport { SupabaseService } from '../lib/supabaseService';\nimport { useAppStore } from '../store/appStore';\nimport { toast } from 'sonner';\n\n// Query keys\nexport const gameKeys = {\n  all: ['games'] as const,\n  lists: () => [...gameKeys.all, 'list'] as const,\n  list: (filters: Record<string, any>) => [...gameKeys.lists(), { filters }] as const,\n  details: () => [...gameKeys.all, 'detail'] as const,\n  detail: (id: string) => [...gameKeys.details(), id] as const,\n  participants: (id: string) => [...gameKeys.detail(id), 'participants'] as const,\n};\n\n// Hook for fetching games\nexport function useGames() {\n  const { user } = useAppStore();\n  \n  return useQuery({\n    queryKey: gameKeys.lists(),\n    queryFn: async () => {\n      console.log('üîç Fetching games with React Query');\n      const games = await SupabaseService.getGames();\n      console.log('‚úÖ Games fetched:', games.length);\n      return games;\n    },\n    staleTime: 2 * 60 * 1000, // 2 minutes\n    cacheTime: 5 * 60 * 1000, // 5 minutes\n    enabled: !!user, // Only fetch when user is authenticated\n  });\n}\n\n// Hook for fetching a single game\nexport function useGame(gameId: string) {\n  return useQuery({\n    queryKey: gameKeys.detail(gameId),\n    queryFn: async () => {\n      const games = await SupabaseService.getGames();\n      return games.find(game => game.id === gameId);\n    },\n    enabled: !!gameId,\n  });\n}\n\n// Hook for fetching game participants\nexport function useGameParticipants(gameId: string) {\n  return useQuery({\n    queryKey: gameKeys.participants(gameId),\n    queryFn: () => SupabaseService.getGameParticipants(gameId),\n    enabled: !!gameId,\n    staleTime: 1 * 60 * 1000, // 1 minute\n  });\n}\n\n// Hook for joining a game\nexport function useJoinGame() {\n  const queryClient = useQueryClient();\n  const { user } = useAppStore();\n\n  return useMutation({\n    mutationFn: async (gameId: string) => {\n      console.log('üîß Joining game:', gameId);\n      await SupabaseService.joinGame(gameId);\n    },\n    onMutate: async (gameId) => {\n      // Cancel outgoing refetches\n      await queryClient.cancelQueries({ queryKey: gameKeys.lists() });\n      \n      // Snapshot previous value\n      const previousGames = queryClient.getQueryData(gameKeys.lists());\n      \n      // Optimistically update\n      queryClient.setQueryData(gameKeys.lists(), (old: any) => {\n        if (!old) return old;\n        return old.map((game: any) => \n          game.id === gameId \n            ? { \n                ...game, \n                isJoined: true, \n                currentPlayers: Math.min(game.currentPlayers + 1, game.maxPlayers)\n              }\n            : game\n        );\n      });\n      \n      return { previousGames };\n    },\n    onError: (error, gameId, context) => {\n      console.error('‚ùå Join game error:', error);\n      \n      // Rollback on error\n      if (context?.previousGames) {\n        queryClient.setQueryData(gameKeys.lists(), context.previousGames);\n      }\n      \n      toast.error('Failed to join game', {\n        description: 'Please try again later',\n      });\n    },\n    onSuccess: (_, gameId) => {\n      console.log('‚úÖ Successfully joined game:', gameId);\n      \n      // Invalidate and refetch\n      queryClient.invalidateQueries({ queryKey: gameKeys.participants(gameId) });\n      \n      toast.success('Joined game!', {\n        description: 'You\\'re now part of this game',\n      });\n    },\n  });\n}\n\n// Hook for leaving a game\nexport function useLeaveGame() {\n  const queryClient = useQueryClient();\n\n  return useMutation({\n    mutationFn: async (gameId: string) => {\n      console.log('üîß Leaving game:', gameId);\n      await SupabaseService.leaveGame(gameId);\n    },\n    onMutate: async (gameId) => {\n      // Cancel outgoing refetches\n      await queryClient.cancelQueries({ queryKey: gameKeys.lists() });\n      \n      // Snapshot previous value\n      const previousGames = queryClient.getQueryData(gameKeys.lists());\n      \n      // Optimistically update\n      queryClient.setQueryData(gameKeys.lists(), (old: any) => {\n        if (!old) return old;\n        return old.map((game: any) => \n          game.id === gameId \n            ? { \n                ...game, \n                isJoined: false, \n                currentPlayers: Math.max(game.currentPlayers - 1, 0)\n              }\n            : game\n        );\n      });\n      \n      return { previousGames };\n    },\n    onError: (error, gameId, context) => {\n      console.error('‚ùå Leave game error:', error);\n      \n      // Rollback on error\n      if (context?.previousGames) {\n        queryClient.setQueryData(gameKeys.lists(), context.previousGames);\n      }\n      \n      toast.error('Failed to leave game', {\n        description: 'Please try again later',\n      });\n    },\n    onSuccess: (_, gameId) => {\n      console.log('‚úÖ Successfully left game:', gameId);\n      \n      // Invalidate and refetch\n      queryClient.invalidateQueries({ queryKey: gameKeys.participants(gameId) });\n      \n      toast.success('Left game successfully', {\n        description: 'You\\'ve left this game',\n      });\n    },\n  });\n}\n\n// Hook for creating a game\nexport function useCreateGame() {\n  const queryClient = useQueryClient();\n\n  return useMutation({\n    mutationFn: async (gameData: any) => {\n      console.log('üîß Creating game:', gameData);\n      return await SupabaseService.createGame(gameData);\n    },\n    onSuccess: (newGame) => {\n      console.log('‚úÖ Game created successfully:', newGame.id);\n      \n      // Invalidate games list to refetch\n      queryClient.invalidateQueries({ queryKey: gameKeys.lists() });\n      \n      toast.success('Game created!', {\n        description: 'Your game is now live',\n      });\n    },\n    onError: (error) => {\n      console.error('‚ùå Create game error:', error);\n      \n      toast.error('Failed to create game', {\n        description: 'Please try again later',\n      });\n    },\n  });\n}\n","import { Card, CardContent } from './ui/card';\nimport { Skeleton } from './ui/skeleton';\n\nexport function GameCardSkeleton() {\n  return (\n    <Card className=\"w-full\">\n      <CardContent className=\"p-4\">\n        <div className=\"space-y-3\">\n          {/* Header */}\n          <div className=\"flex items-start justify-between\">\n            <div className=\"space-y-2 flex-1\">\n              <Skeleton className=\"h-5 w-3/4\" />\n              <Skeleton className=\"h-4 w-1/2\" />\n            </div>\n            <Skeleton className=\"h-8 w-16\" />\n          </div>\n          \n          {/* Location and time */}\n          <div className=\"space-y-2\">\n            <div className=\"flex items-center gap-2\">\n              <Skeleton className=\"h-4 w-4\" />\n              <Skeleton className=\"h-4 w-2/3\" />\n            </div>\n            <div className=\"flex items-center gap-2\">\n              <Skeleton className=\"h-4 w-4\" />\n              <Skeleton className=\"h-4 w-1/3\" />\n            </div>\n            <div className=\"flex items-center gap-2\">\n              <Skeleton className=\"h-4 w-4\" />\n              <Skeleton className=\"h-4 w-1/4\" />\n            </div>\n          </div>\n          \n          {/* Description */}\n          <Skeleton className=\"h-4 w-full\" />\n          <Skeleton className=\"h-4 w-3/4\" />\n          \n          {/* Footer */}\n          <div className=\"flex items-center justify-between pt-2\">\n            <Skeleton className=\"h-6 w-20\" />\n            <Skeleton className=\"h-8 w-16\" />\n          </div>\n        </div>\n      </CardContent>\n    </Card>\n  );\n}\n\nexport function GameDetailsSkeleton() {\n  return (\n    <div className=\"min-h-screen bg-background\">\n      {/* Header */}\n      <div className=\"sticky top-0 z-10 bg-background/95 backdrop-blur-sm border-b border-border\">\n        <div className=\"flex items-center justify-between p-4\">\n          <Skeleton className=\"h-8 w-8\" />\n          <div className=\"flex gap-2\">\n            <Skeleton className=\"h-8 w-8\" />\n            <Skeleton className=\"h-8 w-8\" />\n            <Skeleton className=\"h-8 w-8\" />\n          </div>\n        </div>\n      </div>\n\n      <div className=\"px-4 py-6 space-y-6\">\n        {/* Hero Image */}\n        <Skeleton className=\"h-48 w-full rounded-lg\" />\n        \n        {/* Basic Info */}\n        <div className=\"space-y-4\">\n          <div className=\"space-y-2\">\n            <Skeleton className=\"h-8 w-3/4\" />\n            <Skeleton className=\"h-4 w-1/2\" />\n          </div>\n          \n          <div className=\"grid grid-cols-2 gap-4\">\n            <div className=\"space-y-2\">\n              <Skeleton className=\"h-4 w-16\" />\n              <Skeleton className=\"h-4 w-24\" />\n            </div>\n            <div className=\"space-y-2\">\n              <Skeleton className=\"h-4 w-16\" />\n              <Skeleton className=\"h-4 w-20\" />\n            </div>\n          </div>\n        </div>\n        \n        {/* Description */}\n        <div className=\"space-y-2\">\n          <Skeleton className=\"h-4 w-20\" />\n          <Skeleton className=\"h-4 w-full\" />\n          <Skeleton className=\"h-4 w-3/4\" />\n        </div>\n        \n        {/* Join Button */}\n        <Skeleton className=\"h-12 w-full\" />\n        \n        {/* Players List */}\n        <div className=\"space-y-4\">\n          <Skeleton className=\"h-6 w-32\" />\n          <div className=\"space-y-3\">\n            {[1, 2, 3].map((i) => (\n              <div key={i} className=\"flex items-center gap-3\">\n                <Skeleton className=\"h-10 w-10 rounded-full\" />\n                <div className=\"space-y-2 flex-1\">\n                  <Skeleton className=\"h-4 w-24\" />\n                  <Skeleton className=\"h-3 w-16\" />\n                </div>\n              </div>\n            ))}\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n}","import React, { useState, useEffect, useMemo } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport { Button } from './ui/button';\nimport { Plus, RefreshCw, MapPin, Clock, Users } from 'lucide-react';\nimport { formatEventHeader, formatCalendarInfo, formatTimeString } from '../lib/dateUtils';\nimport { SupabaseService } from '../lib/supabaseService';\nimport { useAppStore } from '../store/appStore';\nimport { useUserPresence } from '../hooks/useUserPresence';\nimport { useGames, useJoinGame, useLeaveGame } from '../hooks/useGames';\nimport { GameCardSkeleton } from './GameCardSkeleton';\n\n\n\n// Simple GameCard component\nfunction SimpleGameCard({ \n  game, \n  onSelect, \n  onJoinLeave, \n  isLoading \n}: { \n  game: any; \n  onSelect: () => void;\n  onJoinLeave: (gameId: string) => void;\n  isLoading: boolean;\n}) {\n  const handleJoinClick = (e: React.MouseEvent) => {\n    e.stopPropagation();\n    onJoinLeave(game.id);\n  };\n\n  const handleCardClick = () => {\n    onSelect();\n  };\n\n  // Get category badge\n  const getCategoryBadge = () => {\n    if (game.category === 'today') {\n      return <span className=\"inline-block bg-orange-100 text-orange-800 dark:bg-orange-900/30 dark:text-orange-300 text-xs px-2 py-1 rounded-full font-medium\">Today</span>;\n    } else if (game.category === 'tomorrow') {\n      return <span className=\"inline-block bg-blue-100 text-blue-800 dark:bg-blue-900/30 dark:text-blue-300 text-xs px-2 py-1 rounded-full font-medium\">Tomorrow</span>;\n    }\n    return null;\n  };\n\n  return (\n    <div \n      className=\"bg-card rounded-lg p-4 border border-border cursor-pointer hover:shadow-md transition-shadow\"\n      onClick={handleCardClick}\n    >\n      <div className=\"flex items-start justify-between mb-3\">\n        <div className=\"flex-1 pr-4\">\n          <div className=\"flex items-center gap-2 mb-1\">\n            <h3 className=\"font-semibold text-lg\">{game.title}</h3>\n            {getCategoryBadge()}\n          </div>\n          <p className=\"text-sm text-muted-foreground\">{game.sport}</p>\n        </div>\n        <div className=\"text-right flex-shrink-0\">\n          <div className=\"text-sm font-medium\">{game.cost}</div>\n          <div className=\"text-xs text-muted-foreground\">\n            {game.currentPlayers}/{game.maxPlayers} players\n          </div>\n        </div>\n      </div>\n      \n      <div className=\"space-y-2 text-sm\">\n        <div className=\"flex items-center gap-2\">\n          <MapPin className=\"w-4 h-4 text-muted-foreground\" />\n          <span>{game.location}</span>\n        </div>\n        <div className=\"flex items-center gap-2\">\n          <Users className=\"w-4 h-4 text-muted-foreground\" />\n          <span>{game.currentPlayers}/{game.maxPlayers} players</span>\n        </div>\n        {game.distance && (\n          <div className=\"flex items-center gap-2\">\n            <span className=\"text-muted-foreground\">üìè</span>\n            <span>{game.distance}</span>\n          </div>\n        )}\n        <div className=\"flex items-center gap-2\">\n          <Clock className=\"w-4 h-4 text-muted-foreground\" />\n          <span>{game.date} at {formatTimeString(game.time)}</span>\n        </div>\n      </div>\n      \n      <p className=\"text-sm text-muted-foreground mt-3\">{game.description}</p>\n      \n      <div className=\"flex items-center justify-between mt-3\">\n        {game.isJoined ? (\n          <span className=\"inline-block bg-success/20 text-success dark:bg-success/30 dark:text-success text-xs px-2 py-1 rounded\">\n            Joined ‚úì\n          </span>\n        ) : (\n          <div></div>\n        )}\n        \n        <button\n          onClick={handleJoinClick}\n          disabled={isLoading}\n          className={`px-3 py-1 rounded text-sm font-medium transition-colors ${\n            isLoading \n              ? 'opacity-50 cursor-not-allowed' \n              : game.isJoined \n                ? 'bg-destructive/20 text-destructive dark:bg-destructive/30 dark:text-destructive hover:bg-destructive/30 dark:hover:bg-destructive/40' \n                : 'bg-primary text-primary-foreground hover:bg-primary/90'\n          }`}\n        >\n          {isLoading ? '...' : (game.isJoined ? 'Leave' : 'Join')}\n        </button>\n      </div>\n    </div>\n  );\n}\n\nexport function HomeScreen() {\n  const navigate = useNavigate();\n  const { user } = useAppStore();\n  const [refreshing, setRefreshing] = useState(false);\n  const [timedOut, setTimedOut] = useState(false);\n  const userPreferredSports = useMemo(() => user?.preferences?.sports ?? [], [user]);\n  const { onlineCount, isLoading: presenceLoading } = useUserPresence();\n  \n  // Use React Query for games\n  const { data: games = [], isLoading, error, refetch } = useGames();\n  \n  // Join/Leave mutations\n  const joinGameMutation = useJoinGame();\n  const leaveGameMutation = useLeaveGame();\n  \n  const handleJoinLeave = (gameId: string) => {\n    const game = games.find(g => g.id === gameId);\n    if (game?.isJoined) {\n      leaveGameMutation.mutate(gameId);\n    } else {\n      joinGameMutation.mutate(gameId);\n    }\n  };\n  \n  const isJoinLeaveLoading = joinGameMutation.isPending || leaveGameMutation.isPending;\n\n  // Calculate real stats\n  const stats = useMemo(() => {\n    const now = new Date();\n    const startOfWeek = new Date(now);\n    startOfWeek.setDate(now.getDate() - now.getDay()); // Start of current week (Sunday)\n    startOfWeek.setHours(0, 0, 0, 0);\n    \n    const endOfWeek = new Date(startOfWeek);\n    endOfWeek.setDate(startOfWeek.getDate() + 6); // End of current week (Saturday)\n    endOfWeek.setHours(23, 59, 59, 999);\n\n    // Count games this week\n    const thisWeekGames = games.filter(game => {\n      const gameDate = new Date(game.date);\n      return gameDate >= startOfWeek && gameDate <= endOfWeek;\n    }).length;\n\n    return {\n      totalGames: games.length,\n      thisWeekGames,\n      onlinePlayers: onlineCount\n    };\n  }, [games, onlineCount]);\n\n  // No need for manual loading with React Query\n\n\n  // Disabled realtime to prevent WebSocket connection issues\n  // useEffect(() => {\n  //   let timeoutId: NodeJS.Timeout;\n  //   \n  //   const sub = SupabaseService.subscribeToAllGames((payload) => {\n  //     console.log('[Realtime] games INSERT received', payload?.new?.id || '');\n  //     \n  //     // Debounce realtime updates to avoid excessive API calls\n  //     clearTimeout(timeoutId);\n  //     timeoutId = setTimeout(async () => {\n  //       try {\n  //         const data = feedMode === 'recommended'\n  //           ? await SupabaseService.getRecommendedGames(userPreferredSports)\n  //           : await SupabaseService.getGames();\n  //         setGames(data);\n  //       } catch (error) {\n  //         console.error('[Realtime] Failed to refresh games:', error);\n  //       }\n  //     }, 1000);\n  //   });\n  //   \n  //   return () => {\n  //     clearTimeout(timeoutId);\n  //     try { sub.unsubscribe(); } catch {}\n  //   };\n  //   // eslint-disable-next-line react-hooks/exhaustive-deps\n  // }, [feedMode, userPreferredSports.join?.('|') ?? '']);\n\n  // No need for manual loading state cleanup with React Query\n\n\n  // loadGames function removed - using React Query instead\n\n  const handleRefresh = async () => {\n    if (refreshing) return; // Prevent multiple concurrent refreshes\n    \n    setTimedOut(false);\n    setRefreshing(true);\n    try {\n      await refetch();\n    } finally {\n      setRefreshing(false);\n    }\n  };\n\n  const handleGameSelect = (gameId: string) => {\n    navigate(`/game/${gameId}`);\n  };\n\n  const handleCreateGame = () => {\n    navigate('/create');\n  };\n\n  // Sort games chronologically with smart grouping\n  const sortedGames = games\n    .map(game => {\n      const gameDate = new Date(game.date);\n      const today = new Date();\n      const tomorrow = new Date(today);\n      tomorrow.setDate(tomorrow.getDate() + 1);\n      \n      // Determine game category for sorting and display\n      let category = 'future';\n      let sortOrder = gameDate.getTime();\n      \n      if (gameDate.toDateString() === today.toDateString()) {\n        category = 'today';\n        sortOrder = 0; // Today's games first\n      } else if (gameDate.toDateString() === tomorrow.toDateString()) {\n        category = 'tomorrow';\n        sortOrder = 1; // Tomorrow's games second\n      }\n      \n      return {\n        ...game,\n        category,\n        sortOrder,\n        gameDate\n      };\n    })\n    .sort((a, b) => {\n      // First sort by category (today, tomorrow, future)\n      if (a.sortOrder !== b.sortOrder) {\n        return a.sortOrder - b.sortOrder;\n      }\n      // Then sort by time within each category\n      return a.gameDate.getTime() - b.gameDate.getTime();\n    });\n\n  // Show loading state\n  if (isLoading && games.length === 0) {\n    return (\n      <div className=\"min-h-screen bg-background flex items-center justify-center\">\n        <div className=\"text-center\">\n          <div className=\"animate-spin rounded-full h-12 w-12 border-b-2 border-primary mx-auto mb-4\"></div>\n          <p className=\"text-muted-foreground\">Loading games...</p>\n        </div>\n      </div>\n    );\n  }\n\n  // Timed-out empty state with retry - only show if no games at all\n  if (timedOut && games.length === 0) {\n    return (\n      <div className=\"min-h-screen bg-background flex items-center justify-center\">\n        <div className=\"text-center space-y-3\">\n          <p className=\"text-muted-foreground\">Connection issues detected. Showing sample games.</p>\n          <Button onClick={handleRefresh} variant=\"outline\">\n            <RefreshCw className=\"w-4 h-4 mr-2\" /> Try Again\n          </Button>\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"min-h-screen bg-background\">\n      <div className=\"max-w-7xl mx-auto p-4 md:p-6\">\n        <div className=\"grid grid-cols-1 lg:grid-cols-12 gap-6\">\n          {/* Main Content */}\n          <div className=\"lg:col-span-8\">\n            {/* Header */}\n            <div className=\"flex items-center justify-between mb-6\">\n              <div>\n                <h1 className=\"text-2xl md:text-3xl font-bold\">TribeUp</h1>\n                <p className=\"text-muted-foreground\">Find your next game</p>\n              </div>\n              <Button onClick={handleCreateGame} className=\"hidden md:flex\">\n                <Plus className=\"w-4 h-4 mr-2\" />\n                Create Game\n              </Button>\n              <Button \n                onClick={handleCreateGame}\n                size=\"icon\"\n                className=\"md:hidden\"\n                aria-label=\"Create new game\"\n              >\n                <Plus className=\"w-5 h-5\" />\n              </Button>\n            </div>\n\n            {/* Quick Stats - Mobile */}\n            <div className=\"grid grid-cols-3 gap-4 mb-6 lg:hidden\">\n              <div className=\"bg-card rounded-lg p-4 text-center\">\n                <div className=\"text-2xl font-bold text-primary\">{stats.totalGames}</div>\n                <div className=\"text-sm text-muted-foreground\">Active Games</div>\n              </div>\n              <div className=\"bg-card rounded-lg p-4 text-center\">\n                <div className=\"text-2xl font-bold text-primary\">\n                  {presenceLoading ? '...' : stats.onlinePlayers}\n                </div>\n                <div className=\"text-sm text-muted-foreground\">Players Online</div>\n              </div>\n              <div className=\"bg-card rounded-lg p-4 text-center\">\n                <div className=\"text-2xl font-bold text-primary\">{stats.thisWeekGames}</div>\n                <div className=\"text-sm text-muted-foreground\">This Week</div>\n              </div>\n            </div>\n\n            {/* Games List */}\n            <div className=\"flex items-center justify-between mb-4\">\n              <h2 className=\"text-lg md:text-xl font-semibold\">Upcoming Games</h2>\n              <Button\n                variant=\"outline\"\n                size=\"sm\"\n                onClick={handleRefresh}\n                disabled={isLoading}\n                className=\"hidden md:flex\"\n              >\n                <RefreshCw className={`w-4 h-4 mr-2 ${isLoading ? 'animate-spin' : ''}`} />\n                Refresh\n              </Button>\n              <Button\n                variant=\"ghost\"\n                size=\"sm\"\n                onClick={handleRefresh}\n                disabled={isLoading}\n                className=\"md:hidden\"\n                aria-label=\"Refresh games\"\n              >\n                <RefreshCw className={`w-4 h-4 ${isLoading ? 'animate-spin' : ''}`} />\n              </Button>\n            </div>\n\n            <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4\">\n              {isLoading ? (\n                // Show skeleton loading\n                Array.from({ length: 6 }).map((_, index) => (\n                  <GameCardSkeleton key={index} />\n                ))\n              ) : (\n                sortedGames.map((game) => (\n                  <div key={game.id}>\n                    <SimpleGameCard\n                      game={game}\n                      onSelect={() => handleGameSelect(game.id)}\n                      onJoinLeave={handleJoinLeave}\n                      isLoading={isJoinLeaveLoading}\n                    />\n                  </div>\n                ))\n              )}\n            </div>\n          </div>\n\n          {/* Sidebar - Desktop Only */}\n          <div className=\"hidden lg:block lg:col-span-4\">\n            <div className=\"bg-card rounded-lg p-6 sticky top-6\">\n              <h3 className=\"text-lg font-semibold mb-4\">Quick Stats</h3>\n              <div className=\"space-y-4\">\n                <div className=\"flex items-center justify-between\">\n                  <span className=\"text-muted-foreground\">Active Games</span>\n                  <span className=\"font-semibold\">{stats.totalGames}</span>\n                </div>\n                <div className=\"flex items-center justify-between\">\n                  <span className=\"text-muted-foreground\">Players Online</span>\n                  <span className=\"font-semibold\">\n                    {presenceLoading ? '...' : stats.onlinePlayers}\n                  </span>\n                </div>\n                <div className=\"flex items-center justify-between\">\n                  <span className=\"text-muted-foreground\">This Week</span>\n                  <span className=\"font-semibold\">{stats.thisWeekGames}</span>\n                </div>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n}\n"],"names":["QueryObserver","Subscribable","client","options","#client","#selectError","#currentThenable","pendingThenable","#currentQuery","#currentQueryInitialState","#currentResult","#currentResultState","#currentResultOptions","#selectFn","#selectResult","#lastQueryWithDefinedData","#staleTimeoutId","#refetchIntervalId","#currentRefetchInterval","#trackedProps","shouldFetchOnMount","#executeFetch","#updateTimers","shouldFetchOn","#clearStaleTimeout","#clearRefetchInterval","prevOptions","prevQuery","resolveEnabled","#updateQuery","shallowEqualObjects","mounted","shouldFetchOptionally","resolveStaleTime","#updateStaleTimeout","nextRefetchInterval","#computeRefetchInterval","#updateRefetchInterval","query","result","shouldAssignObserverCurrentProperties","onPropTracked","target","key","defaultedOptions","fetchOptions","promise","noop","staleTime","isServer","isValidTimeout","timeout","timeUntilStale","timeoutManager","nextInterval","focusManager","prevResult","prevResultState","prevResultOptions","queryInitialState","state","newState","isPlaceholderData","data","fetchOnMount","fetchOptionally","fetchState","error","errorUpdatedAt","status","skipSelect","placeholderData","replaceData","selectError","isFetching","isPending","isError","isLoading","hasData","nextResult","isStale","finalizeThenableIfPossible","thenable","recreateThenable","pending","prevThenable","shouldNotifyListeners","notifyOnChangeProps","notifyOnChangePropsValue","includedProps","typedKey","#notify","notifyOptions","notifyManager","listener","shouldLoadOnMount","field","value","observer","optimisticResult","MutationObserver","#currentMutation","#mutateOptions","#updateResult","hashKey","action","variables","getDefaultState","context","IsRestoringContext","React.createContext","useIsRestoring","React.useContext","createValue","isReset","QueryErrorResetBoundaryContext","useQueryErrorResetBoundary","ensurePreventErrorBoundaryRetry","errorResetBoundary","useClearResetErrorBoundary","React.useEffect","getHasError","throwOnError","suspense","shouldThrowError","ensureSuspenseTimers","clamp","originalStaleTime","args","willFetch","isRestoring","shouldSuspend","fetchOptimistic","useBaseQuery","Observer","queryClient","useQueryClient","isNewCacheEntry","React.useState","shouldSubscribe","React.useSyncExternalStore","React.useCallback","onStoreChange","unsubscribe","useQuery","useMutation","mutate","mutateOptions","useUserPresence","onlineUsers","setOnlineUsers","useState","setIsLoading","useEffect","intervalId","presenceChannel","updatePresence","user","supabase","fiveMinutesAgo","presenceData","users","p","presence","newPresences","leftPresences","gameKeys","filters","id","useGames","useAppStore","games","SupabaseService","useJoinGame","gameId","previousGames","old","game","toast","_","useLeaveGame","GameCardSkeleton","jsx","Card","CardContent","jsxs","Skeleton","SimpleGameCard","onSelect","onJoinLeave","handleJoinClick","e","handleCardClick","getCategoryBadge","MapPin","Users","Clock","formatTimeString","HomeScreen","navigate","useNavigate","refreshing","setRefreshing","timedOut","setTimedOut","useMemo","onlineCount","presenceLoading","refetch","joinGameMutation","leaveGameMutation","handleJoinLeave","g","isJoinLeaveLoading","stats","now","startOfWeek","endOfWeek","thisWeekGames","gameDate","handleRefresh","handleGameSelect","handleCreateGame","sortedGames","today","tomorrow","category","sortOrder","a","b","Button","RefreshCw","Plus","index"],"mappings":"ijBAiBA,IAAIA,GAAgB,cAAcC,EAAa,CAC7C,YAAYC,EAAQC,EAAS,CAC3B,MAAK,EACL,KAAK,QAAUA,EACf,KAAKC,GAAUF,EACf,KAAKG,GAAe,KACpB,KAAKC,GAAmBC,EAAe,EACvC,KAAK,YAAW,EAChB,KAAK,WAAWJ,CAAO,CACzB,CACAC,GACAI,GAAgB,OAChBC,GAA4B,OAC5BC,GAAiB,OACjBC,GACAC,GACAN,GACAD,GACAQ,GACAC,GAGAC,GACAC,GACAC,GACAC,GACAC,GAAgC,IAAI,IACpC,aAAc,CACZ,KAAK,QAAU,KAAK,QAAQ,KAAK,IAAI,CACvC,CACA,aAAc,CACR,KAAK,UAAU,OAAS,IAC1B,KAAKX,GAAc,YAAY,IAAI,EAC/BY,EAAmB,KAAKZ,GAAe,KAAK,OAAO,EACrD,KAAKa,GAAa,EAElB,KAAK,aAAY,EAEnB,KAAKC,GAAa,EAEtB,CACA,eAAgB,CACT,KAAK,gBACR,KAAK,QAAO,CAEhB,CACA,wBAAyB,CACvB,OAAOC,EACL,KAAKf,GACL,KAAK,QACL,KAAK,QAAQ,kBACnB,CACE,CACA,0BAA2B,CACzB,OAAOe,EACL,KAAKf,GACL,KAAK,QACL,KAAK,QAAQ,oBACnB,CACE,CACA,SAAU,CACR,KAAK,UAA4B,IAAI,IACrC,KAAKgB,GAAkB,EACvB,KAAKC,GAAqB,EAC1B,KAAKjB,GAAc,eAAe,IAAI,CACxC,CACA,WAAWL,EAAS,CAClB,MAAMuB,EAAc,KAAK,QACnBC,EAAY,KAAKnB,GAEvB,GADA,KAAK,QAAU,KAAKJ,GAAQ,oBAAoBD,CAAO,EACnD,KAAK,QAAQ,UAAY,QAAU,OAAO,KAAK,QAAQ,SAAY,WAAa,OAAO,KAAK,QAAQ,SAAY,YAAc,OAAOyB,EAAe,KAAK,QAAQ,QAAS,KAAKpB,EAAa,GAAM,UACpM,MAAM,IAAI,MACR,uEACR,EAEI,KAAKqB,GAAY,EACjB,KAAKrB,GAAc,WAAW,KAAK,OAAO,EACtCkB,EAAY,YAAc,CAACI,EAAoB,KAAK,QAASJ,CAAW,GAC1E,KAAKtB,GAAQ,cAAa,EAAG,OAAO,CAClC,KAAM,yBACN,MAAO,KAAKI,GACZ,SAAU,IAClB,CAAO,EAEH,MAAMuB,EAAU,KAAK,aAAY,EAC7BA,GAAWC,GACb,KAAKxB,GACLmB,EACA,KAAK,QACLD,CACN,GACM,KAAKL,GAAa,EAEpB,KAAK,aAAY,EACbU,IAAY,KAAKvB,KAAkBmB,GAAaC,EAAe,KAAK,QAAQ,QAAS,KAAKpB,EAAa,IAAMoB,EAAeF,EAAY,QAAS,KAAKlB,EAAa,GAAKyB,EAAiB,KAAK,QAAQ,UAAW,KAAKzB,EAAa,IAAMyB,EAAiBP,EAAY,UAAW,KAAKlB,EAAa,IACrS,KAAK0B,GAAmB,EAE1B,MAAMC,EAAsB,KAAKC,GAAuB,EACpDL,IAAY,KAAKvB,KAAkBmB,GAAaC,EAAe,KAAK,QAAQ,QAAS,KAAKpB,EAAa,IAAMoB,EAAeF,EAAY,QAAS,KAAKlB,EAAa,GAAK2B,IAAwB,KAAKjB,KACvM,KAAKmB,GAAuBF,CAAmB,CAEnD,CACA,oBAAoBhC,EAAS,CAC3B,MAAMmC,EAAQ,KAAKlC,GAAQ,cAAa,EAAG,MAAM,KAAKA,GAASD,CAAO,EAChEoC,EAAS,KAAK,aAAaD,EAAOnC,CAAO,EAC/C,OAAIqC,GAAsC,KAAMD,CAAM,IACpD,KAAK7B,GAAiB6B,EACtB,KAAK3B,GAAwB,KAAK,QAClC,KAAKD,GAAsB,KAAKH,GAAc,OAEzC+B,CACT,CACA,kBAAmB,CACjB,OAAO,KAAK7B,EACd,CACA,YAAY6B,EAAQE,EAAe,CACjC,OAAO,IAAI,MAAMF,EAAQ,CACvB,IAAK,CAACG,EAAQC,KACZ,KAAK,UAAUA,CAAG,EAClBF,IAAgBE,CAAG,EACfA,IAAQ,WAAa,CAAC,KAAK,QAAQ,+BAAiC,KAAKrC,GAAiB,SAAW,WACvG,KAAKA,GAAiB,OACpB,IAAI,MACF,2DACd,CACA,EAEe,QAAQ,IAAIoC,EAAQC,CAAG,EAEtC,CAAK,CACH,CACA,UAAUA,EAAK,CACb,KAAKxB,GAAc,IAAIwB,CAAG,CAC5B,CACA,iBAAkB,CAChB,OAAO,KAAKnC,EACd,CACA,QAAQ,CAAE,GAAGL,CAAO,EAAK,GAAI,CAC3B,OAAO,KAAK,MAAM,CAChB,GAAGA,CACT,CAAK,CACH,CACA,gBAAgBA,EAAS,CACvB,MAAMyC,EAAmB,KAAKxC,GAAQ,oBAAoBD,CAAO,EAC3DmC,EAAQ,KAAKlC,GAAQ,cAAa,EAAG,MAAM,KAAKA,GAASwC,CAAgB,EAC/E,OAAON,EAAM,MAAK,EAAG,KAAK,IAAM,KAAK,aAAaA,EAAOM,CAAgB,CAAC,CAC5E,CACA,MAAMC,EAAc,CAClB,OAAO,KAAKxB,GAAc,CACxB,GAAGwB,EACH,cAAeA,EAAa,eAAiB,EACnD,CAAK,EAAE,KAAK,KACN,KAAK,aAAY,EACV,KAAKnC,GACb,CACH,CACAW,GAAcwB,EAAc,CAC1B,KAAKhB,GAAY,EACjB,IAAIiB,EAAU,KAAKtC,GAAc,MAC/B,KAAK,QACLqC,CACN,EACI,OAAKA,GAAc,eACjBC,EAAUA,EAAQ,MAAMC,CAAI,GAEvBD,CACT,CACAZ,IAAsB,CACpB,KAAKV,GAAkB,EACvB,MAAMwB,EAAYf,EAChB,KAAK,QAAQ,UACb,KAAKzB,EACX,EACI,GAAIyC,GAAY,KAAKvC,GAAe,SAAW,CAACwC,EAAeF,CAAS,EACtE,OAGF,MAAMG,EADOC,GAAe,KAAK1C,GAAe,cAAesC,CAAS,EACjD,EACvB,KAAKhC,GAAkBqC,EAAe,WAAW,IAAM,CAChD,KAAK3C,GAAe,SACvB,KAAK,aAAY,CAErB,EAAGyC,CAAO,CACZ,CACAf,IAA0B,CACxB,OAAQ,OAAO,KAAK,QAAQ,iBAAoB,WAAa,KAAK,QAAQ,gBAAgB,KAAK5B,EAAa,EAAI,KAAK,QAAQ,kBAAoB,EACnJ,CACA6B,GAAuBiB,EAAc,CACnC,KAAK7B,GAAqB,EAC1B,KAAKP,GAA0BoC,EAC3B,EAAAL,GAAYrB,EAAe,KAAK,QAAQ,QAAS,KAAKpB,EAAa,IAAM,IAAS,CAAC0C,EAAe,KAAKhC,EAAuB,GAAK,KAAKA,KAA4B,KAGxK,KAAKD,GAAqBoC,EAAe,YAAY,IAAM,EACrD,KAAK,QAAQ,6BAA+BE,GAAa,UAAS,IACpE,KAAKlC,GAAa,CAEtB,EAAG,KAAKH,EAAuB,EACjC,CACAI,IAAgB,CACd,KAAKY,GAAmB,EACxB,KAAKG,GAAuB,KAAKD,IAAyB,CAC5D,CACAZ,IAAqB,CACf,KAAKR,KACPqC,EAAe,aAAa,KAAKrC,EAAe,EAChD,KAAKA,GAAkB,OAE3B,CACAS,IAAwB,CAClB,KAAKR,KACPoC,EAAe,cAAc,KAAKpC,EAAkB,EACpD,KAAKA,GAAqB,OAE9B,CACA,aAAaqB,EAAOnC,EAAS,CAC3B,MAAMwB,EAAY,KAAKnB,GACjBkB,EAAc,KAAK,QACnB8B,EAAa,KAAK9C,GAClB+C,EAAkB,KAAK9C,GACvB+C,EAAoB,KAAK9C,GAEzB+C,EADcrB,IAAUX,EACUW,EAAM,MAAQ,KAAK7B,GACrD,CAAE,MAAAmD,CAAK,EAAKtB,EAClB,IAAIuB,EAAW,CAAE,GAAGD,CAAK,EACrBE,EAAoB,GACpBC,EACJ,GAAI5D,EAAQ,mBAAoB,CAC9B,MAAM4B,EAAU,KAAK,aAAY,EAC3BiC,EAAe,CAACjC,GAAWX,EAAmBkB,EAAOnC,CAAO,EAC5D8D,EAAkBlC,GAAWC,GAAsBM,EAAOX,EAAWxB,EAASuB,CAAW,GAC3FsC,GAAgBC,KAClBJ,EAAW,CACT,GAAGA,EACH,GAAGK,GAAWN,EAAM,KAAMtB,EAAM,OAAO,CACjD,GAEUnC,EAAQ,qBAAuB,gBACjC0D,EAAS,YAAc,OAE3B,CACA,GAAI,CAAE,MAAAM,EAAO,eAAAC,EAAgB,OAAAC,CAAM,EAAKR,EACxCE,EAAOF,EAAS,KAChB,IAAIS,EAAa,GACjB,GAAInE,EAAQ,kBAAoB,QAAU4D,IAAS,QAAUM,IAAW,UAAW,CACjF,IAAIE,EACAf,GAAY,mBAAqBrD,EAAQ,kBAAoBuD,GAAmB,iBAClFa,EAAkBf,EAAW,KAC7Bc,EAAa,IAEbC,EAAkB,OAAOpE,EAAQ,iBAAoB,WAAaA,EAAQ,gBACxE,KAAKY,IAA2B,MAAM,KACtC,KAAKA,EACf,EAAYZ,EAAQ,gBAEVoE,IAAoB,SACtBF,EAAS,UACTN,EAAOS,EACLhB,GAAY,KACZe,EACApE,CACV,EACQ2D,EAAoB,GAExB,CACA,GAAI3D,EAAQ,QAAU4D,IAAS,QAAU,CAACO,EACxC,GAAId,GAAcO,IAASN,GAAiB,MAAQtD,EAAQ,SAAW,KAAKU,GAC1EkD,EAAO,KAAKjD,OAEZ,IAAI,CACF,KAAKD,GAAYV,EAAQ,OACzB4D,EAAO5D,EAAQ,OAAO4D,CAAI,EAC1BA,EAAOS,EAAYhB,GAAY,KAAMO,EAAM5D,CAAO,EAClD,KAAKW,GAAgBiD,EACrB,KAAK1D,GAAe,IACtB,OAASoE,EAAa,CACpB,KAAKpE,GAAeoE,CACtB,CAGA,KAAKpE,KACP8D,EAAQ,KAAK9D,GACb0D,EAAO,KAAKjD,GACZsD,EAAiB,KAAK,IAAG,EACzBC,EAAS,SAEX,MAAMK,EAAab,EAAS,cAAgB,WACtCc,EAAYN,IAAW,UACvBO,EAAUP,IAAW,QACrBQ,EAAYF,GAAaD,EACzBI,EAAUf,IAAS,OA6BnBgB,EA5BS,CACb,OAAAV,EACA,YAAaR,EAAS,YACtB,UAAAc,EACA,UAAWN,IAAW,UACtB,QAAAO,EACA,iBAAkBC,EAClB,UAAAA,EACA,KAAAd,EACA,cAAeF,EAAS,cACxB,MAAAM,EACA,eAAAC,EACA,aAAcP,EAAS,kBACvB,cAAeA,EAAS,mBACxB,iBAAkBA,EAAS,iBAC3B,UAAWA,EAAS,gBAAkB,GAAKA,EAAS,iBAAmB,EACvE,oBAAqBA,EAAS,gBAAkBF,EAAkB,iBAAmBE,EAAS,iBAAmBF,EAAkB,iBACnI,WAAAe,EACA,aAAcA,GAAc,CAACC,EAC7B,eAAgBC,GAAW,CAACE,EAC5B,SAAUjB,EAAS,cAAgB,SACnC,kBAAAC,EACA,eAAgBc,GAAWE,EAC3B,QAASE,EAAQ1C,EAAOnC,CAAO,EAC/B,QAAS,KAAK,QACd,QAAS,KAAKG,GACd,UAAWsB,EAAezB,EAAQ,QAASmC,CAAK,IAAM,EAC5D,EAEI,GAAI,KAAK,QAAQ,8BAA+B,CAC9C,MAAM2C,EAA8BC,GAAa,CAC3CH,EAAW,SAAW,QACxBG,EAAS,OAAOH,EAAW,KAAK,EACvBA,EAAW,OAAS,QAC7BG,EAAS,QAAQH,EAAW,IAAI,CAEpC,EACMI,EAAmB,IAAM,CAC7B,MAAMC,EAAU,KAAK9E,GAAmByE,EAAW,QAAUxE,EAAe,EAC5E0E,EAA2BG,CAAO,CACpC,EACMC,EAAe,KAAK/E,GAC1B,OAAQ+E,EAAa,OAAM,CACzB,IAAK,UACC/C,EAAM,YAAcX,EAAU,WAChCsD,EAA2BI,CAAY,EAEzC,MACF,IAAK,aACCN,EAAW,SAAW,SAAWA,EAAW,OAASM,EAAa,QACpEF,EAAgB,EAElB,MACF,IAAK,YACCJ,EAAW,SAAW,SAAWA,EAAW,QAAUM,EAAa,SACrEF,EAAgB,EAElB,KACV,CACI,CACA,OAAOJ,CACT,CACA,cAAe,CACb,MAAMvB,EAAa,KAAK9C,GAClBqE,EAAa,KAAK,aAAa,KAAKvE,GAAe,KAAK,OAAO,EAMrE,GALA,KAAKG,GAAsB,KAAKH,GAAc,MAC9C,KAAKI,GAAwB,KAAK,QAC9B,KAAKD,GAAoB,OAAS,SACpC,KAAKI,GAA4B,KAAKP,IAEpCsB,EAAoBiD,EAAYvB,CAAU,EAC5C,OAEF,KAAK9C,GAAiBqE,EACtB,MAAMO,EAAwB,IAAM,CAClC,GAAI,CAAC9B,EACH,MAAO,GAET,KAAM,CAAE,oBAAA+B,GAAwB,KAAK,QAC/BC,EAA2B,OAAOD,GAAwB,WAAaA,EAAmB,EAAKA,EACrG,GAAIC,IAA6B,OAAS,CAACA,GAA4B,CAAC,KAAKrE,GAAc,KACzF,MAAO,GAET,MAAMsE,EAAgB,IAAI,IACxBD,GAA4B,KAAKrE,EACzC,EACM,OAAI,KAAK,QAAQ,cACfsE,EAAc,IAAI,OAAO,EAEpB,OAAO,KAAK,KAAK/E,EAAc,EAAE,KAAMiC,GAAQ,CACpD,MAAM+C,EAAW/C,EAEjB,OADgB,KAAKjC,GAAegF,CAAQ,IAAMlC,EAAWkC,CAAQ,GACnDD,EAAc,IAAIC,CAAQ,CAC9C,CAAC,CACH,EACA,KAAKC,GAAQ,CAAE,UAAWL,EAAqB,CAAE,CAAE,CACrD,CACAzD,IAAe,CACb,MAAMS,EAAQ,KAAKlC,GAAQ,cAAa,EAAG,MAAM,KAAKA,GAAS,KAAK,OAAO,EAC3E,GAAIkC,IAAU,KAAK9B,GACjB,OAEF,MAAMmB,EAAY,KAAKnB,GACvB,KAAKA,GAAgB8B,EACrB,KAAK7B,GAA4B6B,EAAM,MACnC,KAAK,iBACPX,GAAW,eAAe,IAAI,EAC9BW,EAAM,YAAY,IAAI,EAE1B,CACA,eAAgB,CACd,KAAK,aAAY,EACb,KAAK,gBACP,KAAKhB,GAAa,CAEtB,CACAqE,GAAQC,EAAe,CACrBC,EAAc,MAAM,IAAM,CACpBD,EAAc,WAChB,KAAK,UAAU,QAASE,GAAa,CACnCA,EAAS,KAAKpF,EAAc,CAC9B,CAAC,EAEH,KAAKN,GAAQ,cAAa,EAAG,OAAO,CAClC,MAAO,KAAKI,GACZ,KAAM,wBACd,CAAO,CACH,CAAC,CACH,CACF,EACA,SAASuF,GAAkBzD,EAAOnC,EAAS,CACzC,OAAOyB,EAAezB,EAAQ,QAASmC,CAAK,IAAM,IAASA,EAAM,MAAM,OAAS,QAAU,EAAEA,EAAM,MAAM,SAAW,SAAWnC,EAAQ,eAAiB,GACzJ,CACA,SAASiB,EAAmBkB,EAAOnC,EAAS,CAC1C,OAAO4F,GAAkBzD,EAAOnC,CAAO,GAAKmC,EAAM,MAAM,OAAS,QAAUf,EAAce,EAAOnC,EAASA,EAAQ,cAAc,CACjI,CACA,SAASoB,EAAce,EAAOnC,EAAS6F,EAAO,CAC5C,GAAIpE,EAAezB,EAAQ,QAASmC,CAAK,IAAM,IAASL,EAAiB9B,EAAQ,UAAWmC,CAAK,IAAM,SAAU,CAC/G,MAAM2D,EAAQ,OAAOD,GAAU,WAAaA,EAAM1D,CAAK,EAAI0D,EAC3D,OAAOC,IAAU,UAAYA,IAAU,IAASjB,EAAQ1C,EAAOnC,CAAO,CACxE,CACA,MAAO,EACT,CACA,SAAS6B,GAAsBM,EAAOX,EAAWxB,EAASuB,EAAa,CACrE,OAAQY,IAAUX,GAAaC,EAAeF,EAAY,QAASY,CAAK,IAAM,MAAW,CAACnC,EAAQ,UAAYmC,EAAM,MAAM,SAAW,UAAY0C,EAAQ1C,EAAOnC,CAAO,CACzK,CACA,SAAS6E,EAAQ1C,EAAOnC,EAAS,CAC/B,OAAOyB,EAAezB,EAAQ,QAASmC,CAAK,IAAM,IAASA,EAAM,cAAcL,EAAiB9B,EAAQ,UAAWmC,CAAK,CAAC,CAC3H,CACA,SAASE,GAAsC0D,EAAUC,EAAkB,CACzE,MAAK,CAAArE,EAAoBoE,EAAS,iBAAgB,EAAIC,CAAgB,CAIxE,CCzcA,IAAIC,GAAmB,cAAcnG,EAAa,CAChDG,GACAM,GAAiB,OACjB2F,GACAC,GACA,YAAYpG,EAAQC,EAAS,CAC3B,MAAK,EACL,KAAKC,GAAUF,EACf,KAAK,WAAWC,CAAO,EACvB,KAAK,YAAW,EAChB,KAAKoG,GAAa,CACpB,CACA,aAAc,CACZ,KAAK,OAAS,KAAK,OAAO,KAAK,IAAI,EACnC,KAAK,MAAQ,KAAK,MAAM,KAAK,IAAI,CACnC,CACA,WAAWpG,EAAS,CAClB,MAAMuB,EAAc,KAAK,QACzB,KAAK,QAAU,KAAKtB,GAAQ,uBAAuBD,CAAO,EACrD2B,EAAoB,KAAK,QAASJ,CAAW,GAChD,KAAKtB,GAAQ,iBAAgB,EAAG,OAAO,CACrC,KAAM,yBACN,SAAU,KAAKiG,GACf,SAAU,IAClB,CAAO,EAEC3E,GAAa,aAAe,KAAK,QAAQ,aAAe8E,EAAQ9E,EAAY,WAAW,IAAM8E,EAAQ,KAAK,QAAQ,WAAW,EAC/H,KAAK,MAAK,EACD,KAAKH,IAAkB,MAAM,SAAW,WACjD,KAAKA,GAAiB,WAAW,KAAK,OAAO,CAEjD,CACA,eAAgB,CACT,KAAK,gBACR,KAAKA,IAAkB,eAAe,IAAI,CAE9C,CACA,iBAAiBI,EAAQ,CACvB,KAAKF,GAAa,EAClB,KAAKZ,GAAQc,CAAM,CACrB,CACA,kBAAmB,CACjB,OAAO,KAAK/F,EACd,CACA,OAAQ,CACN,KAAK2F,IAAkB,eAAe,IAAI,EAC1C,KAAKA,GAAmB,OACxB,KAAKE,GAAa,EAClB,KAAKZ,GAAO,CACd,CACA,OAAOe,EAAWvG,EAAS,CACzB,YAAKmG,GAAiBnG,EACtB,KAAKkG,IAAkB,eAAe,IAAI,EAC1C,KAAKA,GAAmB,KAAKjG,GAAQ,iBAAgB,EAAG,MAAM,KAAKA,GAAS,KAAK,OAAO,EACxF,KAAKiG,GAAiB,YAAY,IAAI,EAC/B,KAAKA,GAAiB,QAAQK,CAAS,CAChD,CACAH,IAAgB,CACd,MAAM3C,EAAQ,KAAKyC,IAAkB,OAASM,GAAe,EAC7D,KAAKjG,GAAiB,CACpB,GAAGkD,EACH,UAAWA,EAAM,SAAW,UAC5B,UAAWA,EAAM,SAAW,UAC5B,QAASA,EAAM,SAAW,QAC1B,OAAQA,EAAM,SAAW,OACzB,OAAQ,KAAK,OACb,MAAO,KAAK,KAClB,CACE,CACA+B,GAAQc,EAAQ,CACdZ,EAAc,MAAM,IAAM,CACxB,GAAI,KAAKS,IAAkB,KAAK,aAAY,EAAI,CAC9C,MAAMI,EAAY,KAAKhG,GAAe,UAChCkG,EAAU,KAAKlG,GAAe,QAChC+F,GAAQ,OAAS,WACnB,KAAKH,GAAe,YAAYG,EAAO,KAAMC,EAAWE,CAAO,EAC/D,KAAKN,GAAe,YAAYG,EAAO,KAAM,KAAMC,EAAWE,CAAO,GAC5DH,GAAQ,OAAS,UAC1B,KAAKH,GAAe,UAAUG,EAAO,MAAOC,EAAWE,CAAO,EAC9D,KAAKN,GAAe,YAClB,OACAG,EAAO,MACPC,EACAE,CACZ,EAEM,CACA,KAAK,UAAU,QAASd,GAAa,CACnCA,EAAS,KAAKpF,EAAc,CAC9B,CAAC,CACH,CAAC,CACH,CACF,EC7FImG,GAAqBC,EAAAA,cAAoB,EAAK,EAC9CC,GAAiB,IAAMC,EAAAA,WAAiBH,EAAkB,EACpCA,GAAmB,SCD7C,SAASI,IAAc,CACrB,IAAIC,EAAU,GACd,MAAO,CACL,WAAY,IAAM,CAChBA,EAAU,EACZ,EACA,MAAO,IAAM,CACXA,EAAU,EACZ,EACA,QAAS,IACAA,CAEb,CACA,CACA,IAAIC,GAAiCL,EAAAA,cAAoBG,IAAa,EAClEG,GAA6B,IAAMJ,EAAAA,WAAiBG,EAA8B,ECflFE,GAAkC,CAAClH,EAASmH,IAAuB,EACjEnH,EAAQ,UAAYA,EAAQ,cAAgBA,EAAQ,iCACjDmH,EAAmB,YACtBnH,EAAQ,aAAe,IAG7B,EACIoH,GAA8BD,GAAuB,CACvDE,EAAAA,UAAgB,IAAM,CACpBF,EAAmB,WAAU,CAC/B,EAAG,CAACA,CAAkB,CAAC,CACzB,EACIG,GAAc,CAAC,CACjB,OAAAlF,EACA,mBAAA+E,EACA,aAAAI,EACA,MAAApF,EACA,SAAAqF,CACF,IACSpF,EAAO,SAAW,CAAC+E,EAAmB,QAAO,GAAM,CAAC/E,EAAO,YAAcD,IAAUqF,GAAYpF,EAAO,OAAS,QAAUqF,GAAiBF,EAAc,CAACnF,EAAO,MAAOD,CAAK,CAAC,GCtBlLuF,GAAwBjF,GAAqB,CAC/C,GAAIA,EAAiB,SAAU,CAE7B,MAAMkF,EAAS7B,GAAUA,IAAU,SAAWA,EAAQ,KAAK,IAAIA,GAAS,IAAsB,GAAoB,EAC5G8B,EAAoBnF,EAAiB,UAC3CA,EAAiB,UAAY,OAAOmF,GAAsB,WAAa,IAAIC,IAASF,EAAMC,EAAkB,GAAGC,CAAI,CAAC,EAAIF,EAAMC,CAAiB,EAC3I,OAAOnF,EAAiB,QAAW,WACrCA,EAAiB,OAAS,KAAK,IAC7BA,EAAiB,OACjB,GACR,EAEE,CACF,EACIqF,GAAY,CAAC1F,EAAQ2F,IAAgB3F,EAAO,WAAaA,EAAO,YAAc,CAAC2F,EAC/EC,GAAgB,CAACvF,EAAkBL,IAAWK,GAAkB,UAAYL,EAAO,UACnF6F,GAAkB,CAACxF,EAAkBsD,EAAUoB,IAAuBpB,EAAS,gBAAgBtD,CAAgB,EAAE,MAAM,IAAM,CAC/H0E,EAAmB,WAAU,CAC/B,CAAC,ECDD,SAASe,GAAalI,EAASmI,EAAUC,EAAa,CAQpD,MAAML,EAAcnB,GAAA,EACdO,EAAqBF,GAAA,EACrBlH,EAASsI,EAA0B,EACnC5F,EAAmB1C,EAAO,oBAAoBC,CAAO,EAC3DD,EAAO,oBAAoB,SAAS,4BAClC0C,CAAA,EASFA,EAAiB,mBAAqBsF,EAAc,cAAgB,aACpEL,GAAqBjF,CAAgB,EACrCyE,GAAgCzE,EAAkB0E,CAAkB,EACpEC,GAA2BD,CAAkB,EAC7C,MAAMmB,EAAkB,CAACvI,EAAO,gBAAgB,IAAI0C,EAAiB,SAAS,EACxE,CAACsD,CAAQ,EAAIwC,EAAAA,SACjB,IAAM,IAAIJ,EACRpI,EACA0C,CAAA,CACF,EAEIL,EAAS2D,EAAS,oBAAoBtD,CAAgB,EACtD+F,EAAkB,CAACT,GAAe/H,EAAQ,aAAe,GAgB/D,GAfAyI,EAAAA,qBACEC,EAAAA,YACGC,GAAkB,CACjB,MAAMC,EAAcJ,EAAkBzC,EAAS,UAAUL,EAAc,WAAWiD,CAAa,CAAC,EAAI/F,EACpG,OAAAmD,EAAS,aAAA,EACF6C,CACT,EACA,CAAC7C,EAAUyC,CAAe,CAAA,EAE5B,IAAMzC,EAAS,iBAAA,EACf,IAAMA,EAAS,iBAAA,CAAiB,EAElCsB,EAAAA,UAAgB,IAAM,CACpBtB,EAAS,WAAWtD,CAAgB,CACtC,EAAG,CAACA,EAAkBsD,CAAQ,CAAC,EAC3BiC,GAAcvF,EAAkBL,CAAM,EACxC,MAAM6F,GAAgBxF,EAAkBsD,EAAUoB,CAAkB,EAEtE,GAAIG,GAAY,CACd,OAAAlF,EACA,mBAAA+E,EACA,aAAc1E,EAAiB,aAC/B,MAAO1C,EAAO,cAAA,EAAgB,IAAI0C,EAAiB,SAAS,EAC5D,SAAUA,EAAiB,QAAA,CAC5B,EACC,MAAML,EAAO,MAGf,OAAArC,EAAO,oBAAoB,SAAS,2BAClC0C,EACAL,CAAA,EAEEK,EAAiB,+BAAiC,CAACK,GAAYgF,GAAU1F,EAAQ2F,CAAW,IAC9EO,EAEdL,GAAgBxF,EAAkBsD,EAAUoB,CAAkB,EAG9DpH,EAAO,cAAA,EAAgB,IAAI0C,EAAiB,SAAS,GAAG,UAEjD,MAAMG,CAAI,EAAE,QAAQ,IAAM,CACjCmD,EAAS,aAAA,CACX,CAAC,EAEKtD,EAAiB,oBAAqDL,EAA/B2D,EAAS,YAAY3D,CAAM,CAC5E,CC9FA,SAASyG,GAAS7I,EAASoI,EAAa,CACtC,OAAOF,GAAalI,EAASH,EAA0B,CACzD,CCIA,SAASiJ,GAAY9I,EAASoI,EAAa,CACzC,MAAMrI,EAASsI,EAA0B,EACnC,CAACtC,CAAQ,EAAIwC,EAAAA,SACjB,IAAM,IAAItC,GACRlG,EACAC,CACN,CACA,EACEqH,EAAAA,UAAgB,IAAM,CACpBtB,EAAS,WAAW/F,CAAO,CAC7B,EAAG,CAAC+F,EAAU/F,CAAO,CAAC,EACtB,MAAMoC,EAASqG,EAAAA,qBACbC,EAAAA,YACGC,GAAkB5C,EAAS,UAAUL,EAAc,WAAWiD,CAAa,CAAC,EAC7E,CAAC5C,CAAQ,CACf,EACI,IAAMA,EAAS,iBAAgB,EAC/B,IAAMA,EAAS,iBAAgB,CACnC,EACQgD,EAASL,EAAAA,YACb,CAACnC,EAAWyC,IAAkB,CAC5BjD,EAAS,OAAOQ,EAAWyC,CAAa,EAAE,MAAMpG,CAAI,CACtD,EACA,CAACmD,CAAQ,CACb,EACE,GAAI3D,EAAO,OAASqF,GAAiB1B,EAAS,QAAQ,aAAc,CAAC3D,EAAO,KAAK,CAAC,EAChF,MAAMA,EAAO,MAEf,MAAO,CAAE,GAAGA,EAAQ,OAAA2G,EAAQ,YAAa3G,EAAO,MAAM,CACxD,CC/BO,SAAS6G,IAAkB,CAChC,KAAM,CAACC,EAAaC,CAAc,EAAIC,EAAAA,SAAyB,CAAA,CAAE,EAC3D,CAAC1E,EAAW2E,CAAY,EAAID,EAAAA,SAAS,EAAI,EAE/CE,OAAAA,EAAAA,UAAU,IAAM,CACd,IAAIC,EACAC,EAEJ,MAAMC,EAAiB,SAAY,CACjC,GAAI,CAEF,KAAM,CAAE,KAAM,CAAE,KAAAC,CAAA,GAAW,MAAMC,EAAS,KAAK,QAAA,EAC/C,GAAI,CAACD,EAAM,OAGX,MAAMC,EACH,KAAK,eAAe,EACpB,OAAO,CACN,QAASD,EAAK,GACd,UAAW,IAAI,KAAA,EAAO,YAAA,EACtB,UAAW,EAAA,CACZ,EAGH,MAAME,EAAiB,IAAI,KAAK,KAAK,MAAQ,EAAI,GAAK,GAAI,EAAE,YAAA,EAEtD,CAAE,KAAMC,EAAc,MAAA7F,GAAU,MAAM2F,EACzC,KAAK,eAAe,EACpB,OAAO,+BAA+B,EACtC,IAAI,YAAaC,CAAc,EAC/B,GAAG,YAAa,EAAI,EAEvB,GAAI5F,EAAO,CACT,QAAQ,MAAM,gCAAiCA,CAAK,EACpD,MACF,CAGA,MAAM8F,GAASD,GAAgB,CAAA,GAAI,IAAIE,IAAM,CAC3C,OAAQA,EAAE,QACV,SAAU,IAAI,KAAKA,EAAE,SAAS,EAC9B,SAAUA,EAAE,SAAA,EACZ,EAEFZ,EAAeW,CAAK,EACpBT,EAAa,EAAK,CACpB,OAASrF,EAAO,CACd,QAAQ,MAAM,2BAA4BA,CAAK,EAC/CqF,EAAa,EAAK,CACpB,CACF,EAqDA,OAlDsB,SAAY,CAChC,KAAM,CAAE,KAAM,CAAE,KAAAK,CAAA,GAAW,MAAMC,EAAS,KAAK,QAAA,EAC/C,GAAI,CAACD,EAAM,CACTL,EAAa,EAAK,EAClB,MACF,CAGAG,EAAkBG,EAAS,QAAQ,gBAAiB,CAClD,OAAQ,CACN,SAAU,CACR,IAAKD,EAAK,EAAA,CACZ,CACF,CACD,EAGDF,EACG,GAAG,WAAY,CAAE,MAAO,MAAA,EAAU,IAAM,CACvC,MAAM/F,EAAQ+F,EAAgB,cAAA,EACxBM,EAAQ,OAAO,OAAOrG,CAAK,EAAE,KAAA,EAAO,IAAKuG,IAAmB,CAChE,OAAQA,EAAS,QACjB,aAAc,KACd,SAAU,EAAA,EACV,EACFb,EAAeW,CAAK,EACpBT,EAAa,EAAK,CACpB,CAAC,EACA,GAAG,WAAY,CAAE,MAAO,MAAA,EAAU,CAAC,CAAE,IAAA7G,EAAK,aAAAyH,KAAmB,CAC5D,QAAQ,IAAI,eAAgBzH,EAAKyH,CAAY,CAC/C,CAAC,EACA,GAAG,WAAY,CAAE,MAAO,OAAA,EAAW,CAAC,CAAE,IAAAzH,EAAK,cAAA0H,KAAoB,CAC9D,QAAQ,IAAI,aAAc1H,EAAK0H,CAAa,CAC9C,CAAC,EACA,UAAU,MAAOhG,GAAW,CACvBA,IAAW,cACb,MAAMsF,EAAgB,MAAM,CAC1B,QAASE,EAAK,GACd,UAAW,IAAI,KAAA,EAAO,YAAA,CAAY,CACnC,CAEL,CAAC,EAGHH,EAAa,YAAYE,EAAgB,GAAK,EAG9CA,EAAA,CACF,GAEA,EAGO,IAAM,CACPF,GACF,cAAcA,CAAU,EAEtBC,GACFA,EAAgB,YAAA,CAEpB,CACF,EAAG,CAAA,CAAE,EAEE,CACL,YAAAN,EACA,YAAaA,EAAY,OACzB,UAAAxE,CAAA,CAEJ,CC5HO,MAAMyF,EAAW,CACtB,IAAK,CAAC,OAAO,EACb,MAAO,IAAM,CAAC,GAAGA,EAAS,IAAK,MAAM,EACrC,KAAOC,GAAiC,CAAC,GAAGD,EAAS,MAAA,EAAS,CAAE,QAAAC,EAAS,EACzE,QAAS,IAAM,CAAC,GAAGD,EAAS,IAAK,QAAQ,EACzC,OAASE,GAAe,CAAC,GAAGF,EAAS,QAAA,EAAWE,CAAE,EAClD,aAAeA,GAAe,CAAC,GAAGF,EAAS,OAAOE,CAAE,EAAG,cAAc,CACvE,EAGO,SAASC,IAAW,CACzB,KAAM,CAAE,KAAAZ,CAAA,EAASa,EAAA,EAEjB,OAAO1B,GAAS,CACd,SAAUsB,EAAS,MAAA,EACnB,QAAS,SAAY,CACnB,QAAQ,IAAI,oCAAoC,EAChD,MAAMK,EAAQ,MAAMC,EAAgB,SAAA,EACpC,eAAQ,IAAI,mBAAoBD,EAAM,MAAM,EACrCA,CACT,EACA,UAAW,EAAI,GAAK,IACpB,UAAW,EAAI,GAAK,IACpB,QAAS,CAAC,CAACd,CAAA,CACZ,CACH,CAyBO,SAASgB,IAAc,CAC5B,MAAMtC,EAAcC,EAAA,EACd,CAAE,KAAAqB,CAAA,EAASa,EAAA,EAEjB,OAAOzB,GAAY,CACjB,WAAY,MAAO6B,GAAmB,CACpC,QAAQ,IAAI,mBAAoBA,CAAM,EACtC,MAAMF,EAAgB,SAASE,CAAM,CACvC,EACA,SAAU,MAAOA,GAAW,CAE1B,MAAMvC,EAAY,cAAc,CAAE,SAAU+B,EAAS,MAAA,EAAS,EAG9D,MAAMS,EAAgBxC,EAAY,aAAa+B,EAAS,OAAO,EAG/D,OAAA/B,EAAY,aAAa+B,EAAS,MAAA,EAAUU,GACrCA,GACEA,EAAI,IAAKC,GACdA,EAAK,KAAOH,EACR,CACE,GAAGG,EACH,SAAU,GACV,eAAgB,KAAK,IAAIA,EAAK,eAAiB,EAAGA,EAAK,UAAU,CAAA,EAEnEA,CAAA,CAEP,EAEM,CAAE,cAAAF,CAAA,CACX,EACA,QAAS,CAAC5G,EAAO2G,EAAQlE,IAAY,CACnC,QAAQ,MAAM,qBAAsBzC,CAAK,EAGrCyC,GAAS,eACX2B,EAAY,aAAa+B,EAAS,MAAA,EAAS1D,EAAQ,aAAa,EAGlEsE,EAAM,MAAM,sBAAuB,CACjC,YAAa,wBAAA,CACd,CACH,EACA,UAAW,CAACC,EAAGL,IAAW,CACxB,QAAQ,IAAI,8BAA+BA,CAAM,EAGjDvC,EAAY,kBAAkB,CAAE,SAAU+B,EAAS,aAAaQ,CAAM,EAAG,EAEzEI,EAAM,QAAQ,eAAgB,CAC5B,YAAa,8BAAA,CACd,CACH,CAAA,CACD,CACH,CAGO,SAASE,IAAe,CAC7B,MAAM7C,EAAcC,EAAA,EAEpB,OAAOS,GAAY,CACjB,WAAY,MAAO6B,GAAmB,CACpC,QAAQ,IAAI,mBAAoBA,CAAM,EACtC,MAAMF,EAAgB,UAAUE,CAAM,CACxC,EACA,SAAU,MAAOA,GAAW,CAE1B,MAAMvC,EAAY,cAAc,CAAE,SAAU+B,EAAS,MAAA,EAAS,EAG9D,MAAMS,EAAgBxC,EAAY,aAAa+B,EAAS,OAAO,EAG/D,OAAA/B,EAAY,aAAa+B,EAAS,MAAA,EAAUU,GACrCA,GACEA,EAAI,IAAKC,GACdA,EAAK,KAAOH,EACR,CACE,GAAGG,EACH,SAAU,GACV,eAAgB,KAAK,IAAIA,EAAK,eAAiB,EAAG,CAAC,CAAA,EAErDA,CAAA,CAEP,EAEM,CAAE,cAAAF,CAAA,CACX,EACA,QAAS,CAAC5G,EAAO2G,EAAQlE,IAAY,CACnC,QAAQ,MAAM,sBAAuBzC,CAAK,EAGtCyC,GAAS,eACX2B,EAAY,aAAa+B,EAAS,MAAA,EAAS1D,EAAQ,aAAa,EAGlEsE,EAAM,MAAM,uBAAwB,CAClC,YAAa,wBAAA,CACd,CACH,EACA,UAAW,CAACC,EAAGL,IAAW,CACxB,QAAQ,IAAI,4BAA6BA,CAAM,EAG/CvC,EAAY,kBAAkB,CAAE,SAAU+B,EAAS,aAAaQ,CAAM,EAAG,EAEzEI,EAAM,QAAQ,yBAA0B,CACtC,YAAa,uBAAA,CACd,CACH,CAAA,CACD,CACH,CCrKO,SAASG,IAAmB,CACjC,OACEC,EAAAA,IAACC,GAAA,CAAK,UAAU,SACd,SAAAD,EAAAA,IAACE,GAAA,CAAY,UAAU,MACrB,SAAAC,EAAAA,KAAC,MAAA,CAAI,UAAU,YAEb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,mCACb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,mBACb,SAAA,CAAAH,EAAAA,IAACI,EAAA,CAAS,UAAU,WAAA,CAAY,EAChCJ,EAAAA,IAACI,EAAA,CAAS,UAAU,WAAA,CAAY,CAAA,EAClC,EACAJ,EAAAA,IAACI,EAAA,CAAS,UAAU,UAAA,CAAW,CAAA,EACjC,EAGAD,EAAAA,KAAC,MAAA,CAAI,UAAU,YACb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,0BACb,SAAA,CAAAH,EAAAA,IAACI,EAAA,CAAS,UAAU,SAAA,CAAU,EAC9BJ,EAAAA,IAACI,EAAA,CAAS,UAAU,WAAA,CAAY,CAAA,EAClC,EACAD,EAAAA,KAAC,MAAA,CAAI,UAAU,0BACb,SAAA,CAAAH,EAAAA,IAACI,EAAA,CAAS,UAAU,SAAA,CAAU,EAC9BJ,EAAAA,IAACI,EAAA,CAAS,UAAU,WAAA,CAAY,CAAA,EAClC,EACAD,EAAAA,KAAC,MAAA,CAAI,UAAU,0BACb,SAAA,CAAAH,EAAAA,IAACI,EAAA,CAAS,UAAU,SAAA,CAAU,EAC9BJ,EAAAA,IAACI,EAAA,CAAS,UAAU,WAAA,CAAY,CAAA,CAAA,CAClC,CAAA,EACF,EAGAJ,EAAAA,IAACI,EAAA,CAAS,UAAU,YAAA,CAAa,EACjCJ,EAAAA,IAACI,EAAA,CAAS,UAAU,WAAA,CAAY,EAGhCD,EAAAA,KAAC,MAAA,CAAI,UAAU,yCACb,SAAA,CAAAH,EAAAA,IAACI,EAAA,CAAS,UAAU,UAAA,CAAW,EAC/BJ,EAAAA,IAACI,EAAA,CAAS,UAAU,UAAA,CAAW,CAAA,CAAA,CACjC,CAAA,CAAA,CACF,EACF,EACF,CAEJ,CChCA,SAASC,GAAe,CACtB,KAAAV,EACA,SAAAW,EACA,YAAAC,EACA,UAAAhH,CACF,EAKG,CACD,MAAMiH,EAAmBC,GAAwB,CAC/CA,EAAE,gBAAA,EACFF,EAAYZ,EAAK,EAAE,CACrB,EAEMe,EAAkB,IAAM,CAC5BJ,EAAA,CACF,EAGMK,EAAmB,IACnBhB,EAAK,WAAa,QACbK,EAAAA,IAAC,OAAA,CAAK,UAAU,mIAAmI,SAAA,QAAK,EACtJL,EAAK,WAAa,WACpBK,EAAAA,IAAC,OAAA,CAAK,UAAU,2HAA2H,SAAA,WAAQ,EAErJ,KAGT,OACEG,EAAAA,KAAC,MAAA,CACC,UAAU,+FACV,QAASO,EAET,SAAA,CAAAP,EAAAA,KAAC,MAAA,CAAI,UAAU,wCACb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,cACb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,+BACb,SAAA,CAAAH,EAAAA,IAAC,KAAA,CAAG,UAAU,wBAAyB,SAAAL,EAAK,MAAM,EACjDgB,EAAA,CAAiB,EACpB,EACAX,EAAAA,IAAC,IAAA,CAAE,UAAU,gCAAiC,WAAK,KAAA,CAAM,CAAA,EAC3D,EACAG,EAAAA,KAAC,MAAA,CAAI,UAAU,2BACb,SAAA,CAAAH,EAAAA,IAAC,MAAA,CAAI,UAAU,sBAAuB,SAAAL,EAAK,KAAK,EAChDQ,EAAAA,KAAC,MAAA,CAAI,UAAU,gCACZ,SAAA,CAAAR,EAAK,eAAe,IAAEA,EAAK,WAAW,UAAA,CAAA,CACzC,CAAA,CAAA,CACF,CAAA,EACF,EAEAQ,EAAAA,KAAC,MAAA,CAAI,UAAU,oBACb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,0BACb,SAAA,CAAAH,EAAAA,IAACY,GAAA,CAAO,UAAU,+BAAA,CAAgC,EAClDZ,EAAAA,IAAC,OAAA,CAAM,SAAAL,EAAK,QAAA,CAAS,CAAA,EACvB,EACAQ,EAAAA,KAAC,MAAA,CAAI,UAAU,0BACb,SAAA,CAAAH,EAAAA,IAACa,GAAA,CAAM,UAAU,+BAAA,CAAgC,SAChD,OAAA,CAAM,SAAA,CAAAlB,EAAK,eAAe,IAAEA,EAAK,WAAW,UAAA,CAAA,CAAQ,CAAA,EACvD,EACCA,EAAK,UACJQ,OAAC,MAAA,CAAI,UAAU,0BACb,SAAA,CAAAH,EAAAA,IAAC,OAAA,CAAK,UAAU,wBAAwB,SAAA,KAAE,EAC1CA,EAAAA,IAAC,OAAA,CAAM,SAAAL,EAAK,QAAA,CAAS,CAAA,EACvB,EAEFQ,EAAAA,KAAC,MAAA,CAAI,UAAU,0BACb,SAAA,CAAAH,EAAAA,IAACc,GAAA,CAAM,UAAU,+BAAA,CAAgC,SAChD,OAAA,CAAM,SAAA,CAAAnB,EAAK,KAAK,OAAKoB,GAAiBpB,EAAK,IAAI,CAAA,CAAA,CAAE,CAAA,CAAA,CACpD,CAAA,EACF,EAEAK,EAAAA,IAAC,IAAA,CAAE,UAAU,qCAAsC,WAAK,YAAY,EAEpEG,EAAAA,KAAC,MAAA,CAAI,UAAU,yCACZ,SAAA,CAAAR,EAAK,eACH,OAAA,CAAK,UAAU,yGAAyG,SAAA,UAAA,CAEzH,QAEC,MAAA,CAAA,CAAI,EAGPK,EAAAA,IAAC,SAAA,CACC,QAASQ,EACT,SAAUjH,EACV,UAAW,2DACTA,EACI,gCACAoG,EAAK,SACH,uIACA,wDACR,GAEC,SAAApG,EAAY,MAASoG,EAAK,SAAW,QAAU,MAAA,CAAA,CAClD,CAAA,CACF,CAAA,CAAA,CAAA,CAGN,CAEO,SAASqB,IAAa,CAC3B,MAAMC,EAAWC,GAAA,EACX,CAAE,KAAA3C,CAAA,EAASa,EAAA,EACX,CAAC+B,EAAYC,CAAa,EAAInD,EAAAA,SAAS,EAAK,EAC5C,CAACoD,EAAUC,CAAW,EAAIrD,EAAAA,SAAS,EAAK,EAClBsD,EAAAA,QAAQ,IAAMhD,GAAM,aAAa,QAAU,CAAA,EAAI,CAACA,CAAI,CAAC,EACjF,KAAM,CAAE,YAAAiD,EAAa,UAAWC,CAAA,EAAoB3D,GAAA,EAG9C,CAAE,KAAMuB,EAAQ,CAAA,EAAI,UAAA9F,EAAW,MAAAV,EAAO,QAAA6I,CAAA,EAAYvC,GAAA,EAGlDwC,EAAmBpC,GAAA,EACnBqC,EAAoB9B,GAAA,EAEpB+B,EAAmBrC,GAAmB,CAC7BH,EAAM,KAAKyC,GAAKA,EAAE,KAAOtC,CAAM,GAClC,SACRoC,EAAkB,OAAOpC,CAAM,EAE/BmC,EAAiB,OAAOnC,CAAM,CAElC,EAEMuC,EAAqBJ,EAAiB,WAAaC,EAAkB,UAGrEI,EAAQT,EAAAA,QAAQ,IAAM,CAC1B,MAAMU,MAAU,KACVC,EAAc,IAAI,KAAKD,CAAG,EAChCC,EAAY,QAAQD,EAAI,QAAA,EAAYA,EAAI,QAAQ,EAChDC,EAAY,SAAS,EAAG,EAAG,EAAG,CAAC,EAE/B,MAAMC,EAAY,IAAI,KAAKD,CAAW,EACtCC,EAAU,QAAQD,EAAY,QAAA,EAAY,CAAC,EAC3CC,EAAU,SAAS,GAAI,GAAI,GAAI,GAAG,EAGlC,MAAMC,EAAgB/C,EAAM,OAAOM,GAAQ,CACzC,MAAM0C,EAAW,IAAI,KAAK1C,EAAK,IAAI,EACnC,OAAO0C,GAAYH,GAAeG,GAAYF,CAChD,CAAC,EAAE,OAEH,MAAO,CACL,WAAY9C,EAAM,OAClB,cAAA+C,EACA,cAAeZ,CAAA,CAEnB,EAAG,CAACnC,EAAOmC,CAAW,CAAC,EAsCjBc,EAAgB,SAAY,CAChC,GAAI,CAAAnB,EAEJ,CAAAG,EAAY,EAAK,EACjBF,EAAc,EAAI,EAClB,GAAI,CACF,MAAMM,EAAA,CACR,QAAA,CACEN,EAAc,EAAK,CACrB,EACF,EAEMmB,EAAoB/C,GAAmB,CAC3CyB,EAAS,SAASzB,CAAM,EAAE,CAC5B,EAEMgD,EAAmB,IAAM,CAC7BvB,EAAS,SAAS,CACpB,EAGMwB,EAAcpD,EACjB,IAAIM,GAAQ,CACX,MAAM0C,EAAW,IAAI,KAAK1C,EAAK,IAAI,EAC7B+C,MAAY,KACZC,EAAW,IAAI,KAAKD,CAAK,EAC/BC,EAAS,QAAQA,EAAS,QAAA,EAAY,CAAC,EAGvC,IAAIC,EAAW,SACXC,EAAYR,EAAS,QAAA,EAEzB,OAAIA,EAAS,aAAA,IAAmBK,EAAM,gBACpCE,EAAW,QACXC,EAAY,GACHR,EAAS,aAAA,IAAmBM,EAAS,iBAC9CC,EAAW,WACXC,EAAY,GAGP,CACL,GAAGlD,EACH,SAAAiD,EACA,UAAAC,EACA,SAAAR,CAAA,CAEJ,CAAC,EACA,KAAK,CAACS,EAAGC,IAEJD,EAAE,YAAcC,EAAE,UACbD,EAAE,UAAYC,EAAE,UAGlBD,EAAE,SAAS,QAAA,EAAYC,EAAE,SAAS,QAAA,CAC1C,EAGH,OAAIxJ,GAAa8F,EAAM,SAAW,QAE7B,MAAA,CAAI,UAAU,8DACb,SAAAc,EAAAA,KAAC,MAAA,CAAI,UAAU,cACb,SAAA,CAAAH,EAAAA,IAAC,MAAA,CAAI,UAAU,4EAAA,CAA6E,EAC5FA,EAAAA,IAAC,IAAA,CAAE,UAAU,wBAAwB,SAAA,kBAAA,CAAgB,CAAA,CAAA,CACvD,CAAA,CACF,EAKAqB,GAAYhC,EAAM,SAAW,QAE5B,MAAA,CAAI,UAAU,8DACb,SAAAc,EAAAA,KAAC,MAAA,CAAI,UAAU,wBACb,SAAA,CAAAH,EAAAA,IAAC,IAAA,CAAE,UAAU,wBAAwB,SAAA,oDAAiD,EACtFG,EAAAA,KAAC6C,EAAA,CAAO,QAASV,EAAe,QAAQ,UACtC,SAAA,CAAAtC,EAAAA,IAACiD,EAAA,CAAU,UAAU,cAAA,CAAe,EAAE,YAAA,CAAA,CACxC,CAAA,CAAA,CACF,CAAA,CACF,EAKFjD,EAAAA,IAAC,MAAA,CAAI,UAAU,6BACb,SAAAA,EAAAA,IAAC,MAAA,CAAI,UAAU,+BACb,SAAAG,EAAAA,KAAC,MAAA,CAAI,UAAU,yCAEb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,gBAEb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,yCACb,SAAA,CAAAA,OAAC,MAAA,CACC,SAAA,CAAAH,EAAAA,IAAC,KAAA,CAAG,UAAU,iCAAiC,SAAA,UAAO,EACtDA,EAAAA,IAAC,IAAA,CAAE,UAAU,wBAAwB,SAAA,qBAAA,CAAmB,CAAA,EAC1D,EACAG,EAAAA,KAAC6C,EAAA,CAAO,QAASR,EAAkB,UAAU,iBAC3C,SAAA,CAAAxC,EAAAA,IAACkD,EAAA,CAAK,UAAU,cAAA,CAAe,EAAE,aAAA,EAEnC,EACAlD,EAAAA,IAACgD,EAAA,CACC,QAASR,EACT,KAAK,OACL,UAAU,YACV,aAAW,kBAEX,SAAAxC,EAAAA,IAACkD,EAAA,CAAK,UAAU,SAAA,CAAU,CAAA,CAAA,CAC5B,EACF,EAGA/C,EAAAA,KAAC,MAAA,CAAI,UAAU,wCACb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,qCACb,SAAA,CAAAH,EAAAA,IAAC,MAAA,CAAI,UAAU,kCAAmC,SAAAgC,EAAM,WAAW,EACnEhC,EAAAA,IAAC,MAAA,CAAI,UAAU,gCAAgC,SAAA,cAAA,CAAY,CAAA,EAC7D,EACAG,EAAAA,KAAC,MAAA,CAAI,UAAU,qCACb,SAAA,CAAAH,MAAC,OAAI,UAAU,kCACZ,SAAAyB,EAAkB,MAAQO,EAAM,cACnC,EACAhC,EAAAA,IAAC,MAAA,CAAI,UAAU,gCAAgC,SAAA,gBAAA,CAAc,CAAA,EAC/D,EACAG,EAAAA,KAAC,MAAA,CAAI,UAAU,qCACb,SAAA,CAAAH,EAAAA,IAAC,MAAA,CAAI,UAAU,kCAAmC,SAAAgC,EAAM,cAAc,EACtEhC,EAAAA,IAAC,MAAA,CAAI,UAAU,gCAAgC,SAAA,WAAA,CAAS,CAAA,CAAA,CAC1D,CAAA,EACF,EAGAG,EAAAA,KAAC,MAAA,CAAI,UAAU,yCACb,SAAA,CAAAH,EAAAA,IAAC,KAAA,CAAG,UAAU,mCAAmC,SAAA,iBAAc,EAC/DG,EAAAA,KAAC6C,EAAA,CACC,QAAQ,UACR,KAAK,KACL,QAASV,EACT,SAAU/I,EACV,UAAU,iBAEV,SAAA,CAAAyG,MAACiD,GAAU,UAAW,gBAAgB1J,EAAY,eAAiB,EAAE,GAAI,EAAE,SAAA,CAAA,CAAA,EAG7EyG,EAAAA,IAACgD,EAAA,CACC,QAAQ,QACR,KAAK,KACL,QAASV,EACT,SAAU/I,EACV,UAAU,YACV,aAAW,gBAEX,eAAC0J,EAAA,CAAU,UAAW,WAAW1J,EAAY,eAAiB,EAAE,EAAA,CAAI,CAAA,CAAA,CACtE,EACF,EAEAyG,EAAAA,IAAC,MAAA,CAAI,UAAU,uDACZ,SAAAzG,EAEC,MAAM,KAAK,CAAE,OAAQ,EAAG,EAAE,IAAI,CAACsG,EAAGsD,IAChCnD,EAAAA,IAACD,GAAA,CAAA,EAAsBoD,CAAO,CAC/B,EAEDV,EAAY,IAAK9C,SACd,MAAA,CACC,SAAAK,EAAAA,IAACK,GAAA,CACC,KAAAV,EACA,SAAU,IAAM4C,EAAiB5C,EAAK,EAAE,EACxC,YAAakC,EACb,UAAWE,CAAA,CAAA,GALLpC,EAAK,EAOf,CACD,CAAA,CAEL,CAAA,EACF,QAGC,MAAA,CAAI,UAAU,gCACb,SAAAQ,EAAAA,KAAC,MAAA,CAAI,UAAU,sCACb,SAAA,CAAAH,EAAAA,IAAC,KAAA,CAAG,UAAU,6BAA6B,SAAA,cAAW,EACtDG,EAAAA,KAAC,MAAA,CAAI,UAAU,YACb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,oCACb,SAAA,CAAAH,EAAAA,IAAC,OAAA,CAAK,UAAU,wBAAwB,SAAA,eAAY,EACpDA,EAAAA,IAAC,OAAA,CAAK,UAAU,gBAAiB,WAAM,UAAA,CAAW,CAAA,EACpD,EACAG,EAAAA,KAAC,MAAA,CAAI,UAAU,oCACb,SAAA,CAAAH,EAAAA,IAAC,OAAA,CAAK,UAAU,wBAAwB,SAAA,iBAAc,QACrD,OAAA,CAAK,UAAU,gBACb,SAAAyB,EAAkB,MAAQO,EAAM,aAAA,CACnC,CAAA,EACF,EACA7B,EAAAA,KAAC,MAAA,CAAI,UAAU,oCACb,SAAA,CAAAH,EAAAA,IAAC,OAAA,CAAK,UAAU,wBAAwB,SAAA,YAAS,EACjDA,EAAAA,IAAC,OAAA,CAAK,UAAU,gBAAiB,WAAM,aAAA,CAAc,CAAA,CAAA,CACvD,CAAA,CAAA,CACF,CAAA,CAAA,CACF,CAAA,CACF,CAAA,CAAA,CACF,EACF,EACF,CAEJ","x_google_ignoreList":[0,1,2,3,4,5,6,7,8]}