{"version":3,"file":"Auth-fQo-p_Wu.js","sources":["../../node_modules/lucide-react/dist/esm/icons/apple.js","../../node_modules/lucide-react/dist/esm/icons/chrome.js","../../src/components/Auth.tsx"],"sourcesContent":["/**\n * @license lucide-react v0.487.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst __iconNode = [\n  [\n    \"path\",\n    {\n      d: \"M12 20.94c1.5 0 2.75 1.06 4 1.06 3 0 6-8 6-12.22A4.91 4.91 0 0 0 17 5c-2.22 0-4 1.44-5 2-1-.56-2.78-2-5-2a4.9 4.9 0 0 0-5 4.78C2 14 5 22 8 22c1.25 0 2.5-1.06 4-1.06Z\",\n      key: \"3s7exb\"\n    }\n  ],\n  [\"path\", { d: \"M10 2c1 .5 2 2 2 5\", key: \"fcco2y\" }]\n];\nconst Apple = createLucideIcon(\"apple\", __iconNode);\n\nexport { __iconNode, Apple as default };\n//# sourceMappingURL=apple.js.map\n","/**\n * @license lucide-react v0.487.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst __iconNode = [\n  [\"circle\", { cx: \"12\", cy: \"12\", r: \"10\", key: \"1mglay\" }],\n  [\"circle\", { cx: \"12\", cy: \"12\", r: \"4\", key: \"4exip2\" }],\n  [\"line\", { x1: \"21.17\", x2: \"12\", y1: \"8\", y2: \"8\", key: \"a0cw5f\" }],\n  [\"line\", { x1: \"3.95\", x2: \"8.54\", y1: \"6.06\", y2: \"14\", key: \"1kftof\" }],\n  [\"line\", { x1: \"10.88\", x2: \"15.46\", y1: \"21.94\", y2: \"14\", key: \"1ymyh8\" }]\n];\nconst Chrome = createLucideIcon(\"chrome\", __iconNode);\n\nexport { __iconNode, Chrome as default };\n//# sourceMappingURL=chrome.js.map\n","import React, { useState, useEffect } from 'react';\nimport { useNavigate, useLocation } from 'react-router-dom';\nimport { Button } from './ui/button';\nimport { Input } from './ui/input';\nimport { Card, CardContent, CardHeader, CardTitle } from './ui/card';\nimport { Alert, AlertDescription } from './ui/alert';\nimport { useAuth } from '../providers/AuthProvider';\nimport { toast } from 'sonner';\nimport { Apple, Chrome } from 'lucide-react';\n\nexport function Auth() {\n  const navigate = useNavigate();\n  const location = useLocation();\n  const { signIn, signUp, resetPassword, signInWithOAuth } = useAuth();\n  \n  const [isSignUp, setIsSignUp] = useState(false);\n  const [isResetPassword, setIsResetPassword] = useState(false);\n  const [email, setEmail] = useState('');\n  const [password, setPassword] = useState('');\n  const [name, setName] = useState('');\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState('');\n  const [success, setSuccess] = useState('');\n\n  // Check if we're coming from a password reset\n  useEffect(() => {\n    const params = new URLSearchParams(location.search);\n    if (params.get('reset') === 'true') {\n      setIsResetPassword(true);\n    }\n  }, [location]);\n\n  const handleAuth = async (e: React.FormEvent) => {\n    e.preventDefault();\n    setLoading(true);\n    setError('');\n    setSuccess('');\n\n    try {\n      if (isResetPassword) {\n        await resetPassword(email);\n        setSuccess('Password reset email sent! Check your inbox.');\n        setIsResetPassword(false);\n      } else if (isSignUp) {\n        await signUp(email, password, { name, email });\n        setSuccess('Check your email for confirmation link!');\n      } else {\n        await signIn(email, password);\n        // Navigation will be handled by AuthProvider\n      }\n    } catch (error: any) {\n      setError(error.message);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const handleOAuthSignIn = async (provider: 'google' | 'apple') => {\n    setLoading(true);\n    setError('');\n    try {\n      await signInWithOAuth(provider);\n    } catch (error: any) {\n      console.error(`OAuth sign-in error for ${provider}:`, error);\n      // Provide more user-friendly error messages\n      if (error.message?.includes('popup')) {\n        setError('Authentication popup was blocked. Please allow popups and try again.');\n      } else if (error.message?.includes('network') || error.message?.includes('fetch')) {\n        setError('Network error during authentication. Please check your connection and try again.');\n      } else {\n        setError(`Authentication failed. Please try again or use email sign-in.`);\n      }\n      setLoading(false);\n    }\n  };\n\n  const handleBackToSignIn = () => {\n    setIsSignUp(false);\n    setIsResetPassword(false);\n    setError('');\n    setSuccess('');\n  };\n\n  const getTitle = () => {\n    if (isResetPassword) return 'Reset Password';\n    return isSignUp ? 'Create Account' : 'Sign In';\n  };\n\n  const getButtonText = () => {\n    if (loading) return 'Loading...';\n    if (isResetPassword) return 'Send Reset Email';\n    return isSignUp ? 'Sign Up' : 'Sign In';\n  };\n\n  return (\n    <div className=\"min-h-screen bg-background flex items-center justify-center p-4\">\n      <Card className=\"w-full max-w-md\">\n        <CardHeader>\n          <CardTitle className=\"text-center\">{getTitle()}</CardTitle>\n        </CardHeader>\n        <CardContent>\n          {!isResetPassword && (\n            <>\n              <div className=\"grid grid-cols-2 gap-4 mb-6\">\n                <Button\n                  variant=\"outline\"\n                  onClick={() => handleOAuthSignIn('google')}\n                  disabled={loading}\n                  className=\"w-full\"\n                >\n                  <Chrome className=\"mr-2 h-4 w-4\" />\n                  Google\n                </Button>\n                <Button\n                  variant=\"outline\"\n                  onClick={() => handleOAuthSignIn('apple')}\n                  disabled={loading}\n                  className=\"w-full\"\n                >\n                  <Apple className=\"mr-2 h-4 w-4\" />\n                  Apple\n                </Button>\n              </div>\n              \n              <div className=\"text-xs text-muted-foreground text-center mb-4\">\n                Note: You may see browser warnings during OAuth sign-in. These are from external services and don't affect your account security.\n              </div>\n\n              <div className=\"relative my-6\">\n                <div className=\"absolute inset-0 flex items-center\">\n                  <span className=\"w-full border-t\" />\n                </div>\n                <div className=\"relative flex justify-center text-xs uppercase\">\n                  <span className=\"bg-background px-2 text-muted-foreground\">\n                    Or continue with email\n                  </span>\n                </div>\n              </div>\n            </>\n          )}\n\n          <form onSubmit={handleAuth} className=\"space-y-4\">\n            {isSignUp && !isResetPassword && (\n              <div>\n                <label htmlFor=\"name\" className=\"text-sm font-medium\">Name</label>\n                <Input\n                  id=\"name\"\n                  name=\"name\"\n                  type=\"text\"\n                  value={name}\n                  onChange={(e) => setName(e.target.value)}\n                  required={isSignUp}\n                  placeholder=\"Enter your full name\"\n                />\n              </div>\n            )}\n            \n            <div>\n              <label htmlFor=\"email\" className=\"text-sm font-medium\">Email</label>\n              <Input\n                id=\"email\"\n                name=\"email\"\n                type=\"email\"\n                value={email}\n                onChange={(e) => setEmail(e.target.value)}\n                required\n                placeholder=\"Enter your email\"\n              />\n            </div>\n            \n            {!isResetPassword && (\n              <div>\n                <label htmlFor=\"password\" className=\"text-sm font-medium\">Password</label>\n                <Input\n                  id=\"password\"\n                  name=\"password\"\n                  type=\"password\"\n                  value={password}\n                  onChange={(e) => setPassword(e.target.value)}\n                  required={!isResetPassword}\n                  placeholder=\"Enter your password\"\n                />\n              </div>\n            )}\n\n            {error && (\n              <Alert variant=\"destructive\">\n                <AlertDescription>{error}</AlertDescription>\n              </Alert>\n            )}\n\n            {success && (\n              <Alert>\n                <AlertDescription>{success}</AlertDescription>\n              </Alert>\n            )}\n\n            <Button \n              type=\"submit\" \n              className=\"w-full\" \n              disabled={loading}\n            >\n              {getButtonText()}\n            </Button>\n          </form>\n\n\n          <div className=\"mt-4 space-y-2 text-center\">\n            {!isResetPassword ? (\n              <>\n                <button\n                  onClick={() => setIsSignUp(!isSignUp)}\n                  className=\"text-sm text-muted-foreground hover:text-foreground block\"\n                >\n                  {isSignUp ? 'Already have an account? Sign In' : 'Need an account? Sign Up'}\n                </button>\n                <button\n                  onClick={() => setIsResetPassword(true)}\n                  className=\"text-sm text-muted-foreground hover:text-foreground block\"\n                >\n                  Forgot your password?\n                </button>\n              </>\n            ) : (\n              <button\n                onClick={handleBackToSignIn}\n                className=\"text-sm text-muted-foreground hover:text-foreground\"\n              >\n                Back to Sign In\n              </button>\n            )}\n          </div>\n        </CardContent>\n      </Card>\n    </div>\n  );\n}\n"],"names":["__iconNode","Apple","createLucideIcon","Chrome","Auth","useNavigate","location","useLocation","signIn","signUp","resetPassword","signInWithOAuth","useAuth","isSignUp","setIsSignUp","useState","isResetPassword","setIsResetPassword","email","setEmail","password","setPassword","name","setName","loading","setLoading","error","setError","success","setSuccess","useEffect","handleAuth","e","handleOAuthSignIn","provider","handleBackToSignIn","getTitle","getButtonText","jsxs","Card","jsx","CardHeader","CardTitle","CardContent","Fragment","Button","Input","Alert","AlertDescription"],"mappings":"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","x_google_ignoreList":[0,1]}