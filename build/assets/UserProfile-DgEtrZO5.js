import{j as e}from"./ui-BV8hHw1h.js";import{e as s,r as a}from"./vendor-C07EgOn8.js";import{b as t,C as r,a as l,u as n,B as i,f as c,g as d,h as m,c as x,d as o}from"./index-B8aSsUS3.js";import{T as h,a as u,b as p,c as j}from"./tabs-DLqTOLEF.js";import{u as g,a as v,b as N}from"./useUserProfile-B5yNObRP.js";import{u as f}from"./useAchievements-SWifaj2H.js";import{T as b,a as y,b as w,c as k,f as A}from"./tooltip-CxXGEiMo.js";import{l as P,m as S,n as G,o as H,Z as C,i as z,g as D,p as L}from"./utils-sWWcUyIH.js";import{P as M}from"./progress-DBGOn9JE.js";import"./data-Bnv2A4Es.js";const _=e=>{switch(e){case"trophy":return"ðŸ†";case"star":return"â­";case"handshake":return"ðŸ¤";case"runner":return"ðŸƒ";case"crown":return"ðŸ‘‘";default:return"ðŸŽ¯"}},T=s=>{switch(s){case"engagement":return e.jsx(H,{className:"w-3 h-3"});case"milestone":default:return e.jsx(P,{className:"w-3 h-3"});case"hosting":return e.jsx(G,{className:"w-3 h-3"});case"social":return e.jsx(S,{className:"w-3 h-3"})}},U=e=>{switch(e){case"engagement":return"bg-blue-100 text-blue-700 border-blue-200 dark:bg-blue-900 dark:text-blue-300";case"milestone":return"bg-yellow-100 text-yellow-700 border-yellow-200 dark:bg-yellow-900 dark:text-yellow-300";case"hosting":return"bg-purple-100 text-purple-700 border-purple-200 dark:bg-purple-900 dark:text-purple-300";case"social":return"bg-green-100 text-green-700 border-green-200 dark:bg-green-900 dark:text-green-300";default:return"bg-gray-100 text-gray-700 border-gray-200 dark:bg-gray-900 dark:text-gray-300"}};function $({achievement:s,size:a="md",showTooltip:r=!0,variant:l="default"}){const n=e.jsxs(t,{variant:l,className:`\n        ${{sm:"text-xs px-1.5 py-0.5 gap-1",md:"text-xs px-2 py-1 gap-1.5",lg:"text-sm px-3 py-1.5 gap-2"}[a]} \n        ${"default"===l?U(s.category):""}\n        inline-flex items-center font-medium\n      `,children:[e.jsx("span",{className:"text-lg",children:_(s.icon)}),e.jsx("span",{className:"truncate max-w-[100px]",children:s.name}),"lg"===a&&e.jsxs("span",{className:"text-xs opacity-75",children:["+",s.points]})]});return r?e.jsx(b,{children:e.jsxs(y,{children:[e.jsx(w,{asChild:!0,children:n}),e.jsx(k,{side:"top",className:"max-w-xs",children:e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-lg",children:_(s.icon)}),e.jsx("span",{className:"font-semibold",children:s.name})]}),e.jsx("p",{className:"text-sm text-muted-foreground",children:s.description}),e.jsxs("div",{className:"flex items-center justify-between text-xs",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[T(s.category),e.jsx("span",{className:"capitalize",children:s.category})]}),e.jsxs("span",{className:"text-primary font-medium",children:["+",s.points," pts"]})]}),s.earned_at&&e.jsxs("p",{className:"text-xs text-muted-foreground",children:["Earned ",new Date(s.earned_at).toLocaleDateString()]})]})})]})}):n}function E({achievements:s,maxDisplay:a=6,size:r="md"}){const l=s.slice(0,a),n=Math.max(0,s.length-a);return e.jsxs("div",{className:"flex flex-wrap gap-2",children:[l.map(s=>e.jsx($,{achievement:s,size:r},s.id)),n>0&&e.jsxs(t,{variant:"outline",className:""+("sm"===r?"text-xs px-1.5 py-0.5":"text-xs px-2 py-1"),children:["+",n," more"]})]})}function V({achievements:s,title:a="Next Achievements",showAll:n=!1}){const i=n?s:s.slice(0,3);return 0===i.length?null:e.jsx(r,{children:e.jsxs(l,{className:"p-4",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx(H,{className:"w-4 h-4 text-primary"}),e.jsx("h3",{className:"font-semibold text-sm",children:a})]}),e.jsx("div",{className:"space-y-4",children:i.map(s=>{const a=s.achievement||s;return e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2 flex-1 min-w-0",children:[e.jsx("span",{className:"text-lg",children:a?.icon||"ðŸŽ¯"}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("div",{className:"font-medium text-sm truncate",children:a?.name||"Unknown Achievement"}),e.jsx("div",{className:"text-xs text-muted-foreground truncate",children:a?.description||"No description"})]})]}),e.jsx("div",{className:"flex items-center gap-2 ml-2",children:e.jsxs(t,{variant:"outline",className:"text-xs",children:["+",a?.points||0]})})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsxs("div",{className:"flex items-center justify-between text-xs",children:[e.jsxs("span",{className:"text-muted-foreground",children:[s.progress," / ",s.total]}),e.jsxs("span",{className:"font-medium text-primary",children:[s.percentage,"%"]})]}),e.jsx(M,{value:s.percentage,className:"h-2"})]})]},a?.id||Math.random())})}),!n&&s.length>3&&e.jsx("div",{className:"text-center mt-4",children:e.jsx("button",{className:"text-xs text-muted-foreground hover:text-primary",children:"View all achievements â†’"})})]})})}function B({label:s,current:a,target:t,icon:r=e.jsx(C,{className:"w-4 h-4"}),color:l="blue"}){const n=Math.min(a/t*100,100);return e.jsxs("div",{className:`p-3 rounded-lg border ${{blue:"text-blue-600 bg-blue-50 border-blue-200",green:"text-green-600 bg-green-50 border-green-200",purple:"text-purple-600 bg-purple-50 border-purple-200",orange:"text-orange-600 bg-orange-50 border-orange-200"}[l]}`,children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[r,e.jsx("span",{className:"text-sm font-medium",children:s})]}),e.jsxs("span",{className:"text-xs font-medium",children:[a,"/",t]})]}),e.jsx(M,{value:n,className:"h-1.5"})]})}function I({gamesPlayed:s,gamesHosted:a,nextAchievements:t}){const r=t.find(e=>{const s=e.achievement||e;return"engagement"===s?.category||"participation"===s?.category}),l=t.find(e=>{const s=e.achievement||e;return"hosting"===s?.category||"engagement"===s?.category});return e.jsxs("div",{className:"space-y-3",children:[r&&e.jsx(B,{label:"Games Played",current:s,target:r.total,icon:e.jsx(P,{className:"w-4 h-4"}),color:"blue"}),l&&e.jsx(B,{label:"Games Hosted",current:a,target:l.total,icon:e.jsx(H,{className:"w-4 h-4"}),color:"purple"})]})}function J(){const b=s(),{user:y}=n(),[w,k]=a.useState("overview"),{data:S,isLoading:G}=g(y?.id||""),{data:H=[],isLoading:C}=v(y?.id||"",5),{data:M=[],isLoading:_}=N(y?.id||""),{getNextAchievements:T}=f(),[U,$]=a.useState([]),B=G||C||_;a.useEffect(()=>{(async()=>{if(S){const e=await T();$(e)}})()},[S,T]);const J=a.useMemo(()=>[{label:"Games Played",value:S?.totalGamesPlayed?.toString()||"0",icon:z},{label:"Games Hosted",value:S?.totalGamesHosted?.toString()||"0",icon:D},{label:"Achievements",value:M.length.toString(),icon:P}],[S,M]),O=a.useMemo(()=>H.map(e=>({id:e.games?.id||e.id,title:e.games?.title||e.title,sport:e.games?.sport||e.sport,date:e.games?.date||e.date,time:e.games?.time||e.time,location:e.games?.location||e.location,isHost:(e.games?.creator_id||e.creator_id)===y?.id})),[H,y?.id]),R=y?.name||"User Profile",Z=y?.username?`@${y.username}`:"@user",q=y?.bio||"Sports enthusiast â€¢ Always up for a game!",F=y?.avatar||"",K=y?.preferences?.sports||["Basketball","Soccer","Tennis","Volleyball"],Q=!(y?.name&&y?.email);return e.jsxs("div",{className:"min-h-screen bg-background",children:[e.jsxs("div",{className:"flex items-center justify-between px-4 pt-12 pb-6",children:[e.jsx("h1",{className:"text-xl font-semibold",children:"Profile"}),e.jsx(i,{variant:"ghost",size:"icon",onClick:()=>b("/settings"),children:e.jsx(L,{className:"w-5 h-5"})})]}),e.jsxs("div",{className:"px-4 space-y-6",children:[e.jsx(r,{children:e.jsxs(l,{className:"pt-6",children:[e.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[e.jsxs(c,{className:"w-16 h-16",children:[e.jsx(d,{src:F,alt:R}),e.jsx(m,{className:"text-xl",children:R.charAt(0).toUpperCase()})]}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h2",{className:"text-xl font-semibold",children:R}),e.jsx("p",{className:"text-muted-foreground",children:Z}),e.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:q})]})]}),e.jsx(i,{variant:"outline",className:"w-full",onClick:()=>b("/profile/edit"),children:"Edit Profile"}),Q&&e.jsx(i,{variant:"outline",className:"w-full mt-2",onClick:()=>b("/onboarding"),children:"Complete Profile"})]})}),e.jsxs(r,{children:[e.jsx(x,{children:e.jsx(o,{children:"Stats"})}),e.jsx(l,{children:e.jsx("div",{className:"grid grid-cols-3 gap-4",children:J.map(s=>e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"flex justify-center mb-2",children:e.jsx(s.icon,{className:"w-5 h-5 text-primary"})}),e.jsx("div",{className:"text-2xl font-semibold",children:s.value}),e.jsx("div",{className:"text-xs text-muted-foreground",children:s.label})]},s.label))})})]}),e.jsxs(r,{children:[e.jsx(x,{children:e.jsx(o,{children:"Sports I Play"})}),e.jsx(l,{children:e.jsx("div",{className:"flex flex-wrap gap-2",children:K.map(s=>e.jsx(t,{variant:"secondary",children:s},s))})})]}),e.jsxs(h,{value:w,onValueChange:k,children:[e.jsxs(u,{className:"grid w-full grid-cols-3",children:[e.jsx(p,{value:"overview",children:"Overview"}),e.jsx(p,{value:"achievements",children:"Achievements"}),e.jsx(p,{value:"progress",children:"Progress"})]}),e.jsx(j,{value:"overview",className:"space-y-6",children:e.jsxs(r,{children:[e.jsx(x,{children:e.jsx(o,{children:"Recent Games"})}),e.jsx(l,{children:e.jsx("div",{className:"space-y-3",children:B?e.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[e.jsx("div",{className:"animate-spin w-6 h-6 border-2 border-primary border-t-transparent rounded-full mx-auto mb-4"}),e.jsx("p",{children:"Loading recent games..."})]}):O.length>0?O.map((s,a)=>e.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"font-medium",children:s.title}),e.jsxs("div",{className:"text-sm text-muted-foreground",children:[new Date(s.date).toLocaleDateString()," at ",A(s.time)]}),e.jsx("div",{className:"text-xs text-muted-foreground mt-1",children:s.location})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[s.isHost&&e.jsx(t,{variant:"secondary",className:"text-xs",children:"Host"}),e.jsx(t,{variant:"outline",children:s.sport})]})]},s.id||a)):e.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[e.jsx(z,{className:"w-12 h-12 mx-auto mb-4 opacity-50"}),e.jsx("p",{children:"No recent games"}),e.jsx("p",{className:"text-sm",children:"Join your first game to see it here!"})]})})})]})}),e.jsx(j,{value:"achievements",className:"space-y-6",children:e.jsxs(r,{children:[e.jsx(x,{children:e.jsxs(o,{className:"flex items-center gap-2",children:[e.jsx(P,{className:"w-5 h-5"}),"My Achievements (",M.length,")"]})}),e.jsx(l,{children:M.length>0?e.jsx(E,{achievements:M.map(e=>({...e.achievements,earned_at:e.earned_at})),maxDisplay:12,size:"md"}):e.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[e.jsx(P,{className:"w-12 h-12 mx-auto mb-4 opacity-50"}),e.jsx("p",{children:"No achievements yet"}),e.jsx("p",{className:"text-sm",children:"Play games to unlock your first achievement!"})]})})]})}),e.jsxs(j,{value:"progress",className:"space-y-6",children:[S&&e.jsx(I,{gamesPlayed:S.totalGamesPlayed,gamesHosted:S.totalGamesHosted,nextAchievements:U}),U.length>0&&e.jsx(V,{achievements:U,title:"Next Achievements",showAll:!0})]})]})]})]})}export{J as default};
//# sourceMappingURL=UserProfile-DgEtrZO5.js.map
