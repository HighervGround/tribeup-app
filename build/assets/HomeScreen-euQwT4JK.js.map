{"version":3,"file":"HomeScreen-euQwT4JK.js","sources":["../../src/hooks/useUserPresence.ts","../../src/components/GameCardSkeleton.tsx","../../src/components/HomeScreen.tsx"],"sourcesContent":["import { useState, useEffect } from 'react';\nimport { supabase } from '../lib/supabase';\nimport { envConfig } from '../lib/envConfig';\n\ninterface OnlineUser {\n  id: string;\n  name: string;\n  avatar?: string;\n  lastSeen: string;\n}\n\nexport function useUserPresence() {\n  const [onlineUsers, setOnlineUsers] = useState<OnlineUser[]>([]);\n  const [onlineCount, setOnlineCount] = useState(0);\n  const [isLoading, setIsLoading] = useState(true);\n\n  useEffect(() => {\n    let presenceChannel: any;\n    let heartbeatInterval: NodeJS.Timeout;\n\n    const initializePresence = async () => {\n      try {\n        // Get current user\n        const { data: { user } } = await supabase.auth.getUser();\n        if (!user) {\n          setIsLoading(false);\n          return;\n        }\n\n        // Get user profile for display info\n        const { data: profile } = await supabase\n          .from('users')\n          .select('full_name, username, avatar_url')\n          .eq('id', user.id)\n          .single();\n\n        // Create presence channel\n        presenceChannel = supabase.channel('online_users', {\n          config: {\n            presence: {\n              key: user.id,\n            },\n          },\n        });\n\n        // Track presence state\n        presenceChannel\n          .on('presence', { event: 'sync' }, () => {\n            const presenceState = presenceChannel.presenceState();\n            const users = Object.keys(presenceState).map(userId => {\n              const presence = presenceState[userId][0];\n              return {\n                id: userId,\n                name: presence.name || 'Anonymous',\n                avatar: presence.avatar,\n                lastSeen: new Date().toISOString()\n              };\n            });\n            \n            setOnlineUsers(users);\n            setOnlineCount(users.length);\n            setIsLoading(false);\n          })\n          .on('presence', { event: 'join' }, ({ key, newPresences }) => {\n            console.log('User joined:', key, newPresences);\n          })\n          .on('presence', { event: 'leave' }, ({ key, leftPresences }) => {\n            console.log('User left:', key, leftPresences);\n          });\n\n        // Subscribe and track presence\n        await presenceChannel.subscribe(async (status: string) => {\n          if (status === 'SUBSCRIBED') {\n            // Send initial presence\n            await presenceChannel.track({\n              user_id: user.id,\n              name: profile?.full_name || profile?.username || 'Anonymous',\n              avatar: profile?.avatar_url,\n              online_at: new Date().toISOString(),\n            });\n\n            // Set up heartbeat to maintain presence\n            heartbeatInterval = setInterval(async () => {\n              await presenceChannel.track({\n                user_id: user.id,\n                name: profile?.full_name || profile?.username || 'Anonymous',\n                avatar: profile?.avatar_url,\n                online_at: new Date().toISOString(),\n              });\n            }, envConfig.get('presenceHeartbeatInterval'));\n          }\n        });\n\n      } catch (error) {\n        console.error('Failed to initialize presence:', error);\n        setIsLoading(false);\n      }\n    };\n\n    initializePresence();\n\n    // Cleanup\n    return () => {\n      if (heartbeatInterval) {\n        clearInterval(heartbeatInterval);\n      }\n      if (presenceChannel) {\n        presenceChannel.unsubscribe();\n      }\n    };\n  }, []);\n\n  return {\n    onlineUsers,\n    onlineCount,\n    isLoading\n  };\n}\n","import { Card, CardContent } from './ui/card';\nimport { Skeleton } from './ui/skeleton';\n\nexport function GameCardSkeleton() {\n  return (\n    <Card className=\"w-full\">\n      <CardContent className=\"p-4\">\n        <div className=\"space-y-3\">\n          {/* Header */}\n          <div className=\"flex items-start justify-between\">\n            <div className=\"space-y-2 flex-1\">\n              <Skeleton className=\"h-5 w-3/4\" />\n              <Skeleton className=\"h-4 w-1/2\" />\n            </div>\n            <Skeleton className=\"h-8 w-16\" />\n          </div>\n          \n          {/* Location and time */}\n          <div className=\"space-y-2\">\n            <div className=\"flex items-center gap-2\">\n              <Skeleton className=\"h-4 w-4\" />\n              <Skeleton className=\"h-4 w-2/3\" />\n            </div>\n            <div className=\"flex items-center gap-2\">\n              <Skeleton className=\"h-4 w-4\" />\n              <Skeleton className=\"h-4 w-1/3\" />\n            </div>\n            <div className=\"flex items-center gap-2\">\n              <Skeleton className=\"h-4 w-4\" />\n              <Skeleton className=\"h-4 w-1/4\" />\n            </div>\n          </div>\n          \n          {/* Description */}\n          <Skeleton className=\"h-4 w-full\" />\n          <Skeleton className=\"h-4 w-3/4\" />\n          \n          {/* Footer */}\n          <div className=\"flex items-center justify-between pt-2\">\n            <Skeleton className=\"h-6 w-20\" />\n            <Skeleton className=\"h-8 w-16\" />\n          </div>\n        </div>\n      </CardContent>\n    </Card>\n  );\n}\n\nexport function GameDetailsSkeleton() {\n  return (\n    <div className=\"min-h-screen bg-background\">\n      {/* Header */}\n      <div className=\"sticky top-0 z-10 bg-background/95 backdrop-blur-sm border-b border-border\">\n        <div className=\"flex items-center justify-between p-4\">\n          <Skeleton className=\"h-8 w-8\" />\n          <div className=\"flex gap-2\">\n            <Skeleton className=\"h-8 w-8\" />\n            <Skeleton className=\"h-8 w-8\" />\n            <Skeleton className=\"h-8 w-8\" />\n          </div>\n        </div>\n      </div>\n\n      <div className=\"px-4 py-6 space-y-6\">\n        {/* Hero Image */}\n        <Skeleton className=\"h-48 w-full rounded-lg\" />\n        \n        {/* Basic Info */}\n        <div className=\"space-y-4\">\n          <div className=\"space-y-2\">\n            <Skeleton className=\"h-8 w-3/4\" />\n            <Skeleton className=\"h-4 w-1/2\" />\n          </div>\n          \n          <div className=\"grid grid-cols-2 gap-4\">\n            <div className=\"space-y-2\">\n              <Skeleton className=\"h-4 w-16\" />\n              <Skeleton className=\"h-4 w-24\" />\n            </div>\n            <div className=\"space-y-2\">\n              <Skeleton className=\"h-4 w-16\" />\n              <Skeleton className=\"h-4 w-20\" />\n            </div>\n          </div>\n        </div>\n        \n        {/* Description */}\n        <div className=\"space-y-2\">\n          <Skeleton className=\"h-4 w-20\" />\n          <Skeleton className=\"h-4 w-full\" />\n          <Skeleton className=\"h-4 w-3/4\" />\n        </div>\n        \n        {/* Join Button */}\n        <Skeleton className=\"h-12 w-full\" />\n        \n        {/* Players List */}\n        <div className=\"space-y-4\">\n          <Skeleton className=\"h-6 w-32\" />\n          <div className=\"space-y-3\">\n            {[1, 2, 3].map((i) => (\n              <div key={i} className=\"flex items-center gap-3\">\n                <Skeleton className=\"h-10 w-10 rounded-full\" />\n                <div className=\"space-y-2 flex-1\">\n                  <Skeleton className=\"h-4 w-24\" />\n                  <Skeleton className=\"h-3 w-16\" />\n                </div>\n              </div>\n            ))}\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n}","import React, { useState, useEffect, useMemo } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport { Button } from './ui/button';\nimport { Plus, RefreshCw, MapPin, Clock, Users } from 'lucide-react';\nimport { formatEventHeader, formatCalendarInfo, formatTimeString } from '../lib/dateUtils';\nimport { SupabaseService } from '../lib/supabaseService';\nimport { useAppStore } from '../store/appStore';\nimport { useUserPresence } from '../hooks/useUserPresence';\nimport { useGames } from '../hooks/useGames';\nimport { UnifiedGameCard } from './UnifiedGameCard';\nimport { GameCardSkeleton } from './GameCardSkeleton';\n\n\n\n// Using UnifiedGameCard component for consistency\n\nfunction HomeScreen() {\n  const navigate = useNavigate();\n  const { user } = useAppStore();\n  const { data: games = [], isLoading, error, refetch } = useGames();\n  const [refreshing, setRefreshing] = useState(false);\n  const [timedOut, setTimedOut] = useState(false);\n  const userPreferredSports = useMemo(() => user?.preferences?.sports ?? [], [user]);\n  // Real-time presence tracking (no polling)\n  const { onlineCount, isLoading: presenceLoading } = useUserPresence();\n  \n  // Game selection handler\n  const handleGameSelect = (gameId: string) => {\n    navigate(`/game/${gameId}`);\n  };\n  \n\n  // Calculate real stats\n  const stats = useMemo(() => {\n    const now = new Date();\n    const startOfWeek = new Date(now);\n    startOfWeek.setDate(now.getDate() - now.getDay()); // Start of current week (Sunday)\n    startOfWeek.setHours(0, 0, 0, 0);\n    \n    const endOfWeek = new Date(startOfWeek);\n    endOfWeek.setDate(startOfWeek.getDate() + 6); // End of current week (Saturday)\n    endOfWeek.setHours(23, 59, 59, 999);\n\n    // Count games this week\n    const thisWeekGames = games.filter(game => {\n      const gameDate = new Date(game.date);\n      return gameDate >= startOfWeek && gameDate <= endOfWeek;\n    }).length;\n\n    return {\n      totalGames: games.length,\n      thisWeekGames,\n      onlinePlayers: onlineCount\n    };\n  }, [games, onlineCount]);\n\n  // No need for manual loading with React Query\n\n\n  // Disabled realtime to prevent WebSocket connection issues\n  // useEffect(() => {\n  //   let timeoutId: NodeJS.Timeout;\n  //   \n  //   const sub = SupabaseService.subscribeToAllGames((payload) => {\n  //     console.log('[Realtime] games INSERT received', payload?.new?.id || '');\n  //     \n  //     // Debounce realtime updates to avoid excessive API calls\n  //     clearTimeout(timeoutId);\n  //     timeoutId = setTimeout(async () => {\n  //       try {\n  //         const data = feedMode === 'recommended'\n  //           ? await SupabaseService.getRecommendedGames(userPreferredSports)\n  //           : await SupabaseService.getGames();\n  //         setGames(data);\n  //       } catch (error) {\n  //         console.error('[Realtime] Failed to refresh games:', error);\n  //       }\n  //     }, 1000);\n  //   });\n  //   \n  //   return () => {\n  //     clearTimeout(timeoutId);\n  //     try { sub.unsubscribe(); } catch {}\n  //   };\n  //   // eslint-disable-next-line react-hooks/exhaustive-deps\n  // }, [feedMode, userPreferredSports.join?.('|') ?? '']);\n\n  // No need for manual loading state cleanup with React Query\n\n\n  // loadGames function removed - using React Query instead\n\n  const handleRefresh = async () => {\n    if (refreshing) return; // Prevent multiple concurrent refreshes\n    \n    setTimedOut(false);\n    setRefreshing(true);\n    try {\n      await refetch();\n    } finally {\n      setRefreshing(false);\n    }\n  };\n\n  const handleCreateGame = () => {\n    navigate('/create');\n  };\n\n  // Sort games chronologically with smart grouping\n  const sortedGames = games\n    .map(game => {\n      const gameDate = new Date(game.date);\n      const today = new Date();\n      const tomorrow = new Date(today);\n      tomorrow.setDate(tomorrow.getDate() + 1);\n      \n      // Determine game category for sorting and display\n      let category = 'future';\n      let sortOrder = gameDate.getTime();\n      \n      if (gameDate.toDateString() === today.toDateString()) {\n        category = 'today';\n        sortOrder = 0; // Today's games first\n      } else if (gameDate.toDateString() === tomorrow.toDateString()) {\n        category = 'tomorrow';\n        sortOrder = 1; // Tomorrow's games second\n      }\n      \n      return {\n        ...game,\n        category,\n        sortOrder,\n        gameDate\n      };\n    })\n    .sort((a, b) => {\n      // First sort by category (today, tomorrow, future)\n      if (a.sortOrder !== b.sortOrder) {\n        return a.sortOrder - b.sortOrder;\n      }\n      // Then sort by time within each category\n      return a.gameDate.getTime() - b.gameDate.getTime();\n    });\n\n  // Show loading state\n  if (isLoading && games.length === 0) {\n    return (\n      <div className=\"min-h-screen bg-background flex items-center justify-center\">\n        <div className=\"text-center\">\n          <div className=\"animate-spin rounded-full h-12 w-12 border-b-2 border-primary mx-auto mb-4\"></div>\n          <p className=\"text-muted-foreground\">Loading games...</p>\n        </div>\n      </div>\n    );\n  }\n\n  // Timed-out empty state with retry - only show if no games at all\n  if (timedOut && games.length === 0) {\n    return (\n      <div className=\"min-h-screen bg-background flex items-center justify-center\">\n        <div className=\"text-center space-y-3\">\n          <p className=\"text-muted-foreground\">Connection issues detected. Showing sample games.</p>\n          <Button onClick={handleRefresh} variant=\"outline\">\n            <RefreshCw className=\"w-4 h-4 mr-2\" /> Try Again\n          </Button>\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"min-h-screen bg-background\">\n      <div className=\"max-w-7xl mx-auto p-4 md:p-6\">\n        <div className=\"grid grid-cols-1 lg:grid-cols-12 gap-6\">\n          {/* Main Content */}\n          <div className=\"lg:col-span-8\">\n            {/* Header */}\n            <div className=\"flex items-center justify-between mb-6\">\n              <div>\n                <h1 className=\"text-2xl md:text-3xl font-bold\">TribeUp</h1>\n                <p className=\"text-muted-foreground\">Find your next game</p>\n              </div>\n              {/* Create Game button only for mobile - desktop uses sidebar button */}\n              <Button \n                onClick={handleCreateGame}\n                size=\"icon\"\n                className=\"md:hidden\"\n                aria-label=\"Create new game\"\n              >\n                <Plus className=\"w-5 h-5\" />\n              </Button>\n            </div>\n\n            {/* Quick Stats - Mobile */}\n            <div className=\"grid grid-cols-3 gap-4 mb-6 lg:hidden\">\n              <div className=\"bg-card rounded-lg p-4 text-center\">\n                <div className=\"text-2xl font-bold text-primary\">{stats.totalGames}</div>\n                <div className=\"text-sm text-muted-foreground\">Active Games</div>\n              </div>\n              <div className=\"bg-card rounded-lg p-4 text-center\">\n                <div className=\"text-2xl font-bold text-primary\">\n                  {presenceLoading ? '...' : stats.onlinePlayers}\n                </div>\n                <div className=\"text-sm text-muted-foreground\">Players Online</div>\n              </div>\n              <div className=\"bg-card rounded-lg p-4 text-center\">\n                <div className=\"text-2xl font-bold text-primary\">{stats.thisWeekGames}</div>\n                <div className=\"text-sm text-muted-foreground\">This Week</div>\n              </div>\n            </div>\n\n            {/* Games List */}\n            <div className=\"flex items-center justify-between mb-4\">\n              <h2 className=\"text-lg md:text-xl font-semibold\">Upcoming Games</h2>\n              <Button\n                variant=\"outline\"\n                size=\"sm\"\n                onClick={handleRefresh}\n                disabled={isLoading}\n                className=\"hidden md:flex\"\n              >\n                <RefreshCw className={`w-4 h-4 mr-2 ${isLoading ? 'animate-spin' : ''}`} />\n                Refresh\n              </Button>\n              <Button\n                variant=\"ghost\"\n                size=\"sm\"\n                onClick={handleRefresh}\n                disabled={isLoading}\n                className=\"md:hidden\"\n                aria-label=\"Refresh games\"\n              >\n                <RefreshCw className={`w-4 h-4 ${isLoading ? 'animate-spin' : ''}`} />\n              </Button>\n            </div>\n\n            <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4\">\n              {isLoading ? (\n                // Show skeleton loading\n                Array.from({ length: 6 }).map((_, index) => (\n                  <GameCardSkeleton key={index} />\n                ))\n              ) : (\n                sortedGames.map((game) => (\n                  <div key={game.id}>\n                    <UnifiedGameCard\n                      game={game}\n                      variant=\"simple\"\n                      onSelect={() => handleGameSelect(game.id)}\n                    />\n                  </div>\n                ))\n              )}\n            </div>\n          </div>\n\n          {/* Sidebar - Desktop Only */}\n          <div className=\"hidden lg:block lg:col-span-4\">\n            <div className=\"bg-card rounded-lg p-6 sticky top-6\">\n              <h3 className=\"text-lg font-semibold mb-4\">Quick Stats</h3>\n              <div className=\"space-y-4\">\n                <div className=\"flex items-center justify-between\">\n                  <span className=\"text-muted-foreground\">Active Games</span>\n                  <span className=\"font-semibold\">{stats.totalGames}</span>\n                </div>\n                <div className=\"flex items-center justify-between\">\n                  <span className=\"text-muted-foreground\">Players Online</span>\n                  <span className=\"font-semibold\">\n                    {presenceLoading ? '...' : stats.onlinePlayers}\n                  </span>\n                </div>\n                <div className=\"flex items-center justify-between\">\n                  <span className=\"text-muted-foreground\">This Week</span>\n                  <span className=\"font-semibold\">{stats.thisWeekGames}</span>\n                </div>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n}\n\nexport default HomeScreen;\n"],"names":["useUserPresence","onlineUsers","setOnlineUsers","useState","onlineCount","setOnlineCount","isLoading","setIsLoading","useEffect","presenceChannel","heartbeatInterval","user","supabase","profile","presenceState","users","userId","presence","key","newPresences","leftPresences","status","envConfig","error","GameCardSkeleton","jsx","Card","CardContent","jsxs","Skeleton","HomeScreen","navigate","useNavigate","useAppStore","games","refetch","useGames","refreshing","setRefreshing","timedOut","setTimedOut","useMemo","presenceLoading","handleGameSelect","gameId","stats","now","startOfWeek","endOfWeek","thisWeekGames","game","gameDate","handleRefresh","handleCreateGame","sortedGames","today","tomorrow","category","sortOrder","a","b","Button","RefreshCw","Plus","_","index","UnifiedGameCard"],"mappings":"iiBAWO,SAASA,GAAkB,CAChC,KAAM,CAACC,EAAaC,CAAc,EAAIC,EAAAA,SAAuB,CAAA,CAAE,EACzD,CAACC,EAAaC,CAAc,EAAIF,EAAAA,SAAS,CAAC,EAC1C,CAACG,EAAWC,CAAY,EAAIJ,EAAAA,SAAS,EAAI,EAE/CK,OAAAA,EAAAA,UAAU,IAAM,CACd,IAAIC,EACAC,EAiFJ,OA/E2B,SAAY,CACrC,GAAI,CAEF,KAAM,CAAE,KAAM,CAAE,KAAAC,CAAA,GAAW,MAAMC,EAAS,KAAK,QAAA,EAC/C,GAAI,CAACD,EAAM,CACTJ,EAAa,EAAK,EAClB,MACF,CAGA,KAAM,CAAE,KAAMM,CAAA,EAAY,MAAMD,EAC7B,KAAK,OAAO,EACZ,OAAO,iCAAiC,EACxC,GAAG,KAAMD,EAAK,EAAE,EAChB,OAAA,EAGHF,EAAkBG,EAAS,QAAQ,eAAgB,CACjD,OAAQ,CACN,SAAU,CACR,IAAKD,EAAK,EAAA,CACZ,CACF,CACD,EAGDF,EACG,GAAG,WAAY,CAAE,MAAO,MAAA,EAAU,IAAM,CACvC,MAAMK,EAAgBL,EAAgB,cAAA,EAChCM,EAAQ,OAAO,KAAKD,CAAa,EAAE,IAAIE,GAAU,CACrD,MAAMC,EAAWH,EAAcE,CAAM,EAAE,CAAC,EACxC,MAAO,CACL,GAAIA,EACJ,KAAMC,EAAS,MAAQ,YACvB,OAAQA,EAAS,OACjB,SAAU,IAAI,KAAA,EAAO,YAAA,CAAY,CAErC,CAAC,EAEDf,EAAea,CAAK,EACpBV,EAAeU,EAAM,MAAM,EAC3BR,EAAa,EAAK,CACpB,CAAC,EACA,GAAG,WAAY,CAAE,MAAO,MAAA,EAAU,CAAC,CAAE,IAAAW,EAAK,aAAAC,KAAmB,CAC5D,QAAQ,IAAI,eAAgBD,EAAKC,CAAY,CAC/C,CAAC,EACA,GAAG,WAAY,CAAE,MAAO,OAAA,EAAW,CAAC,CAAE,IAAAD,EAAK,cAAAE,KAAoB,CAC9D,QAAQ,IAAI,aAAcF,EAAKE,CAAa,CAC9C,CAAC,EAGH,MAAMX,EAAgB,UAAU,MAAOY,GAAmB,CACpDA,IAAW,eAEb,MAAMZ,EAAgB,MAAM,CAC1B,QAASE,EAAK,GACd,KAAME,GAAS,WAAaA,GAAS,UAAY,YACjD,OAAQA,GAAS,WACjB,UAAW,IAAI,KAAA,EAAO,YAAA,CAAY,CACnC,EAGDH,EAAoB,YAAY,SAAY,CAC1C,MAAMD,EAAgB,MAAM,CAC1B,QAASE,EAAK,GACd,KAAME,GAAS,WAAaA,GAAS,UAAY,YACjD,OAAQA,GAAS,WACjB,UAAW,IAAI,KAAA,EAAO,YAAA,CAAY,CACnC,CACH,EAAGS,EAAU,IAAI,2BAA2B,CAAC,EAEjD,CAAC,CAEH,OAASC,EAAO,CACd,QAAQ,MAAM,iCAAkCA,CAAK,EACrDhB,EAAa,EAAK,CACpB,CACF,GAEA,EAGO,IAAM,CACPG,GACF,cAAcA,CAAiB,EAE7BD,GACFA,EAAgB,YAAA,CAEpB,CACF,EAAG,CAAA,CAAE,EAEE,CACL,YAAAR,EACA,YAAAG,EACA,UAAAE,CAAA,CAEJ,CClHO,SAASkB,GAAmB,CACjC,OACEC,EAAAA,IAACC,EAAA,CAAK,UAAU,SACd,SAAAD,EAAAA,IAACE,EAAA,CAAY,UAAU,MACrB,SAAAC,EAAAA,KAAC,MAAA,CAAI,UAAU,YAEb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,mCACb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,mBACb,SAAA,CAAAH,EAAAA,IAACI,EAAA,CAAS,UAAU,WAAA,CAAY,EAChCJ,EAAAA,IAACI,EAAA,CAAS,UAAU,WAAA,CAAY,CAAA,EAClC,EACAJ,EAAAA,IAACI,EAAA,CAAS,UAAU,UAAA,CAAW,CAAA,EACjC,EAGAD,EAAAA,KAAC,MAAA,CAAI,UAAU,YACb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,0BACb,SAAA,CAAAH,EAAAA,IAACI,EAAA,CAAS,UAAU,SAAA,CAAU,EAC9BJ,EAAAA,IAACI,EAAA,CAAS,UAAU,WAAA,CAAY,CAAA,EAClC,EACAD,EAAAA,KAAC,MAAA,CAAI,UAAU,0BACb,SAAA,CAAAH,EAAAA,IAACI,EAAA,CAAS,UAAU,SAAA,CAAU,EAC9BJ,EAAAA,IAACI,EAAA,CAAS,UAAU,WAAA,CAAY,CAAA,EAClC,EACAD,EAAAA,KAAC,MAAA,CAAI,UAAU,0BACb,SAAA,CAAAH,EAAAA,IAACI,EAAA,CAAS,UAAU,SAAA,CAAU,EAC9BJ,EAAAA,IAACI,EAAA,CAAS,UAAU,WAAA,CAAY,CAAA,CAAA,CAClC,CAAA,EACF,EAGAJ,EAAAA,IAACI,EAAA,CAAS,UAAU,YAAA,CAAa,EACjCJ,EAAAA,IAACI,EAAA,CAAS,UAAU,WAAA,CAAY,EAGhCD,EAAAA,KAAC,MAAA,CAAI,UAAU,yCACb,SAAA,CAAAH,EAAAA,IAACI,EAAA,CAAS,UAAU,UAAA,CAAW,EAC/BJ,EAAAA,IAACI,EAAA,CAAS,UAAU,UAAA,CAAW,CAAA,CAAA,CACjC,CAAA,CAAA,CACF,EACF,EACF,CAEJ,CC9BA,SAASC,GAAa,CACpB,MAAMC,EAAWC,EAAA,EACX,CAAE,KAAArB,CAAA,EAASsB,EAAA,EACX,CAAE,KAAMC,EAAQ,CAAA,EAAI,UAAA5B,EAAW,MAAAiB,EAAO,QAAAY,CAAA,EAAYC,EAAA,EAClD,CAACC,EAAYC,CAAa,EAAInC,EAAAA,SAAS,EAAK,EAC5C,CAACoC,EAAUC,CAAW,EAAIrC,EAAAA,SAAS,EAAK,EAClBsC,EAAAA,QAAQ,IAAM9B,GAAM,aAAa,QAAU,CAAA,EAAI,CAACA,CAAI,CAAC,EAEjF,KAAM,CAAE,YAAAP,EAAa,UAAWsC,CAAA,EAAoB1C,EAAA,EAG9C2C,EAAoBC,GAAmB,CAC3Cb,EAAS,SAASa,CAAM,EAAE,CAC5B,EAIMC,EAAQJ,EAAAA,QAAQ,IAAM,CAC1B,MAAMK,MAAU,KACVC,EAAc,IAAI,KAAKD,CAAG,EAChCC,EAAY,QAAQD,EAAI,QAAA,EAAYA,EAAI,QAAQ,EAChDC,EAAY,SAAS,EAAG,EAAG,EAAG,CAAC,EAE/B,MAAMC,EAAY,IAAI,KAAKD,CAAW,EACtCC,EAAU,QAAQD,EAAY,QAAA,EAAY,CAAC,EAC3CC,EAAU,SAAS,GAAI,GAAI,GAAI,GAAG,EAGlC,MAAMC,EAAgBf,EAAM,OAAOgB,GAAQ,CACzC,MAAMC,EAAW,IAAI,KAAKD,EAAK,IAAI,EACnC,OAAOC,GAAYJ,GAAeI,GAAYH,CAChD,CAAC,EAAE,OAEH,MAAO,CACL,WAAYd,EAAM,OAClB,cAAAe,EACA,cAAe7C,CAAA,CAEnB,EAAG,CAAC8B,EAAO9B,CAAW,CAAC,EAsCjBgD,EAAgB,SAAY,CAChC,GAAI,CAAAf,EAEJ,CAAAG,EAAY,EAAK,EACjBF,EAAc,EAAI,EAClB,GAAI,CACF,MAAMH,EAAA,CACR,QAAA,CACEG,EAAc,EAAK,CACrB,EACF,EAEMe,EAAmB,IAAM,CAC7BtB,EAAS,SAAS,CACpB,EAGMuB,EAAcpB,EACjB,IAAIgB,GAAQ,CACX,MAAMC,EAAW,IAAI,KAAKD,EAAK,IAAI,EAC7BK,MAAY,KACZC,EAAW,IAAI,KAAKD,CAAK,EAC/BC,EAAS,QAAQA,EAAS,QAAA,EAAY,CAAC,EAGvC,IAAIC,EAAW,SACXC,EAAYP,EAAS,QAAA,EAEzB,OAAIA,EAAS,aAAA,IAAmBI,EAAM,gBACpCE,EAAW,QACXC,EAAY,GACHP,EAAS,aAAA,IAAmBK,EAAS,iBAC9CC,EAAW,WACXC,EAAY,GAGP,CACL,GAAGR,EACH,SAAAO,EACA,UAAAC,EACA,SAAAP,CAAA,CAEJ,CAAC,EACA,KAAK,CAACQ,EAAGC,IAEJD,EAAE,YAAcC,EAAE,UACbD,EAAE,UAAYC,EAAE,UAGlBD,EAAE,SAAS,QAAA,EAAYC,EAAE,SAAS,QAAA,CAC1C,EAGH,OAAItD,GAAa4B,EAAM,SAAW,QAE7B,MAAA,CAAI,UAAU,8DACb,SAAAN,EAAAA,KAAC,MAAA,CAAI,UAAU,cACb,SAAA,CAAAH,EAAAA,IAAC,MAAA,CAAI,UAAU,4EAAA,CAA6E,EAC5FA,EAAAA,IAAC,IAAA,CAAE,UAAU,wBAAwB,SAAA,kBAAA,CAAgB,CAAA,CAAA,CACvD,CAAA,CACF,EAKAc,GAAYL,EAAM,SAAW,QAE5B,MAAA,CAAI,UAAU,8DACb,SAAAN,EAAAA,KAAC,MAAA,CAAI,UAAU,wBACb,SAAA,CAAAH,EAAAA,IAAC,IAAA,CAAE,UAAU,wBAAwB,SAAA,oDAAiD,EACtFG,EAAAA,KAACiC,EAAA,CAAO,QAAST,EAAe,QAAQ,UACtC,SAAA,CAAA3B,EAAAA,IAACqC,EAAA,CAAU,UAAU,cAAA,CAAe,EAAE,YAAA,CAAA,CACxC,CAAA,CAAA,CACF,CAAA,CACF,EAKFrC,EAAAA,IAAC,MAAA,CAAI,UAAU,6BACb,SAAAA,EAAAA,IAAC,MAAA,CAAI,UAAU,+BACb,SAAAG,EAAAA,KAAC,MAAA,CAAI,UAAU,yCAEb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,gBAEb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,yCACb,SAAA,CAAAA,OAAC,MAAA,CACC,SAAA,CAAAH,EAAAA,IAAC,KAAA,CAAG,UAAU,iCAAiC,SAAA,UAAO,EACtDA,EAAAA,IAAC,IAAA,CAAE,UAAU,wBAAwB,SAAA,qBAAA,CAAmB,CAAA,EAC1D,EAEAA,EAAAA,IAACoC,EAAA,CACC,QAASR,EACT,KAAK,OACL,UAAU,YACV,aAAW,kBAEX,SAAA5B,EAAAA,IAACsC,EAAA,CAAK,UAAU,SAAA,CAAU,CAAA,CAAA,CAC5B,EACF,EAGAnC,EAAAA,KAAC,MAAA,CAAI,UAAU,wCACb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,qCACb,SAAA,CAAAH,EAAAA,IAAC,MAAA,CAAI,UAAU,kCAAmC,SAAAoB,EAAM,WAAW,EACnEpB,EAAAA,IAAC,MAAA,CAAI,UAAU,gCAAgC,SAAA,cAAA,CAAY,CAAA,EAC7D,EACAG,EAAAA,KAAC,MAAA,CAAI,UAAU,qCACb,SAAA,CAAAH,MAAC,OAAI,UAAU,kCACZ,SAAAiB,EAAkB,MAAQG,EAAM,cACnC,EACApB,EAAAA,IAAC,MAAA,CAAI,UAAU,gCAAgC,SAAA,gBAAA,CAAc,CAAA,EAC/D,EACAG,EAAAA,KAAC,MAAA,CAAI,UAAU,qCACb,SAAA,CAAAH,EAAAA,IAAC,MAAA,CAAI,UAAU,kCAAmC,SAAAoB,EAAM,cAAc,EACtEpB,EAAAA,IAAC,MAAA,CAAI,UAAU,gCAAgC,SAAA,WAAA,CAAS,CAAA,CAAA,CAC1D,CAAA,EACF,EAGAG,EAAAA,KAAC,MAAA,CAAI,UAAU,yCACb,SAAA,CAAAH,EAAAA,IAAC,KAAA,CAAG,UAAU,mCAAmC,SAAA,iBAAc,EAC/DG,EAAAA,KAACiC,EAAA,CACC,QAAQ,UACR,KAAK,KACL,QAAST,EACT,SAAU9C,EACV,UAAU,iBAEV,SAAA,CAAAmB,MAACqC,GAAU,UAAW,gBAAgBxD,EAAY,eAAiB,EAAE,GAAI,EAAE,SAAA,CAAA,CAAA,EAG7EmB,EAAAA,IAACoC,EAAA,CACC,QAAQ,QACR,KAAK,KACL,QAAST,EACT,SAAU9C,EACV,UAAU,YACV,aAAW,gBAEX,eAACwD,EAAA,CAAU,UAAW,WAAWxD,EAAY,eAAiB,EAAE,EAAA,CAAI,CAAA,CAAA,CACtE,EACF,EAEAmB,EAAAA,IAAC,MAAA,CAAI,UAAU,uDACZ,SAAAnB,EAEC,MAAM,KAAK,CAAE,OAAQ,EAAG,EAAE,IAAI,CAAC0D,EAAGC,IAChCxC,EAAAA,IAACD,EAAA,CAAA,EAAsByC,CAAO,CAC/B,EAEDX,EAAY,IAAKJ,SACd,MAAA,CACC,SAAAzB,EAAAA,IAACyC,EAAA,CACC,KAAAhB,EACA,QAAQ,SACR,SAAU,IAAMP,EAAiBO,EAAK,EAAE,CAAA,CAAA,GAJlCA,EAAK,EAMf,CACD,CAAA,CAEL,CAAA,EACF,QAGC,MAAA,CAAI,UAAU,gCACb,SAAAtB,EAAAA,KAAC,MAAA,CAAI,UAAU,sCACb,SAAA,CAAAH,EAAAA,IAAC,KAAA,CAAG,UAAU,6BAA6B,SAAA,cAAW,EACtDG,EAAAA,KAAC,MAAA,CAAI,UAAU,YACb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,oCACb,SAAA,CAAAH,EAAAA,IAAC,OAAA,CAAK,UAAU,wBAAwB,SAAA,eAAY,EACpDA,EAAAA,IAAC,OAAA,CAAK,UAAU,gBAAiB,WAAM,UAAA,CAAW,CAAA,EACpD,EACAG,EAAAA,KAAC,MAAA,CAAI,UAAU,oCACb,SAAA,CAAAH,EAAAA,IAAC,OAAA,CAAK,UAAU,wBAAwB,SAAA,iBAAc,QACrD,OAAA,CAAK,UAAU,gBACb,SAAAiB,EAAkB,MAAQG,EAAM,aAAA,CACnC,CAAA,EACF,EACAjB,EAAAA,KAAC,MAAA,CAAI,UAAU,oCACb,SAAA,CAAAH,EAAAA,IAAC,OAAA,CAAK,UAAU,wBAAwB,SAAA,YAAS,EACjDA,EAAAA,IAAC,OAAA,CAAK,UAAU,gBAAiB,WAAM,aAAA,CAAc,CAAA,CAAA,CACvD,CAAA,CAAA,CACF,CAAA,CAAA,CACF,CAAA,CACF,CAAA,CAAA,CACF,EACF,EACF,CAEJ"}