import{j as e}from"./ui-Ca5AhCQM.js";import{r as l}from"./vendor-IUqyc6Bg.js";import{w as H,m as k,B as m,C as i,v as n,y as x,z as h,o as u}from"./index-CgFXuVCN.js";import{B as j}from"./badge-DJ-Hd5ZM.js";import{A as B,a as E,b as I}from"./avatar-MboSZoIJ.js";import{f as R}from"./dateUtils-But3d3jk.js";import{C as c}from"./calendar-DHKyDRPM.js";import{M as p}from"./map-pin-DffyMoe2.js";import{T as f}from"./trophy-C7ooJcEY.js";import{S as T}from"./settings-CW37znJx.js";function Q(){const o=H(),{user:a}=k(),[y,v]=l.useState([{label:"Games Played",value:"0",icon:c},{label:"Games Hosted",value:"0",icon:p},{label:"Achievements",value:"0",icon:f}]),[g,N]=l.useState([]),[S,b]=l.useState(!0);l.useEffect(()=>{(async()=>{if(!a?.id){b(!1);return}try{const[r,P,U]=await Promise.all([u.getUserStats(a.id).catch(()=>({user_id:a.id,games_played:0,games_hosted:0,total_play_time_minutes:0,favorite_sport:null,last_activity:new Date().toISOString(),created_at:new Date().toISOString(),updated_at:new Date().toISOString()})),u.getUserRecentGames(a.id,5).catch(()=>[]),u.getUserAchievements(a.id).catch(()=>[])]);v([{label:"Games Played",value:r.games_played.toString(),icon:c},{label:"Games Hosted",value:r.games_hosted.toString(),icon:p},{label:"Achievements",value:U.length.toString(),icon:f}]);const D=P.map(t=>({id:t.games.id,title:t.games.title,sport:t.games.sport,date:t.games.date,time:t.games.time,location:t.games.location,isHost:t.games.created_by===a.id}));N(D)}catch(r){console.error("Error loading user data:",r),v([{label:"Games Played",value:"0",icon:c},{label:"Games Hosted",value:"0",icon:p},{label:"Achievements",value:"0",icon:f}]),N([])}finally{b(!1)}})()},[a?.id]);const d=a?.name||"User Profile",w=a?.username?`@${a.username}`:"@user",C=a?.bio||"Sports enthusiast â€¢ Always up for a game!",_=a?.avatar||"",A=a?.preferences?.sports||["Basketball","Soccer","Tennis","Volleyball"],G=!(a?.name&&a?.email);return e.jsxs("div",{className:"min-h-screen bg-background",children:[e.jsxs("div",{className:"flex items-center justify-between px-4 pt-12 pb-6",children:[e.jsx("h1",{className:"text-xl font-semibold",children:"Profile"}),e.jsx(m,{variant:"ghost",size:"icon",onClick:()=>o("/settings"),children:e.jsx(T,{className:"w-5 h-5"})})]}),e.jsxs("div",{className:"px-4 space-y-6",children:[e.jsx(i,{children:e.jsxs(n,{className:"pt-6",children:[e.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[e.jsxs(B,{className:"w-16 h-16",children:[e.jsx(E,{src:_,alt:d}),e.jsx(I,{className:"text-xl",children:d.charAt(0).toUpperCase()})]}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h2",{className:"text-xl font-semibold",children:d}),e.jsx("p",{className:"text-muted-foreground",children:w}),e.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:C})]})]}),e.jsx(m,{variant:"outline",className:"w-full",onClick:()=>o("/profile/edit"),children:"Edit Profile"}),G&&e.jsx(m,{variant:"outline",className:"w-full mt-2",onClick:()=>o("/onboarding"),children:"Complete Profile"})]})}),e.jsxs(i,{children:[e.jsx(x,{children:e.jsx(h,{children:"Stats"})}),e.jsx(n,{children:e.jsx("div",{className:"grid grid-cols-3 gap-4",children:y.map(s=>e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"flex justify-center mb-2",children:e.jsx(s.icon,{className:"w-5 h-5 text-primary"})}),e.jsx("div",{className:"text-2xl font-semibold",children:s.value}),e.jsx("div",{className:"text-xs text-muted-foreground",children:s.label})]},s.label))})})]}),e.jsxs(i,{children:[e.jsx(x,{children:e.jsx(h,{children:"Sports I Play"})}),e.jsx(n,{children:e.jsx("div",{className:"flex flex-wrap gap-2",children:A.map(s=>e.jsx(j,{variant:"secondary",children:s},s))})})]}),e.jsxs(i,{children:[e.jsx(x,{children:e.jsx(h,{children:"Recent Games"})}),e.jsx(n,{children:e.jsx("div",{className:"space-y-3",children:S?e.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[e.jsx("div",{className:"animate-spin w-6 h-6 border-2 border-primary border-t-transparent rounded-full mx-auto mb-4"}),e.jsx("p",{children:"Loading recent games..."})]}):g.length>0?g.map((s,r)=>e.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"font-medium",children:s.title}),e.jsxs("div",{className:"text-sm text-muted-foreground",children:[new Date(s.date).toLocaleDateString()," at ",R(s.time)]}),e.jsx("div",{className:"text-xs text-muted-foreground mt-1",children:s.location})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[s.isHost&&e.jsx(j,{variant:"secondary",className:"text-xs",children:"Host"}),e.jsx(j,{variant:"outline",children:s.sport})]})]},s.id||r)):e.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[e.jsx(c,{className:"w-12 h-12 mx-auto mb-4 opacity-50"}),e.jsx("p",{children:"No recent games"}),e.jsx("p",{className:"text-sm",children:"Join your first game to see it here!"})]})})})]})]})]})}export{Q as UserProfile,Q as default};
//# sourceMappingURL=UserProfile-Q6sh9COA.js.map
