import{j as e,c as t,i as n,k as r,l as o,m as i,n as a,A as s,P as l,o as c,p as u,q as d,r as p,s as f,t as m,v as h,w as x}from"./ui-BV8hHw1h.js";import{r as g}from"./vendor-C07EgOn8.js";import{j as y}from"./index-DDX6CgvO.js";function v(e){return new Date(e.getFullYear(),e.getMonth(),e.getDate())}function b(e,t){if(!e&&!t)return null;if(e&&!t){const t=new Date(e);return isNaN(t.getTime())?null:t}if(!e&&t){const e=new Date(t);return isNaN(e.getTime())?null:e}try{const[n,r,o]=e.split("-").map(Number);if(!n||!r||!o)throw new Error("bad date");let i=0,a=0;if(t){const e=t.trim().match(/^(\d{1,2})(?::(\d{2}))?\s*(AM|PM)?$/i);if(e){i=parseInt(e[1],10),a=e[2]?parseInt(e[2],10):0;const t=e[3]?.toUpperCase();t&&("PM"===t&&i<12&&(i+=12),"AM"===t&&12===i&&(i=0))}}const s=new Date(n,r-1,o,i,a);return isNaN(s.getTime())?null:s}catch{return null}}function w(e,t){return new Intl.DateTimeFormat(void 0,{hour:"numeric",minute:"2-digit",hour12:!0}).format(e)}function T(e,t){return new Intl.DateTimeFormat(void 0,{month:"short",day:"numeric"}).format(e)}function C(e,t,n){const r=new Date,o=b(e,t);if(!o){const n=e||"",r=t||"";return{label:[n,r].filter(Boolean).join(" · "),aria:`Event ${[n,r].filter(Boolean).join(" at ")}`,isPast:!1,isToday:!1,date:n,time:r}}const i=v(r),a=v(o),s=Math.round((a.getTime()-i.getTime())/864e5),l=t?w(o):"";let c="",u=!1;0===s?(c="Today",u=!0):c=1===s?"Tomorrow":T(o);return{label:[c,l].filter(Boolean).join(" · "),aria:`Event ${c}${l?` at ${l}`:""}`,isPast:o.getTime()<r.getTime(),isToday:u,date:c,time:l}}function j(e,t,n){const r=b(e,t);return r?{date:T(r),time:w(r)}:{date:e||"",time:t||""}}function E(e){if(!e)return"";try{const[t,n]=e.split(":").map(Number);if(isNaN(t)||isNaN(n)||t<0||t>23||n<0||n>59)return e;let r=t,o="AM";0===t?(r=12,o="AM"):12===t?(r=12,o="PM"):t>12?(r=t-12,o="PM"):(r=t,o="AM");return`${r}:${n.toString().padStart(2,"0")} ${o}`}catch{return e}}var[D,M]=t("Tooltip",[n]),_=n(),P="TooltipProvider",N=700,R="tooltip.open",[k,L]=D(P),O=t=>{const{__scopeTooltip:n,delayDuration:r=N,skipDelayDuration:o=300,disableHoverableContent:i=!1,children:a}=t,s=g.useRef(!0),l=g.useRef(!1),c=g.useRef(0);return g.useEffect(()=>{const e=c.current;return()=>window.clearTimeout(e)},[]),e.jsx(k,{scope:n,isOpenDelayedRef:s,delayDuration:r,onOpen:g.useCallback(()=>{window.clearTimeout(c.current),s.current=!1},[]),onClose:g.useCallback(()=>{window.clearTimeout(c.current),c.current=window.setTimeout(()=>s.current=!0,o)},[o]),isPointerInTransitRef:l,onPointerInTransitChange:g.useCallback(e=>{l.current=e},[]),disableHoverableContent:i,children:a})};O.displayName=P;var I="Tooltip",[A,$]=D(I),B=t=>{const{__scopeTooltip:n,children:a,open:s,defaultOpen:l,onOpenChange:c,disableHoverableContent:u,delayDuration:d}=t,p=L(I,t.__scopeTooltip),f=_(n),[m,h]=g.useState(null),x=r(),y=g.useRef(0),v=u??p.disableHoverableContent,b=d??p.delayDuration,w=g.useRef(!1),[T,C]=o({prop:s,defaultProp:l??!1,onChange:e=>{e?(p.onOpen(),document.dispatchEvent(new CustomEvent(R))):p.onClose(),c?.(e)},caller:I}),j=g.useMemo(()=>T?w.current?"delayed-open":"instant-open":"closed",[T]),E=g.useCallback(()=>{window.clearTimeout(y.current),y.current=0,w.current=!1,C(!0)},[C]),D=g.useCallback(()=>{window.clearTimeout(y.current),y.current=0,C(!1)},[C]),M=g.useCallback(()=>{window.clearTimeout(y.current),y.current=window.setTimeout(()=>{w.current=!0,C(!0),y.current=0},b)},[b,C]);return g.useEffect(()=>()=>{y.current&&(window.clearTimeout(y.current),y.current=0)},[]),e.jsx(i,{...f,children:e.jsx(A,{scope:n,contentId:x,open:T,stateAttribute:j,trigger:m,onTriggerChange:h,onTriggerEnter:g.useCallback(()=>{p.isOpenDelayedRef.current?M():E()},[p.isOpenDelayedRef,M,E]),onTriggerLeave:g.useCallback(()=>{v?D():(window.clearTimeout(y.current),y.current=0)},[D,v]),onOpen:E,onClose:D,disableHoverableContent:v,children:a})})};B.displayName=I;var F="TooltipTrigger",H=g.forwardRef((t,n)=>{const{__scopeTooltip:r,...o}=t,i=$(F,r),u=L(F,r),d=_(r),p=g.useRef(null),f=a(n,p,i.onTriggerChange),m=g.useRef(!1),h=g.useRef(!1),x=g.useCallback(()=>m.current=!1,[]);return g.useEffect(()=>()=>document.removeEventListener("pointerup",x),[x]),e.jsx(s,{asChild:!0,...d,children:e.jsx(l.button,{"aria-describedby":i.open?i.contentId:void 0,"data-state":i.stateAttribute,...o,ref:f,onPointerMove:c(t.onPointerMove,e=>{"touch"!==e.pointerType&&(h.current||u.isPointerInTransitRef.current||(i.onTriggerEnter(),h.current=!0))}),onPointerLeave:c(t.onPointerLeave,()=>{i.onTriggerLeave(),h.current=!1}),onPointerDown:c(t.onPointerDown,()=>{i.open&&i.onClose(),m.current=!0,document.addEventListener("pointerup",x,{once:!0})}),onFocus:c(t.onFocus,()=>{m.current||i.onOpen()}),onBlur:c(t.onBlur,i.onClose),onClick:c(t.onClick,i.onClose)})})});H.displayName=F;var z="TooltipPortal",[S,Y]=D(z,{forceMount:void 0}),K=t=>{const{__scopeTooltip:n,forceMount:r,children:o,container:i}=t,a=$(z,n);return e.jsx(S,{scope:n,forceMount:r,children:e.jsx(u,{present:r||a.open,children:e.jsx(d,{asChild:!0,container:i,children:o})})})};K.displayName=z;var X="TooltipContent",q=g.forwardRef((t,n)=>{const r=Y(X,t.__scopeTooltip),{forceMount:o=r.forceMount,side:i="top",...a}=t,s=$(X,t.__scopeTooltip);return e.jsx(u,{present:o||s.open,children:s.disableHoverableContent?e.jsx(V,{side:i,...a,ref:n}):e.jsx(U,{side:i,...a,ref:n})})}),U=g.forwardRef((t,n)=>{const r=$(X,t.__scopeTooltip),o=L(X,t.__scopeTooltip),i=g.useRef(null),s=a(n,i),[l,c]=g.useState(null),{trigger:u,onClose:d}=r,p=i.current,{onPointerInTransitChange:f}=o,m=g.useCallback(()=>{c(null),f(!1)},[f]),h=g.useCallback((e,t)=>{const n=e.currentTarget,r={x:e.clientX,y:e.clientY},o=function(e,t,n=5){const r=[];switch(t){case"top":r.push({x:e.x-n,y:e.y+n},{x:e.x+n,y:e.y+n});break;case"bottom":r.push({x:e.x-n,y:e.y-n},{x:e.x+n,y:e.y-n});break;case"left":r.push({x:e.x+n,y:e.y-n},{x:e.x+n,y:e.y+n});break;case"right":r.push({x:e.x-n,y:e.y-n},{x:e.x-n,y:e.y+n})}return r}(r,function(e,t){const n=Math.abs(t.top-e.y),r=Math.abs(t.bottom-e.y),o=Math.abs(t.right-e.x),i=Math.abs(t.left-e.x);switch(Math.min(n,r,o,i)){case i:return"left";case o:return"right";case n:return"top";case r:return"bottom";default:throw new Error("unreachable")}}(r,n.getBoundingClientRect())),i=function(e){const t=e.slice();return t.sort((e,t)=>e.x<t.x?-1:e.x>t.x?1:e.y<t.y?-1:e.y>t.y?1:0),function(e){if(e.length<=1)return e.slice();const t=[];for(let r=0;r<e.length;r++){const n=e[r];for(;t.length>=2;){const e=t[t.length-1],r=t[t.length-2];if(!((e.x-r.x)*(n.y-r.y)>=(e.y-r.y)*(n.x-r.x)))break;t.pop()}t.push(n)}t.pop();const n=[];for(let r=e.length-1;r>=0;r--){const t=e[r];for(;n.length>=2;){const e=n[n.length-1],r=n[n.length-2];if(!((e.x-r.x)*(t.y-r.y)>=(e.y-r.y)*(t.x-r.x)))break;n.pop()}n.push(t)}return n.pop(),1===t.length&&1===n.length&&t[0].x===n[0].x&&t[0].y===n[0].y?t:t.concat(n)}(t)}([...o,...function(e){const{top:t,right:n,bottom:r,left:o}=e;return[{x:o,y:t},{x:n,y:t},{x:n,y:r},{x:o,y:r}]}(t.getBoundingClientRect())]);c(i),f(!0)},[f]);return g.useEffect(()=>()=>m(),[m]),g.useEffect(()=>{if(u&&p){const e=e=>h(e,p),t=e=>h(e,u);return u.addEventListener("pointerleave",e),p.addEventListener("pointerleave",t),()=>{u.removeEventListener("pointerleave",e),p.removeEventListener("pointerleave",t)}}},[u,p,h,m]),g.useEffect(()=>{if(l){const e=e=>{const t=e.target,n={x:e.clientX,y:e.clientY},r=u?.contains(t)||p?.contains(t),o=!function(e,t){const{x:n,y:r}=e;let o=!1;for(let i=0,a=t.length-1;i<t.length;a=i++){const e=t[i],s=t[a],l=e.x,c=e.y,u=s.x,d=s.y;c>r!=d>r&&n<(u-l)*(r-c)/(d-c)+l&&(o=!o)}return o}(n,l);r?m():o&&(m(),d())};return document.addEventListener("pointermove",e),()=>document.removeEventListener("pointermove",e)}},[u,p,l,d,m]),e.jsx(V,{...t,ref:s})}),[G,J]=D(I,{isInside:!1}),Q=h("TooltipContent"),V=g.forwardRef((t,n)=>{const{__scopeTooltip:r,children:o,"aria-label":i,onEscapeKeyDown:a,onPointerDownOutside:s,...l}=t,c=$(X,r),u=_(r),{onClose:d}=c;return g.useEffect(()=>(document.addEventListener(R,d),()=>document.removeEventListener(R,d)),[d]),g.useEffect(()=>{if(c.trigger){const e=e=>{const t=e.target;t?.contains(c.trigger)&&d()};return window.addEventListener("scroll",e,{capture:!0}),()=>window.removeEventListener("scroll",e,{capture:!0})}},[c.trigger,d]),e.jsx(f,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:a,onPointerDownOutside:s,onFocusOutside:e=>e.preventDefault(),onDismiss:d,children:e.jsxs(m,{"data-state":c.stateAttribute,...u,...l,ref:n,style:{...l.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"},children:[e.jsx(Q,{children:o}),e.jsx(G,{scope:r,isInside:!0,children:e.jsx(x,{id:c.contentId,role:"tooltip",children:i||o})})]})})});q.displayName=X;var W="TooltipArrow",Z=g.forwardRef((t,n)=>{const{__scopeTooltip:r,...o}=t,i=_(r);return J(W,r).isInside?null:e.jsx(p,{...i,...o,ref:n})});Z.displayName=W;var ee=O,te=B,ne=H,re=K,oe=q,ie=Z;function ae({delayDuration:t=0,...n}){return e.jsx(ee,{"data-slot":"tooltip-provider",delayDuration:t,...n})}function se({...t}){return e.jsx(ae,{children:e.jsx(te,{"data-slot":"tooltip",...t})})}function le({...t}){return e.jsx(ne,{"data-slot":"tooltip-trigger",...t})}function ce({className:t,sideOffset:n=0,children:r,...o}){return e.jsx(re,{children:e.jsxs(oe,{"data-slot":"tooltip-content",sideOffset:n,className:y("bg-primary text-primary-foreground animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-50 w-fit origin-(--radix-tooltip-content-transform-origin) rounded-md px-3 py-1.5 text-xs text-balance",t),...o,children:[r,e.jsx(ie,{className:"bg-primary fill-primary z-50 size-2.5 translate-y-[calc(-50%_-_2px)] rotate-45 rounded-[2px]"})]})})}export{ae as T,se as a,le as b,ce as c,C as d,j as e,E as f};
//# sourceMappingURL=tooltip-B3VuSm7j.js.map
