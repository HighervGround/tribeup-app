const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/HomeScreen-B9M_DwZG.js","assets/ui-Bz49QZar.js","assets/vendor-CVaDA-xz.js","assets/useGames-CbWGBe7_.js","assets/data-BwpJIDKS.js","assets/utils-e0hEqRVR.js","assets/UnifiedGameCard-ByVfytPj.js","assets/realtime-avatar-stack-BHG7GsXc.js","assets/ImageWithFallback-BlIlvXsa.js","assets/dateUtils-ByixnkWz.js","assets/skeleton-B1T84toF.js","assets/SearchDiscovery-C93R7zog.js","assets/input-CjRmnmg3.js","assets/CreateGame-OptwjXb7.js","assets/progress-BTH-hFq0.js","assets/textarea-BHufWxL3.js","assets/select-CHu0lzdH.js","assets/UserProfile-BGxhR2hP.js","assets/tabs-2Rw60kq6.js","assets/useUserProfile-I0Es53RK.js","assets/AchievementBadge-CxNhMtEW.js","assets/EditProfile-CSnWqEKv.js","assets/GameDetails-P_HBy8XM.js","assets/separator-e50WqlP1.js","assets/useDeepLinks-fOdk0YoC.js","assets/OtherUserProfile-BpiTF_fC.js","assets/NotificationCenter-QXi7C-zH.js","assets/Settings-J7Vv0Zk_.js","assets/switch-BWiVYRiL.js","assets/AccessibilitySettings-BqwJgwiI.js","assets/NotificationSettings-CgqQExCK.js","assets/DesignSystem-CZMyozrz.js","assets/AdminDashboard-BVjGaaIg.js","assets/TermsOfService-D3jA70xW.js","assets/PrivacyPolicy-B5nFj4He.js","assets/Onboarding-D6bCuJa0.js","assets/NavigationTest-D8oAFkOD.js","assets/Auth-DKyXWxz7.js"])))=>i.map(i=>d[i]);
import{j as e,S as t,c as r,P as a,u as s,a as i}from"./ui-Bz49QZar.js";import{a as n,r as o,u as l,N as c,e as d,R as u,O as m,f as p,B as g,h as f,i as h}from"./vendor-CVaDA-xz.js";import{Q as _,c as w,_ as y,a as b,b as v}from"./data-BwpJIDKS.js";import{c as x,T as k,R as j,L as E,a as S,t as N,H as I,S as T,P as A,B as C,U as P,M as R,b as O,C as U,d as z}from"./utils-e0hEqRVR.js";!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver(e=>{for(const r of e)if("childList"===r.type)for(const e of r.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&t(e)}).observe(document,{childList:!0,subtree:!0})}function t(e){if(e.ep)return;e.ep=!0;const t=function(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),"use-credentials"===e.crossOrigin?t.credentials="include":"anonymous"===e.crossOrigin?t.credentials="omit":t.credentials="same-origin",t}(e);fetch(e.href,t)}}();var D={},L=n;D.createRoot=L.createRoot,D.hydrateRoot=L.hydrateRoot;const G=e=>"boolean"==typeof e?`${e}`:0===e?"0":e,q=x,M=(e,t)=>r=>{var a;if(null==(null==t?void 0:t.variants))return q(e,null==r?void 0:r.class,null==r?void 0:r.className);const{variants:s,defaultVariants:i}=t,n=Object.keys(s).map(e=>{const t=null==r?void 0:r[e],a=null==i?void 0:i[e];if(null===t)return null;const n=G(t)||G(a);return s[e][n]}),o=r&&Object.entries(r).reduce((e,t)=>{let[r,a]=t;return void 0===a||(e[r]=a),e},{}),l=null==t||null===(a=t.compoundVariants)||void 0===a?void 0:a.reduce((e,t)=>{let{class:r,className:a,...s}=t;return Object.entries(s).every(e=>{let[t,r]=e;return Array.isArray(r)?r.includes({...i,...o}[t]):{...i,...o}[t]===r})?[...e,r,a]:e},[]);return q(e,n,l,null==r?void 0:r.class,null==r?void 0:r.className)},F=e=>{const t=$(e),{conflictingClassGroups:r,conflictingClassGroupModifiers:a}=e;return{getClassGroupId:e=>{const r=e.split("-");return""===r[0]&&1!==r.length&&r.shift(),V(r,t)||B(e)},getConflictingClassGroupIds:(e,t)=>{const s=r[e]||[];return t&&a[e]?[...s,...a[e]]:s}}},V=(e,t)=>{if(0===e.length)return t.classGroupId;const r=e[0],a=t.nextPart.get(r),s=a?V(e.slice(1),a):void 0;if(s)return s;if(0===t.validators.length)return;const i=e.join("-");return t.validators.find(({validator:e})=>e(i))?.classGroupId},W=/^\[(.+)\]$/,B=e=>{if(W.test(e)){const t=W.exec(e)[1],r=t?.substring(0,t.indexOf(":"));if(r)return"arbitrary.."+r}},$=e=>{const{theme:t,classGroups:r}=e,a={nextPart:new Map,validators:[]};for(const s in r)H(r[s],a,s,t);return a},H=(e,t,r,a)=>{e.forEach(e=>{if("string"==typeof e){return void((""===e?t:K(t,e)).classGroupId=r)}if("function"==typeof e)return J(e)?void H(e(a),t,r,a):void t.validators.push({validator:e,classGroupId:r});Object.entries(e).forEach(([e,s])=>{H(s,K(t,e),r,a)})})},K=(e,t)=>{let r=e;return t.split("-").forEach(e=>{r.nextPart.has(e)||r.nextPart.set(e,{nextPart:new Map,validators:[]}),r=r.nextPart.get(e)}),r},J=e=>e.isThemeGetter,Y=e=>{if(e<1)return{get:()=>{},set:()=>{}};let t=0,r=new Map,a=new Map;const s=(s,i)=>{r.set(s,i),t++,t>e&&(t=0,a=r,r=new Map)};return{get(e){let t=r.get(e);return void 0!==t?t:void 0!==(t=a.get(e))?(s(e,t),t):void 0},set(e,t){r.has(e)?r.set(e,t):s(e,t)}}},Q=e=>{const{prefix:t,experimentalParseClassName:r}=e;let a=e=>{const t=[];let r,a=0,s=0,i=0;for(let l=0;l<e.length;l++){let n=e[l];if(0===a&&0===s){if(":"===n){t.push(e.slice(i,l)),i=l+1;continue}if("/"===n){r=l;continue}}"["===n?a++:"]"===n?a--:"("===n?s++:")"===n&&s--}const n=0===t.length?e:e.substring(i),o=X(n);return{modifiers:t,hasImportantModifier:o!==n,baseClassName:o,maybePostfixModifierPosition:r&&r>i?r-i:void 0}};if(t){const e=t+":",r=a;a=t=>t.startsWith(e)?r(t.substring(e.length)):{isExternal:!0,modifiers:[],hasImportantModifier:!1,baseClassName:t,maybePostfixModifierPosition:void 0}}if(r){const e=a;a=t=>r({className:t,parseClassName:e})}return a},X=e=>e.endsWith("!")?e.substring(0,e.length-1):e.startsWith("!")?e.substring(1):e,Z=e=>{const t=Object.fromEntries(e.orderSensitiveModifiers.map(e=>[e,!0]));return e=>{if(e.length<=1)return e;const r=[];let a=[];return e.forEach(e=>{"["===e[0]||t[e]?(r.push(...a.sort(),e),a=[]):a.push(e)}),r.push(...a.sort()),r}},ee=/\s+/;function te(){let e,t,r=0,a="";for(;r<arguments.length;)(e=arguments[r++])&&(t=re(e))&&(a&&(a+=" "),a+=t);return a}const re=e=>{if("string"==typeof e)return e;let t,r="";for(let a=0;a<e.length;a++)e[a]&&(t=re(e[a]))&&(r&&(r+=" "),r+=t);return r};function ae(e,...t){let r,a,s,i=function(o){const l=t.reduce((e,t)=>t(e),e());return r=(e=>({cache:Y(e.cacheSize),parseClassName:Q(e),sortModifiers:Z(e),...F(e)}))(l),a=r.cache.get,s=r.cache.set,i=n,n(o)};function n(e){const t=a(e);if(t)return t;const i=((e,t)=>{const{parseClassName:r,getClassGroupId:a,getConflictingClassGroupIds:s,sortModifiers:i}=t,n=[],o=e.trim().split(ee);let l="";for(let c=o.length-1;c>=0;c-=1){const e=o[c],{isExternal:t,modifiers:d,hasImportantModifier:u,baseClassName:m,maybePostfixModifierPosition:p}=r(e);if(t){l=e+(l.length>0?" "+l:l);continue}let g=!!p,f=a(g?m.substring(0,p):m);if(!f){if(!g){l=e+(l.length>0?" "+l:l);continue}if(f=a(m),!f){l=e+(l.length>0?" "+l:l);continue}g=!1}const h=i(d).join(":"),_=u?h+"!":h,w=_+f;if(n.includes(w))continue;n.push(w);const y=s(f,g);for(let r=0;r<y.length;++r){const e=y[r];n.push(_+e)}l=e+(l.length>0?" "+l:l)}return l})(e,r);return s(e,i),i}return function(){return i(te.apply(null,arguments))}}const se=e=>{const t=t=>t[e]||[];return t.isThemeGetter=!0,t},ie=/^\[(?:(\w[\w-]*):)?(.+)\]$/i,ne=/^\((?:(\w[\w-]*):)?(.+)\)$/i,oe=/^\d+\/\d+$/,le=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,ce=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,de=/^(rgba?|hsla?|hwb|(ok)?(lab|lch)|color-mix)\(.+\)$/,ue=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,me=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,pe=e=>oe.test(e),ge=e=>!!e&&!Number.isNaN(Number(e)),fe=e=>!!e&&Number.isInteger(Number(e)),he=e=>e.endsWith("%")&&ge(e.slice(0,-1)),_e=e=>le.test(e),we=()=>!0,ye=e=>ce.test(e)&&!de.test(e),be=()=>!1,ve=e=>ue.test(e),xe=e=>me.test(e),ke=e=>!Ee(e)&&!Ce(e),je=e=>Le(e,Fe,be),Ee=e=>ie.test(e),Se=e=>Le(e,Ve,ye),Ne=e=>Le(e,We,ge),Ie=e=>Le(e,qe,be),Te=e=>Le(e,Me,xe),Ae=e=>Le(e,$e,ve),Ce=e=>ne.test(e),Pe=e=>Ge(e,Ve),Re=e=>Ge(e,Be),Oe=e=>Ge(e,qe),Ue=e=>Ge(e,Fe),ze=e=>Ge(e,Me),De=e=>Ge(e,$e,!0),Le=(e,t,r)=>{const a=ie.exec(e);return!!a&&(a[1]?t(a[1]):r(a[2]))},Ge=(e,t,r=!1)=>{const a=ne.exec(e);return!!a&&(a[1]?t(a[1]):r)},qe=e=>"position"===e||"percentage"===e,Me=e=>"image"===e||"url"===e,Fe=e=>"length"===e||"size"===e||"bg-size"===e,Ve=e=>"length"===e,We=e=>"number"===e,Be=e=>"family-name"===e,$e=e=>"shadow"===e,He=ae(()=>{const e=se("color"),t=se("font"),r=se("text"),a=se("font-weight"),s=se("tracking"),i=se("leading"),n=se("breakpoint"),o=se("container"),l=se("spacing"),c=se("radius"),d=se("shadow"),u=se("inset-shadow"),m=se("text-shadow"),p=se("drop-shadow"),g=se("blur"),f=se("perspective"),h=se("aspect"),_=se("ease"),w=se("animate"),y=()=>["center","top","bottom","left","right","top-left","left-top","top-right","right-top","bottom-right","right-bottom","bottom-left","left-bottom",Ce,Ee],b=()=>[Ce,Ee,l],v=()=>[pe,"full","auto",...b()],x=()=>[fe,"none","subgrid",Ce,Ee],k=()=>["auto",{span:["full",fe,Ce,Ee]},fe,Ce,Ee],j=()=>[fe,"auto",Ce,Ee],E=()=>["auto","min","max","fr",Ce,Ee],S=()=>["auto",...b()],N=()=>[pe,"auto","full","dvw","dvh","lvw","lvh","svw","svh","min","max","fit",...b()],I=()=>[e,Ce,Ee],T=()=>["center","top","bottom","left","right","top-left","left-top","top-right","right-top","bottom-right","right-bottom","bottom-left","left-bottom",Oe,Ie,{position:[Ce,Ee]}],A=()=>["auto","cover","contain",Ue,je,{size:[Ce,Ee]}],C=()=>[he,Pe,Se],P=()=>["","none","full",c,Ce,Ee],R=()=>["",ge,Pe,Se],O=()=>[ge,he,Oe,Ie],U=()=>["","none",g,Ce,Ee],z=()=>["none",ge,Ce,Ee],D=()=>["none",ge,Ce,Ee],L=()=>[ge,Ce,Ee],G=()=>[pe,"full",...b()];return{cacheSize:500,theme:{animate:["spin","ping","pulse","bounce"],aspect:["video"],blur:[_e],breakpoint:[_e],color:[we],container:[_e],"drop-shadow":[_e],ease:["in","out","in-out"],font:[ke],"font-weight":["thin","extralight","light","normal","medium","semibold","bold","extrabold","black"],"inset-shadow":[_e],leading:["none","tight","snug","normal","relaxed","loose"],perspective:["dramatic","near","normal","midrange","distant","none"],radius:[_e],shadow:[_e],spacing:["px",ge],text:[_e],"text-shadow":[_e],tracking:["tighter","tight","normal","wide","wider","widest"]},classGroups:{aspect:[{aspect:["auto","square",pe,Ee,Ce,h]}],container:["container"],columns:[{columns:[ge,Ee,Ce,o]}],"break-after":[{"break-after":["auto","avoid","all","avoid-page","page","left","right","column"]}],"break-before":[{"break-before":["auto","avoid","all","avoid-page","page","left","right","column"]}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],sr:["sr-only","not-sr-only"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:y()}],overflow:[{overflow:["auto","hidden","clip","visible","scroll"]}],"overflow-x":[{"overflow-x":["auto","hidden","clip","visible","scroll"]}],"overflow-y":[{"overflow-y":["auto","hidden","clip","visible","scroll"]}],overscroll:[{overscroll:["auto","contain","none"]}],"overscroll-x":[{"overscroll-x":["auto","contain","none"]}],"overscroll-y":[{"overscroll-y":["auto","contain","none"]}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:v()}],"inset-x":[{"inset-x":v()}],"inset-y":[{"inset-y":v()}],start:[{start:v()}],end:[{end:v()}],top:[{top:v()}],right:[{right:v()}],bottom:[{bottom:v()}],left:[{left:v()}],visibility:["visible","invisible","collapse"],z:[{z:[fe,"auto",Ce,Ee]}],basis:[{basis:[pe,"full","auto",o,...b()]}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["nowrap","wrap","wrap-reverse"]}],flex:[{flex:[ge,pe,"auto","initial","none",Ee]}],grow:[{grow:["",ge,Ce,Ee]}],shrink:[{shrink:["",ge,Ce,Ee]}],order:[{order:[fe,"first","last","none",Ce,Ee]}],"grid-cols":[{"grid-cols":x()}],"col-start-end":[{col:k()}],"col-start":[{"col-start":j()}],"col-end":[{"col-end":j()}],"grid-rows":[{"grid-rows":x()}],"row-start-end":[{row:k()}],"row-start":[{"row-start":j()}],"row-end":[{"row-end":j()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":E()}],"auto-rows":[{"auto-rows":E()}],gap:[{gap:b()}],"gap-x":[{"gap-x":b()}],"gap-y":[{"gap-y":b()}],"justify-content":[{justify:["start","end","center","between","around","evenly","stretch","baseline","center-safe","end-safe","normal"]}],"justify-items":[{"justify-items":["start","end","center","stretch","center-safe","end-safe","normal"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch","center-safe","end-safe"]}],"align-content":[{content:["normal","start","end","center","between","around","evenly","stretch","baseline","center-safe","end-safe"]}],"align-items":[{items:["start","end","center","stretch","center-safe","end-safe",{baseline:["","last"]}]}],"align-self":[{self:["auto","start","end","center","stretch","center-safe","end-safe",{baseline:["","last"]}]}],"place-content":[{"place-content":["start","end","center","between","around","evenly","stretch","baseline","center-safe","end-safe"]}],"place-items":[{"place-items":["start","end","center","stretch","center-safe","end-safe","baseline"]}],"place-self":[{"place-self":["auto","start","end","center","stretch","center-safe","end-safe"]}],p:[{p:b()}],px:[{px:b()}],py:[{py:b()}],ps:[{ps:b()}],pe:[{pe:b()}],pt:[{pt:b()}],pr:[{pr:b()}],pb:[{pb:b()}],pl:[{pl:b()}],m:[{m:S()}],mx:[{mx:S()}],my:[{my:S()}],ms:[{ms:S()}],me:[{me:S()}],mt:[{mt:S()}],mr:[{mr:S()}],mb:[{mb:S()}],ml:[{ml:S()}],"space-x":[{"space-x":b()}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":b()}],"space-y-reverse":["space-y-reverse"],size:[{size:N()}],w:[{w:[o,"screen",...N()]}],"min-w":[{"min-w":[o,"screen","none",...N()]}],"max-w":[{"max-w":[o,"screen","none","prose",{screen:[n]},...N()]}],h:[{h:["screen","lh",...N()]}],"min-h":[{"min-h":["screen","lh","none",...N()]}],"max-h":[{"max-h":["screen","lh",...N()]}],"font-size":[{text:["base",r,Pe,Se]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:[a,Ce,Ne]}],"font-stretch":[{"font-stretch":["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded",he,Ee]}],"font-family":[{font:[Re,Ee,t]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:[s,Ce,Ee]}],"line-clamp":[{"line-clamp":[ge,"none",Ce,Ne]}],leading:[{leading:[i,...b()]}],"list-image":[{"list-image":["none",Ce,Ee]}],"list-style-position":[{list:["inside","outside"]}],"list-style-type":[{list:["disc","decimal","none",Ce,Ee]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"placeholder-color":[{placeholder:I()}],"text-color":[{text:I()}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:["solid","dashed","dotted","double","wavy"]}],"text-decoration-thickness":[{decoration:[ge,"from-font","auto",Ce,Se]}],"text-decoration-color":[{decoration:I()}],"underline-offset":[{"underline-offset":[ge,"auto",Ce,Ee]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:b()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",Ce,Ee]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],wrap:[{wrap:["break-word","anywhere","normal"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",Ce,Ee]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:T()}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","space","round"]}]}],"bg-size":[{bg:A()}],"bg-image":[{bg:["none",{linear:[{to:["t","tr","r","br","b","bl","l","tl"]},fe,Ce,Ee],radial:["",Ce,Ee],conic:[fe,Ce,Ee]},ze,Te]}],"bg-color":[{bg:I()}],"gradient-from-pos":[{from:C()}],"gradient-via-pos":[{via:C()}],"gradient-to-pos":[{to:C()}],"gradient-from":[{from:I()}],"gradient-via":[{via:I()}],"gradient-to":[{to:I()}],rounded:[{rounded:P()}],"rounded-s":[{"rounded-s":P()}],"rounded-e":[{"rounded-e":P()}],"rounded-t":[{"rounded-t":P()}],"rounded-r":[{"rounded-r":P()}],"rounded-b":[{"rounded-b":P()}],"rounded-l":[{"rounded-l":P()}],"rounded-ss":[{"rounded-ss":P()}],"rounded-se":[{"rounded-se":P()}],"rounded-ee":[{"rounded-ee":P()}],"rounded-es":[{"rounded-es":P()}],"rounded-tl":[{"rounded-tl":P()}],"rounded-tr":[{"rounded-tr":P()}],"rounded-br":[{"rounded-br":P()}],"rounded-bl":[{"rounded-bl":P()}],"border-w":[{border:R()}],"border-w-x":[{"border-x":R()}],"border-w-y":[{"border-y":R()}],"border-w-s":[{"border-s":R()}],"border-w-e":[{"border-e":R()}],"border-w-t":[{"border-t":R()}],"border-w-r":[{"border-r":R()}],"border-w-b":[{"border-b":R()}],"border-w-l":[{"border-l":R()}],"divide-x":[{"divide-x":R()}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":R()}],"divide-y-reverse":["divide-y-reverse"],"border-style":[{border:["solid","dashed","dotted","double","hidden","none"]}],"divide-style":[{divide:["solid","dashed","dotted","double","hidden","none"]}],"border-color":[{border:I()}],"border-color-x":[{"border-x":I()}],"border-color-y":[{"border-y":I()}],"border-color-s":[{"border-s":I()}],"border-color-e":[{"border-e":I()}],"border-color-t":[{"border-t":I()}],"border-color-r":[{"border-r":I()}],"border-color-b":[{"border-b":I()}],"border-color-l":[{"border-l":I()}],"divide-color":[{divide:I()}],"outline-style":[{outline:["solid","dashed","dotted","double","none","hidden"]}],"outline-offset":[{"outline-offset":[ge,Ce,Ee]}],"outline-w":[{outline:["",ge,Pe,Se]}],"outline-color":[{outline:I()}],shadow:[{shadow:["","none",d,De,Ae]}],"shadow-color":[{shadow:I()}],"inset-shadow":[{"inset-shadow":["none",u,De,Ae]}],"inset-shadow-color":[{"inset-shadow":I()}],"ring-w":[{ring:R()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:I()}],"ring-offset-w":[{"ring-offset":[ge,Se]}],"ring-offset-color":[{"ring-offset":I()}],"inset-ring-w":[{"inset-ring":R()}],"inset-ring-color":[{"inset-ring":I()}],"text-shadow":[{"text-shadow":["none",m,De,Ae]}],"text-shadow-color":[{"text-shadow":I()}],opacity:[{opacity:[ge,Ce,Ee]}],"mix-blend":[{"mix-blend":["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity","plus-darker","plus-lighter"]}],"bg-blend":[{"bg-blend":["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"]}],"mask-clip":[{"mask-clip":["border","padding","content","fill","stroke","view"]},"mask-no-clip"],"mask-composite":[{mask:["add","subtract","intersect","exclude"]}],"mask-image-linear-pos":[{"mask-linear":[ge]}],"mask-image-linear-from-pos":[{"mask-linear-from":O()}],"mask-image-linear-to-pos":[{"mask-linear-to":O()}],"mask-image-linear-from-color":[{"mask-linear-from":I()}],"mask-image-linear-to-color":[{"mask-linear-to":I()}],"mask-image-t-from-pos":[{"mask-t-from":O()}],"mask-image-t-to-pos":[{"mask-t-to":O()}],"mask-image-t-from-color":[{"mask-t-from":I()}],"mask-image-t-to-color":[{"mask-t-to":I()}],"mask-image-r-from-pos":[{"mask-r-from":O()}],"mask-image-r-to-pos":[{"mask-r-to":O()}],"mask-image-r-from-color":[{"mask-r-from":I()}],"mask-image-r-to-color":[{"mask-r-to":I()}],"mask-image-b-from-pos":[{"mask-b-from":O()}],"mask-image-b-to-pos":[{"mask-b-to":O()}],"mask-image-b-from-color":[{"mask-b-from":I()}],"mask-image-b-to-color":[{"mask-b-to":I()}],"mask-image-l-from-pos":[{"mask-l-from":O()}],"mask-image-l-to-pos":[{"mask-l-to":O()}],"mask-image-l-from-color":[{"mask-l-from":I()}],"mask-image-l-to-color":[{"mask-l-to":I()}],"mask-image-x-from-pos":[{"mask-x-from":O()}],"mask-image-x-to-pos":[{"mask-x-to":O()}],"mask-image-x-from-color":[{"mask-x-from":I()}],"mask-image-x-to-color":[{"mask-x-to":I()}],"mask-image-y-from-pos":[{"mask-y-from":O()}],"mask-image-y-to-pos":[{"mask-y-to":O()}],"mask-image-y-from-color":[{"mask-y-from":I()}],"mask-image-y-to-color":[{"mask-y-to":I()}],"mask-image-radial":[{"mask-radial":[Ce,Ee]}],"mask-image-radial-from-pos":[{"mask-radial-from":O()}],"mask-image-radial-to-pos":[{"mask-radial-to":O()}],"mask-image-radial-from-color":[{"mask-radial-from":I()}],"mask-image-radial-to-color":[{"mask-radial-to":I()}],"mask-image-radial-shape":[{"mask-radial":["circle","ellipse"]}],"mask-image-radial-size":[{"mask-radial":[{closest:["side","corner"],farthest:["side","corner"]}]}],"mask-image-radial-pos":[{"mask-radial-at":["center","top","bottom","left","right","top-left","left-top","top-right","right-top","bottom-right","right-bottom","bottom-left","left-bottom"]}],"mask-image-conic-pos":[{"mask-conic":[ge]}],"mask-image-conic-from-pos":[{"mask-conic-from":O()}],"mask-image-conic-to-pos":[{"mask-conic-to":O()}],"mask-image-conic-from-color":[{"mask-conic-from":I()}],"mask-image-conic-to-color":[{"mask-conic-to":I()}],"mask-mode":[{mask:["alpha","luminance","match"]}],"mask-origin":[{"mask-origin":["border","padding","content","fill","stroke","view"]}],"mask-position":[{mask:T()}],"mask-repeat":[{mask:["no-repeat",{repeat:["","x","y","space","round"]}]}],"mask-size":[{mask:A()}],"mask-type":[{"mask-type":["alpha","luminance"]}],"mask-image":[{mask:["none",Ce,Ee]}],filter:[{filter:["","none",Ce,Ee]}],blur:[{blur:U()}],brightness:[{brightness:[ge,Ce,Ee]}],contrast:[{contrast:[ge,Ce,Ee]}],"drop-shadow":[{"drop-shadow":["","none",p,De,Ae]}],"drop-shadow-color":[{"drop-shadow":I()}],grayscale:[{grayscale:["",ge,Ce,Ee]}],"hue-rotate":[{"hue-rotate":[ge,Ce,Ee]}],invert:[{invert:["",ge,Ce,Ee]}],saturate:[{saturate:[ge,Ce,Ee]}],sepia:[{sepia:["",ge,Ce,Ee]}],"backdrop-filter":[{"backdrop-filter":["","none",Ce,Ee]}],"backdrop-blur":[{"backdrop-blur":U()}],"backdrop-brightness":[{"backdrop-brightness":[ge,Ce,Ee]}],"backdrop-contrast":[{"backdrop-contrast":[ge,Ce,Ee]}],"backdrop-grayscale":[{"backdrop-grayscale":["",ge,Ce,Ee]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[ge,Ce,Ee]}],"backdrop-invert":[{"backdrop-invert":["",ge,Ce,Ee]}],"backdrop-opacity":[{"backdrop-opacity":[ge,Ce,Ee]}],"backdrop-saturate":[{"backdrop-saturate":[ge,Ce,Ee]}],"backdrop-sepia":[{"backdrop-sepia":["",ge,Ce,Ee]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":b()}],"border-spacing-x":[{"border-spacing-x":b()}],"border-spacing-y":[{"border-spacing-y":b()}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["","all","colors","opacity","shadow","transform","none",Ce,Ee]}],"transition-behavior":[{transition:["normal","discrete"]}],duration:[{duration:[ge,"initial",Ce,Ee]}],ease:[{ease:["linear","initial",_,Ce,Ee]}],delay:[{delay:[ge,Ce,Ee]}],animate:[{animate:["none",w,Ce,Ee]}],backface:[{backface:["hidden","visible"]}],perspective:[{perspective:[f,Ce,Ee]}],"perspective-origin":[{"perspective-origin":y()}],rotate:[{rotate:z()}],"rotate-x":[{"rotate-x":z()}],"rotate-y":[{"rotate-y":z()}],"rotate-z":[{"rotate-z":z()}],scale:[{scale:D()}],"scale-x":[{"scale-x":D()}],"scale-y":[{"scale-y":D()}],"scale-z":[{"scale-z":D()}],"scale-3d":["scale-3d"],skew:[{skew:L()}],"skew-x":[{"skew-x":L()}],"skew-y":[{"skew-y":L()}],transform:[{transform:[Ce,Ee,"","none","gpu","cpu"]}],"transform-origin":[{origin:y()}],"transform-style":[{transform:["3d","flat"]}],translate:[{translate:G()}],"translate-x":[{"translate-x":G()}],"translate-y":[{"translate-y":G()}],"translate-z":[{"translate-z":G()}],"translate-none":["translate-none"],accent:[{accent:I()}],appearance:[{appearance:["none","auto"]}],"caret-color":[{caret:I()}],"color-scheme":[{scheme:["normal","dark","light","light-dark","only-dark","only-light"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",Ce,Ee]}],"field-sizing":[{"field-sizing":["fixed","content"]}],"pointer-events":[{"pointer-events":["auto","none"]}],resize:[{resize:["none","","y","x"]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":b()}],"scroll-mx":[{"scroll-mx":b()}],"scroll-my":[{"scroll-my":b()}],"scroll-ms":[{"scroll-ms":b()}],"scroll-me":[{"scroll-me":b()}],"scroll-mt":[{"scroll-mt":b()}],"scroll-mr":[{"scroll-mr":b()}],"scroll-mb":[{"scroll-mb":b()}],"scroll-ml":[{"scroll-ml":b()}],"scroll-p":[{"scroll-p":b()}],"scroll-px":[{"scroll-px":b()}],"scroll-py":[{"scroll-py":b()}],"scroll-ps":[{"scroll-ps":b()}],"scroll-pe":[{"scroll-pe":b()}],"scroll-pt":[{"scroll-pt":b()}],"scroll-pr":[{"scroll-pr":b()}],"scroll-pb":[{"scroll-pb":b()}],"scroll-pl":[{"scroll-pl":b()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",Ce,Ee]}],fill:[{fill:["none",...I()]}],"stroke-w":[{stroke:[ge,Pe,Se,Ne]}],stroke:[{stroke:["none",...I()]}],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-x","border-w-y","border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-x","border-color-y","border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],translate:["translate-x","translate-y","translate-none"],"translate-none":["translate","translate-x","translate-y","translate-z"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]},orderSensitiveModifiers:["*","**","after","backdrop","before","details-content","file","first-letter","first-line","marker","placeholder","selection"]}});function Ke(...e){return He(x(e))}const Je=M("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-lg text-sm font-medium transition-all duration-200 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive shadow-sm hover:shadow-md active:scale-[0.98] transform",{variants:{variant:{default:"bg-orange-600 text-white hover:bg-orange-700 hover:shadow-orange-600/25 hover:text-white active:text-white focus:text-white",destructive:"bg-gradient-to-r from-destructive to-destructive/90 text-white hover:from-destructive/90 hover:to-destructive/80 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 hover:shadow-destructive/25 hover:text-white active:text-white focus:text-white",outline:"border-2 bg-background text-gray-900 hover:bg-accent hover:text-gray-900 dark:bg-input/30 dark:border-input dark:hover:bg-input/50 hover:border-primary/50 dark:text-white active:text-gray-900 focus:text-gray-900",secondary:"bg-gradient-to-r from-secondary to-secondary/90 text-gray-900 hover:from-secondary/90 hover:to-secondary/80 hover:text-gray-900 active:text-gray-900 focus:text-gray-900 dark:text-white",ghost:"hover:bg-accent hover:text-gray-900 dark:hover:bg-accent/50 hover:shadow-none text-gray-900 dark:text-white active:text-gray-900 focus:text-gray-900",link:"text-orange-600 underline-offset-4 hover:underline shadow-none hover:shadow-none hover:text-orange-700 active:text-orange-600 focus:text-orange-600 dark:text-orange-400",message:"bg-gradient-to-r from-blue-500 to-blue-600 text-white hover:from-blue-600 hover:to-blue-700 hover:shadow-blue-500/25 font-semibold hover:text-white active:text-white focus:text-white"},size:{default:"h-10 px-5 py-2.5 has-[>svg]:px-4",sm:"h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5",lg:"h-12 rounded-lg px-8 has-[>svg]:px-6 text-base",icon:"size-10 rounded-lg"}},defaultVariants:{variant:"default",size:"default"}});function Ye({className:r,variant:a,size:s,asChild:i=!1,...n}){const o=i?t:"button";return e.jsx(o,{"data-slot":"button",className:Ke(Je({variant:a,size:s,className:r})),...n})}function Qe({className:t,...r}){return e.jsx("div",{"data-slot":"card",className:Ke("bg-card text-card-foreground flex flex-col gap-6 rounded-xl border",t),...r})}function Xe({className:t,...r}){return e.jsx("div",{"data-slot":"card-header",className:Ke("@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-1.5 px-6 pt-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6",t),...r})}function Ze({className:t,...r}){return e.jsx("h4",{"data-slot":"card-title",className:Ke("leading-none",t),...r})}function et({className:t,...r}){return e.jsx("p",{"data-slot":"card-description",className:Ke("text-muted-foreground",t),...r})}function tt({className:t,...r}){return e.jsx("div",{"data-slot":"card-content",className:Ke("px-6 [&:last-child]:pb-6",t),...r})}class rt extends o.Component{constructor(e){super(e),this.state={hasError:!1,error:null,errorInfo:null}}static getDerivedStateFromError(e){return{hasError:!0,error:e,errorInfo:null}}componentDidCatch(e,t){this.setState({error:e,errorInfo:t}),this.props.onError&&this.props.onError(e,t)}handleRetry=()=>{this.setState({hasError:!1,error:null,errorInfo:null})};render(){return this.state.hasError?this.props.fallback?this.props.fallback:e.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center p-4",children:e.jsxs(Qe,{className:"w-full max-w-md",children:[e.jsxs(Xe,{className:"text-center",children:[e.jsx("div",{className:"mx-auto mb-4 flex h-12 w-12 items-center justify-center rounded-full bg-destructive/10",children:e.jsx(k,{className:"h-6 w-6 text-destructive"})}),e.jsx(Ze,{className:"text-xl",children:"Something went wrong"})]}),e.jsxs(tt,{className:"space-y-4",children:[e.jsx("p",{className:"text-sm text-muted-foreground text-center",children:"We encountered an unexpected error. This has been logged and we'll look into it."}),!1,e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(Ye,{onClick:this.handleRetry,className:"flex-1",variant:"default",children:[e.jsx(j,{className:"w-4 h-4 mr-2"}),"Try Again"]}),e.jsx(Ye,{onClick:()=>window.location.reload(),variant:"outline",className:"flex-1",children:"Reload Page"})]})]})]})}):this.props.children}}function at({error:t,resetErrorBoundary:r}){return e.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center",children:e.jsxs("div",{className:"text-center space-y-4 max-w-md",children:[e.jsx("div",{className:"flex justify-center",children:e.jsx(k,{className:"w-12 h-12 text-destructive"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-semibold text-destructive mb-2",children:"Something went wrong"}),e.jsx("p",{className:"text-muted-foreground mb-4",children:t.message||"An unexpected error occurred while loading data."}),e.jsxs("details",{className:"text-left bg-muted p-3 rounded text-xs",children:[e.jsx("summary",{className:"cursor-pointer font-medium mb-2",children:"Technical Details"}),e.jsx("pre",{className:"whitespace-pre-wrap break-words",children:t.stack||t.message})]})]}),e.jsxs("div",{className:"flex gap-2 justify-center",children:[e.jsxs(Ye,{onClick:r,children:[e.jsx(j,{className:"w-4 h-4 mr-2"}),"Try Again"]}),e.jsx(Ye,{variant:"outline",onClick:()=>{localStorage.clear(),sessionStorage.clear(),window.location.reload()},children:"Reset App"})]})]})})}class st extends o.Component{constructor(e){super(e),this.state={hasError:!1}}static getDerivedStateFromError(e){return{hasError:!0,error:e}}componentDidCatch(e,t){}reset=()=>{this.setState({hasError:!1,error:void 0}),this.props.onReset?.()};render(){return this.state.hasError&&this.state.error?this.props.fallback?this.props.fallback(this.state.error,this.reset):e.jsx(at,{error:this.state.error,resetErrorBoundary:this.reset}):this.props.children}}function it({children:t}){return e.jsx(_,{children:({reset:r})=>e.jsx(st,{onReset:r,fallback:(t,r)=>e.jsx(at,{error:t,resetErrorBoundary:r}),children:t})})}function nt({size:t="md",className:r="",text:a}){return e.jsxs("div",{className:`flex flex-col items-center justify-center gap-3 ${r}`,children:[e.jsx("div",{className:"animate-spin",children:e.jsx(E,{className:`${{sm:"w-4 h-4",md:"w-6 h-6",lg:"w-8 h-8"}[t]} text-primary`})}),a&&e.jsx("p",{className:"text-sm text-muted-foreground",children:a})]})}const ot="https://alegufnopsminqcokelr.supabase.co"?.trim(),lt="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImFsZWd1Zm5vcHNtaW5xY29rZWxyIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTYyMzUwMjIsImV4cCI6MjA3MTgxMTAyMn0.YgwFtX87MiSXA83DN2um0WP-1uYU6qsPXhwGmIWjadQ"?.trim();if(!ot||!lt)throw new Error("Missing Supabase environment variables. Please set VITE_SUPABASE_URL and VITE_SUPABASE_ANON_KEY in your .env file.");const ct=globalThis.__supabase__||w(ot,lt,{auth:{persistSession:!0,autoRefreshToken:!0,detectSessionInUrl:!0,storageKey:"tribeup-auth",flowType:"pkce",storage:"undefined"!=typeof window?window.localStorage:void 0,debug:!1},db:{schema:"public"},global:{headers:{"x-client-info":"tribeup-web@1.0.0"}},realtime:{params:{eventsPerSecond:2},heartbeatIntervalMs:3e4,reconnectAfterMs:()=>5e3*Math.random()}});"undefined"!=typeof globalThis&&(globalThis.__supabase__=ct),"undefined"!=typeof window&&(window.supabase=ct);const dt=(e,t=!1)=>({id:e.id,title:e.title,sport:e.sport,date:e.date,time:e.time,duration:e.duration||60,location:e.location,latitude:e.latitude,longitude:e.longitude,cost:e.cost,maxPlayers:e.max_players,currentPlayers:e.current_players,description:e.description,imageUrl:e.image_url||"",sportColor:mt(e.sport),isJoined:t,createdBy:e.creator?.full_name||e.creator?.username||`Unknown User (${e.creator_id?.slice(0,8)||"No ID"})`,creatorId:e.creator_id,creatorData:e.creator?{id:e.creator.id,name:e.creator.full_name||e.creator.username||e.creator.email?.split("@")[0]||`User ${e.creator.id.slice(0,8)}`,avatar:e.creator.avatar_url||""}:{id:e.creator_id,name:`Unknown User (${e.creator_id?.slice(0,8)||"No ID"})`,avatar:""},createdAt:e.created_at}),ut=e=>({id:e.id,name:e.full_name||e.username||e.email?.split("@")[0]||`Unknown User (${e.id.slice(0,8)})`,username:e.username||e.email?.split("@")[0]||`user_${e.id.slice(0,8)}`,email:e.email,avatar:e.avatar_url||"",bio:e.bio||"",location:e.location||"",role:e.role||"user",preferences:{theme:"auto",highContrast:!1,largeText:!1,reducedMotion:!1,colorBlindFriendly:!1,notifications:{push:!0,email:!1,gameReminders:!0},privacy:{locationSharing:!0,profileVisibility:"public"},sports:e.preferred_sports||[]}}),mt=e=>({basketball:"#FA4616",soccer:"#22C55E",tennis:"#3B82F6",pickleball:"#65A30D",volleyball:"#8B5CF6",football:"#F59E0B",baseball:"#EF4444",swimming:"#06B6D4",running:"#10B981",cycling:"#6366F1",yoga:"#EC4899"}[e.toLowerCase()]||"#6B7280"),pt={VITE_ENABLE_MOCK_DATA:"false",VITE_OPENWEATHER_API_KEY:"3d49d90fb511ba08385a88435f10825c",VITE_SUPABASE_ANON_KEY:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImFsZWd1Zm5vcHNtaW5xY29rZWxyIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTYyMzUwMjIsImV4cCI6MjA3MTgxMTAyMn0.YgwFtX87MiSXA83DN2um0WP-1uYU6qsPXhwGmIWjadQ",VITE_SUPABASE_URL:"https://alegufnopsminqcokelr.supabase.co",VITE_VAPID_PUBLIC_KEY:"BC4DMZTgsNweSUVDik1uoXwpXEnzk12jgZTVA0B19WYKxa4NeaFv4QRov_1e-w-V_SgN7RrBZ_yMX_2HopLoSus"};class gt{static instance;config;constructor(){this.config=this.loadConfig(),this.validateConfig()}static getInstance(){return gt.instance||(gt.instance=new gt),gt.instance}loadConfig(){const e=pt;return{supabaseUrl:e.VITE_SUPABASE_URL,supabaseAnonKey:e.VITE_SUPABASE_ANON_KEY,openWeatherApiKey:e.VITE_OPENWEATHER_API_KEY,weatherTempUnit:e.VITE_WEATHER_TEMP_UNIT||"fahrenheit",weatherUpdateInterval:parseInt(e.VITE_WEATHER_UPDATE_INTERVAL||"3600"),weatherIncludeHourly:"false"!==e.VITE_WEATHER_INCLUDE_HOURLY,weatherRainThreshold:parseFloat(e.VITE_WEATHER_RAIN_THRESHOLD||"0.1"),weatherWindThreshold:parseInt(e.VITE_WEATHER_WIND_THRESHOLD||"15"),vapidPublicKey:e.VITE_VAPID_PUBLIC_KEY,profileCheckTimeout:parseInt(e.VITE_PROFILE_CHECK_TIMEOUT||"5000"),profileForceTimeout:parseInt(e.VITE_PROFILE_FORCE_TIMEOUT||"15000"),presenceHeartbeatInterval:parseInt(e.VITE_PRESENCE_HEARTBEAT_INTERVAL||"30000"),locationMonitoringInterval:parseInt(e.VITE_LOCATION_MONITORING_INTERVAL||"1800000"),gameEditRestrictionHours:parseInt(e.VITE_GAME_EDIT_RESTRICTION_HOURS||"2"),gameDeletionRestrictionHours:parseInt(e.VITE_GAME_DELETION_RESTRICTION_HOURS||"4"),enableMockData:"true"===e.VITE_ENABLE_MOCK_DATA,logLevel:e.VITE_LOG_LEVEL||"info"}}validateConfig(){const e=[];if(this.config.supabaseUrl||e.push("VITE_SUPABASE_URL is required"),this.config.supabaseAnonKey||e.push("VITE_SUPABASE_ANON_KEY is required"),(isNaN(this.config.weatherUpdateInterval)||this.config.weatherUpdateInterval<60)&&e.push("VITE_WEATHER_UPDATE_INTERVAL must be a number >= 60"),(isNaN(this.config.weatherRainThreshold)||this.config.weatherRainThreshold<0)&&e.push("VITE_WEATHER_RAIN_THRESHOLD must be a number >= 0"),(isNaN(this.config.weatherWindThreshold)||this.config.weatherWindThreshold<0)&&e.push("VITE_WEATHER_WIND_THRESHOLD must be a number >= 0"),(isNaN(this.config.profileCheckTimeout)||this.config.profileCheckTimeout<1e3)&&e.push("VITE_PROFILE_CHECK_TIMEOUT must be a number >= 1000"),(isNaN(this.config.profileForceTimeout)||this.config.profileForceTimeout<5e3)&&e.push("VITE_PROFILE_FORCE_TIMEOUT must be a number >= 5000"),(isNaN(this.config.presenceHeartbeatInterval)||this.config.presenceHeartbeatInterval<1e4)&&e.push("VITE_PRESENCE_HEARTBEAT_INTERVAL must be a number >= 10000"),(isNaN(this.config.gameEditRestrictionHours)||this.config.gameEditRestrictionHours<0)&&e.push("VITE_GAME_EDIT_RESTRICTION_HOURS must be a number >= 0"),(isNaN(this.config.gameDeletionRestrictionHours)||this.config.gameDeletionRestrictionHours<0)&&e.push("VITE_GAME_DELETION_RESTRICTION_HOURS must be a number >= 0"),["fahrenheit","celsius"].includes(this.config.weatherTempUnit)||e.push('VITE_WEATHER_TEMP_UNIT must be "fahrenheit" or "celsius"'),["debug","info","warn","error"].includes(this.config.logLevel)||e.push("VITE_LOG_LEVEL must be one of: debug, info, warn, error"),e.length>0)throw new Error(`Environment configuration errors:\n${e.join("\n")}`);const t=[];this.config.openWeatherApiKey||t.push("VITE_OPENWEATHER_API_KEY not set - weather features will use mock data"),this.config.vapidPublicKey||t.push("VITE_VAPID_PUBLIC_KEY not set - push notifications will be disabled"),t.length}getConfig(){return{...this.config}}get(e){return this.config[e]}isFeatureEnabled(e){switch(e){case"weather":return!!this.config.openWeatherApiKey;case"pushNotifications":return!!this.config.vapidPublicKey;case"mockData":return this.config.enableMockData;default:return!1}}}const ft=gt.getInstance();class ht{static async signUp(e,t,r){const{data:a,error:s}=await ct.auth.signUp({email:e,password:t,options:{data:{full_name:r.name,username:r.name?.toLowerCase().replace(/\s+/g,"_")}}});if(s)throw s;return a.user&&await this.createUserProfile(a.user.id,r),a}static async signIn(e,t){const{data:r,error:a}=await ct.auth.signInWithPassword({email:e,password:t});if(a)throw a;return r}static async signOut(){const{error:e}=await ct.auth.signOut();if(e)throw e}static async getCurrentUser(){const{data:{user:e},error:t}=await ct.auth.getUser();if(t)throw t;return e}static async createUserProfile(e,t){try{const{data:r,error:a}=await ct.from("users").select("id").eq("id",e).maybeSingle();if(a&&"PGRST116"!==a.code)throw a;let s=t.email||null;if(!s){const{data:e}=await ct.auth.getUser();s=e.user?.email??null}if(!s)throw new Error("Unable to determine user email for profile creation");const i={id:e,email:s,full_name:`${t.firstName||""} ${t.lastName||""}`.trim()||t.name||"New User",username:t.username||`user_${Math.random().toString(36).substring(2,10)}`,bio:t.bio||"",location:t.location||"",role:t.role||"user",preferred_sports:Array.isArray(t.selectedSports)?t.selectedSports.filter(e=>"string"==typeof e&&e.trim().length>0):[]},{data:n,error:o}=await ct.from("users").upsert(i,{onConflict:"id"}).select().single();if(o)throw o;return n}catch(r){throw r}}static async getUserProfile(e){try{if(!e||""===e.trim())return null;const{data:{user:t}}=await ct.auth.getUser();if(!t)return null;const{data:r,error:a}=await ct.from("users").select("\n          id,\n          email,\n          username,\n          full_name,\n          avatar_url,\n          bio,\n          location,\n          preferred_sports,\n          role,\n          stats,\n          created_at\n        ").eq("id",e.trim()).maybeSingle();if(a){if("PGRST116"!==a.code)throw a;{const{data:t,error:r}=await ct.from("users").select("id, email, username, full_name, avatar_url, bio, location, role").eq("id",e.trim()).limit(1).single();if(r)throw r;(new Date).toISOString()}}if(!r){const{data:e,error:t}=await ct.from("users").select("id, full_name").limit(5);return null}return ut(r)}catch(t){return t instanceof Error&&t.message,null}}static async isUsernameAvailable(e,t){const r=ct.from("users").select("id",{count:"exact",head:!0}).ilike("username",e),{count:a,error:s}=t?await r.neq("id",t):await r;if(s)throw s;return 0===(a??0)}static async uploadAvatar(e){const t=await this.getCurrentUser();if(!t)throw new Error("User not authenticated");const r=`${Date.now()}_${e.name}`.replace(/\s+/g,"_"),a=`${t.id}/${r}`,{error:s}=await ct.storage.from("avatars").upload(a,e,{upsert:!0,cacheControl:"3600"});if(s)throw s;const{data:i}=ct.storage.from("avatars").getPublicUrl(a);return i.publicUrl}static async updateUserProfile(e,t){const r={full_name:t.full_name,username:t.username,avatar_url:t.avatar_url,bio:t.bio,location:t.location,preferred_sports:t.preferred_sports||t.sports_preferences};t.role&&(r.role=t.role);const{data:a,error:s}=await ct.from("users").update(r).eq("id",e).select().single();if(s)throw s;return ut(a)}static async isProfileComplete(e){try{const t=await this.getUserProfile(e);return!!(t&&t.name&&t.username)}catch(t){return!1}}static async hasAdminRole(e){try{const{data:t,error:r}=await ct.from("users").select("role").eq("id",e).single();return!r&&"admin"===t.role}catch(t){return!1}}static async hasModeratorRole(e){try{const{data:t,error:r}=await ct.from("users").select("role").eq("id",e).single();return!r&&("moderator"===t.role||"admin"===t.role)}catch(t){return!1}}static async updateUserRole(e,t){const r=await this.getCurrentUser();if(!r)throw new Error("Not authenticated");if(!(await this.hasAdminRole(r.id)))throw new Error("Only admins can update user roles");const{error:a}=await ct.from("users").update({role:t}).eq("id",e);if(a)throw a;await this.logAdminAction("update_user_role","user",e,{role:t})}static async deleteGame(e,t){const r=await this.getCurrentUser();if(!r)throw new Error("Not authenticated");const{data:a,error:s}=await ct.from("games").select("creator_id, date, time, title").eq("id",e).single();if(s)throw s;const i=a.creator_id===r.id,n=await this.hasModeratorRole(r.id);if(!i&&!n)throw new Error("Only game creators, moderators, or admins can delete games");if(i&&!n){const e=new Date(`${a.date}T${a.time}`),t=new Date,r=(e.getTime()-t.getTime())/36e5,s=ft.get("gameDeletionRestrictionHours");if(r<s)throw new Error(`Cannot delete game within ${s} hours of start time`)}await this.notifyGameParticipants(e,"game_cancelled",{title:"Game Cancelled",message:`The game "${a.title}" has been cancelled${t?`: ${t}`:"."}`}),await ct.from("game_participants").delete().eq("game_id",e),await ct.from("chat_messages").delete().eq("game_id",e);const{error:o}=await ct.from("games").delete().eq("id",e);if(o)throw o;n&&!i&&await this.logAdminAction("delete_game","game",e,{reason:t||"admin_deletion",game_title:a.title})}static async getAllUsers(){const e=await this.getCurrentUser();if(!e)throw new Error("Not authenticated");if(!(await this.hasAdminRole(e.id)))throw new Error("Only admins can view all users");const{data:t,error:r}=await ct.from("users").select("*").order("created_at",{ascending:!1});if(r)throw r;return t.map(ut)}static async logAdminAction(e,t,r,a){if(!(await this.getCurrentUser()))return;const{error:s}=await ct.rpc("log_admin_action",{p_action:e,p_target_type:t,p_target_id:r,p_details:a})}static async getAdminAuditLog(e=50){const t=await this.getCurrentUser();if(!t)throw new Error("Not authenticated");if(!(await this.hasAdminRole(t.id)))throw new Error("Only admins can view audit logs");const{data:r,error:a}=await ct.from("admin_audit_log").select("\n        *,\n        admin:admin_id(full_name, username, email)\n      ").order("created_at",{ascending:!1}).limit(e);if(a)throw a;return r}static getMockGames(){const e=new Date,t=new Date(e);return t.setDate(t.getDate()+1),[{id:"mock-1",title:"Basketball Pickup Game",sport:"basketball",date:e.toISOString().split("T")[0],time:"18:00",duration:90,location:"Local Community Center",cost:"Free",maxPlayers:10,currentPlayers:6,description:"Casual pickup basketball game. All skill levels welcome!",imageUrl:"",sportColor:"#FA4616",isJoined:!1,createdBy:"mock-user",createdAt:e.toISOString()},{id:"mock-2",title:"Soccer Match",sport:"soccer",date:t.toISOString().split("T")[0],time:"19:30",duration:120,location:"City Park Field",cost:"$5",maxPlayers:22,currentPlayers:18,description:"Friendly soccer match. Bring your own water!",imageUrl:"",sportColor:"#22C55E",isJoined:!1,createdBy:"mock-user",createdAt:e.toISOString()}]}static async getGames(){const e=performance.now();try{const{data:{user:e}}=await ct.auth.getUser(),t=e?.id,r=performance.now(),{data:a,error:s}=await ct.from("games").select("\n          *,\n          game_participants(user_id),\n          creator:users!games_creator_id_fkey(\n            id,\n            full_name,\n            username,\n            email,\n            avatar_url\n          )\n        ").gte("date",(new Date).toISOString().split("T")[0]).order("date",{ascending:!0}).limit(50);performance.now();if(s)throw s;const i=(a||[]).map(e=>{const r=t&&e.game_participants?.some(e=>e.user_id===t)||!1;return dt(e,r)});performance.now();return i}catch(t){if(t.message?.includes("timeout"));else if(t.message?.includes("JWT")||t.message?.includes("auth"))try{await ct.auth.signOut(),localStorage.clear()}catch(r){}try{const{data:e,error:t}=await ct.from("games").select("*").gte("date",(new Date).toISOString().split("T")[0]).order("date",{ascending:!0}).limit(50);if(t)throw t;return(e||[]).map(e=>({id:e.id,title:e.title,sport:e.sport,date:e.date,time:e.time,location:e.location,latitude:e.latitude,longitude:e.longitude,cost:e.cost,maxPlayers:e.max_players,currentPlayers:e.current_players,description:e.description,imageUrl:e.image_url||"",sportColor:"#6B7280",isJoined:!1,createdBy:`Unknown User (${e.creator_id?.slice(0,8)||"No ID"})`,creatorId:e.creator_id,creatorData:{id:e.creator_id,name:`Unknown User (${e.creator_id?.slice(0,8)||"No ID"})`,avatar:""},createdAt:e.created_at}))}catch(a){return this.getMockGames()}}}static async getMyGames(e){const{data:t,error:r}=await ct.from("games").select("\n        *,\n        creator:users!games_creator_id_fkey(full_name, username)\n      ").eq("creator_id",e).gte("date",(new Date).toISOString().split("T")[0]).order("date",{ascending:!0});if(r)throw r;return t.map(e=>dt(e,!0))}static async getNearbyGames(e,t,r=25){try{const{data:{user:r}}=await ct.auth.getUser(),a=r?.id;let s=ct.from("games").select("id,title,sport,date,time,location,cost,max_players,current_players,description,image_url,creator_id");if(e||t||(s=s.gte("date",(new Date).toISOString().split("T")[0])),e&&t&&(s=s.filter("latitude","gte",e-.1).filter("latitude","lte",e+.1).filter("longitude","gte",t-.1).filter("longitude","lte",t+.1)),!a){const{data:e,error:t}=await s.order("date",{ascending:!0}).limit(50);if(t)throw t;return(e||[]).map(e=>dt(e,!1))}const{data:i,error:n}=await s.select("\n          *,\n          game_participants(user_id)\n        ").order("date",{ascending:!0}).limit(50);if(n)throw n;return(i||[]).map(e=>{const t=a&&e.game_participants?.some(e=>e.user_id===a)||!1;return dt(e,t)})}catch(a){return this.getGames()}}static async createGame(e){const t=await this.getCurrentUser();if(!t)throw new Error("User not authenticated");try{const{data:e,error:r}=await ct.from("users").select("id").eq("id",t.id).maybeSingle();if(e){if(r&&"PGRST116"!==r.code)throw r}else{const{data:e}=await ct.auth.getUser(),r=e.user?.email||"";if(!r)throw new Error("Cannot create user profile: missing email from auth");const a={id:t.id,email:r,full_name:e.user?.user_metadata?.full_name||e.user?.user_metadata?.name||"New User",username:e.user?.user_metadata?.username||`user_${Math.random().toString(36).slice(2,10)}`,bio:"",location:"",preferred_sports:[]},{error:s}=await ct.from("users").upsert(a,{onConflict:"id"});if(s)throw s}}catch(s){}const{data:r,error:a}=await ct.from("games").insert([{title:e.title,sport:e.sport,date:e.date,time:e.time,location:e.location,latitude:e.latitude,longitude:e.longitude,cost:e.cost,max_players:e.maxPlayers,current_players:1,description:e.description,image_url:e.imageUrl,creator_id:t.id}]).select().single();if(a)throw a;try{await ct.from("game_participants").insert({game_id:r.id,user_id:t.id})}catch(s){}return r.id}static async updateGame(e,t){const r=await this.getCurrentUser();if(!r)throw new Error("User not authenticated");const{data:a,error:s}=await ct.from("games").select("creator_id, date, time").eq("id",e).single();if(s)throw s;if(a.creator_id!==r.id)throw new Error("Only the game creator can edit this game");const i=new Date(`${a.date}T${a.time}`),n=new Date,o=(i.getTime()-n.getTime())/36e5,l=ft.get("gameEditRestrictionHours");if(o<l)throw new Error(`Cannot edit game within ${l} hours of start time`);let c;if(void 0!==t.cost)if("FREE"===t.cost)c=0;else{const e=t.cost.match(/\$(\d+)/);c=e?parseInt(e[1]):0}const d={};void 0!==t.title&&(d.title=t.title),void 0!==t.sport&&(d.sport=t.sport),void 0!==t.description&&(d.description=t.description),void 0!==t.date&&(d.date=t.date),void 0!==t.time&&(d.time=t.time),void 0!==t.duration&&(d.duration=t.duration),void 0!==t.location&&(d.location=t.location),void 0!==t.latitude&&(d.latitude=t.latitude),void 0!==t.longitude&&(d.longitude=t.longitude),void 0!==t.maxPlayers&&(d.max_players=t.maxPlayers),void 0!==c&&(d.cost=c),void 0!==t.imageUrl&&(d.image_url=t.imageUrl);const{data:u,error:m}=await ct.from("games").update(d).eq("id",e).select().single();if(m)throw m;return await this.notifyGameParticipants(e,"game_updated",{title:"Game Updated",message:`The game "${u.title}" has been updated by the organizer.`}),dt(u,!1)}static async notifyGameParticipants(e,t,r){try{const{data:a,error:s}=await ct.from("game_participants").select("user_id").eq("game_id",e);if(s||!a)return;const i=a.map(a=>({user_id:a.user_id,type:t,title:r.title,message:r.message,data:{gameId:e},read:!1}));i.length>0&&await ct.from("notifications").insert(i)}catch(a){}}static async joinGame(e){const t=await this.getCurrentUser();if(!t)throw new Error("User not authenticated");const{error:r}=await ct.rpc("join_game",{game_uuid:e});if(r)throw r;try{await ht.recordGameParticipation(t.id,e,"joined")}catch(a){!a?.message?.includes("Could not find the 'status' column")&&a?.message?.includes('column "status" of relation "game_participants" does not exist')}}static async leaveGame(e){const t=await this.getCurrentUser();if(!t)throw new Error("User not authenticated");const{error:r}=await ct.rpc("leave_game",{game_uuid:e});if(r)throw r;try{await ht.recordGameParticipation(t.id,e,"left")}catch(a){!a?.message?.includes("Could not find the 'status' column")&&a?.message?.includes('column "status" of relation "game_participants" does not exist')}}static async getPublicRSVPs(e){const{data:t,error:r}=await ct.from("public_rsvps").select("*").eq("game_id",e).order("created_at",{ascending:!1});if(r)throw r;return t||[]}static async createPublicRSVP(e,t){const{data:r}=await ct.from("public_rsvps").select("id").eq("game_id",e).eq("email",t.email).single();if(r)throw new Error("This email has already RSVPed for this game");const{error:a}=await ct.from("public_rsvps").insert({game_id:e,name:t.name,email:t.email,phone:t.phone});if(a)throw a}static async getGameById(e){const t=performance.now();try{let t;try{const{data:{session:e}}=await ct.auth.getSession();t=e?.user?.id}catch(r){t=void 0}if(t){const{data:r,error:a}=await ct.from("games").select("*").eq("id",e).single();if(a)throw a;const{data:s}=await ct.from("game_participants").select("user_id").eq("game_id",e).eq("user_id",t).maybeSingle(),i=!!s;let n=null;if(r.creator_id){const{data:e}=await ct.from("users").select("id, full_name, username, avatar_url").eq("id",r.creator_id).maybeSingle();n=e}const o=dt({...r,creator:n},i);performance.now();return o}{const{data:t,error:r}=await ct.from("games").select("*").eq("id",e).single();if(r)throw r;let a=null;if(t.creator_id){const{data:e}=await ct.from("users").select("id, full_name, username, avatar_url").eq("id",t.creator_id).maybeSingle();a=e}const s=dt({...t,creator:a},!1);performance.now();return s}}catch(a){performance.now();throw a}}static async getNotifications(){const e=await this.getCurrentUser();if(!e)throw new Error("User not authenticated");const{data:t,error:r}=await ct.from("notifications").select("*").eq("user_id",e.id).order("created_at",{ascending:!1});return r?[]:t.map(e=>({id:e.id,type:e.type,title:e.title,message:e.message,timestamp:new Date(e.created_at),read:e.read,actionUrl:e.data?.actionUrl,gameId:e.data?.gameId,userId:e.data?.userId,data:e.data}))}static async markNotificationAsRead(e){const{error:t}=await ct.from("notifications").update({read:!0}).eq("id",e);if(t)throw t}static async deleteNotification(e){const{error:t}=await ct.from("notifications").delete().eq("id",e);if(t)throw t}static async clearAllNotifications(){const e=await this.getCurrentUser();if(!e)throw new Error("User not authenticated");const{data:t,error:r,count:a}=await ct.from("notifications").delete().eq("user_id",e.id).select();if(r)throw r}static async getGameParticipants(e){performance.now();try{const{data:t,error:r}=await ct.from("game_participants").select("user_id, joined_at").eq("game_id",e);if(r)throw r;if(!t||0===t.length)return[];const a=t.map(e=>e.user_id),{data:s,error:i}=await ct.from("users").select("id, full_name").limit(1),{data:n,error:o}=await ct.from("users").select("id, full_name, username, avatar_url, email").in("id",a);return o?t.map(e=>({id:e.user_id,name:`Unknown User (${e.user_id.slice(0,8)})`,avatar:null,isHost:!1,rating:4.5})):t.map(e=>{const t=n?.find(t=>t.id===e.user_id);return{id:e.user_id,name:t?.full_name||t?.username||t?.email?.split("@")[0]||`Unknown User (${e.user_id.slice(0,8)})`,avatar:t?.avatar_url||null,isHost:!1,rating:4.5}})}catch(t){return[]}}static async createTestUser(e){try{const{data:t,error:r}=await ct.from("users").insert([{id:e.id||crypto.randomUUID(),full_name:e.full_name,username:e.username,email:e.email,bio:e.bio||"",location:e.location||"",role:"user",created_at:(new Date).toISOString()}]).select().single();if(r)throw r;return t}catch(t){throw t}}static subscribeToGameUpdates(e,t){return ct.channel(`game:${e}`).on("postgres_changes",{event:"*",schema:"public",table:"games",filter:`id=eq.${e}`},t).on("postgres_changes",{event:"*",schema:"public",table:"game_participants",filter:`game_id=eq.${e}`},t).subscribe()}static subscribeToChatMessages(e,t){return ct.channel(`chat:${e}`).on("postgres_changes",{event:"INSERT",schema:"public",table:"chat_messages",filter:`game_id=eq.${e}`},t).subscribe()}static subscribeToNotifications(e){return{unsubscribe:()=>{}}}static subscribeToAllGames(e){return{unsubscribe:()=>{}}}static subscribeToPublicRSVPs(e,t){return{unsubscribe:()=>{}}}static async searchGames(e){try{const{data:{user:t}}=await ct.auth.getUser(),r=t?.id;let a=ct.from("games").select("id,title,sport,date,time,location,cost,max_players,current_players,description,image_url,creator_id");if(e.dateRange?.start||(a=a.gte("date",(new Date).toISOString().split("T")[0])),e.sports&&e.sports.length>0&&(a=a.in("sport",e.sports)),e.dateRange?.start&&(a=a.gte("date",e.dateRange.start.toISOString().split("T")[0])),e.dateRange?.end&&(a=a.lte("date",e.dateRange.end.toISOString().split("T")[0])),!r){const{data:e,error:t}=await a.order("date",{ascending:!0}).limit(50);if(t)throw t;return(e||[]).map(e=>dt(e,!1))}const{data:s,error:i}=await a.select("\n          *,\n          game_participants(user_id)\n        ").order("date",{ascending:!0}).limit(50);if(i)throw i;return(s||[]).map(e=>{const t=e.game_participants?.some(e=>e.user_id===r)||!1;return dt(e,t)})}catch(t){return[]}}static async getRecommendedGames(e){Date.now(),Math.random().toString(36).slice(2,6);try{let t;if(Array.isArray(e)&&e.length>0)t=e.filter(e=>"string"==typeof e&&e.length>0);else{const{data:{user:e}}=await ct.auth.getUser(),r=e?.id;if(!r)return this.getGames();const{data:a}=await ct.from("users").select("preferred_sports").eq("id",r).single();t=(a?.preferred_sports??[]).filter(e=>"string"==typeof e&&e.length>0)}if(!t.length)return this.getGames();const{data:{user:r}}=await ct.auth.getUser(),a=r?.id;if(a){const{data:e,error:r}=await ct.from("games").select("\n            id,title,sport,date,time,location,cost,max_players,current_players,description,image_url,creator_id,\n            game_participants(user_id)\n          ").in("sport",t).gte("date",(new Date).toISOString().split("T")[0]).order("date",{ascending:!0}).limit(50);if(r)throw r;return(e||[]).map(e=>{const t=e.game_participants?.some(e=>e.user_id===a)||!1;return dt(e,t)})}{const{data:e,error:r}=await ct.from("games").select("id,title,sport,date,time,location,cost,max_players,current_players,description,image_url,creator_id").in("sport",t).gte("date",(new Date).toISOString().split("T")[0]).order("date",{ascending:!0}).limit(50);if(r)throw r;return(e||[]).map(e=>dt(e,!1))}}catch(t){return this.getGames()}}static async getArchivedGames(e){try{let t=ct.from("games").select("*").lt("date",(new Date).toISOString().split("T")[0]).order("date",{ascending:!1}).limit(50);if(e){const{data:t,error:r}=await ct.from("games").select("\n            *,\n            game_participants(user_id)\n          ").lt("date",(new Date).toISOString().split("T")[0]).order("date",{ascending:!1}).limit(50);if(r)throw r;return(t||[]).filter(t=>t.creator_id===e||t.game_participants?.some(t=>t.user_id===e)).map(t=>{const r=t.game_participants?.some(t=>t.user_id===e)||!1;return dt(t,r)})}{const{data:e,error:r}=await t;if(r)throw r;return(e||[]).map(e=>dt(e,!1))}}catch(t){return[]}}static async archiveOldGames(){try{const e=new Date;e.setDate(e.getDate()-1);e.toISOString().split("T")[0]}catch(e){}}static async getUserStats(e){try{const{data:r,error:a}=await ct.from("user_stats").select("*").eq("user_id",e).maybeSingle();if(a&&"PGRST116"!==a.code)throw a;let s=null;if(!r){const{data:t,error:r}=await ct.from("games").select("id, sport").eq("creator_id",e),{data:a,error:i}=await ct.from("game_participants").select("\n            game_id,\n            play_time_minutes,\n            games!inner(sport, date)\n          ").eq("user_id",e),n=t?.length||0,o=a?.length||0,l=a?.reduce((e,t)=>e+(t.play_time_minutes||0),0)||0,c={};t?.forEach(e=>{c[e.sport]=(c[e.sport]||0)+1}),a?.forEach(e=>{const t=e.games?.sport;t&&(c[t]=(c[t]||0)+1)});s={user_id:e,games_played:o,games_hosted:n,total_play_time_minutes:l,favorite_sport:Object.keys(c).length>0?Object.entries(c).reduce((e,t)=>c[e[0]]>c[t[0]]?e:t)[0]:null,last_activity:(new Date).toISOString(),created_at:(new Date).toISOString(),updated_at:(new Date).toISOString()}}let i=[];try{const{data:t}=await ct.from("game_reviews").select("rating").eq("reviewee_id",e);i=t||[]}catch(t){i=[]}const n=i.length>0?i.reduce((e,t)=>e+t.rating,0)/i.length:0;return{...r||s||{user_id:e,games_played:0,games_hosted:0,total_play_time_minutes:0,favorite_sport:null,last_activity:(new Date).toISOString(),created_at:(new Date).toISOString(),updated_at:(new Date).toISOString()},average_rating:n}}catch(r){return{user_id:e,games_played:0,games_hosted:0,total_play_time_minutes:0,favorite_sport:null,average_rating:0,created_at:(new Date).toISOString(),updated_at:(new Date).toISOString()}}}static async getUserRecentGames(e,t=5){try{const{data:r,error:a}=await ct.from("game_participants").select("\n          *,\n          games (\n            id,\n            title,\n            sport,\n            date,\n            time,\n            location,\n            creator_id\n          )\n        ").eq("user_id",e).order("joined_at",{ascending:!1}).limit(t);return a?[]:r||[]}catch(r){return[]}}static async getUserAchievements(e){const{data:t,error:r}=await ct.from("user_achievements").select("\n        *,\n        achievements (\n          id,\n          name,\n          description,\n          icon,\n          category,\n          criteria,\n          points,\n          is_active\n        )\n      ").eq("user_id",e).order("earned_at",{ascending:!1});if(r)throw r;return t||[]}static async getAllAchievements(){const{data:e,error:t}=await ct.from("achievements").select("*").eq("is_active",!0).order("points",{ascending:!0});if(t)throw t;return e||[]}static async checkAndAwardAchievements(e){const t=await this.getUserStats(e),{data:r,error:a}=await ct.from("achievements").select("*").eq("is_active",!0);if(a)throw a;const{data:s,error:i}=await ct.from("user_achievements").select("achievement_id").eq("user_id",e);if(i)throw i;const n=new Set(s?.map(e=>e.achievement_id)||[]),o=[];for(const l of r||[]){if(n.has(l.id))continue;const e=l.criteria;let r=!1;e.games_played&&t.games_played>=e.games_played&&(r=!0),e.games_hosted&&t.games_hosted>=e.games_hosted&&(r=!0),r&&o.push(l)}if(o.length>0){const t=o.map(t=>({user_id:e,achievement_id:t.id,earned_at:(new Date).toISOString()})),{error:r}=await ct.from("user_achievements").insert(t);if(r)throw r}return o}static async recordGameParticipation(e,t,r="joined"){const{data:a,error:s}=await ct.from("v_columns").select("column_name").eq("table_schema","public").eq("table_name","game_participants").eq("column_name","status");if(s){const{data:r,error:a}=await ct.from("game_participants").upsert({user_id:e,game_id:t},{onConflict:"user_id,game_id"});if(a)throw a;return r}if(a&&a.length>0){const{data:a,error:s}=await ct.from("game_participants").upsert({user_id:e,game_id:t,status:r,joined_at:"joined"===r?(new Date).toISOString():void 0,left_at:"left"===r||"completed"===r?(new Date).toISOString():void 0},{onConflict:"user_id,game_id"});if(s)throw s;return a}{const{data:r,error:a}=await ct.from("game_participants").upsert({user_id:e,game_id:t},{onConflict:"user_id,game_id"});if(a)throw a;return r}}static async markGameCompleted(e){const t=await this.getCurrentUser();if(!t)throw new Error("User not authenticated");const{data:r,error:a}=await ct.from("games").select("creator_id").eq("id",e).single();if(a)throw a;if(r.creator_id!==t.id)throw new Error("Only the game creator can mark a game as completed");const{error:s}=await ct.from("game_participants").update({status:"completed",left_at:(new Date).toISOString()}).eq("game_id",e).eq("status","joined");if(s)throw s;const{data:i,error:n}=await ct.from("game_participants").select("user_id").eq("game_id",e).eq("status","completed");if(n)throw n;for(const l of i||[])try{await this.checkAndAwardAchievements(l.user_id)}catch(o){}}static async joinWaitlist(e){const{data:t,error:r}=await ct.rpc("join_waitlist",{game_uuid:e});if(r)throw r;return t}static async leaveWaitlist(e){const{data:t,error:r}=await ct.rpc("leave_waitlist",{game_uuid:e});if(r)throw r;return t}static async joinFromWaitlist(e){const{data:t,error:r}=await ct.rpc("join_from_waitlist",{game_uuid:e});if(r)throw r;return t}static async getGameWaitlist(e){const{data:t,error:r}=await ct.from("game_waitlist").select("\n        *,\n        user:users!game_waitlist_user_id_fkey(id, full_name, username, avatar_url)\n      ").eq("game_id",e).order("position",{ascending:!0});if(r)throw r;return(t||[]).map(e=>({id:e.id,position:e.position,joinedAt:e.joined_at,status:e.status,expiresAt:e.expires_at,user:{id:e.user.id,name:e.user.full_name||e.user.username,username:e.user.username,avatarUrl:e.user.avatar_url}}))}static async getUserWaitlistStatus(e){const t=await this.getCurrentUser();if(!t)return{isOnWaitlist:!1};const{data:r,error:a}=await ct.from("game_waitlist").select("position, status").eq("game_id",e).eq("user_id",t.id).single();if(a&&"PGRST116"!==a.code)throw a;return r?{isOnWaitlist:!0,position:r.position,status:r.status}:{isOnWaitlist:!1}}static async createRecurringTemplate(e){const{data:t,error:r}=await ct.rpc("create_recurring_template",{p_title:e.title,p_sport:e.sport,p_location:e.location,p_latitude:e.latitude||null,p_longitude:e.longitude||null,p_cost:e.cost||"Free",p_max_players:e.maxPlayers,p_description:e.description||"",p_image_url:e.imageUrl||null,p_recurrence_type:e.recurrenceType,p_recurrence_interval:1,p_day_of_week:e.dayOfWeek||null,p_day_of_month:e.dayOfMonth||null,p_time_of_day:e.timeOfDay,p_start_date:e.startDate,p_end_date:e.endDate||null,p_max_occurrences:e.maxOccurrences||null});if(r)throw r;return t}static async getRecurringTemplates(e){let t=ct.from("recurring_game_templates").select("\n        *,\n        creator:users!recurring_game_templates_creator_id_fkey(id, full_name, username, avatar_url),\n        _count:recurring_game_instances(count)\n      ").eq("is_active",!0).order("created_at",{ascending:!1});e&&(t=t.eq("creator_id",e));const{data:r,error:a}=await t;if(a)throw a;return(r||[]).map(e=>({id:e.id,title:e.title,sport:e.sport,location:e.location,recurrenceType:e.recurrence_type,dayOfWeek:e.day_of_week,dayOfMonth:e.day_of_month,timeOfDay:e.time_of_day,startDate:e.start_date,endDate:e.end_date,maxOccurrences:e.max_occurrences,isActive:e.is_active,createdAt:e.created_at,creator:{id:e.creator.id,name:e.creator.full_name||e.creator.username,username:e.creator.username,avatarUrl:e.creator.avatar_url},instanceCount:e._count?.[0]?.count||0}))}static async updateRecurringTemplate(e,t){const{data:r,error:a}=await ct.rpc("update_recurring_template",{template_id:e,updates:t});if(a)throw a;return r}static async cancelRecurringTemplate(e,t=!0){const{data:r,error:a}=await ct.rpc("cancel_recurring_template",{template_id:e,cancel_future_games:t});if(a)throw a;return r}static async getRecurringGameInstances(e){const{data:t,error:r}=await ct.from("recurring_game_instances").select("\n        *,\n        game:games!recurring_game_instances_game_id_fkey(*)\n      ").eq("template_id",e).order("scheduled_date",{ascending:!0});if(r)throw r;return(t||[]).map(e=>({id:e.id,scheduledDate:e.scheduled_date,instanceNumber:e.instance_number,status:e.status,game:e.game?dt(e.game,!1):null}))}static async submitGameReview(e){try{const{data:t,error:r}=await ct.rpc("submit_game_review",{p_game_id:e.gameId,p_overall_rating:e.overallRating,p_organization_rating:e.organizationRating||null,p_skill_level_rating:e.skillLevelRating||null,p_fun_rating:e.funRating||null,p_review_text:e.reviewText||null,p_would_play_again:e.wouldPlayAgain??!0,p_recommend_to_others:e.recommendToOthers??!0});if(r)throw r;return t}catch(t){throw new Error("Rating system is currently disabled")}}static async submitPlayerRating(e){try{const{data:t,error:r}=await ct.rpc("submit_player_rating",{p_game_id:e.gameId,p_rated_player_id:e.ratedPlayerId,p_skill_rating:e.skillRating,p_sportsmanship_rating:e.sportsmanshipRating,p_communication_rating:e.communicationRating,p_feedback_text:e.feedbackText||null});if(r)throw r;return t}catch(t){throw new Error("Rating system is currently disabled")}}static async getGameReviews(e){try{const{data:t,error:r}=await ct.from("game_reviews").select("\n          *,\n          reviewer:users!game_reviews_reviewer_id_fkey(id, full_name, username, avatar_url)\n        ").eq("game_id",e).order("created_at",{ascending:!1});return r?[]:t||[]}catch(t){return[]}}static async getGameRatingSummary(e){const{data:t,error:r}=await ct.from("game_rating_summary").select("*").eq("game_id",e).single();if(r&&"PGRST116"!==r.code)throw r;return t?{totalReviews:t.total_reviews,avgOverallRating:t.avg_overall_rating,avgOrganizationRating:t.avg_organization_rating,avgSkillLevelRating:t.avg_skill_level_rating,avgFunRating:t.avg_fun_rating,wouldPlayAgainCount:t.would_play_again_count,recommendCount:t.recommend_count,lastUpdated:t.last_updated}:null}static async getUserRatingSummary(e){const{data:t,error:r}=await ct.from("user_rating_summary").select("*").eq("user_id",e).single();if(r&&"PGRST116"!==r.code)throw r;return t?{totalRatingsReceived:t.total_ratings_received,avgSkillRating:t.avg_skill_rating,avgSportsmanshipRating:t.avg_sportsmanship_rating,avgCommunicationRating:t.avg_communication_rating,avgOverallPlayerRating:t.avg_overall_player_rating,gamesOrganized:t.games_organized,avgGameRating:t.avg_game_rating,lastUpdated:t.last_updated}:null}static async getReviewableGames(){const{data:e,error:t}=await ct.rpc("get_reviewable_games");if(t)throw t;return(e||[]).map(e=>({gameId:e.game_id,title:e.game_title,date:e.game_date,time:e.game_time,sport:e.sport,hasReviewed:e.has_reviewed}))}static async getPlayerRatings(e,t){let r=ct.from("player_ratings").select("\n        *,\n        rater:users!player_ratings_rater_id_fkey(id, full_name, username, avatar_url),\n        rated_player:users!player_ratings_rated_player_id_fkey(id, full_name, username, avatar_url)\n      ").eq("game_id",e);t&&(r=r.eq("rated_player_id",t));const{data:a,error:s}=await r.order("created_at",{ascending:!1});if(s)throw s;return(a||[]).map(e=>({id:e.id,skillRating:e.skill_rating,sportsmanshipRating:e.sportsmanship_rating,communicationRating:e.communication_rating,feedbackText:e.feedback_text,createdAt:e.created_at,rater:{id:e.rater.id,name:e.rater.full_name||e.rater.username,username:e.rater.username,avatarUrl:e.rater.avatar_url},ratedPlayer:{id:e.rated_player.id,name:e.rated_player.full_name||e.rated_player.username,username:e.rated_player.username,avatarUrl:e.rated_player.avatar_url}}))}static async submitUserTestingFeedback(e){try{const{error:t}=await ct.from("user_testing_feedback").insert([e]);if(t)throw t}catch(t){throw t}}}function _t(e,t){let r;try{r=e()}catch(a){return}return{getItem:e=>{var t;const a=e=>null===e?null:JSON.parse(e,void 0),s=null!=(t=r.getItem(e))?t:null;return s instanceof Promise?s.then(a):a(s)},setItem:(e,t)=>r.setItem(e,JSON.stringify(t,void 0)),removeItem:e=>r.removeItem(e)}}const wt=e=>t=>{try{const r=e(t);return r instanceof Promise?r:{then:e=>wt(e)(r),catch(e){return this}}}catch(r){return{then(e){return this},catch:e=>wt(e)(r)}}},yt=(e,t)=>(r,a,s)=>{let i={storage:_t(()=>localStorage),partialize:e=>e,version:0,merge:(e,t)=>({...t,...e}),...t},n=!1;const o=new Set,l=new Set;let c=i.storage;if(!c)return e((...e)=>{r(...e)},a,s);const d=()=>{const e=i.partialize({...a()});return c.setItem(i.name,{state:e,version:i.version})},u=s.setState;s.setState=(e,t)=>(u(e,t),d());const m=e((...e)=>(r(...e),d()),a,s);let p;s.getInitialState=()=>m;const g=()=>{var e,t;if(!c)return;n=!1,o.forEach(e=>{var t;return e(null!=(t=a())?t:m)});const s=(null==(t=i.onRehydrateStorage)?void 0:t.call(i,null!=(e=a())?e:m))||void 0;return wt(c.getItem.bind(c))(i.name).then(e=>{if(e){if("number"!=typeof e.version||e.version===i.version)return[!1,e.state];if(i.migrate){const t=i.migrate(e.state,e.version);return t instanceof Promise?t.then(e=>[!0,e]):[!0,t]}}return[!1,void 0]}).then(e=>{var t;const[s,n]=e;if(p=i.merge(n,null!=(t=a())?t:m),r(p,!0),s)return d()}).then(()=>{null==s||s(p,void 0),p=a(),n=!0,l.forEach(e=>e(p))}).catch(e=>{null==s||s(void 0,e)})};return s.persist={setOptions:e=>{i={...i,...e},e.storage&&(c=e.storage)},clearStorage:()=>{null==c||c.removeItem(i.name)},getOptions:()=>i,rehydrate:()=>g(),hasHydrated:()=>n,onHydrate:e=>(o.add(e),()=>{o.delete(e)}),onFinishHydration:e=>(l.add(e),()=>{l.delete(e)})},i.skipHydration||g(),p||m};var bt=Symbol.for("immer-nothing"),vt=Symbol.for("immer-draftable"),xt=Symbol.for("immer-state");function kt(e,...t){throw new Error(`[Immer] minified error nr: ${e}. Full error at: https://bit.ly/3cXEKWf`)}var jt=Object.getPrototypeOf;function Et(e){return!!e&&!!e[xt]}function St(e){return!!e&&(It(e)||Array.isArray(e)||!!e[vt]||!!e.constructor?.[vt]||Rt(e)||Ot(e))}var Nt=Object.prototype.constructor.toString();function It(e){if(!e||"object"!=typeof e)return!1;const t=jt(e);if(null===t)return!0;const r=Object.hasOwnProperty.call(t,"constructor")&&t.constructor;return r===Object||"function"==typeof r&&Function.toString.call(r)===Nt}function Tt(e,t){0===At(e)?Reflect.ownKeys(e).forEach(r=>{t(r,e[r],e)}):e.forEach((r,a)=>t(a,r,e))}function At(e){const t=e[xt];return t?t.type_:Array.isArray(e)?1:Rt(e)?2:Ot(e)?3:0}function Ct(e,t){return 2===At(e)?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function Pt(e,t,r){const a=At(e);2===a?e.set(t,r):3===a?e.add(r):e[t]=r}function Rt(e){return e instanceof Map}function Ot(e){return e instanceof Set}function Ut(e){return e.copy_||e.base_}function zt(e,t){if(Rt(e))return new Map(e);if(Ot(e))return new Set(e);if(Array.isArray(e))return Array.prototype.slice.call(e);const r=It(e);if(!0===t||"class_only"===t&&!r){const t=Object.getOwnPropertyDescriptors(e);delete t[xt];let r=Reflect.ownKeys(t);for(let a=0;a<r.length;a++){const s=r[a],i=t[s];!1===i.writable&&(i.writable=!0,i.configurable=!0),(i.get||i.set)&&(t[s]={configurable:!0,writable:!0,enumerable:i.enumerable,value:e[s]})}return Object.create(jt(e),t)}{const t=jt(e);if(null!==t&&r)return{...e};const a=Object.create(t);return Object.assign(a,e)}}function Dt(e,t=!1){return Gt(e)||Et(e)||!St(e)||(At(e)>1&&(e.set=e.add=e.clear=e.delete=Lt),Object.freeze(e),t&&Object.entries(e).forEach(([e,t])=>Dt(t,!0))),e}function Lt(){kt(2)}function Gt(e){return Object.isFrozen(e)}var qt,Mt={};function Ft(e){const t=Mt[e];return t||kt(0),t}function Vt(){return qt}function Wt(e,t){t&&(Ft("Patches"),e.patches_=[],e.inversePatches_=[],e.patchListener_=t)}function Bt(e){$t(e),e.drafts_.forEach(Kt),e.drafts_=null}function $t(e){e===qt&&(qt=e.parent_)}function Ht(e){return qt={drafts_:[],parent_:qt,immer_:e,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function Kt(e){const t=e[xt];0===t.type_||1===t.type_?t.revoke_():t.revoked_=!0}function Jt(e,t){t.unfinalizedDrafts_=t.drafts_.length;const r=t.drafts_[0];return void 0!==e&&e!==r?(r[xt].modified_&&(Bt(t),kt(4)),St(e)&&(e=Yt(t,e),t.parent_||Xt(t,e)),t.patches_&&Ft("Patches").generateReplacementPatches_(r[xt].base_,e,t.patches_,t.inversePatches_)):e=Yt(t,r,[]),Bt(t),t.patches_&&t.patchListener_(t.patches_,t.inversePatches_),e!==bt?e:void 0}function Yt(e,t,r){if(Gt(t))return t;const a=t[xt];if(!a)return Tt(t,(s,i)=>Qt(e,a,t,s,i,r)),t;if(a.scope_!==e)return t;if(!a.modified_)return Xt(e,a.base_,!0),a.base_;if(!a.finalized_){a.finalized_=!0,a.scope_.unfinalizedDrafts_--;const t=a.copy_;let s=t,i=!1;3===a.type_&&(s=new Set(t),t.clear(),i=!0),Tt(s,(s,n)=>Qt(e,a,t,s,n,r,i)),Xt(e,t,!1),r&&e.patches_&&Ft("Patches").generatePatches_(a,r,e.patches_,e.inversePatches_)}return a.copy_}function Qt(e,t,r,a,s,i,n){if(Et(s)){const n=Yt(e,s,i&&t&&3!==t.type_&&!Ct(t.assigned_,a)?i.concat(a):void 0);if(Pt(r,a,n),!Et(n))return;e.canAutoFreeze_=!1}else n&&r.add(s);if(St(s)&&!Gt(s)){if(!e.immer_.autoFreeze_&&e.unfinalizedDrafts_<1)return;Yt(e,s),t&&t.scope_.parent_||"symbol"==typeof a||!Object.prototype.propertyIsEnumerable.call(r,a)||Xt(e,s)}}function Xt(e,t,r=!1){!e.parent_&&e.immer_.autoFreeze_&&e.canAutoFreeze_&&Dt(t,r)}var Zt={get(e,t){if(t===xt)return e;const r=Ut(e);if(!Ct(r,t))return function(e,t,r){const a=rr(t,r);return a?"value"in a?a.value:a.get?.call(e.draft_):void 0}(e,r,t);const a=r[t];return e.finalized_||!St(a)?a:a===tr(e.base_,t)?(sr(e),e.copy_[t]=ir(a,e)):a},has:(e,t)=>t in Ut(e),ownKeys:e=>Reflect.ownKeys(Ut(e)),set(e,t,r){const a=rr(Ut(e),t);if(a?.set)return a.set.call(e.draft_,r),!0;if(!e.modified_){const a=tr(Ut(e),t),n=a?.[xt];if(n&&n.base_===r)return e.copy_[t]=r,e.assigned_[t]=!1,!0;if(((s=r)===(i=a)?0!==s||1/s==1/i:s!=s&&i!=i)&&(void 0!==r||Ct(e.base_,t)))return!0;sr(e),ar(e)}var s,i;return e.copy_[t]===r&&(void 0!==r||t in e.copy_)||Number.isNaN(r)&&Number.isNaN(e.copy_[t])||(e.copy_[t]=r,e.assigned_[t]=!0),!0},deleteProperty:(e,t)=>(void 0!==tr(e.base_,t)||t in e.base_?(e.assigned_[t]=!1,sr(e),ar(e)):delete e.assigned_[t],e.copy_&&delete e.copy_[t],!0),getOwnPropertyDescriptor(e,t){const r=Ut(e),a=Reflect.getOwnPropertyDescriptor(r,t);return a?{writable:!0,configurable:1!==e.type_||"length"!==t,enumerable:a.enumerable,value:r[t]}:a},defineProperty(){kt(11)},getPrototypeOf:e=>jt(e.base_),setPrototypeOf(){kt(12)}},er={};function tr(e,t){const r=e[xt];return(r?Ut(r):e)[t]}function rr(e,t){if(!(t in e))return;let r=jt(e);for(;r;){const e=Object.getOwnPropertyDescriptor(r,t);if(e)return e;r=jt(r)}}function ar(e){e.modified_||(e.modified_=!0,e.parent_&&ar(e.parent_))}function sr(e){e.copy_||(e.copy_=zt(e.base_,e.scope_.immer_.useStrictShallowCopy_))}Tt(Zt,(e,t)=>{er[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}}),er.deleteProperty=function(e,t){return er.set.call(this,e,t,void 0)},er.set=function(e,t,r){return Zt.set.call(this,e[0],t,r,e[0])};function ir(e,t){const r=Rt(e)?Ft("MapSet").proxyMap_(e,t):Ot(e)?Ft("MapSet").proxySet_(e,t):function(e,t){const r=Array.isArray(e),a={type_:r?1:0,scope_:t?t.scope_:Vt(),modified_:!1,finalized_:!1,assigned_:{},parent_:t,base_:e,draft_:null,copy_:null,revoke_:null,isManual_:!1};let s=a,i=Zt;r&&(s=[a],i=er);const{revoke:n,proxy:o}=Proxy.revocable(s,i);return a.draft_=o,a.revoke_=n,o}(e,t);return(t?t.scope_:Vt()).drafts_.push(r),r}function nr(e){if(!St(e)||Gt(e))return e;const t=e[xt];let r;if(t){if(!t.modified_)return t.base_;t.finalized_=!0,r=zt(e,t.scope_.immer_.useStrictShallowCopy_)}else r=zt(e,!0);return Tt(r,(e,t)=>{Pt(r,e,nr(t))}),t&&(t.finalized_=!1),r}var or=new class{constructor(e){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.produce=(e,t,r)=>{if("function"==typeof e&&"function"!=typeof t){const r=t;t=e;const a=this;return function(e=r,...s){return a.produce(e,e=>t.call(this,e,...s))}}let a;if("function"!=typeof t&&kt(6),void 0!==r&&"function"!=typeof r&&kt(7),St(e)){const s=Ht(this),i=ir(e,void 0);let n=!0;try{a=t(i),n=!1}finally{n?Bt(s):$t(s)}return Wt(s,r),Jt(a,s)}if(!e||"object"!=typeof e){if(a=t(e),void 0===a&&(a=e),a===bt&&(a=void 0),this.autoFreeze_&&Dt(a,!0),r){const t=[],s=[];Ft("Patches").generateReplacementPatches_(e,a,t,s),r(t,s)}return a}kt(1)},this.produceWithPatches=(e,t)=>{if("function"==typeof e)return(t,...r)=>this.produceWithPatches(t,t=>e(t,...r));let r,a;return[this.produce(e,t,(e,t)=>{r=e,a=t}),r,a]},"boolean"==typeof e?.autoFreeze&&this.setAutoFreeze(e.autoFreeze),"boolean"==typeof e?.useStrictShallowCopy&&this.setUseStrictShallowCopy(e.useStrictShallowCopy)}createDraft(e){St(e)||kt(8),Et(e)&&(e=function(e){Et(e)||kt(10);return nr(e)}(e));const t=Ht(this),r=ir(e,void 0);return r[xt].isManual_=!0,$t(t),r}finishDraft(e,t){const r=e&&e[xt];r&&r.isManual_||kt(9);const{scope_:a}=r;return Wt(a,t),Jt(void 0,a)}setAutoFreeze(e){this.autoFreeze_=e}setUseStrictShallowCopy(e){this.useStrictShallowCopy_=e}applyPatches(e,t){let r;for(r=t.length-1;r>=0;r--){const a=t[r];if(0===a.path.length&&"replace"===a.op){e=a.value;break}}r>-1&&(t=t.slice(r+1));const a=Ft("Patches").applyPatches_;return Et(e)?a(e,t):this.produce(e,e=>a(e,t))}},lr=or.produce;or.produceWithPatches.bind(or),or.setAutoFreeze.bind(or),or.setUseStrictShallowCopy.bind(or),or.applyPatches.bind(or),or.createDraft.bind(or),or.finishDraft.bind(or);const cr=e=>(t,r,a)=>(a.setState=(e,r,...a)=>{const s="function"==typeof e?lr(e):e;return t(s,r,...a)},e(a.setState,r,a)),dr={sports:[],dateRange:{start:null,end:null},distance:25,priceRange:{min:0,max:100}},ur={user:null,isAuthenticated:!1,games:[],myGames:[],nearbyGames:[],isLoading:!1,error:null,chatContext:null,searchFilters:dr},mr=S()(yt(cr((e,t)=>({...ur,setUser:t=>e(e=>{e.user=t,e.isAuthenticated=!!t}),updateUserPreferences:async r=>{const{setLoading:a,setError:s}=t();try{a(!0);const t=await ht.getCurrentUser();t&&(await ht.updateUserProfile(t.id,{preferences:r}),e(e=>{e.user&&(e.user.preferences={...e.user.preferences,...r})}))}catch(i){s(i instanceof Error?i.message:"Failed to update preferences")}finally{a(!1)}},signOut:async()=>{const{setLoading:r,setError:a}=t();try{r(!0),await ht.signOut(),e(e=>{e.user=null,e.isAuthenticated=!1,e.myGames=[],e.chatContext=null})}catch(s){a(s instanceof Error?s.message:"Failed to sign out")}finally{r(!1)}},signIn:async(r,a)=>{const{setLoading:s,setError:i}=t();try{s(!0);const{user:t}=await ht.signIn(r,a);if(t){const r=await ht.getUserProfile(t.id);e(e=>{e.user=r,e.isAuthenticated=!0})}}catch(n){i(n instanceof Error?n.message:"Failed to sign in")}finally{s(!1)}},signUp:async(r,a,s)=>{const{setLoading:i,setError:n}=t();try{i(!0);const{user:t}=await ht.signUp(r,a,s);if(t){const r=await ht.getUserProfile(t.id);e(e=>{e.user=r,e.isAuthenticated=!0})}}catch(o){n(o instanceof Error?o.message:"Failed to sign up")}finally{i(!1)}},initializeAuth:async()=>{const{setLoading:e,setError:r,setGames:a}=t(),s=t();if(!s.isLoading)try{if(e(!0),0===s.games.length){a(await ht.getGames())}}catch(i){r(i instanceof Error?i.message:"Failed to initialize auth")}finally{e(!1)}},setGames:t=>{e(e=>{e.games=t,e.isLoading=!1;const r=e.user?.id;e.myGames=t.filter(e=>e.createdBy===r||e.isJoined),e.nearbyGames=t.slice(0,10)})},addGame:async r=>{const{setLoading:a,setError:s}=t();try{a(!0);const t=await ht.createGame(r);e(e=>{e.games.unshift(t),t.createdBy===e.user?.id&&e.myGames.unshift(t)})}catch(i){s(i instanceof Error?i.message:"Failed to create game")}finally{a(!1)}},updateGame:async(r,a)=>{const{setLoading:s,setError:i}=t();try{s(!0),e(e=>{const t=e.games.findIndex(e=>e.id===r);-1!==t&&(e.games[t]={...e.games[t],...a});const s=e.myGames.findIndex(e=>e.id===r);-1!==s&&(e.myGames[s]={...e.myGames[s],...a})})}catch(n){i(n instanceof Error?n.message:"Failed to update game")}finally{s(!1)}},joinGame:async e=>{},leaveGame:async e=>{},setLoading:t=>e(e=>{e.isLoading=t}),setError:t=>e(e=>{e.error=t,e.isLoading=!1}),clearError:()=>e(e=>{e.error=null}),setChatContext:t=>e(e=>{e.chatContext=t}),updateSearchFilters:t=>e(e=>{e.searchFilters={...e.searchFilters,...t}}),clearSearchFilters:()=>e(e=>{e.searchFilters=dr}),reset:()=>e(()=>ur)})),{name:"tribeup-store",storage:_t(()=>localStorage),partialize:e=>({user:e.user,searchFilters:e.searchFilters})})),pr=o.createContext(void 0);function gr({children:t}){const[r,a]=o.useState(null),[s,i]=o.useState(null),[n,l]=o.useState(!0),[c,d]=o.useState(!1),{setUser:u}=mr();o.useEffect(()=>{let e,t=!0;const r=async e=>{try{let r=await ht.getUserProfile(e.id);r||(await ht.createUserProfile(e.id,{email:e.email,name:e.user_metadata?.full_name||e.email?.split("@")[0]||"User",username:e.user_metadata?.username||e.email?.split("@")[0]||`user_${Date.now()}`,avatar:e.user_metadata?.avatar_url||""}),r=await ht.getUserProfile(e.id)),r&&t&&u(r)}catch(r){t&&u({id:e.id,email:e.email||"",name:e.user_metadata?.full_name||e.email?.split("@")[0]||"User",username:e.email?.split("@")[0]||"user",avatar:e.user_metadata?.avatar_url||"",role:"user",preferences:{theme:"auto",highContrast:!1,largeText:!1,reducedMotion:!1,colorBlindFriendly:!1,notifications:{push:!0,email:!1,gameReminders:!0},privacy:{locationSharing:!0,profileVisibility:"public"},sports:[]}})}};(async()=>{try{e=setTimeout(()=>{t&&n&&(l(!1),d(!0))},8e3);let c=null,u=null;try{const e=await ct.auth.getSession();c=e.data.session,u=e.error}catch(s){const e=localStorage.getItem("tribeup-auth");if(e)try{const t=JSON.parse(e);t&&t.access_token}catch(o){}u=s}if(!t)return;clearTimeout(e),u&&!c&&d(!0),i(c),a(c?.user??null),d(!1),c?.user&&await r(c.user)}catch(c){d(!0)}finally{t&&l(!1)}})();const{data:{subscription:s}}=ct.auth.onAuthStateChange(async(e,s)=>{t&&(i(s),a(s?.user??null),"SIGNED_IN"===e&&s?.user?(await r(s.user),N.success("Welcome!")):"SIGNED_OUT"===e&&(u(null),N.success("Signed out successfully")),l(!1))});return()=>{t=!1,e&&clearTimeout(e),s.unsubscribe()}},[]);const m={user:r,session:s,loading:n,signIn:async(e,t)=>{const{error:r}=await ct.auth.signInWithPassword({email:e,password:t});if(r)throw r},signUp:async(e,t,r)=>{const{error:a}=await ct.auth.signUp({email:e,password:t,options:{data:{full_name:r.name,username:r.name?.toLowerCase().replace(/\s+/g,"_")}}});if(a)throw a},signInWithOAuth:async e=>{const{error:t}=await ct.auth.signInWithOAuth({provider:e,options:{redirectTo:`${window.location.origin}/auth/callback`}});if(t)throw t},signOut:async()=>{const{error:e}=await ct.auth.signOut();if(e)throw e}};return c&&!n?e.jsx(pr.Provider,{value:m,children:e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-background",children:e.jsxs("div",{className:"text-center space-y-4 p-6",children:[e.jsx("div",{className:"text-destructive text-lg font-semibold",children:"Connection Error"}),e.jsx("p",{className:"text-muted-foreground max-w-md",children:"Unable to connect to authentication service. Please check your internet connection and try again."}),e.jsx("button",{onClick:()=>window.location.reload(),className:"px-4 py-2 bg-primary text-primary-foreground rounded-md hover:bg-primary/90",children:"Retry"})]})})}):e.jsx(pr.Provider,{value:m,children:t})}function fr(){const e=o.useContext(pr);if(void 0===e)throw new Error("useSimpleAuth must be used within a SimpleAuthProvider");return e}function hr({children:t=null,requireAuth:r=!0,redirectTo:a="/auth"}){const s=l();try{const{user:i,loading:n}=fr();return n?e.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center",children:e.jsx("div",{className:"animate-spin w-8 h-8 border-4 border-primary border-t-transparent rounded-full"})}):r&&!i?e.jsx(c,{to:a,state:{from:s},replace:!0}):!r&&i?e.jsx(c,{to:"/",replace:!0}):e.jsx(e.Fragment,{children:t})}catch(i){return e.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin w-8 h-8 border-4 border-primary border-t-transparent rounded-full mx-auto mb-4"}),e.jsx("p",{children:"Loading..."})]})})}}const _r=M("inline-flex items-center justify-center rounded-md border px-2 py-0.5 text-xs font-medium w-fit whitespace-nowrap shrink-0 [&>svg]:size-3 gap-1 [&>svg]:pointer-events-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive transition-[color,box-shadow] overflow-hidden",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground [a&]:hover:bg-primary/90",secondary:"border-transparent bg-secondary text-secondary-foreground [a&]:hover:bg-secondary/90",destructive:"border-transparent bg-destructive text-white [a&]:hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"text-foreground [a&]:hover:bg-accent [a&]:hover:text-accent-foreground"}},defaultVariants:{variant:"default"}});function wr({className:r,variant:a,asChild:s=!1,...i}){const n=s?t:"span";return e.jsx(n,{"data-slot":"badge",className:Ke(_r({variant:a}),r),...i})}const yr=()=>{const{user:e}=mr();return e?.avatar||null},br=()=>{const{user:e}=mr();return e?.name||e?.email?.split("@")[0]||"?"};var vr={exports:{}},xr={},kr=o;var jr="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t},Er=kr.useState,Sr=kr.useEffect,Nr=kr.useLayoutEffect,Ir=kr.useDebugValue;function Tr(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!jr(e,r)}catch(a){return!0}}var Ar="undefined"==typeof window||void 0===window.document||void 0===window.document.createElement?function(e,t){return t()}:function(e,t){var r=t(),a=Er({inst:{value:r,getSnapshot:t}}),s=a[0].inst,i=a[1];return Nr(function(){s.value=r,s.getSnapshot=t,Tr(s)&&i({inst:s})},[e,r,t]),Sr(function(){return Tr(s)&&i({inst:s}),e(function(){Tr(s)&&i({inst:s})})},[e]),Ir(r),r};xr.useSyncExternalStore=void 0!==kr.useSyncExternalStore?kr.useSyncExternalStore:Ar,vr.exports=xr;var Cr=vr.exports;function Pr(){return()=>{}}var Rr="Avatar",[Or,Ur]=r(Rr),[zr,Dr]=Or(Rr),Lr=o.forwardRef((t,r)=>{const{__scopeAvatar:s,...i}=t,[n,l]=o.useState("idle");return e.jsx(zr,{scope:s,imageLoadingStatus:n,onImageLoadingStatusChange:l,children:e.jsx(a.span,{...i,ref:r})})});Lr.displayName=Rr;var Gr="AvatarImage",qr=o.forwardRef((t,r)=>{const{__scopeAvatar:n,src:l,onLoadingStatusChange:c=()=>{},...d}=t,u=Dr(Gr,n),m=function(e,{referrerPolicy:t,crossOrigin:r}){const a=Cr.useSyncExternalStore(Pr,()=>!0,()=>!1),s=o.useRef(null),n=a?(s.current||(s.current=new window.Image),s.current):null,[l,c]=o.useState(()=>Vr(n,e));return i(()=>{c(Vr(n,e))},[n,e]),i(()=>{const e=e=>()=>{c(e)};if(!n)return;const a=e("loaded"),s=e("error");return n.addEventListener("load",a),n.addEventListener("error",s),t&&(n.referrerPolicy=t),"string"==typeof r&&(n.crossOrigin=r),()=>{n.removeEventListener("load",a),n.removeEventListener("error",s)}},[n,r,t]),l}(l,d),p=s(e=>{c(e),u.onImageLoadingStatusChange(e)});return i(()=>{"idle"!==m&&p(m)},[m,p]),"loaded"===m?e.jsx(a.img,{...d,ref:r,src:l}):null});qr.displayName=Gr;var Mr="AvatarFallback",Fr=o.forwardRef((t,r)=>{const{__scopeAvatar:s,delayMs:i,...n}=t,l=Dr(Mr,s),[c,d]=o.useState(void 0===i);return o.useEffect(()=>{if(void 0!==i){const e=window.setTimeout(()=>d(!0),i);return()=>window.clearTimeout(e)}},[i]),c&&"loaded"!==l.imageLoadingStatus?e.jsx(a.span,{...n,ref:r}):null});function Vr(e,t){return e?t?(e.src!==t&&(e.src=t),e.complete&&e.naturalWidth>0?"loaded":"loading"):"error":"idle"}Fr.displayName=Mr;var Wr=Lr,Br=qr,$r=Fr;function Hr(...e){return He(x(e))}function Kr({className:t,...r}){return e.jsx(Wr,{"data-slot":"avatar",className:Hr("relative flex size-8 shrink-0 overflow-hidden rounded-full",t),...r})}function Jr({className:t,...r}){return e.jsx(Br,{"data-slot":"avatar-image",className:Hr("aspect-square size-full",t),...r})}function Yr({className:t,...r}){return e.jsx($r,{"data-slot":"avatar-fallback",className:Hr("bg-muted flex size-full items-center justify-center rounded-full",t),...r})}const Qr=({size:t="md",className:r,showOnlineIndicator:a=!1})=>{const s=yr(),i=br(),n="?"!==i?i.split(" ").map(e=>e[0]).join("").toUpperCase().slice(0,2):"??";return e.jsxs("div",{className:"relative",children:[e.jsxs(Kr,{className:Hr({sm:"w-6 h-6 text-xs",md:"w-8 h-8 text-sm",lg:"w-10 h-10 text-base"}[t],r),children:[s&&e.jsx(Jr,{src:s,alt:i,className:"object-cover"}),e.jsx(Yr,{className:"bg-primary/10 text-primary font-medium",children:n})]}),a&&e.jsx("div",{className:"absolute -bottom-0.5 -right-0.5 w-3 h-3 bg-green-500 border-2 border-background rounded-full"})]})};function Xr(){const[e,t]=o.useState([]),[r,a]=o.useState({pushNotifications:!0,emailNotifications:!1,gameReminders:!0,messageNotifications:!0,soundEnabled:!0});o.useEffect(()=>{(async()=>{try{const e=await ht.getNotifications();t(e)}catch(e){}})()},[]),o.useEffect(()=>{let e=null;return(async()=>{e=await ht.subscribeToNotifications(e=>{t(t=>[e,...t]),r.pushNotifications&&s(e)})})(),()=>{e?.unsubscribe&&e.unsubscribe()}},[r.pushNotifications]);const s=o.useCallback(e=>{if(!r.pushNotifications)return;r.soundEnabled;["new_message","game_reminder","join_request"].includes(e.type)?"Notification"in window&&"granted"===Notification.permission&&["new_message","game_reminder"].includes(e.type)?new Notification(e.title,{body:e.message,icon:"/favicon.ico",badge:"/favicon.ico",timestamp:e.timestamp.getTime(),silent:!1}):N(e.title,{description:e.message,action:e.actionUrl?{label:"View",onClick:()=>{}}:void 0,duration:4e3}):N(e.title,{description:e.message,duration:3e3})},[r.pushNotifications,r.soundEnabled]),i=o.useCallback(async e=>{try{t(t=>t.map(t=>t.id===e?{...t,read:!0}:t)),await ht.markNotificationAsRead(e)}catch(r){t(t=>t.map(t=>t.id===e?{...t,read:!1}:t))}},[]),n=o.useCallback(async()=>{try{t(e=>{const t=e.filter(e=>!e.read);return Promise.all(t.map(e=>ht.markNotificationAsRead(e.id))).catch(e=>{}),e.map(e=>({...e,read:!0}))})}catch(e){}},[]),l=o.useCallback(async e=>{try{t(t=>t.filter(t=>t.id!==e)),await ht.deleteNotification(e)}catch(r){const e=await ht.getNotifications();t(e)}},[]),c=o.useCallback(async()=>{try{t([]),await ht.clearAllNotifications(),N.success("All notifications cleared")}catch(e){N.error("Failed to clear notifications");try{const e=await ht.getNotifications();t(e)}catch(r){}}},[]),d=o.useCallback(async()=>{if(!("Notification"in window))return!1;if("granted"===Notification.permission)return!0;if("denied"===Notification.permission)return!1;return"granted"===await Notification.requestPermission()&&(N.success("Notifications enabled!"),!0)},[]),u=o.useCallback(e=>{a(t=>({...t,...e})),e.pushNotifications&&!r.pushNotifications&&d()},[r.pushNotifications,d]),m=e.filter(e=>!e.read).length,p=e.slice(0,10);return o.useEffect(()=>{},[e,m]),{notifications:p,unreadCount:m,settings:r,markAsRead:i,markAllAsRead:n,deleteNotification:l,clearAll:c,updateSettings:u,requestPermission:d}}const Zr=[{path:"/",icon:I,label:"Home"},{path:"/search",icon:T,label:"Search"},{path:"/create",icon:A,label:"Create"},{path:"/notifications",icon:C,label:"Notifications",showBadge:!0},{path:"/profile",icon:P,label:"Profile"}],ea=o.forwardRef((t,r)=>{const a=d(),s=l(),{unreadCount:i}=Xr(),{user:n}=mr();return e.jsxs("div",{ref:r,className:"fixed bottom-0 left-0 right-0 bg-background/95 backdrop-blur-sm border-t border-border",children:[e.jsx("div",{className:"flex items-center justify-between px-4 py-2 max-w-lg mx-auto",children:Zr.map(t=>{const r=s.pathname===t.path,o=t.icon;return e.jsx("div",{className:"relative flex-1 flex justify-center",children:e.jsxs(Ye,{variant:"ghost",onClick:()=>a(t.path),className:"flex flex-col items-center gap-1 p-2 h-auto w-full transition-all duration-200 "+(r?"text-primary":"text-gray-700 dark:text-muted-foreground hover:text-black dark:hover:text-foreground"),"aria-label":`Navigate to ${t.label}`,"aria-current":r?"page":void 0,children:[e.jsxs("div",{className:"relative",children:["/profile"===t.path&&n?e.jsx("div",{onClick:()=>a("/profile"),className:"cursor-pointer",children:e.jsx(Qr,{size:"sm",className:"w-5 h-5"})}):e.jsx(o,{className:"w-5 h-5"}),t.showBadge&&i>0&&e.jsx(wr,{variant:"destructive",className:"absolute -top-2 -right-2 h-5 w-5 p-0 text-xs flex items-center justify-center min-w-[20px]",children:i>99?"99+":i})]}),e.jsx("span",{className:"text-xs font-medium",children:t.label}),r&&e.jsx("div",{className:"absolute -top-1 left-1/2 w-1 h-1 bg-primary rounded-full transition-all duration-200",style:{transform:"translateX(-50%)"}})]})},t.path)})}),e.jsx("div",{className:"pb-safe bg-background/95"})]})});ea.displayName="BottomNavigation";const ta=[{path:"/",icon:I,label:"Home",description:"Discover games"},{path:"/search",icon:T,label:"Search",description:"Find your game"},{path:"/notifications",icon:C,label:"Notifications",description:"Stay updated",showBadge:!0},{path:"/profile",icon:P,label:"Profile",description:"Your account"}];function ra({children:t}){const r=d(),a=l(),{unreadCount:s}=Xr(),{user:i}=mr(),[n,c]=o.useState(!1);return e.jsxs("div",{className:"flex h-screen bg-background",children:[e.jsxs("aside",{className:"bg-card border-r border-border transition-all duration-300 "+(n?"w-16":"w-64"),children:[e.jsx("div",{className:"p-6 border-b border-border",children:e.jsxs("div",{className:"flex items-center justify-between",children:[!n&&e.jsxs("div",{children:[e.jsx("h1",{className:"text-xl text-foreground",children:"TribeUp"}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-muted-foreground",children:"Find your tribe"})]}),e.jsx(Ye,{variant:"ghost",size:"icon",onClick:()=>c(!n),"aria-label":n?"Expand sidebar":"Collapse sidebar",children:e.jsx(R,{className:"w-5 h-5"})})]})}),e.jsx("div",{className:"p-4",children:e.jsxs(Ye,{onClick:()=>r("/create"),className:"w-full justify-start gap-3","aria-label":"Create new game",children:[e.jsx(A,{className:"w-5 h-5"}),!n&&"Create Game"]})}),e.jsx("nav",{className:"flex-1 px-4 space-y-2",role:"menubar",children:ta.map(t=>{const i=a.pathname===t.path,o=t.icon;return e.jsx("div",{children:e.jsxs(Ye,{variant:i?"default":"ghost",onClick:()=>r(t.path),className:"w-full justify-start gap-3 h-12 relative "+(n?"px-2":"px-4"),role:"menuitem","aria-current":i?"page":void 0,title:n?t.label:void 0,children:[e.jsxs("div",{className:"relative",children:[e.jsx(o,{className:"w-5 h-5 flex-shrink-0"}),t.showBadge&&s>0&&e.jsx(wr,{variant:"destructive",className:"absolute -top-1 -right-1 h-4 min-w-4 p-0 text-xs flex items-center justify-center",children:s>99?"99+":s})]}),!n&&e.jsxs("div",{className:"flex-1 text-left",children:[e.jsxs("div",{className:"font-medium flex items-center gap-2",children:[t.label,t.showBadge&&s>0&&e.jsx(wr,{variant:"destructive",className:"h-5 px-2 text-xs",children:s>99?"99+":s})]}),e.jsx("div",{className:"text-xs text-gray-600 dark:text-muted-foreground",children:t.description})]})]})},t.path)})}),e.jsx("div",{className:"p-4 border-t border-border",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs(Kr,{className:"cursor-pointer",onClick:()=>r("/profile"),children:[i?.avatar&&e.jsx(Jr,{src:i.avatar,alt:i.name||"User"}),e.jsx(Yr,{children:i?.name?.charAt(0)||"U"})]}),!n&&e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-sm font-medium truncate",children:i?.name||"User"}),e.jsx("p",{className:"text-xs text-muted-foreground truncate",children:i?.email||"user@example.com"})]})]})})]}),e.jsx("main",{className:"flex-1 overflow-hidden",children:t})]})}function aa(){const{isMobile:t}=function(){const[e,t]=o.useState(!1);return o.useEffect(()=>{const e=()=>{t(window.innerWidth<768)};return e(),window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)},[]),{isMobile:e}}(),r=l(),{announceToScreenReader:a}=function(){const e=mr(e=>e.user),t=mr(e=>e.updateUserPreferences),r=o.useCallback((e,t="polite")=>{let r=document.getElementById("live-region");r?r.setAttribute("aria-live",t):(r=document.createElement("div"),r.id="live-region",r.setAttribute("aria-live",t),r.setAttribute("aria-atomic","true"),r.className="sr-only",document.body.appendChild(r)),r.textContent="",setTimeout(()=>{r&&(r.textContent=e)},100),setTimeout(()=>{r&&r.textContent===e&&(r.textContent="")},5e3)},[]),a=o.useCallback(e=>{const t=document.documentElement;if(t.classList.remove("light","dark"),"dark"===e.theme)t.classList.add("dark");else if("light"===e.theme)t.classList.add("light");else{const e=window.matchMedia("(prefers-color-scheme: dark)").matches;t.classList.toggle("dark",e),t.classList.toggle("light",!e)}t.classList.toggle("high-contrast",e.highContrast),t.classList.toggle("large-text",e.largeText),t.classList.toggle("colorblind-friendly",e.colorBlindFriendly),e.reducedMotion?(t.style.setProperty("--duration-fast","0ms"),t.style.setProperty("--duration-normal","0ms"),t.style.setProperty("--duration-slow","0ms")):(t.style.removeProperty("--duration-fast"),t.style.removeProperty("--duration-normal"),t.style.removeProperty("--duration-slow"))},[]);o.useEffect(()=>{if(e?.preferences)a({theme:e.preferences.theme,highContrast:e.preferences.highContrast,largeText:e.preferences.largeText,reducedMotion:e.preferences.reducedMotion,colorBlindFriendly:e.preferences.colorBlindFriendly});else{const e=document.documentElement;window.matchMedia("(prefers-color-scheme: dark)").matches&&e.classList.add("dark"),window.matchMedia("(prefers-contrast: high)").matches&&e.classList.add("high-contrast"),window.matchMedia("(prefers-reduced-motion: reduce)").matches&&(e.style.setProperty("--duration-fast","0ms"),e.style.setProperty("--duration-normal","0ms"),e.style.setProperty("--duration-slow","0ms"))}},[e?.preferences,a]);const s=o.useCallback(r=>{if(e){const s={...e.preferences,...r};t(s),a({theme:s.theme,highContrast:s.highContrast,largeText:s.largeText,reducedMotion:s.reducedMotion,colorBlindFriendly:s.colorBlindFriendly})}},[e,t,a]),i=o.useCallback(e=>{e&&(e.focus(),r(`Focused on ${e.getAttribute("aria-label")||e.textContent||"element"}`))},[r]),n=o.useCallback(e=>{const t=e.querySelectorAll('button, [href], input, select, textarea, [tabindex]:not([tabindex="-1"])'),r=t[0],a=t[t.length-1],s=e=>{"Tab"===e.key&&(e.shiftKey?document.activeElement===r&&(e.preventDefault(),a.focus()):document.activeElement===a&&(e.preventDefault(),r.focus()))};return e.addEventListener("keydown",s),r?.focus(),()=>{e.removeEventListener("keydown",s)}},[]);return{preferences:e?.preferences,updatePreferences:s,applyPreferences:a,announceToScreenReader:r,focusElement:i,trapFocus:n}}(),[s,i]=u.useState(!1),n=o.useRef(null),[c,d]=o.useState(0);if(u.useEffect(()=>{(r.state||window.history.state?.usr||{}).fromOnboarding&&!s&&(i(!0),window.history.replaceState({...window.history.state,usr:{...window.history.state?.usr,fromOnboarding:!1}},""))},[r.state,s]),u.useEffect(()=>{const e="/"===(t=r.pathname)?"Home":"/search"===t?"Search":"/create"===t?"Create Game":"/profile"===t?"Profile":t.startsWith("/game/")?"Game Details":t.startsWith("/chat/")?"Chat":t.startsWith("/user/")?"User Profile":t.startsWith("/settings")?"Settings":"Page";var t;a(`Navigated to ${e}`),document.title=`${e} - TribeUp`},[r.pathname,a]),o.useEffect(()=>{const e=()=>{if(n.current){const e=n.current.offsetHeight;d(e)}};return e(),window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)},[]),t){const t="/create"===r.pathname;return e.jsx(e.Fragment,{children:e.jsxs("div",{className:"min-h-screen bg-background",children:[e.jsx("main",{style:{paddingBottom:t?"0px":`${c+16}px`},children:e.jsx(m,{})}),!t&&e.jsx(ea,{ref:n})]})})}return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"min-h-screen bg-background",children:e.jsx(ra,{children:e.jsx("main",{id:"main-content",className:"flex-1 overflow-hidden",children:e.jsx(m,{})})})}),e.jsx(O,{position:"bottom-right",theme:"system",richColors:!0,closeButton:!0,duration:4e3,toastOptions:{className:"animate-slide-in-down"}})]})}const sa=M("relative w-full rounded-lg border px-4 py-3 text-sm grid has-[>svg]:grid-cols-[calc(var(--spacing)*4)_1fr] grid-cols-[0_1fr] has-[>svg]:gap-x-3 gap-y-0.5 items-start [&>svg]:size-4 [&>svg]:translate-y-0.5 [&>svg]:text-current",{variants:{variant:{default:"bg-card text-card-foreground",destructive:"text-destructive bg-card [&>svg]:text-current *:data-[slot=alert-description]:text-destructive/90"}},defaultVariants:{variant:"default"}});function ia({className:t,variant:r,...a}){return e.jsx("div",{"data-slot":"alert",role:"alert",className:Ke(sa({variant:r}),t),...a})}function na({className:t,...r}){return e.jsx("div",{"data-slot":"alert-title",className:Ke("col-start-2 line-clamp-1 min-h-4 font-medium tracking-tight",t),...r})}function oa({className:t,...r}){return e.jsx("div",{"data-slot":"alert-description",className:Ke("text-muted-foreground col-start-2 grid justify-items-start gap-1 text-sm [&_p]:leading-relaxed",t),...r})}function la(){const t=d(),[r]=p(),[a,s]=o.useState("loading"),[i,n]=o.useState("Processing authentication..."),{setUser:l}=mr();return o.useEffect(()=>{(async()=>{try{const{data:r,error:a}=await ct.auth.getSession();if(a)return s("error"),void n(a.message||"Authentication failed");if(!r.session?.user)return s("error"),void n("No user session found");const i=r.session.user,o={id:i.id,email:i.email||"",name:i.user_metadata?.full_name||i.user_metadata?.name||i.email?.split("@")[0]||"User",username:i.user_metadata?.preferred_username||i.user_metadata?.user_name||i.email?.split("@")[0]||`user_${Math.random().toString(36).substring(2,10)}`,avatar:i.user_metadata?.avatar_url||i.user_metadata?.picture||"",bio:"",location:"",role:"user",preferences:{theme:"auto",highContrast:!1,largeText:!1,reducedMotion:!1,colorBlindFriendly:!1,notifications:{push:!0,email:!1,gameReminders:!0},privacy:{locationSharing:!0,profileVisibility:"public"},sports:[]}};try{const e=await ht.getUserProfile(i.id);if(e){l(e),s("success"),n("Welcome back! Redirecting...");const r=localStorage.getItem("pendingGameJoin");return void(r?(localStorage.removeItem("pendingGameJoin"),setTimeout(()=>t(`/game/${r}`),1500)):setTimeout(()=>t("/"),1500))}await ht.createUserProfile(i.id,{email:o.email,name:o.name,username:o.username,avatar:o.avatar,bio:o.bio,location:o.location})}catch(e){}l(o),s("success"),n("Authentication successful! Redirecting...");const c=localStorage.getItem("pendingGameJoin");if(c)localStorage.removeItem("pendingGameJoin"),setTimeout(()=>t(`/game/${c}`),1500);else if(o){o.name&&o.username?setTimeout(()=>t("/"),1500):setTimeout(()=>t("/onboarding"),1500)}else setTimeout(()=>t("/onboarding"),1500)}catch(r){s("error"),n("Authentication failed. Please try again."),setTimeout(()=>t("/auth"),3e3)}})()},[t,l,r]),e.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center p-4",children:e.jsx(Qe,{className:"w-full max-w-md",children:e.jsx(tt,{className:"pt-6",children:e.jsxs("div",{className:"text-center space-y-4",children:["loading"===a&&e.jsxs(e.Fragment,{children:[e.jsx(nt,{size:"lg"}),e.jsx("h2",{className:"text-xl font-semibold",children:"Completing Sign In"}),e.jsx("p",{className:"text-muted-foreground",children:i})]}),"success"===a&&e.jsxs(e.Fragment,{children:[e.jsx(U,{className:"w-12 h-12 text-green-500 mx-auto"}),e.jsx("h2",{className:"text-xl font-semibold text-green-700",children:"Success!"}),e.jsx("p",{className:"text-muted-foreground",children:i})]}),"error"===a&&e.jsxs(e.Fragment,{children:[e.jsx(z,{className:"w-12 h-12 text-red-500 mx-auto"}),e.jsx("h2",{className:"text-xl font-semibold text-red-700",children:"Authentication Error"}),e.jsx(ia,{variant:"destructive",children:e.jsx(oa,{children:i})}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Redirecting to sign in page..."})]})]})})})})}const ca=o.lazy(()=>y(()=>import("./HomeScreen-B9M_DwZG.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10]))),da=o.lazy(()=>y(()=>import("./SearchDiscovery-C93R7zog.js"),__vite__mapDeps([11,1,2,12,3,4,5,6,7,8,9]))),ua=o.lazy(()=>y(()=>import("./CreateGame-OptwjXb7.js"),__vite__mapDeps([13,1,2,14,12,15,16,5,4]))),ma=o.lazy(()=>y(()=>import("./UserProfile-BGxhR2hP.js"),__vite__mapDeps([17,1,2,18,19,4,5,20,9]))),pa=o.lazy(()=>y(()=>import("./EditProfile-CSnWqEKv.js"),__vite__mapDeps([21,1,2,12,15,5,19,4]))),ga=o.lazy(()=>y(()=>import("./GameDetails-P_HBy8XM.js"),__vite__mapDeps([22,1,2,7,5,3,4,23,12,15,8,24,9]))),fa=o.lazy(()=>y(()=>import("./OtherUserProfile-BpiTF_fC.js"),__vite__mapDeps([25,1,2,4,23,5,19,20]))),ha=o.lazy(()=>y(()=>import("./NotificationCenter-QXi7C-zH.js"),__vite__mapDeps([26,1,2,5,24,4]))),_a=o.lazy(()=>y(()=>import("./Settings-J7Vv0Zk_.js"),__vite__mapDeps([27,1,2,28,23,5,4]))),wa=o.lazy(()=>y(()=>import("./AccessibilitySettings-BqwJgwiI.js"),__vite__mapDeps([29,1,2,28,16,5,23,4]))),ya=o.lazy(()=>y(()=>import("./NotificationSettings-CgqQExCK.js"),__vite__mapDeps([30,1,2,28,5,4]))),ba=o.lazy(()=>y(()=>import("./DesignSystem-CZMyozrz.js"),__vite__mapDeps([31,1,2,12,18,28,5,14,10,4]))),va=o.lazy(()=>y(()=>import("./AdminDashboard-BVjGaaIg.js"),__vite__mapDeps([32,1,2,15,5,4,3]))),xa=o.lazy(()=>y(()=>import("./TermsOfService-D3jA70xW.js"),__vite__mapDeps([33,1,2,5,4]))),ka=o.lazy(()=>y(()=>import("./PrivacyPolicy-B5nFj4He.js"),__vite__mapDeps([34,1,2,5,4]))),ja=o.lazy(()=>y(()=>import("./Onboarding-D6bCuJa0.js"),__vite__mapDeps([35,1,2,12,14,8,5,4]))),Ea=o.lazy(()=>y(()=>import("./NavigationTest-D8oAFkOD.js"),__vite__mapDeps([36,1,2,5,4]))),Sa=o.lazy(()=>y(()=>import("./Auth-DKyXWxz7.js"),__vite__mapDeps([37,1,2,12,5,4]))),Na=({text:t="Loading..."})=>e.jsx("div",{className:"flex items-center justify-center min-h-[50vh]",children:e.jsx(nt,{size:"lg",text:t})}),Ia=({children:t})=>e.jsx("div",{className:"min-h-screen bg-background",children:t});function Ta(){return e.jsx(g,{children:e.jsx(rt,{children:e.jsx(it,{children:e.jsx(Ia,{children:e.jsx(o.Suspense,{fallback:e.jsx(Na,{text:"Loading application..."}),children:e.jsxs(f,{children:[e.jsxs(h,{path:"/",element:e.jsx(hr,{children:e.jsx(aa,{})}),children:[e.jsx(h,{index:!0,element:e.jsx(ca,{})}),e.jsx(h,{path:"search",element:e.jsx(da,{})}),e.jsx(h,{path:"create",element:e.jsx(ua,{})}),e.jsx(h,{path:"profile",element:e.jsx(ma,{})}),e.jsx(h,{path:"profile/edit",element:e.jsx(pa,{})}),e.jsx(h,{path:"game/:gameId",element:e.jsx(ga,{})}),e.jsx(h,{path:"user/:userId",element:e.jsx(fa,{})}),e.jsx(h,{path:"notifications",element:e.jsx(ha,{})}),e.jsx(h,{path:"settings",element:e.jsx(_a,{})}),e.jsx(h,{path:"settings/accessibility",element:e.jsx(wa,{})}),e.jsx(h,{path:"settings/notifications",element:e.jsx(ya,{})}),e.jsx(h,{path:"admin",element:e.jsx(va,{})}),e.jsx(h,{path:"design",element:e.jsx(ba,{onBack:()=>{}})}),e.jsx(h,{path:"navigation-test",element:e.jsx(Ea,{})})]}),e.jsx(h,{path:"/auth",element:e.jsx(hr,{requireAuth:!1,children:e.jsx(o.Suspense,{fallback:e.jsx(Na,{text:"Loading authentication..."}),children:e.jsx(Sa,{})})})}),e.jsx(h,{path:"/auth/callback",element:e.jsx(la,{})}),e.jsx(h,{path:"onboarding",element:e.jsx(o.Suspense,{fallback:e.jsx(Na,{text:"Loading onboarding..."}),children:e.jsx(ja,{onComplete:e=>{}})})}),e.jsx(h,{path:"legal/terms",element:e.jsx(o.Suspense,{fallback:e.jsx(Na,{text:"Loading terms..."}),children:e.jsx(xa,{})})}),e.jsx(h,{path:"legal/privacy",element:e.jsx(o.Suspense,{fallback:e.jsx(Na,{text:"Loading privacy policy..."}),children:e.jsx(ka,{})})}),e.jsx(h,{path:"*",element:e.jsx(c,{to:"/",replace:!0})})]})})})})})})}var Aa=function(){return null};class Ca{static instance;queryClient=null;debugInterval=null;static getInstance(){return Ca.instance||(Ca.instance=new Ca),Ca.instance}setQueryClient(e){this.queryClient=e}startDebugging(){!this.debugInterval&&this.queryClient&&(this.debugInterval=setInterval(()=>{this.logQueryStates()},1e4))}stopDebugging(){this.debugInterval&&(clearInterval(this.debugInterval),this.debugInterval=null)}logQueryStates(){if(!this.queryClient)return;const e=this.queryClient.getQueryCache().getAll().filter(e=>e.queryKey.includes("games")||e.queryKey.some(e=>"string"==typeof e&&e.includes("game")));0!==e.length&&e.forEach(e=>{e.state,e.isStale(),e.getObserversCount()})}forceRefreshStuckQueries(){if(!this.queryClient)return;const e=this.queryClient.getQueryCache().getAll().filter(e=>{const t=e.state,r=Date.now()-t.dataUpdatedAt;return"fetching"===t.fetchStatus&&r>3e4});e.length>0&&e.forEach(e=>{e.cancel(),this.queryClient.invalidateQueries({queryKey:e.queryKey})})}clearAllGameQueries(){this.queryClient&&this.queryClient.removeQueries({predicate:e=>e.queryKey.includes("games")||e.queryKey.some(e=>"string"==typeof e&&e.includes("game"))})}getQueryStats(){if(!this.queryClient)return null;const e=this.queryClient.getQueryCache().getAll();return{total:e.length,loading:e.filter(e=>"fetching"===e.state.fetchStatus).length,error:e.filter(e=>"error"===e.state.status).length,success:e.filter(e=>"success"===e.state.status).length,stale:e.filter(e=>e.isStale()).length,active:e.filter(e=>e.getObserversCount()>0).length}}}const Pa=Ca.getInstance();"undefined"!=typeof window&&(window.queryDebugger=Pa,window.debugQueries=()=>Pa.logQueryStates(),window.clearGameQueries=()=>Pa.clearAllGameQueries(),window.forceRefreshStuck=()=>Pa.forceRefreshStuckQueries());const Ra=new b({defaultOptions:{queries:{staleTime:12e4,gcTime:3e5,retry:(e,t)=>!(t?.status>=400&&t?.status<500)&&(!(t?.message?.includes("timeout")&&e>=1)&&e<2),retryDelay:e=>Math.min(1e3*2**e,15e3)},mutations:{retry:1}}});function Oa({children:t}){return o.useEffect(()=>{"undefined"!=typeof window&&(window.queryClient=Ra);"undefined"!=typeof window&&window.location.hostname},[]),e.jsxs(v,{client:Ra,children:[t,"undefined"!=typeof window&&("localhost"===window.location.hostname||!1)&&e.jsx(Aa,{initialIsOpen:!1})]})}function Ua(){return e.jsx(rt,{children:e.jsx(Oa,{children:e.jsx(gr,{children:e.jsx(Ta,{})})})})}if(Pa.setQueryClient(Ra),Ra.getQueryCache().subscribe(e=>{"added"===e.type||e.type}),"serviceWorker"in navigator&&window.addEventListener("load",async()=>{try{const e=await navigator.serviceWorker.register("/sw.js",{scope:"/",updateViaCache:"none"});e.addEventListener("updatefound",()=>{const t=e.installing;t&&t.addEventListener("statechange",()=>{"installed"===t.state&&navigator.serviceWorker.controller&&confirm("New version available! Refresh to update?")&&window.location.reload()})})}catch(e){}}),"performance"in window){performance.now();window.addEventListener("load",()=>{performance.now()})}!async function(){try{D.createRoot(document.getElementById("root")).render(e.jsx(u.StrictMode,{children:e.jsx(Ua,{})}))}catch(t){setTimeout(()=>{window.location.reload()},1e3)}}();export{ia as A,Ye as B,Qe as C,nt as L,ht as S,tt as a,wr as b,Xe as c,Ze as d,oa as e,Kr as f,Jr as g,Yr as h,Hr as i,Ke as j,fr as k,ft as l,M as m,yr as n,br as o,Xr as p,Pa as q,na as r,ct as s,et as t,mr as u};
//# sourceMappingURL=index-C1rAQj-O.js.map
