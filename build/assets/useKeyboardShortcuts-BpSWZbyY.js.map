{"version":3,"file":"useKeyboardShortcuts-BpSWZbyY.js","sources":["../../node_modules/lucide-react/dist/esm/icons/phone.js","../../src/hooks/useKeyboardShortcuts.ts"],"sourcesContent":["/**\n * @license lucide-react v0.487.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst __iconNode = [\n  [\n    \"path\",\n    {\n      d: \"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z\",\n      key: \"foiqr5\"\n    }\n  ]\n];\nconst Phone = createLucideIcon(\"phone\", __iconNode);\n\nexport { __iconNode, Phone as default };\n//# sourceMappingURL=phone.js.map\n","import { useEffect, useCallback, useRef } from 'react';\nimport { useNavigate, useLocation } from 'react-router-dom';\nimport { toast } from 'sonner';\n\ninterface KeyboardShortcut {\n  key: string;\n  ctrlKey?: boolean;\n  metaKey?: boolean;\n  shiftKey?: boolean;\n  altKey?: boolean;\n  description: string;\n  action: () => void;\n  disabled?: boolean;\n  global?: boolean; // Whether this shortcut works globally or only in specific contexts\n}\n\ninterface UseKeyboardShortcutsOptions {\n  enabled?: boolean;\n  showToast?: boolean;\n  context?: string; // Current screen context for context-specific shortcuts\n}\n\nexport function useKeyboardShortcuts(options: UseKeyboardShortcutsOptions = {}) {\n  const { enabled = true, showToast = false, context } = options;\n  const navigate = useNavigate();\n  const location = useLocation();\n  const shortcutsRef = useRef<KeyboardShortcut[]>([]);\n  const isHelpVisibleRef = useRef(false);\n\n  // Global navigation shortcuts\n  const globalShortcuts: KeyboardShortcut[] = [\n    {\n      key: '1',\n      description: 'Go to Home',\n      action: () => navigate('/'),\n      global: true\n    },\n    {\n      key: '2',\n      description: 'Go to Search',\n      action: () => navigate('/search'),\n      global: true\n    },\n    {\n      key: '3',\n      description: 'Create Game',\n      action: () => navigate('/create'),\n      global: true\n    },\n    {\n      key: '4',\n      description: 'Go to Profile',\n      action: () => navigate('/profile'),\n      global: true\n    },\n    {\n      key: 'c',\n      description: 'Create new game',\n      action: () => {\n        navigate('/create');\n        if (showToast) {\n          toast.success('Opening game creation');\n        }\n      },\n      global: true\n    },\n    {\n      key: 'k',\n      ctrlKey: true,\n      description: 'Quick search',\n      action: () => {\n        navigate('/search');\n        // Focus search input after navigation\n        setTimeout(() => {\n          const searchInput = document.querySelector('input[type=\"search\"], input[placeholder*=\"search\" i]') as HTMLInputElement;\n          if (searchInput) {\n            searchInput.focus();\n          }\n        }, 100);\n        if (showToast) {\n          toast.success('Quick search opened');\n        }\n      },\n      global: true\n    },\n    {\n      key: 'k',\n      metaKey: true, // For Mac users\n      description: 'Quick search (Mac)',\n      action: () => {\n        navigate('/search');\n        setTimeout(() => {\n          const searchInput = document.querySelector('input[type=\"search\"], input[placeholder*=\"search\" i]') as HTMLInputElement;\n          if (searchInput) {\n            searchInput.focus();\n          }\n        }, 100);\n        if (showToast) {\n          toast.success('Quick search opened');\n        }\n      },\n      global: true\n    },\n    {\n      key: 's',\n      description: 'Go to Settings',\n      action: () => navigate('/settings'),\n      global: true\n    },\n    {\n      key: 'h',\n      description: 'Go to Home',\n      action: () => navigate('/'),\n      global: true\n    },\n    {\n      key: 'Escape',\n      description: 'Go back',\n      action: () => {\n        if (window.history.length > 1) {\n          navigate(-1);\n        } else {\n          navigate('/');\n        }\n      },\n      global: true\n    },\n    {\n      key: '?',\n      shiftKey: true,\n      description: 'Show keyboard shortcuts',\n      action: () => {\n        showKeyboardShortcuts();\n      },\n      global: true\n    },\n    {\n      key: 'r',\n      ctrlKey: true,\n      description: 'Refresh page',\n      action: () => {\n        window.location.reload();\n      },\n      global: true\n    },\n    {\n      key: 'r',\n      metaKey: true, // For Mac users\n      description: 'Refresh page (Mac)',\n      action: () => {\n        window.location.reload();\n      },\n      global: true\n    }\n  ];\n\n  // Context-specific shortcuts\n  const contextShortcuts: Record<string, KeyboardShortcut[]> = {\n    // Home screen shortcuts\n    home: [\n      {\n        key: 'f',\n        description: 'Filter games',\n        action: () => {\n          const filterButton = document.querySelector('[aria-label*=\"filter\" i], [data-testid=\"filter-button\"]') as HTMLElement;\n          if (filterButton) {\n            filterButton.click();\n          }\n        }\n      },\n      {\n        key: 'r',\n        description: 'Refresh games list',\n        action: () => {\n          // Trigger pull to refresh or reload games\n          const refreshButton = document.querySelector('[aria-label*=\"refresh\" i], [data-testid=\"refresh-button\"]') as HTMLElement;\n          if (refreshButton) {\n            refreshButton.click();\n          }\n          if (showToast) {\n            toast.success('Refreshing games...');\n          }\n        }\n      }\n    ],\n    \n    // Game details shortcuts\n    game: [\n      {\n        key: 'j',\n        description: 'Join/Leave game',\n        action: () => {\n          const joinButton = document.querySelector('button:has-text(\"Join\"), button:has-text(\"Leave\"), [data-action=\"join-game\"]') as HTMLElement;\n          if (joinButton) {\n            joinButton.click();\n          }\n        }\n      },\n      {\n        key: 'm',\n        description: 'Open group chat',\n        action: () => {\n          const chatButton = document.querySelector('button:has-text(\"Group Chat\"), [data-action=\"group-chat\"]') as HTMLElement;\n          if (chatButton) {\n            chatButton.click();\n          }\n        }\n      },\n      {\n        key: 'l',\n        description: 'Get directions',\n        action: () => {\n          const directionsButton = document.querySelector('button:has-text(\"Get Directions\"), [data-action=\"directions\"]') as HTMLElement;\n          if (directionsButton) {\n            directionsButton.click();\n          }\n        }\n      },\n      {\n        key: 'u',\n        description: 'Share game',\n        action: () => {\n          const shareButton = document.querySelector('[aria-label*=\"share\" i], [data-action=\"share\"]') as HTMLElement;\n          if (shareButton) {\n            shareButton.click();\n          }\n        }\n      }\n    ],\n    \n    // Chat shortcuts\n    chat: [\n      {\n        key: 'Enter',\n        description: 'Send message',\n        action: () => {\n          const sendButton = document.querySelector('button[type=\"submit\"], [data-action=\"send-message\"]') as HTMLElement;\n          if (sendButton) {\n            sendButton.click();\n          }\n        }\n      },\n      {\n        key: 'Enter',\n        ctrlKey: true,\n        description: 'Add line break',\n        action: () => {\n          const messageInput = document.querySelector('input[placeholder*=\"message\" i], textarea[placeholder*=\"message\" i]') as HTMLInputElement | HTMLTextAreaElement;\n          if (messageInput) {\n            const currentValue = messageInput.value;\n            const cursorPosition = messageInput.selectionStart || 0;\n            const newValue = currentValue.slice(0, cursorPosition) + '\\n' + currentValue.slice(cursorPosition);\n            messageInput.value = newValue;\n            messageInput.setSelectionRange(cursorPosition + 1, cursorPosition + 1);\n          }\n        }\n      },\n      {\n        key: 'i',\n        description: 'View user info',\n        action: () => {\n          const userButton = document.querySelector('[data-action=\"view-profile\"]') as HTMLElement;\n          if (userButton) {\n            userButton.click();\n          }\n        }\n      }\n    ],\n    \n    // Search shortcuts\n    search: [\n      {\n        key: 'Enter',\n        description: 'Search',\n        action: () => {\n          const searchForm = document.querySelector('form') as HTMLFormElement;\n          if (searchForm) {\n            searchForm.submit();\n          }\n        }\n      },\n      {\n        key: 'ArrowDown',\n        description: 'Focus first result',\n        action: () => {\n          const firstResult = document.querySelector('[data-search-result]:first-child') as HTMLElement;\n          if (firstResult) {\n            firstResult.focus();\n          }\n        }\n      }\n    ],\n    \n    // Create game shortcuts\n    create: [\n      {\n        key: 'Enter',\n        ctrlKey: true,\n        description: 'Create game',\n        action: () => {\n          const createButton = document.querySelector('button[type=\"submit\"], [data-action=\"create-game\"]') as HTMLElement;\n          if (createButton && !createButton.hasAttribute('disabled')) {\n            createButton.click();\n          }\n        }\n      },\n      {\n        key: 'Tab',\n        description: 'Next field',\n        action: () => {\n          // Let browser handle default tab behavior\n        }\n      }\n    ]\n  };\n\n  // Combine shortcuts based on context\n  const getAllShortcuts = useCallback(() => {\n    const currentContextShortcuts = context ? contextShortcuts[context] || [] : [];\n    return [...globalShortcuts, ...currentContextShortcuts];\n  }, [context]);\n\n  // Show keyboard shortcuts help\n  const showKeyboardShortcuts = () => {\n    if (isHelpVisibleRef.current) return;\n    \n    isHelpVisibleRef.current = true;\n    const shortcuts = getAllShortcuts();\n    \n    // Create help modal content\n    const helpContent = shortcuts\n      .filter(shortcut => shortcut.description && !shortcut.disabled)\n      .map(shortcut => {\n        const keys = [];\n        if (shortcut.ctrlKey) keys.push('Ctrl');\n        if (shortcut.metaKey) keys.push('Cmd');\n        if (shortcut.shiftKey) keys.push('Shift');\n        if (shortcut.altKey) keys.push('Alt');\n        keys.push(shortcut.key === ' ' ? 'Space' : shortcut.key);\n        \n        return `${keys.join(' + ')}: ${shortcut.description}`;\n      })\n      .join('\\n');\n\n    // Use a toast for quick display (in a real app, you might want a proper modal)\n    toast.info('Keyboard Shortcuts', {\n      description: `Available shortcuts:\\n${helpContent}`,\n      duration: 10000,\n      action: {\n        label: 'Close',\n        onClick: () => {\n          isHelpVisibleRef.current = false;\n        }\n      }\n    });\n\n    // Reset help visibility after toast duration\n    setTimeout(() => {\n      isHelpVisibleRef.current = false;\n    }, 10000);\n  };\n\n  // Handle keyboard events\n  const handleKeyDown = useCallback((event: KeyboardEvent) => {\n    if (!enabled) return;\n\n    // Don't handle shortcuts when user is typing in input fields\n    const target = event.target as HTMLElement;\n    const isInputField = target.tagName === 'INPUT' || \n                        target.tagName === 'TEXTAREA' || \n                        target.contentEditable === 'true' ||\n                        target.closest('[contenteditable=\"true\"]');\n\n    // Allow some shortcuts even in input fields\n    const allowInInputs = ['Escape', 'Enter'];\n    const hasModifier = event.ctrlKey || event.metaKey || event.altKey;\n    \n    if (isInputField && !allowInInputs.includes(event.key) && !hasModifier) {\n      return;\n    }\n\n    const shortcuts = getAllShortcuts();\n    \n    for (const shortcut of shortcuts) {\n      if (shortcut.disabled) continue;\n      \n      const keyMatches = shortcut.key.toLowerCase() === event.key.toLowerCase();\n      const ctrlMatches = !!shortcut.ctrlKey === event.ctrlKey;\n      const metaMatches = !!shortcut.metaKey === event.metaKey;\n      const shiftMatches = !!shortcut.shiftKey === event.shiftKey;\n      const altMatches = !!shortcut.altKey === event.altKey;\n      \n      if (keyMatches && ctrlMatches && metaMatches && shiftMatches && altMatches) {\n        event.preventDefault();\n        event.stopPropagation();\n        \n        try {\n          shortcut.action();\n        } catch (error) {\n          console.error('Error executing keyboard shortcut:', error);\n          if (showToast) {\n            toast.error('Shortcut failed to execute');\n          }\n        }\n        break;\n      }\n    }\n  }, [enabled, getAllShortcuts, showToast]);\n\n  // Register keyboard event listeners\n  useEffect(() => {\n    if (!enabled) return;\n\n    document.addEventListener('keydown', handleKeyDown);\n    \n    return () => {\n      document.removeEventListener('keydown', handleKeyDown);\n    };\n  }, [enabled, handleKeyDown]);\n\n  // Update shortcuts reference\n  useEffect(() => {\n    shortcutsRef.current = getAllShortcuts();\n  }, [getAllShortcuts]);\n\n  // Return utility functions\n  return {\n    shortcuts: shortcutsRef.current,\n    showHelp: showKeyboardShortcuts,\n    isEnabled: enabled\n  };\n}\n\n// Hook for components to add custom shortcuts\nexport function useCustomShortcuts(customShortcuts: KeyboardShortcut[], enabled = true) {\n  const handleKeyDown = useCallback((event: KeyboardEvent) => {\n    if (!enabled) return;\n\n    const target = event.target as HTMLElement;\n    const isInputField = target.tagName === 'INPUT' || \n                        target.tagName === 'TEXTAREA' || \n                        target.contentEditable === 'true';\n\n    // Skip if in input field (unless it's a special key)\n    if (isInputField && !['Escape', 'Enter'].includes(event.key)) {\n      return;\n    }\n\n    for (const shortcut of customShortcuts) {\n      if (shortcut.disabled) continue;\n      \n      const keyMatches = shortcut.key.toLowerCase() === event.key.toLowerCase();\n      const ctrlMatches = !!shortcut.ctrlKey === event.ctrlKey;\n      const metaMatches = !!shortcut.metaKey === event.metaKey;\n      const shiftMatches = !!shortcut.shiftKey === event.shiftKey;\n      const altMatches = !!shortcut.altKey === event.altKey;\n      \n      if (keyMatches && ctrlMatches && metaMatches && shiftMatches && altMatches) {\n        event.preventDefault();\n        event.stopPropagation();\n        \n        try {\n          shortcut.action();\n        } catch (error) {\n          console.error('Error executing custom shortcut:', error);\n        }\n        break;\n      }\n    }\n  }, [customShortcuts, enabled]);\n\n  useEffect(() => {\n    if (!enabled) return;\n\n    document.addEventListener('keydown', handleKeyDown);\n    \n    return () => {\n      document.removeEventListener('keydown', handleKeyDown);\n    };\n  }, [enabled, handleKeyDown]);\n}"],"names":["__iconNode","Phone","createLucideIcon","useCustomShortcuts","customShortcuts","enabled","handleKeyDown","useCallback","event","target","shortcut","keyMatches","ctrlMatches","metaMatches","shiftMatches","altMatches","error","useEffect"],"mappings":"+CAAA;AAAA;AAAA;AAAA;AAAA;AAAA,GASA,MAAMA,EAAa,CACjB,CACE,OACA,CACE,EAAG,gSACH,IAAK,QACX,CACA,CACA,EACMC,EAAQC,EAAiB,QAASF,CAAU,ECga3C,SAASG,EAAmBC,EAAqCC,EAAU,GAAM,CACtF,MAAMC,EAAgBC,cAAaC,GAAyB,CAC1D,GAAI,CAACH,EAAS,OAEd,MAAMI,EAASD,EAAM,OAMrB,GAAI,GALiBC,EAAO,UAAY,SACpBA,EAAO,UAAY,YACnBA,EAAO,kBAAoB,SAG3B,CAAC,CAAC,SAAU,OAAO,EAAE,SAASD,EAAM,GAAG,GAI3D,UAAWE,KAAYN,EAAiB,CACtC,GAAIM,EAAS,SAAU,SAEvB,MAAMC,EAAaD,EAAS,IAAI,gBAAkBF,EAAM,IAAI,YAAA,EACtDI,EAAc,CAAC,CAACF,EAAS,UAAYF,EAAM,QAC3CK,EAAc,CAAC,CAACH,EAAS,UAAYF,EAAM,QAC3CM,EAAe,CAAC,CAACJ,EAAS,WAAaF,EAAM,SAC7CO,EAAa,CAAC,CAACL,EAAS,SAAWF,EAAM,OAE/C,GAAIG,GAAcC,GAAeC,GAAeC,GAAgBC,EAAY,CAC1EP,EAAM,eAAA,EACNA,EAAM,gBAAA,EAEN,GAAI,CACFE,EAAS,OAAA,CACX,OAASM,EAAO,CACd,QAAQ,MAAM,mCAAoCA,CAAK,CACzD,CACA,KACF,CACF,CACF,EAAG,CAACZ,EAAiBC,CAAO,CAAC,EAE7BY,EAAAA,UAAU,IAAM,CACd,GAAKZ,EAEL,gBAAS,iBAAiB,UAAWC,CAAa,EAE3C,IAAM,CACX,SAAS,oBAAoB,UAAWA,CAAa,CACvD,CACF,EAAG,CAACD,EAASC,CAAa,CAAC,CAC7B","x_google_ignoreList":[0]}