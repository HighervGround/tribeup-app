import{j as e}from"./ui-B4gQYcc6.js";import{r as t,e as s}from"./vendor-CTE-63Sz.js";import{s as a,u as r,B as n,C as i,a as l,d as o,e as c,S as d}from"./index-KT6d_1Zf.js";import{P as m}from"./progress-DZJNyP1n.js";import{I as u}from"./input-Blmf8RA4.js";import{T as x}from"./textarea-COgLkNn7.js";import{A as p,a as h}from"./alert-DSh9Bxk_.js";import{S as g,a as f,b as j,c as b,d as y}from"./select-CHDz2LNQ.js";import{A as v,L as N,e as w,h as k}from"./utils-B5KmqWpW.js";import"./data-pHbUkPVm.js";function C(){const[e,s]=t.useState([]),[a,r]=t.useState(!1),[n,i]=t.useState(!1),l="AIzaSyCs_MsE3qt74h6eIR04QJqmf2FYgSys4UQ";t.useEffect(()=>{},[l]),t.useEffect(()=>{i(!1)},[]);const o=t.useCallback(async e=>{try{if(l){const t=await fetch(`https://maps.googleapis.com/maps/api/geocode/json?address=${encodeURIComponent(e)}&key=${l}`);if(t.ok){const e=await t.json();if(e.results&&e.results.length>0){const t=e.results[0].geometry.location;return{lat:t.lat,lng:t.lng}}}}const t=await fetch(`https://nominatim.openstreetmap.org/search?format=json&q=${encodeURIComponent(e)}&limit=1`,{headers:{"User-Agent":"TribeUp Sports App"}});if(!t.ok)throw new Error("Geocoding failed");const s=await t.json();if(s.length>0){return{lat:parseFloat(s[0].lat),lng:parseFloat(s[0].lon)}}return null}catch(t){return null}},[l]),c=t.useCallback(async(e,t,a)=>{if(!e.trim())return void s([]);r(!0);try{if(l){const n={textQuery:e,maxResultCount:5,locationBias:t&&a?{circle:{center:{latitude:t,longitude:a},radius:5e4}}:void 0},i=await fetch("https://places.googleapis.com/v1/places:searchText",{method:"POST",headers:{"Content-Type":"application/json","X-Goog-Api-Key":l,"X-Goog-FieldMask":"places.id,places.displayName,places.formattedAddress,places.location"},body:JSON.stringify(n)});if(i.ok){const e=await i.json();if(e.places&&e.places.length>0){const t=e.places.map((e,t)=>{const s=e.displayName?.text||"",a=e.formattedAddress||"",r=s?a?`${s}, ${a}`:s:a||"Unknown location";return{place_id:e.id||`google-${t}`,description:r,structured_formatting:{main_text:s||a?.split(",")[0]||"Unknown",secondary_text:a||""}}});return s(t),void r(!1)}}else{await i.text()}}await(async()=>{try{let r=`https://nominatim.openstreetmap.org/search?format=json&q=${encodeURIComponent(e)}&limit=5&addressdetails=1`;t&&a&&(r+=`&lat=${t}&lon=${a}&bounded=1&viewbox=${a-.1},${t+.1},${a+.1},${t-.1}`);const n=await fetch(r,{headers:{"User-Agent":"TribeUp Sports App"}});if(n.ok){const e=await n.json();if(e&&e.length>0){const t=e.map((e,t)=>({place_id:e.place_id||`osm-${t}`,description:e.display_name,structured_formatting:{main_text:e.name||e.display_name.split(",")[0],secondary_text:e.display_name.split(",").slice(1,3).join(",").trim()}}));return void s(t)}}else await n.text()}catch(r){}s([])})()}catch(n){s([])}finally{r(!1)}},[]);return t.useEffect(()=>{"undefined"!=typeof window&&(window.debugLocationSearch=async e=>{await c(e)})},[c]),{suggestions:e,loading:a,searchLocations:c,geocodeLocation:o}}class S{static instance;cache={};CACHE_TTL=3e5;constructor(){}static getInstance(){return S.instance||(S.instance=new S),S.instance}async fetchConfigValue(e){try{const{data:t,error:s}=await a.from("system_config").select("value").eq("key",e).single();if(s){if("PGRST116"===s.code)return null;throw s}return this.parseConfigValue(t.value)}catch(t){return null}}parseConfigValue(e){if("string"==typeof e)try{return JSON.parse(e)}catch{return"true"===e||"false"!==e&&(isNaN(Number(e))||""===e?e:Number(e))}return e}async get(e,t){const s=this.cache[e];if(s&&Date.now()-s.timestamp<s.ttl)return s.value;const a=await this.fetchConfigValue(e);return this.cache[e]={value:a,timestamp:Date.now(),ttl:this.CACHE_TTL},null!==a?a:t}}const $=S.getInstance(),P=[{value:"basketball",label:"Basketball",icon:"ðŸ€"},{value:"soccer",label:"Soccer",icon:"âš½"},{value:"tennis",label:"Tennis",icon:"ðŸŽ¾"},{value:"pickleball",label:"Pickleball",icon:"ðŸ¥’"},{value:"volleyball",label:"Volleyball",icon:"ðŸ"},{value:"football",label:"Football",icon:"ðŸˆ"},{value:"baseball",label:"Baseball",icon:"âš¾"}],L=[{id:1,title:"What & When",fields:["sport","date","time","duration"]},{id:2,title:"Where & Who",fields:["location","maxPlayers","cost"]},{id:3,title:"Review & Create",fields:[]}],D=["09:00","12:00","15:00","17:00","18:00","19:00","20:00","21:00"];function T(){const a=s(),[S,T]=t.useState(1),[_,E]=t.useState(!1),[I,A]=t.useState({}),[U,F]=t.useState(null),[M,O]=t.useState(!1),[z,G]=t.useState(D),{latitude:R,longitude:q,error:B}=function(e={}){const[s,a]=t.useState({latitude:null,longitude:null,error:null,loading:!0});return t.useEffect(()=>{if(!navigator.geolocation)return void a(e=>({...e,error:"Geolocation is not supported by this browser",loading:!1}));const t={enableHighAccuracy:e.enableHighAccuracy??!0,timeout:e.timeout??1e4,maximumAge:e.maximumAge??3e5};navigator.geolocation.getCurrentPosition(e=>{a({latitude:e.coords.latitude,longitude:e.coords.longitude,error:null,loading:!1})},e=>{let t="Unable to retrieve location";switch(e.code){case e.PERMISSION_DENIED:t="Location access denied by user";break;case e.POSITION_UNAVAILABLE:t="Location information unavailable";break;case e.TIMEOUT:t="Location request timed out"}a(e=>({...e,error:t,loading:!1}))},t)},[e.enableHighAccuracy,e.timeout,e.maximumAge]),s}(),{searchLocations:W,loading:H,suggestions:V,geocodeLocation:J}=C(),{user:Q}=r(),Y=t.useRef(null),[X,K]=t.useState(0),[Z,ee]=t.useState({title:"",sport:"",date:(()=>{const e=new Date;return e.setDate(e.getDate()+1),e.toISOString().split("T")[0]})(),time:"",duration:"60",location:"",latitude:null,longitude:null,maxPlayers:"10",cost:"FREE",imageUrl:""});t.useEffect(()=>{(async()=>{try{const e=await $.get("quick_time_slots",["09:00","12:00","15:00","17:00","18:00","19:00","20:00","21:00"]);G(e||D);const t=await $.get("max_players_per_game",10);ee(e=>({...e,maxPlayers:(t||10).toString()}))}catch(e){G(D),ee(e=>({...e,maxPlayers:"10"}))}})()},[]),t.useEffect(()=>{(async()=>{if(Z.sport)try{const e=await $.get(`sport_${Z.sport}_duration`,60);ee(t=>({...t,duration:e?e.toString():"60"}))}catch(e){}})()},[Z.sport]);const te={basketball:{maxPlayers:10},soccer:{maxPlayers:22},football:{maxPlayers:22},tennis:{maxPlayers:4},volleyball:{maxPlayers:12},baseball:{maxPlayers:18},hockey:{maxPlayers:12},badminton:{maxPlayers:4},pickleball:{maxPlayers:4},golf:{maxPlayers:4},running:{maxPlayers:20},cycling:{maxPlayers:15},swimming:{maxPlayers:8},yoga:{maxPlayers:15},crossfit:{maxPlayers:12}};(()=>{const e=new Date,t=e.getHours();0===e.getDay()||e.getDay()})();const[se,ae]=t.useState(()=>{try{return JSON.parse(localStorage.getItem("recentGameLocations")||"[]")}catch{return[]}});t.useEffect(()=>{Q||a("/auth")},[Q,a]),t.useEffect(()=>{const e=()=>{if(Y.current){const e=Y.current.offsetHeight;K(e)}};return e(),window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)},[S,_]);const re=(e,t,s)=>{if(!e||!t||!s)return"";const a=parseInt(t.split(":")[0]);let r="Morning";a>=12&&a<17?r="Afternoon":a>=17&&(r="Evening");const n=(e=>{const t=e.split(",").map(e=>e.trim()),s=t[0];if(!/^\d/.test(s))return s;const a=["park","center","centre","court","field","stadium","gym","club","recreation","community","sports","athletic","fitness","plaza","square","beach","lake","river","trail","complex","facility","ymca","school","university","college","library","museum"];for(const n of t){const e=n.toLowerCase();if(a.some(t=>e.includes(t)))return n}const r=["starbucks","mcdonalds","walmart","target","costco","whole foods","restaurant","cafe","coffee","hotel","mall","store","shop"];for(const n of t){const e=n.toLowerCase();if(r.some(t=>e.includes(t)))return n}return s.replace(/^\d+\s+/,"").replace(/\s+(st|street|ave|avenue|rd|road|blvd|boulevard|dr|drive|ln|lane|way|ct|court)$/i,"").trim()||s})(s),i=e.charAt(0).toUpperCase()+e.slice(1),l=[`${r} ${i} at ${n}`,`${i} Game - ${n}`,`${r} ${i} Session`,`${n} ${i} Meetup`,`${i} @ ${n}`];return l[Math.floor(Math.random()*l.length)]},ne=(e,t)=>{ee(s=>{const a={...s,[e]:t},r=re(s.sport,s.time,s.location),n=re("sport"===e?t:s.sport,"time"===e?t:s.time,"location"===e?t:s.location);if("sport"!==e&&"time"!==e&&"location"!==e||s.title&&s.title!==r||!n||(a.title=n),"sport"===e&&te[t.toLowerCase()]){const e=te[t.toLowerCase()];a.maxPlayers=(e?.maxPlayers||10).toString()}if("location"===e&&t.trim()){const e=[t,...se.filter(e=>e!==t)].slice(0,5);ae(e),localStorage.setItem("recentGameLocations",JSON.stringify(e))}return a});const s=((e,t)=>{switch(e){case"date":if(!t)return null;const e=new Date;return new Date(t+"T00:00:00")<new Date(e.toDateString())?"Date cannot be in the past":null;case"time":if(!t)return null;const s=parseInt(t.split(":")[0]);return s<6||s>23?"Unusual time - games typically happen 6 AM - 11 PM":s>=2&&s<=5?"Did you mean PM instead of AM?":null;case"maxPlayers":if(!t)return null;const a=parseInt(t);if(a<2)return"Need at least 2 players";if(a>100)return"That seems like a lot of players - double check?";const r=Z.sport?.toLowerCase();return"tennis"===r&&a>4?"Tennis usually has 2-4 players":"basketball"===r&&a>10?"Basketball usually has 6-10 players":"soccer"===r&&a>22?"Soccer usually has up to 22 players":null;case"location":return t?t.length<3?"Location too short":t.toLowerCase().includes("ocean")||t.toLowerCase().includes("sea")?"Are you sure this location is correct?":t.toLowerCase().includes("home")||t.toLowerCase().includes("house")?"Consider using a public venue for safety":null:null;case"cost":if(!t)return null;const n=parseFloat(t);return n<0?"Cost cannot be negative":n>500?"That seems expensive - double check?":null;case"duration":if(!t)return null;const i=parseInt(t);return i<15?"Duration should be at least 15 minutes":i>480?"Duration seems too long - max 8 hours":i>240?"That's a long game - are you sure?":null;default:return null}})(e,t);A(t=>{if(s)return{...t,[e]:s};{const{[e]:s,...a}=t;return a}}),"location"===e&&Z.sport&&Z.date&&Z.time&&t&&(async(e,t,s,a)=>{if(!(e&&t&&s&&a))return null;try{return(await d.getGames()).filter(r=>{const n=r.date===t,i=Math.abs(new Date(`2000-01-01T${r.time}`).getTime()-new Date(`2000-01-01T${s}`).getTime())<36e5,l=r.sport.toLowerCase()===e.toLowerCase(),o=r.location.toLowerCase().includes(a.toLowerCase())||a.toLowerCase().includes(r.location.toLowerCase());return n&&i&&l&&o}).length>0?`Similar ${e} game already exists at ${a} on ${t} around ${s}`:null}catch(r){return null}})(Z.sport,Z.date,Z.time,t).then(e=>{A(e?t=>({...t,duplicate:e}):e=>{const{duplicate:t,...s}=e;return s})})},ie=e=>(L[e-1]?.fields||[]).every(e=>{const t=Z[e];return null!=t&&""!==t.toString().trim()}),le=()=>{const e={};if(1===S){if(Z.sport||(e.sport="Please select a sport."),Z.date||(e.date="Please choose a date."),Z.time||(e.time="Please choose a time."),Z.duration||(e.duration="Please set a duration."),Z.date){const t=new Date;new Date(Z.date+"T00:00:00")<new Date(t.toDateString())&&(e.date="Date cannot be in the past.")}if(Z.duration){const t=parseInt(Z.duration);t<15&&(e.duration="Duration should be at least 15 minutes."),t>480&&(e.duration="Duration seems too long - max 8 hours.")}}if(2===S){Z.location.trim()||(e.location="Location is required.");const t=parseInt(Z.maxPlayers,10);Z.maxPlayers?(Number.isNaN(t)||t<=0)&&(e.maxPlayers="Enter a valid number greater than 0."):e.maxPlayers="Max players is required.",Z.cost||(e.cost="Please select a cost option.")}return A(e),0===Object.keys(e).length},oe=()=>{S>1?T(S-1):a(-1)},ce=S/L.length*100,de=P.find(e=>e.value===Z.sport),me=(t,s,a="text",r)=>{const n=Z[t],i=I[t],l=n&&!i;return"select"===a?e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium text-foreground",children:s}),e.jsxs("select",{value:n,onChange:e=>ne(t,e.target.value),className:"w-full p-3 border rounded-lg transition-colors bg-background text-foreground "+(i?"border-destructive bg-destructive/10":l?"border-green-500 bg-green-50 dark:bg-green-950/50 dark:border-green-400":"border-input hover:border-ring focus:border-ring focus:ring-2 focus:ring-ring/20"),children:[e.jsxs("option",{value:"",className:"bg-background text-foreground",children:["Select ",s.toLowerCase()]}),r?.map(t=>e.jsx("option",{value:t.value,className:"bg-background text-foreground",children:t.label},t.value))]}),i&&e.jsxs("p",{className:"text-sm text-destructive flex items-center gap-1",children:[e.jsx("span",{children:"âš ï¸"})," ",i]}),l&&!i&&e.jsxs("p",{className:"text-sm text-green-600 dark:text-green-400 flex items-center gap-1",children:[e.jsx("span",{children:"âœ…"})," Looks good!"]})]}):"textarea"===a?e.jsxs("div",{className:"space-y-2",children:[e.jsxs("label",{className:"text-sm font-medium flex items-center gap-2",children:[s,L[S-1].fields.includes(t)&&e.jsx("span",{className:"text-destructive",children:"*"})]}),e.jsx(x,{value:n,onChange:e=>ne(t,e.target.value),placeholder:`Enter ${s.toLowerCase()}`,className:"resize-none "+(i?"border-destructive":""),rows:3}),i&&e.jsx("p",{className:"text-sm text-destructive",children:i})]}):e.jsxs("div",{className:"space-y-2",children:[e.jsxs("label",{className:"text-sm font-medium flex items-center gap-2",children:[s,L[S-1].fields.includes(t)&&e.jsx("span",{className:"text-destructive",children:"*"})]}),e.jsx(u,{type:a,value:Z[t],onChange:e=>ne(t,e.target.value),placeholder:`Enter ${s.toLowerCase()}`,min:"date"===a?(new Date).toISOString().split("T")[0]:void 0,className:"transition-colors "+(i?"border-red-500 bg-red-50":l?"border-green-500 bg-green-50":"border-gray-300")}),i&&e.jsxs("p",{className:"text-sm text-red-500 dark:text-red-400 flex items-center gap-1",children:[e.jsx("span",{children:"âš ï¸"})," ",i]}),l&&!i&&e.jsxs("p",{className:"text-sm text-green-600 dark:text-green-400 flex items-center gap-1",children:[e.jsx("span",{children:"âœ…"})," Looks good!"]})]})};return e.jsxs("div",{className:"min-h-screen bg-background",style:{paddingBottom:`${X+16}px`},children:[e.jsxs("div",{className:"max-w-2xl mx-auto px-4 py-6",children:[e.jsx("div",{className:"sticky top-0 bg-background/95 backdrop-blur-sm border-b border-border z-10",children:e.jsx("div",{className:"flex items-center justify-between px-4 py-4",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(n,{variant:"ghost",size:"icon",onClick:oe,children:e.jsx(v,{className:"w-5 h-5"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-xl font-semibold",children:"Create Game"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:L[S-1].title})]})]})})}),e.jsx("div",{className:"px-4 pb-4",children:e.jsx(m,{value:ce,className:"h-2"})})]}),e.jsxs("div",{className:"px-4 pt-6",style:{paddingBottom:`${X+16}px`},children:[de&&e.jsx("div",{className:"mb-6",children:e.jsx(i,{children:e.jsx(l,{className:"pt-6",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-12 h-12 bg-primary/10 rounded-lg flex items-center justify-center text-2xl",children:de.icon}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold",children:Z.title||"New Game"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:de.label})]})]})})})}),1===S&&e.jsx("div",{className:"space-y-6",children:e.jsxs(i,{children:[e.jsx(o,{children:e.jsxs(c,{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-8 h-8 bg-primary/10 rounded-full flex items-center justify-center text-primary font-semibold text-sm",children:"1"}),"What & When"]})}),e.jsxs(l,{className:"space-y-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"block text-sm font-medium text-foreground",children:"Sport"}),e.jsx("div",{className:"grid grid-cols-3 sm:grid-cols-4 gap-2",children:P.map(t=>e.jsxs("button",{type:"button",onClick:()=>ne("sport",t.value),className:"p-2 rounded-lg border-2 transition-all duration-200 "+(Z.sport===t.value?"border-primary bg-primary/10 text-primary":"border-input hover:border-ring text-foreground bg-background"),children:[e.jsx("div",{className:"text-lg mb-1",children:t.icon}),e.jsx("div",{className:"text-xs font-medium",children:t.label})]},t.value))}),I.sport&&e.jsx("p",{className:"text-sm text-destructive",children:I.sport})]}),me("date","Date","date"),e.jsxs("div",{className:"space-y-3",children:[e.jsx("label",{className:"block text-sm font-medium text-foreground",children:"Time"}),e.jsx("div",{className:"grid grid-cols-4 gap-2",children:(z||D).map(t=>e.jsx("button",{type:"button",onClick:()=>ne("time",t),className:"px-2 py-2 text-xs rounded-md border transition-colors "+(Z.time===t?"bg-primary text-primary-foreground border-primary":"bg-background text-foreground border-input hover:bg-muted hover:border-ring"),children:new Date(`2000-01-01T${t}:00`).toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit",hour12:!0})},t))}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("label",{className:"text-xs text-muted-foreground",children:"Or enter custom time:"}),e.jsx(u,{type:"time",value:Z.time,onChange:e=>ne("time",e.target.value),className:I.time?"border-destructive":"",placeholder:"Select time"})]}),I.time&&e.jsx("p",{className:"text-sm text-destructive",children:I.time})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("label",{className:"block text-sm font-medium text-foreground",children:["Duration ",e.jsx("span",{className:"text-destructive",children:"*"})]}),e.jsx("div",{className:"grid grid-cols-4 gap-2",children:["30","60","90","120"].map(t=>e.jsxs("button",{type:"button",onClick:()=>ne("duration",t),className:"px-2 py-2 text-xs rounded-md border transition-colors "+(Z.duration===t?"bg-primary text-primary-foreground border-primary":"bg-background text-foreground border-input hover:bg-muted hover:border-ring"),children:[t," min"]},t))}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("label",{className:"text-xs text-muted-foreground",children:"Or enter custom duration (minutes):"}),e.jsx(u,{type:"number",value:Z.duration,onChange:e=>ne("duration",e.target.value),className:I.duration?"border-destructive":"",placeholder:"Duration in minutes",min:"15",max:"480"})]}),I.duration&&e.jsx("p",{className:"text-sm text-destructive",children:I.duration})]})]})]})}),2===S&&e.jsx("div",{className:"space-y-6",children:e.jsxs(i,{children:[e.jsx(o,{children:e.jsxs(c,{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-8 h-8 bg-primary/10 rounded-full flex items-center justify-center text-primary font-semibold text-sm",children:"2"}),"Where & Who"]})}),e.jsxs(l,{className:"space-y-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"block text-sm font-medium text-foreground",children:"Location"}),e.jsxs("div",{className:"relative",children:[e.jsx(u,{value:Z.location,onChange:e=>{ne("location",e.target.value),e.target.value.length>2?(W(e.target.value,R||void 0,q||void 0),O(!0)):O(!1)},placeholder:"Enter location or address",className:I.location?"border-destructive":""}),e.jsxs("div",{className:"absolute right-3 top-1/2 transform -translate-y-1/2 flex gap-2",children:[H&&e.jsx(N,{className:"w-4 h-4 animate-spin text-muted-foreground"}),e.jsx(n,{type:"button",variant:"ghost",size:"sm",className:"h-6 w-6 p-0",onClick:async()=>{if(R&&q)try{const e=await fetch(`https://nominatim.openstreetmap.org/reverse?format=json&lat=${R}&lon=${q}`),t=(await e.json()).display_name||`${R.toFixed(4)}, ${q.toFixed(4)}`;ee(e=>({...e,location:t,latitude:R,longitude:q}))}catch(e){ee(e=>({...e,location:`${R.toFixed(4)}, ${q.toFixed(4)}`,latitude:R,longitude:q}))}},disabled:!R||!q,title:R&&q?"Use my current location":B||"Location not available",children:e.jsx(w,{className:"w-4 h-4"})})]})]}),M&&e.jsx("div",{className:"border border-border rounded-md bg-background shadow-lg max-h-48 overflow-y-auto",children:V.length>0?V.map(t=>e.jsxs("button",{type:"button",className:"w-full text-left px-3 py-2 hover:bg-muted border-b border-border last:border-b-0 flex items-center gap-2",onClick:async()=>{ee(e=>{const s=e.sport&&e.time?re(e.sport,e.time,t.description):e.title;return{...e,location:t.description,title:s||e.title}}),O(!1);const e=await J(t.description);e&&ee(t=>({...t,latitude:e.lat,longitude:e.lng}))},children:[e.jsx(w,{className:"w-4 h-4 text-muted-foreground flex-shrink-0"}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:t.structured_formatting.main_text}),e.jsx("div",{className:"text-sm text-muted-foreground",children:t.structured_formatting.secondary_text})]})]},t.place_id)):e.jsx("div",{className:"px-3 py-2 text-sm text-muted-foreground",children:H?"Searching...":"No suggestions found. Try typing a more specific location."})}),I.location&&e.jsx("p",{className:"text-sm text-destructive",children:I.location})]}),me("maxPlayers","Max Players","number"),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("label",{className:"text-sm font-medium text-foreground",children:["Cost ",e.jsx("span",{className:"text-destructive",children:"*"})]}),e.jsxs(g,{value:Z.cost,onValueChange:e=>ne("cost",e),children:[e.jsx(f,{className:I.cost?"border-destructive":"",children:e.jsx(j,{placeholder:"Select cost"})}),e.jsxs(b,{children:[e.jsx(y,{value:"FREE",children:"Free"}),e.jsx(y,{value:"$5",children:"$5 per person"}),e.jsx(y,{value:"$10",children:"$10 per person"}),e.jsx(y,{value:"$15",children:"$15 per person"}),e.jsx(y,{value:"$20",children:"$20 per person"}),e.jsx(y,{value:"custom",children:"Custom amount"})]})]}),I.cost&&e.jsxs("p",{className:"text-sm text-destructive flex items-center gap-1",children:[e.jsx("span",{children:"âš ï¸"})," ",I.cost]}),Z.cost&&!I.cost&&e.jsxs("p",{className:"text-sm text-green-600 dark:text-green-400 flex items-center gap-1",children:[e.jsx("span",{children:"âœ…"})," Looks good!"]})]})]})]})}),3===S&&e.jsx("div",{className:"space-y-6",children:e.jsxs(i,{children:[e.jsx(o,{children:e.jsxs(c,{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-8 h-8 bg-primary/10 rounded-full flex items-center justify-center text-primary font-semibold text-sm",children:"3"}),"Review & Create"]})}),e.jsxs(l,{className:"space-y-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Game Summary"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-sm font-medium text-muted-foreground",children:"Sport:"}),e.jsxs("span",{className:"text-sm",children:[de?.icon," ",de?.label]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-sm font-medium text-muted-foreground",children:"Date:"}),e.jsx("span",{className:"text-sm",children:Z.date})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-sm font-medium text-muted-foreground",children:"Time:"}),e.jsx("span",{className:"text-sm",children:Z.time?new Date(`2000-01-01T${Z.time}:00`).toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit",hour12:!0}):""})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-sm font-medium text-muted-foreground",children:"Duration:"}),e.jsxs("span",{className:"text-sm",children:[Z.duration," minutes"]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-sm font-medium text-muted-foreground",children:"Location:"}),e.jsx("span",{className:"text-sm",children:Z.location})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-sm font-medium text-muted-foreground",children:"Max Players:"}),e.jsx("span",{className:"text-sm",children:Z.maxPlayers})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-sm font-medium text-muted-foreground",children:"Cost:"}),e.jsx("span",{className:"text-sm",children:Z.cost})]})]})]})]}),e.jsxs(p,{children:[e.jsx(k,{className:"h-4 w-4"}),e.jsxs(h,{children:['Ready to create "',Z.title,'" for ',Z.maxPlayers," players on ",Z.date," at ",Z.time?new Date(`2000-01-01T${Z.time}:00`).toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit",hour12:!0}):"","?"]})]}),I.duplicate&&e.jsxs("div",{className:"mt-2",children:[e.jsx("p",{className:"text-sm text-yellow-700 mt-1",children:I.duplicate}),e.jsx("p",{className:"text-xs text-yellow-600 mt-2",children:"You can still create this game if it's intentional."})]})]})]})}),U&&e.jsx("div",{className:"mt-4",children:e.jsx(p,{variant:"destructive",children:e.jsx(h,{children:U})})})]}),e.jsx("div",{ref:Y,className:"fixed bottom-0 left-0 right-0 bg-background/95 backdrop-blur-sm border-t border-border safe-area-inset-bottom z-50",children:e.jsxs("div",{className:"px-4 py-3 pb-safe",children:[e.jsx("div",{className:"flex justify-center mb-3 sm:hidden",children:e.jsx("div",{className:"flex items-center gap-2",children:L.map((t,s)=>e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"w-6 h-6 rounded-full flex items-center justify-center text-xs font-medium transition-colors "+(S===t.id?"bg-primary text-primary-foreground":S>t.id?"bg-green-500 text-white":"bg-muted text-muted-foreground"),children:S>t.id?"âœ“":t.id}),s<L.length-1&&e.jsx("div",{className:"w-8 h-0.5 mx-1 "+(S>t.id?"bg-green-500":"bg-muted")})]},t.id))})}),e.jsxs("div",{className:"flex justify-between items-center gap-3",children:[S>1?e.jsxs(n,{variant:"outline",onClick:oe,className:"min-h-[48px] px-4 sm:px-6 flex-1 max-w-[120px] touch-manipulation text-sm sm:text-base",size:"lg",children:[e.jsx(v,{className:"w-4 h-4 mr-1 sm:mr-2"}),e.jsx("span",{className:"hidden sm:inline",children:"Previous"}),e.jsx("span",{className:"sm:hidden",children:"Back"})]}):e.jsx(n,{variant:"ghost",onClick:()=>a(-1),className:"min-h-[48px] px-4 touch-manipulation text-sm sm:text-base",size:"lg",children:"Cancel"}),e.jsxs("div",{className:"hidden sm:flex items-center gap-2 text-sm text-muted-foreground",children:["Step ",S," of ",L.length]}),S<L.length?e.jsxs(n,{onClick:()=>{le()&&S<L.length&&T(S+1)},disabled:!ie(S)||Object.keys(I).some(e=>"duplicate"!==e),className:"min-h-[48px] px-4 sm:px-6 flex-1 max-w-[120px] touch-manipulation text-sm sm:text-base",size:"lg",children:[e.jsx("span",{className:"hidden sm:inline",children:"Continue"}),e.jsx("span",{className:"sm:hidden",children:"Next"}),e.jsx(v,{className:"w-4 h-4 ml-1 sm:ml-2 rotate-180"})]}):e.jsx(n,{onClick:async()=>{if(le()){E(!0),F(null);try{const{user:e}=r.getState();if(!e)throw new Error("You must be logged in to create a game");const t={title:Z.title,sport:Z.sport,date:Z.date,time:Z.time,duration:parseInt(Z.duration)||60,location:Z.location,latitude:Z.latitude,longitude:Z.longitude,maxPlayers:parseInt(Z.maxPlayers)||10,cost:Z.cost||"Free",description:"",imageUrl:Z.imageUrl};await d.createGame(t),a("/")}catch(e){F(e instanceof Error?e.message:"Failed to create game")}finally{E(!1)}}},disabled:!ie(S)||Object.keys(I).some(e=>"duplicate"!==e)||_,className:"min-h-[48px] px-4 sm:px-6 flex-1 max-w-[140px] touch-manipulation text-sm sm:text-base",size:"lg",children:_?e.jsxs(e.Fragment,{children:[e.jsx(N,{className:"w-4 h-4 mr-1 sm:mr-2 animate-spin"}),e.jsx("span",{className:"hidden sm:inline",children:"Creating..."}),e.jsx("span",{className:"sm:hidden",children:"Wait..."})]}):e.jsxs(e.Fragment,{children:[e.jsx(k,{className:"w-4 h-4 mr-1 sm:mr-2"}),e.jsx("span",{className:"hidden sm:inline",children:"Create Game"}),e.jsx("span",{className:"sm:hidden",children:"Create"})]})})]}),!ie(S)&&e.jsx("div",{className:"mt-2 text-center",children:e.jsx("p",{className:"text-xs text-muted-foreground",children:"Complete required fields to continue"})}),!1]})})]})}export{T as default};
//# sourceMappingURL=CreateGame-rOGMKDhX.js.map
