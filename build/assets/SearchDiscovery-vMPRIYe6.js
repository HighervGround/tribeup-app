import{j as e}from"./ui-CP9S0NWy.js";import{r as l}from"./vendor-IUqyc6Bg.js";import{c as B,t as V,b as xe,L as Z,C as J,d as Y,B as N,u as ee,S as pe}from"./index-YZBdrLdY.js";import{I as be}from"./input-CZ4k8gll.js";import{B as T}from"./badge-Cj8WWz9x.js";import{E as fe}from"./empty-state-C4itT19u.js";import{M as q}from"./map-pin-D6MxtWFV.js";import{U as W}from"./users-BYWzv4O3.js";import{C as ge}from"./clock-BSaIrWvB.js";import{D as ve,u as je}from"./useGameActions-BTRvxZIF.js";import{P as ye}from"./plus-BnUb_fFH.js";import{A as Ne,a as we}from"./avatar-DyHEhcc7.js";import{I as ke}from"./ImageWithFallback-CNOJTTMW.js";import{C as Ce}from"./calendar-6ED0EZLB.js";import{S as Me}from"./star-BEPw_IDt.js";import{A as Le}from"./arrow-left-BMDdUf2U.js";import{S as Q}from"./search-CIPBirud.js";import"./bell-Bij7u0FT.js";import"./message-square-BolCTlMs.js";import"./circle-check-big-COqtWZas.js";/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Se=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"22",x2:"18",y1:"12",y2:"12",key:"l9bcsi"}],["line",{x1:"6",x2:"2",y1:"12",y2:"12",key:"13hhkx"}],["line",{x1:"12",x2:"12",y1:"6",y2:"2",key:"10w3f3"}],["line",{x1:"12",x2:"12",y1:"22",y2:"18",key:"15g9kq"}]],Pe=B("crosshair",Se);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ze=[["path",{d:"M12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83z",key:"zw3jo"}],["path",{d:"M2 12a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 12",key:"1wduqc"}],["path",{d:"M2 17a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 17",key:"kqbvx6"}]],$e=B("layers",ze);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ie=[["path",{d:"M5 12h14",key:"1ays0h"}]],Ee=B("minus",Ie);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ge=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]],Ae=B("rotate-ccw",Ge);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Re=[["line",{x1:"21",x2:"14",y1:"4",y2:"4",key:"obuewd"}],["line",{x1:"10",x2:"3",y1:"4",y2:"4",key:"1q6298"}],["line",{x1:"21",x2:"12",y1:"12",y2:"12",key:"1iu8h1"}],["line",{x1:"8",x2:"3",y1:"12",y2:"12",key:"ntss68"}],["line",{x1:"21",x2:"16",y1:"20",y2:"20",key:"14d8ph"}],["line",{x1:"12",x2:"3",y1:"20",y2:"20",key:"m0wm8r"}],["line",{x1:"14",x2:"14",y1:"2",y2:"6",key:"14e1ph"}],["line",{x1:"8",x2:"8",y1:"10",y2:"14",key:"1i6ji0"}],["line",{x1:"16",x2:"16",y1:"18",y2:"22",key:"1lctlv"}]],Fe=B("sliders-horizontal",Re);function H(t,r,c,d){const g=F(c-t),i=F(d-r),h=Math.sin(g/2)*Math.sin(g/2)+Math.cos(F(t))*Math.cos(F(c))*Math.sin(i/2)*Math.sin(i/2);return 6371*(2*Math.atan2(Math.sqrt(h),Math.sqrt(1-h)))}function F(t){return t*(Math.PI/180)}function _(t,r="km"){return r==="mi"&&(t=t*.621371),t<1?r==="km"?`${Math.round(t*1e3)}m`:`${Math.round(t*5280)}ft`:`${t.toFixed(1)}${r}`}function Te(t,r){const c=r/111,d=r/(111*Math.cos(F(t.latitude)));return{north:t.latitude+c,south:t.latitude-c,east:t.longitude+d,west:t.longitude-d}}function se(t={}){const{enableHighAccuracy:r=!0,timeout:c=1e4,maximumAge:d=6e4,watchPosition:p=!1,autoRequest:g=!0}=t,[i,h]=l.useState({currentLocation:null,isLoading:!1,error:null,permission:"unknown",lastUpdated:null}),v=l.useRef(null),k=l.useRef(!1),y="geolocation"in navigator,u=l.useCallback(async()=>{if(!y)return h(o=>({...o,permission:"denied",error:"Geolocation not supported"})),"denied";try{if("permissions"in navigator){const o=await navigator.permissions.query({name:"geolocation"});return h(s=>({...s,permission:o.state})),o.state}}catch{console.warn("Permission API not supported")}return"unknown"},[y]),L=l.useCallback(async()=>y?k.current?null:(k.current=!0,h(o=>({...o,isLoading:!0,error:null})),new Promise(o=>{const s={enableHighAccuracy:r,timeout:c,maximumAge:d},n=f=>{const w={latitude:f.coords.latitude,longitude:f.coords.longitude,accuracy:f.coords.accuracy,altitude:f.coords.altitude||void 0,heading:f.coords.heading||void 0,speed:f.coords.speed||void 0};h(M=>({...M,currentLocation:w,isLoading:!1,error:null,permission:"granted",lastUpdated:new Date})),k.current=!1,o(w)},m=f=>{let w="Failed to get location",M="unknown";switch(f.code){case f.PERMISSION_DENIED:w="Location access denied by user",M="denied",V.error("Please enable location access to find nearby games");break;case f.POSITION_UNAVAILABLE:w="Location information unavailable";break;case f.TIMEOUT:w="Location request timed out";break}h(O=>({...O,isLoading:!1,error:w,permission:M})),k.current=!1,o(null)};navigator.geolocation.getCurrentPosition(n,m,s)})):(V.error("Location services are not supported by your browser"),null),[y,r,c,d]),P=l.useCallback(()=>{if(!y||v.current!==null)return;const o={enableHighAccuracy:r,timeout:c,maximumAge:d},s=m=>{const f={latitude:m.coords.latitude,longitude:m.coords.longitude,accuracy:m.coords.accuracy,altitude:m.coords.altitude||void 0,heading:m.coords.heading||void 0,speed:m.coords.speed||void 0};h(w=>({...w,currentLocation:f,lastUpdated:new Date}))},n=m=>{console.error("Location watch error:",m)};v.current=navigator.geolocation.watchPosition(s,n,o)},[y,r,c,d]),z=l.useCallback(()=>{v.current!==null&&(navigator.geolocation.clearWatch(v.current),v.current=null)},[]),x=l.useCallback(()=>{h(o=>({...o,currentLocation:null,error:null,lastUpdated:null}))},[]),j=l.useCallback((o,s="km")=>{if(!i.currentLocation)return null;const n=H(i.currentLocation.latitude,i.currentLocation.longitude,o.latitude,o.longitude);return s==="mi"?n*.621371:n},[i.currentLocation]),b=l.useCallback((o,s="km")=>{const n=j(o,s);return n?_(n,s):null},[j]),S=l.useCallback((o,s=5)=>{const n=j(o,"km");return n!==null&&n<=s},[j]);return l.useEffect(()=>(u(),g&&L(),p&&P(),()=>{z()}),[u,L,P,z,g,p]),{...i,isSupported:y,requestLocation:L,clearLocation:x,startWatching:P,stopWatching:z,getDistanceTo:j,getFormattedDistanceTo:b,isNearby:S,calculateDistance:(o,s,n,m)=>H(o,s,n,m),formatDistance:_,getBoundsFromCenter:o=>i.currentLocation?Te(i.currentLocation,o):null}}function Be({games:t=[],selectedGameId:r,onGameSelect:c,onLocationSelect:d,showCurrentLocation:p=!0,showGameMarkers:g=!0,allowLocationSelection:i=!1,center:h,zoom:v=13,className:k=""}){const y=xe(),{currentLocation:u,isLoading:L,error:P,requestLocation:z}=se(),[x,j]=l.useState(h||u||{latitude:29.6516,longitude:-82.3248}),[b,S]=l.useState(v),[o,s]=l.useState(!1),[n,m]=l.useState(null),[f,w]=l.useState(null),[M,O]=l.useState(!1),te=l.useRef(null),D=(t.length>0?t:y).map(a=>({id:a.id,title:a.title,sport:a.sport,location:{latitude:a.latitude||x.latitude+(Math.random()-.5)*.01,longitude:a.longitude||x.longitude+(Math.random()-.5)*.01},locationName:a.location,date:a.date,time:a.time,players:a.currentPlayers||a.players,maxPlayers:a.maxPlayers,cost:a.cost,difficulty:a.difficulty}));l.useEffect(()=>{u&&!h&&j(u)},[u,h]),l.useEffect(()=>{const a=setTimeout(()=>{s(!0)},1e3);return()=>clearTimeout(a)},[]);const ae=l.useCallback(()=>{u?(j(u),S(15),V.success("Centered on your location")):z()},[u,z]),le=l.useCallback(a=>{j(a.location),S(16),c&&c(a.id)},[c]),oe=l.useCallback(a=>{if(!i)return;const C=a.currentTarget.getBoundingClientRect(),$=a.clientX-C.left,G=a.clientY-C.top,I=Math.pow(2,b-10)*1e3,A=x.latitude+(G-C.height/2)*-.001/I,R=x.longitude+($-C.width/2)*.001/I,E={latitude:A,longitude:R};m(E),d&&d(E)},[i,x,b,d]),re=l.useCallback(a=>{if(!i||a.touches.length!==1)return;const C=a.currentTarget.getBoundingClientRect(),$=a.touches[0],G=$.clientX-C.left,I=$.clientY-C.top,A=Math.pow(2,b-10)*1e3,R=x.latitude+(I-C.height/2)*-.001/A,E=x.longitude+(G-C.width/2)*.001/A,U={latitude:R,longitude:E};m(U),d&&d(U)},[i,x,b,d]),ne=l.useCallback(()=>{S(a=>Math.min(a+1,18))},[]),ie=l.useCallback(()=>{S(a=>Math.max(a-1,1))},[]),ce=l.useCallback(()=>{u&&j(u),S(13),m(null)},[u]),de=a=>({Basketball:"bg-sport-basketball",Soccer:"bg-sport-soccer",Tennis:"bg-sport-tennis",Volleyball:"bg-sport-volleyball",Football:"bg-sport-football",Baseball:"bg-sport-baseball"})[a]||"bg-primary";return P?e.jsx("div",{className:`relative ${k}`,children:e.jsx(fe,{icon:e.jsx(q,{className:"w-16 h-16"}),title:"Location Access Required",description:"Please enable location access to view the map and find nearby games.",action:{label:"Enable Location",onClick:z}})}):e.jsxs("div",{className:`relative overflow-hidden rounded-lg ${k}`,children:[e.jsxs("div",{ref:te,className:`relative w-full h-full min-h-[300px] md:min-h-[400px] cursor-crosshair transition-all duration-300 ${M?"bg-gray-800":"bg-green-100"}`,onClick:oe,onTouchEnd:re,role:"application","aria-label":"Interactive map showing games and locations",children:[(!o||L)&&e.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-muted/50 backdrop-blur-sm z-10",children:e.jsx(Z,{size:"lg",text:"Loading map..."})}),e.jsxs("div",{className:"absolute inset-0",children:[e.jsx("div",{className:"w-full h-full bg-cover bg-center",style:{backgroundImage:M?`url('https://server.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/${b}/${Math.floor((90-x.latitude)*Math.pow(2,b)/360)}/${Math.floor((x.longitude+180)*Math.pow(2,b)/360)}')`:`url('https://tile.openstreetmap.org/${b}/${Math.floor((x.longitude+180)*Math.pow(2,b)/360)}/${Math.floor((90-x.latitude)*Math.pow(2,b)/360)}.png')`}}),e.jsx("div",{className:"absolute inset-0 opacity-20",style:{backgroundImage:"linear-gradient(rgba(0,0,0,0.1) 1px, transparent 1px), linear-gradient(90deg, rgba(0,0,0,0.1) 1px, transparent 1px)",backgroundSize:"20px 20px"}}),e.jsx("div",{className:"absolute inset-0 opacity-10",style:{backgroundImage:M?"none":`url("data:image/svg+xml,%3Csvg width='40' height='40' viewBox='0 0 40 40' xmlns='http://www.w3.org/2000/svg'%3E%3Cg fill='%23000' fill-opacity='0.1'%3E%3Cpath d='M20 20h20v20H20z'/%3E%3Cpath d='M0 0h20v20H0z'/%3E%3C/g%3E%3C/svg%3E")`}})]}),p&&u&&e.jsx("div",{className:"absolute z-20",style:{left:"50%",top:"50%",transform:"translate(-50%, -50%)"},children:e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"w-4 h-4 bg-blue-500 rounded-full border-2 border-white shadow-lg"}),e.jsx("div",{className:"absolute inset-0 w-4 h-4 bg-blue-500 rounded-full animate-ping opacity-30"}),e.jsx("div",{className:"absolute -top-1 -left-1 w-6 h-6 bg-blue-500/20 rounded-full animate-pulse"})]})}),g&&D.map((a,C)=>{const $=r===a.id,G=f===a.id,I=u?H(u.latitude,u.longitude,a.location.latitude,a.location.longitude):null,A=a.location.latitude-x.latitude,R=a.location.longitude-x.longitude,E=Math.pow(2,b)/360,U=50+R*E*100,ue=50-A*E*100,me=Math.max(5,Math.min(95,U)),X=Math.max(5,Math.min(95,ue));return e.jsx("div",{className:"absolute z-10 cursor-pointer",style:{left:`${me}%`,top:`${X}%`},onClick:he=>{he.stopPropagation(),le(a)},onMouseEnter:()=>w(a.id),onMouseLeave:()=>w(null),children:e.jsxs("div",{className:`relative ${$||G?"z-30":"z-10"}`,children:[e.jsx("div",{className:`
                  w-8 h-8 rounded-full border-2 border-white shadow-lg flex items-center justify-center
                  ${de(a.sport)} ${$?"ring-2 ring-primary":""}
                  transition-all duration-200
                `,children:e.jsx(W,{className:"w-4 h-4 text-white"})}),($||G)&&e.jsx("div",{className:`absolute z-40 ${X>70?"bottom-full mb-2":"top-full mt-2"} left-1/2 transform -translate-x-1/2`,children:e.jsx(J,{className:"w-64 max-w-[calc(100vw-2rem)] shadow-lg border-2 bg-background/95 backdrop-blur-sm",children:e.jsx(Y,{className:"p-3",children:e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h4",{className:"font-medium truncate",children:a.title}),e.jsx(T,{variant:"secondary",className:"text-xs flex-shrink-0",children:a.sport})]}),e.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground flex-wrap",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(ge,{className:"w-3 h-3"}),e.jsx("span",{className:"truncate",children:a.time})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(W,{className:"w-3 h-3"}),e.jsxs("span",{children:[a.players,"/",a.maxPlayers]})]}),a.cost!=="Free"&&e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(ve,{className:"w-3 h-3"}),e.jsx("span",{className:"truncate",children:a.cost})]})]}),e.jsxs("div",{className:"flex items-center justify-between text-xs text-muted-foreground",children:[e.jsx("span",{className:"truncate mr-2",children:a.locationName}),I&&e.jsxs("span",{className:"flex-shrink-0",children:[_(I)," away"]})]})]})})})})]})},a.id)}),n&&i&&e.jsx("div",{className:"absolute z-20",style:{left:"60%",top:"45%",transform:"translate(-50%, -50%)"},children:e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsx(q,{className:"w-8 h-8 text-destructive drop-shadow-lg"}),e.jsx("div",{className:"mt-1 px-2 py-1 bg-white rounded shadow text-xs",children:"Selected Location"})]})})]}),e.jsxs("div",{className:"absolute top-2 right-2 md:top-4 md:right-4 flex flex-col gap-1 md:gap-2 z-30",children:[e.jsx(N,{variant:"outline",size:"icon",className:"bg-background/95 backdrop-blur-sm h-8 w-8 md:h-10 md:w-10",onClick:()=>O(!M),"aria-label":M?"Switch to map view":"Switch to satellite view",children:e.jsx($e,{className:"w-3 h-3 md:w-4 md:h-4"})}),e.jsxs("div",{className:"flex flex-col gap-1",children:[e.jsx(N,{variant:"outline",size:"icon",className:"bg-background/95 backdrop-blur-sm h-8 w-8 md:h-10 md:w-10",onClick:ne,"aria-label":"Zoom in",children:e.jsx(ye,{className:"w-3 h-3 md:w-4 md:h-4"})}),e.jsx(N,{variant:"outline",size:"icon",className:"bg-background/95 backdrop-blur-sm h-8 w-8 md:h-10 md:w-10",onClick:ie,"aria-label":"Zoom out",children:e.jsx(Ee,{className:"w-3 h-3 md:w-4 md:h-4"})})]}),e.jsx(N,{variant:"outline",size:"icon",className:"bg-background/95 backdrop-blur-sm h-8 w-8 md:h-10 md:w-10",onClick:ae,disabled:L,"aria-label":"Center on current location",children:L?e.jsx(Z,{size:"sm"}):e.jsx(Pe,{className:"w-3 h-3 md:w-4 md:h-4"})}),e.jsx(N,{variant:"outline",size:"icon",className:"bg-background/95 backdrop-blur-sm h-8 w-8 md:h-10 md:w-10",onClick:ce,"aria-label":"Reset map view",children:e.jsx(Ae,{className:"w-3 h-3 md:w-4 md:h-4"})})]}),e.jsx("div",{className:"absolute bottom-2 left-2 md:bottom-4 md:left-4 z-30",children:e.jsx(J,{className:"bg-background/95 backdrop-blur-sm",children:e.jsx(Y,{className:"p-2 md:p-3",children:e.jsxs("div",{className:"text-xs space-y-1",children:[e.jsx("div",{className:"font-medium mb-1 md:mb-2 text-xs md:text-sm",children:"Legend"}),e.jsxs("div",{className:"flex items-center gap-1 md:gap-2",children:[e.jsx("div",{className:"w-2 h-2 md:w-3 md:h-3 bg-blue-500 rounded-full"}),e.jsx("span",{className:"text-xs",children:"You"})]}),e.jsxs("div",{className:"flex items-center gap-1 md:gap-2",children:[e.jsx("div",{className:"w-2 h-2 md:w-3 md:h-3 bg-primary rounded-full"}),e.jsx("span",{className:"text-xs",children:"Games"})]}),n&&e.jsxs("div",{className:"flex items-center gap-1 md:gap-2",children:[e.jsx(q,{className:"w-2 h-2 md:w-3 md:h-3 text-destructive"}),e.jsx("span",{className:"text-xs",children:"Selected"})]})]})})})}),g&&D.length>0&&e.jsx("div",{className:"absolute top-2 left-2 md:top-4 md:left-4 z-30",children:e.jsxs(T,{variant:"secondary",className:"bg-background/95 backdrop-blur-sm text-xs",children:[D.length," game",D.length!==1?"s":""]})})]})}function K({game:t,compact:r=!1,onSelect:c}){const d=ee(),[p,g]=l.useState(!1),{toggleGameParticipation:i}=je(),h=()=>{c?c(t.id):d(`/game/${t.id}`)},v=k=>{k.stopPropagation(),i(t.id)};return e.jsx("div",{onMouseEnter:()=>g(!0),onMouseLeave:()=>g(!1),children:e.jsxs(J,{className:`overflow-hidden cursor-pointer transition-all duration-200 ease-out ${r?"w-full":""} ${p?"shadow-medium":"shadow-subtle"}`,onClick:h,children:[e.jsxs("div",{className:"relative overflow-hidden",children:[t.imageUrl?e.jsx("div",{className:`aspect-video ${r?"aspect-[4/3]":""} overflow-hidden`,children:e.jsx(ke,{src:t.imageUrl,alt:t.sport,className:"w-full h-full object-cover transition-transform duration-300 ease-out"})}):e.jsx("div",{className:"h-16 bg-gradient-to-r from-blue-50 to-purple-50 flex items-center justify-center",children:e.jsx(T,{variant:"secondary",className:"text-sm",children:t.sport})}),e.jsx("div",{className:`absolute inset-0 bg-gradient-to-t from-black/20 to-transparent transition-opacity duration-200 ${p?"opacity-10":"opacity-0"}`}),e.jsxs("div",{className:"absolute top-3 left-3 bg-background/95 backdrop-blur-sm rounded-lg px-3 py-2 min-w-[80px]",children:[e.jsxs("div",{className:"flex items-center gap-1 mb-1",children:[e.jsx(Ce,{className:"w-3 h-3 text-muted-foreground"}),e.jsx("span",{className:"text-xs text-muted-foreground",children:t.date})]}),e.jsx("div",{className:"text-sm font-medium",children:t.time})]}),e.jsx("div",{className:"absolute top-3 right-3",children:e.jsx(T,{className:`${t.sportColor} text-white border-none`,children:t.sport})}),t.isJoined&&e.jsx("div",{className:"absolute bottom-3 right-3 w-6 h-6 bg-success rounded-full flex items-center justify-center",children:e.jsx("div",{className:"w-2 h-2 bg-white rounded-full"})})]}),e.jsxs(Y,{className:"p-4",children:[e.jsxs("div",{className:"mb-3",children:[e.jsx("h3",{className:"text-lg font-semibold mb-1",children:t.title}),e.jsxs("div",{className:"flex items-center gap-1 text-muted-foreground",children:[e.jsx(q,{className:"w-4 h-4"}),e.jsx("span",{className:"text-sm",children:t.location})]})]}),!r&&e.jsx("p",{className:"text-sm text-muted-foreground mb-4 line-clamp-2",children:t.description}),e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Ne,{className:"w-6 h-6",children:e.jsx(we,{className:"text-xs",children:t.host.name.charAt(0)})}),e.jsxs("span",{className:"text-sm text-muted-foreground",children:["Hosted by ",t.host.name]})]}),t.rating&&e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(Me,{className:"w-3 h-3 text-yellow-500 fill-current"}),e.jsx("span",{className:"text-xs text-muted-foreground",children:t.rating})]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-1 text-sm text-muted-foreground",children:[e.jsx(W,{className:"w-4 h-4"}),e.jsxs("span",{children:[t.currentPlayers||t.participants,"/",t.maxPlayers||t.maxParticipants]})]}),!t.isJoined&&!r&&e.jsx(N,{size:"sm",onClick:v,className:"transition-all duration-200",disabled:t.currentPlayers>=t.maxPlayers,children:t.currentPlayers>=t.maxPlayers?"Game Full":"Join Game"}),t.isJoined&&!r&&e.jsx(N,{size:"sm",variant:"outline",onClick:v,className:"transition-all duration-200 bg-destructive/20 text-destructive hover:bg-destructive/30",children:"Leave Game"})]})]})]})})}const De=[{name:"All Sports",value:"all"},{name:"Basketball",value:"basketball"},{name:"Soccer",value:"soccer"},{name:"Tennis",value:"tennis"},{name:"Pickleball",value:"pickleball"},{name:"Volleyball",value:"volleyball"},{name:"Flag Football",value:"flag football"},{name:"Baseball",value:"baseball"},{name:"Golf",value:"golf"},{name:"Hockey",value:"hockey"},{name:"Rugby",value:"rugby"}];function is(){const t=ee(),{currentLocation:r,isLoading:c,requestLocation:d}=se(),[p,g]=l.useState(""),[i,h]=l.useState("all"),[v,k]=l.useState(!1),[y,u]=l.useState("list"),[L,P]=l.useState([]),[z,x]=l.useState(!1);l.useEffect(()=>{(async()=>{x(!0);try{const n=await pe.getGames();P(n)}catch(n){console.error("Error loading games:",n),P([])}finally{x(!1)}})()},[]);const j=s=>{t(`/game/${s}`)},b=()=>{t(-1)},S=s=>({Basketball:"bg-orange-500",Soccer:"bg-green-500",Tennis:"bg-yellow-500",Pickleball:"bg-purple-500",Volleyball:"bg-blue-500","Flag Football":"bg-red-500",Baseball:"bg-amber-600",Golf:"bg-emerald-600",Hockey:"bg-slate-600",Rugby:"bg-indigo-600"})[s]||"bg-gray-500",o=L.map(s=>{let n="Unknown distance";if(r&&s.latitude&&s.longitude){const m=H(r.latitude,r.longitude,s.latitude,s.longitude);n=_(m)}return{...s,distance:n,sportColor:S(s.sport),imageUrl:s.imageUrl||"",currentPlayers:s.currentPlayers||s.participants||0,maxPlayers:s.maxPlayers||s.maxParticipants||0}}).filter(s=>{const n=s.title.toLowerCase().includes(p.toLowerCase())||s.sport.toLowerCase().includes(p.toLowerCase())||s.location.toLowerCase().includes(p.toLowerCase()),m=i==="all"||s.sport.toLowerCase()===i.toLowerCase();return n&&m});return e.jsxs("div",{className:"min-h-screen bg-background",children:[e.jsxs("div",{className:"sticky top-0 bg-background/95 backdrop-blur-sm border-b border-border z-10",children:[e.jsxs("div",{className:"flex items-center gap-4 px-4 py-4",children:[e.jsx(N,{variant:"ghost",size:"icon",onClick:b,children:e.jsx(Le,{className:"w-5 h-5"})}),e.jsxs("div",{className:"flex-1 relative",children:[e.jsx(Q,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-muted-foreground"}),e.jsx(be,{id:"search-games",name:"search-games",value:p,onChange:s=>g(s.target.value),placeholder:"Search games, sports, locations...",className:"pl-10"})]}),e.jsx(N,{variant:"outline",size:"icon",onClick:()=>k(!v),children:e.jsx(Fe,{className:"w-4 h-4"})})]}),v&&e.jsx("div",{className:"px-4 pb-4 space-y-4",children:e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium mb-2 block",children:"Sort by"}),e.jsxs("select",{className:"w-full p-2 border rounded-md",children:[e.jsx("option",{value:"distance",children:"Distance"}),e.jsx("option",{value:"time",children:"Time"}),e.jsx("option",{value:"players",children:"Players Needed"}),e.jsx("option",{value:"cost",children:"Cost"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium mb-2 block",children:"Date"}),e.jsxs("select",{className:"w-full p-2 border rounded-md",children:[e.jsx("option",{value:"",children:"Any time"}),e.jsx("option",{value:"today",children:"Today"}),e.jsx("option",{value:"tomorrow",children:"Tomorrow"}),e.jsx("option",{value:"week",children:"This Week"}),e.jsx("option",{value:"month",children:"This Month"})]})]})]})}),e.jsx("div",{className:"px-4 pb-4",children:e.jsx("div",{className:"flex gap-2 overflow-x-auto pb-2",children:De.map(s=>e.jsx(T,{variant:i===s.value?"default":"outline",className:"cursor-pointer whitespace-nowrap",onClick:()=>h(s.value),children:s.name},s.value))})})]}),e.jsxs("div",{className:"px-4 py-6",children:[e.jsxs("div",{className:"flex gap-2 mb-6",children:[e.jsx(N,{variant:y==="list"?"default":"outline",size:"sm",onClick:()=>u("list"),children:"List View"}),e.jsx(N,{variant:y==="map"?"default":"outline",size:"sm",onClick:()=>u("map"),children:"Map View"})]}),y==="list"?e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{children:[e.jsxs("h2",{className:"text-lg font-semibold",children:[o.length," games found"]}),p&&e.jsxs("p",{className:"text-sm text-muted-foreground",children:['Results for "',p,'"']})]})}),e.jsx("div",{className:"space-y-4",children:o.map(s=>e.jsxs("div",{className:"relative",children:[e.jsx(K,{game:{...s,participants:s.currentPlayers||s.participants||0,maxParticipants:s.maxPlayers||s.maxParticipants||0,sportColor:s.sportColor,imageUrl:s.imageUrl||"",host:{name:s.hostName||"Host",avatar:s.hostAvatar||""},isHosted:!1,isJoined:s.isJoined||!1},onSelect:()=>j(s.id)}),e.jsx("div",{className:"absolute top-4 left-4 bg-background/95 backdrop-blur-sm rounded px-2 py-1",children:e.jsx("span",{className:"text-xs text-muted-foreground",children:s.distance})})]},s.id))}),o.length===0&&e.jsxs("div",{className:"text-center py-12",children:[e.jsx("div",{className:"w-16 h-16 bg-muted rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx(Q,{className:"w-6 h-6 text-muted-foreground"})}),e.jsx("h3",{className:"text-lg font-semibold mb-2",children:"No games found"}),e.jsx("p",{className:"text-muted-foreground mb-4",children:"Try adjusting your search or filters"}),e.jsx(N,{variant:"outline",onClick:()=>{g(""),h("all")},children:"Clear filters"})]})]}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-card rounded-lg p-4",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Games Near You"}),r?e.jsxs("div",{className:"relative",children:[e.jsx(Be,{games:o.map(s=>({id:s.id,title:s.title,sport:s.sport,location:{latitude:s.latitude||r.latitude+(Math.random()-.5)*.01,longitude:s.longitude||r.longitude+(Math.random()-.5)*.01},locationName:s.location,date:s.date,time:s.time,players:s.currentPlayers||s.players,maxPlayers:s.maxPlayers,cost:s.cost,difficulty:s.difficulty})),center:r,zoom:13,className:"h-64 md:h-80",showCurrentLocation:!0,showGameMarkers:!0,onGameSelect:j}),e.jsxs("div",{className:"absolute top-2 right-2 bg-background/90 backdrop-blur-sm rounded-md px-2 py-1 text-xs",children:["ðŸ“ You â€¢ ðŸŽ® ",o.length," Games"]})]}):e.jsxs("div",{className:"w-full h-64 md:h-80 bg-muted rounded-lg flex flex-col items-center justify-center border",children:[e.jsx("div",{className:"text-4xl mb-2",children:"ðŸ“"}),e.jsx("p",{className:"text-muted-foreground text-center",children:"Allow location access to see games on map"}),e.jsx(N,{onClick:d,variant:"outline",size:"sm",className:"mt-2",disabled:c,children:c?"Requesting...":"Enable Location"})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"flex items-center justify-between mb-4",children:e.jsxs("h3",{className:"text-lg font-semibold",children:[o.length," games in map area"]})}),o.map(s=>e.jsx(K,{game:{...s,participants:s.currentPlayers||s.participants||0,maxParticipants:s.maxPlayers||s.maxParticipants||0,sportColor:s.sportColor,imageUrl:s.imageUrl||"",host:{name:s.hostName||"Host",avatar:s.hostAvatar||""},isHosted:!1,isJoined:s.isJoined||!1},onSelect:()=>j(s.id)},s.id))]})]})]})]})}export{is as SearchDiscovery};
//# sourceMappingURL=SearchDiscovery-vMPRIYe6.js.map
