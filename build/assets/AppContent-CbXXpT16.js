import{c as B,u as N,o as g,j as e,H as k,B as u,a as x,r as d,y as T,g as f,O as w,t as A}from"./index-BP2KWh-A.js";import{B as b}from"./badge-COiDfPaT.js";import{u as C}from"./useNotifications-rnO0dkeX.js";import{S}from"./search-DQcoUZj4.js";import{P as E}from"./plus-BXjSRUHp.js";import{B as P}from"./bell-CvKQa2zM.js";import{U as L}from"./user-F90j25qI.js";import{A as F,a as M}from"./avatar-_JOoX_Zh.js";import{C as z}from"./circle-help-_O-7O1IQ.js";import{K as D}from"./keyboard-iqCaxnEn.js";import"./index-DPhlQSAt.js";import"./index-BeL9kzYG.js";import"./index-D6gu9K0y.js";import"./index-B5dcZ9Mn.js";/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const H=[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]],U=B("menu",H),$=[{path:"/",icon:k,label:"Home"},{path:"/search",icon:S,label:"Search"},{path:"/create",icon:E,label:"Create"},{path:"/notifications",icon:P,label:"Notifications",showBadge:!0},{path:"/profile",icon:L,label:"Profile"}];function O(){const r=N(),n=g(),{unreadCount:c}=C();return e.jsxs("div",{className:"fixed bottom-0 left-0 right-0 bg-background/95 backdrop-blur-sm border-t border-border",children:[e.jsx("div",{className:"flex items-center justify-around px-2 py-2 max-w-lg mx-auto",children:$.map(a=>{const l=n.pathname===a.path,i=a.icon;return e.jsx("div",{className:"relative",children:e.jsxs(u,{variant:"ghost",onClick:()=>r(a.path),className:`flex flex-col items-center gap-1 p-2 h-auto min-w-[50px] transition-all duration-200 ${l?"text-primary":"text-muted-foreground hover:text-foreground"}`,"aria-label":`Navigate to ${a.label}`,"aria-current":l?"page":void 0,children:[e.jsxs("div",{className:"relative",children:[e.jsx(i,{className:"w-5 h-5"}),a.showBadge&&c>0&&e.jsx(b,{variant:"destructive",className:"absolute -top-2 -right-2 h-5 w-5 p-0 text-xs flex items-center justify-center min-w-[20px]",children:c>99?"99+":c})]}),e.jsx("span",{className:"text-xs font-medium",children:a.label}),e.jsx("div",{className:`absolute -top-1 left-1/2 w-1 h-1 bg-primary rounded-full transition-all duration-200 ${l?"scale-100":"scale-0"}`,style:{transform:"translateX(-50%)"}}),e.jsx("div",{className:"absolute inset-0 bg-primary/10 rounded-lg scale-0 opacity-0 transition-all duration-200"})]})},a.path)})}),e.jsx("div",{className:"h-safe-area-inset-bottom bg-background/95"})]})}const R=[{path:"/",icon:k,label:"Home",description:"Discover games"},{path:"/search",icon:S,label:"Search",description:"Find your game"},{path:"/notifications",icon:P,label:"Notifications",description:"Stay updated",showBadge:!0},{path:"/profile",icon:L,label:"Profile",description:"Your account"}];function I({children:r}){const n=N(),c=g(),{unreadCount:a}=C(),{user:l}=x(),[i,m]=d.useState(!1);return e.jsxs("div",{className:"flex h-screen bg-background",children:[e.jsxs("aside",{className:`bg-card border-r border-border transition-all duration-300 ${i?"w-16":"w-64"}`,children:[e.jsx("div",{className:"p-6 border-b border-border",children:e.jsxs("div",{className:"flex items-center justify-between",children:[!i&&e.jsxs("div",{children:[e.jsx("h1",{className:"text-xl text-foreground",children:"TribeUp"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Find your tribe"})]}),e.jsx(u,{variant:"ghost",size:"icon",onClick:()=>m(!i),"aria-label":i?"Expand sidebar":"Collapse sidebar",children:e.jsx(U,{className:"w-5 h-5"})})]})}),e.jsx("div",{className:"p-4",children:e.jsxs(u,{onClick:()=>n("/create"),className:"w-full justify-start gap-3","aria-label":"Create new game",children:[e.jsx(E,{className:"w-5 h-5"}),!i&&"Create Game"]})}),e.jsx("nav",{className:"flex-1 px-4 space-y-2",role:"menubar",children:R.map(t=>{const s=c.pathname===t.path,o=t.icon;return e.jsx("div",{children:e.jsxs(u,{variant:s?"default":"ghost",onClick:()=>n(t.path),className:`w-full justify-start gap-3 h-12 relative ${i?"px-2":"px-4"}`,role:"menuitem","aria-current":s?"page":void 0,title:i?t.label:void 0,children:[e.jsxs("div",{className:"relative",children:[e.jsx(o,{className:"w-5 h-5 flex-shrink-0"}),t.showBadge&&a>0&&e.jsx(b,{variant:"destructive",className:"absolute -top-1 -right-1 h-4 min-w-4 p-0 text-xs flex items-center justify-center",children:a>99?"99+":a})]}),!i&&e.jsxs("div",{className:"flex-1 text-left",children:[e.jsxs("div",{className:"font-medium flex items-center gap-2",children:[t.label,t.showBadge&&a>0&&e.jsx(b,{variant:"destructive",className:"h-5 px-2 text-xs",children:a>99?"99+":a})]}),e.jsx("div",{className:"text-xs text-muted-foreground",children:t.description})]})]})},t.path)})}),e.jsx("div",{className:"p-4 border-t border-border",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(F,{className:"cursor-pointer",onClick:()=>n("/profile"),children:e.jsx(M,{children:l?.name?.charAt(0)||"U"})}),!i&&e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-sm font-medium truncate",children:l?.name||"User"}),e.jsx("p",{className:"text-xs text-muted-foreground truncate",children:l?.email||"user@example.com"})]})]})})]}),e.jsx("main",{className:"flex-1 overflow-hidden",children:r})]})}const j=({...r})=>e.jsx(T,{theme:"system",className:"toaster group",style:{"--normal-bg":"var(--popover)","--normal-text":"var(--popover-foreground)","--normal-border":"var(--border)"},...r}),h={mobile:768,tablet:1024,desktop:1440,desktopLarge:1920};function K(){const[r,n]=d.useState("mobile"),[c,a]=d.useState({width:typeof window<"u"?window.innerWidth:0,height:typeof window<"u"?window.innerHeight:0});return d.useEffect(()=>{const l=()=>{const i=window.innerWidth;a({width:i,height:window.innerHeight}),i>=h.desktopLarge?n("desktop-large"):i>=h.desktop?n("desktop"):i>=h.tablet||i>=h.mobile?n("tablet"):n("mobile")};return l(),window.addEventListener("resize",l),()=>window.removeEventListener("resize",l)},[]),{screenSize:r,dimensions:c,isMobile:r==="mobile",isTablet:r==="tablet",isDesktop:r==="desktop"||r==="desktop-large",isDesktopLarge:r==="desktop-large",breakpoints:h}}function W(){const r=x(t=>t.user),n=x(t=>t.updateUserPreferences),c=d.useCallback((t,s="polite")=>{let o=document.getElementById("live-region");o?o.setAttribute("aria-live",s):(o=document.createElement("div"),o.id="live-region",o.setAttribute("aria-live",s),o.setAttribute("aria-atomic","true"),o.className="sr-only",document.body.appendChild(o)),o.textContent="",setTimeout(()=>{o&&(o.textContent=t)},100),setTimeout(()=>{o&&o.textContent===t&&(o.textContent="")},5e3)},[]),a=d.useCallback(t=>{const s=document.documentElement;if(s.classList.remove("light","dark"),t.theme==="dark")s.classList.add("dark");else if(t.theme==="light")s.classList.add("light");else{const o=window.matchMedia("(prefers-color-scheme: dark)").matches;s.classList.toggle("dark",o),s.classList.toggle("light",!o)}s.classList.toggle("high-contrast",t.highContrast),s.classList.toggle("large-text",t.largeText),s.classList.toggle("colorblind-friendly",t.colorBlindFriendly),t.reducedMotion?(s.style.setProperty("--duration-fast","0ms"),s.style.setProperty("--duration-normal","0ms"),s.style.setProperty("--duration-slow","0ms")):(s.style.removeProperty("--duration-fast"),s.style.removeProperty("--duration-normal"),s.style.removeProperty("--duration-slow"))},[]);d.useEffect(()=>{if(r?.preferences)a({theme:r.preferences.theme,highContrast:r.preferences.highContrast,largeText:r.preferences.largeText,reducedMotion:r.preferences.reducedMotion,colorBlindFriendly:r.preferences.colorBlindFriendly});else{const t=document.documentElement;window.matchMedia("(prefers-color-scheme: dark)").matches&&t.classList.add("dark"),window.matchMedia("(prefers-contrast: high)").matches&&t.classList.add("high-contrast"),window.matchMedia("(prefers-reduced-motion: reduce)").matches&&(t.style.setProperty("--duration-fast","0ms"),t.style.setProperty("--duration-normal","0ms"),t.style.setProperty("--duration-slow","0ms"))}},[r?.preferences,a]);const l=d.useCallback(t=>{if(r){const s={...r.preferences,...t};n(s),a({theme:s.theme,highContrast:s.highContrast,largeText:s.largeText,reducedMotion:s.reducedMotion,colorBlindFriendly:s.colorBlindFriendly})}},[r,n,a]),i=d.useCallback(t=>{t&&(t.focus(),c(`Focused on ${t.getAttribute("aria-label")||t.textContent||"element"}`))},[c]),m=d.useCallback(t=>{const s=t.querySelectorAll('button, [href], input, select, textarea, [tabindex]:not([tabindex="-1"])'),o=s[0],v=s[s.length-1],y=p=>{p.key==="Tab"&&(p.shiftKey?document.activeElement===o&&(p.preventDefault(),v.focus()):document.activeElement===v&&(p.preventDefault(),o.focus()))};return t.addEventListener("keydown",y),o?.focus(),()=>{t.removeEventListener("keydown",y)}},[]);return{preferences:r?.preferences,updatePreferences:l,applyPreferences:a,announceToScreenReader:c,focusElement:i,trapFocus:m}}function oe(){const{isMobile:r}=K(),n=g(),{announceToScreenReader:c}=W(),[a,l]=f.useState(!1);f.useEffect(()=>{const m=n.state||window.history.state?.usr||{};console.log("AppContent: Current location state:",m),m.fromOnboarding&&!a&&(console.log("AppContent: Detected navigation from onboarding, marking as complete"),l(!0),window.history.replaceState({...window.history.state,usr:{...window.history.state?.usr,fromOnboarding:!1}},""))},[n.state,a]),f.useEffect(()=>{const t=(s=>s==="/"?"Home":s==="/search"?"Search":s==="/create"?"Create Game":s==="/profile"?"Profile":s.startsWith("/game/")?"Game Details":s.startsWith("/chat/")?"Chat":s.startsWith("/user/")?"User Profile":s.startsWith("/settings")?"Settings":"Page")(n.pathname);c(`Navigated to ${t}`),document.title=`${t} - TribeUp`},[n.pathname,c]);const i=()=>{A.info("Keyboard shortcuts coming soon!",{description:"This feature will be available in a future update"})};return r?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"min-h-screen bg-background flex flex-col",children:[e.jsx("main",{className:"flex-1 overflow-hidden",children:e.jsx(w,{})}),e.jsx(O,{}),e.jsx(u,{variant:"ghost",size:"sm",onClick:i,className:"fixed bottom-20 right-4 opacity-0 focus:opacity-100 transition-opacity z-40 bg-background/80 backdrop-blur-sm border border-border","aria-label":"Show keyboard shortcuts help",children:e.jsx(z,{className:"w-4 h-4"})})]}),e.jsx(j,{position:"top-center",toastOptions:{duration:4e3,className:"animate-slide-in-down"}})]}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"min-h-screen bg-background",children:[e.jsx(I,{children:e.jsx("main",{id:"main-content",className:"flex-1 overflow-hidden",children:e.jsx(w,{})})}),e.jsx("div",{className:"fixed bottom-6 right-6 z-50",children:e.jsx("div",{className:"flex flex-col gap-2 items-end",children:e.jsxs(u,{variant:"outline",size:"sm",onClick:i,className:"bg-background/95 backdrop-blur-sm border shadow-medium",title:"Show keyboard shortcuts (coming soon)",children:[e.jsx(D,{className:"w-4 h-4 mr-2"}),"Shortcuts"]})})})]}),e.jsx(j,{position:"bottom-right",toastOptions:{duration:4e3,className:"animate-slide-in-down"}})]})}export{oe as AppContent};
//# sourceMappingURL=AppContent-CbXXpT16.js.map
