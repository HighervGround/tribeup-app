<!DOCTYPE html>
<html>
<head>
    <title>Environment Test</title>
</head>
<body>
    <h1>Environment Variables Test</h1>
    <div id="output"></div>
    
    <script type="module">
        const output = document.getElementById('output');
        
        // Test environment variables
        const supabaseUrl = import.meta.env.VITE_SUPABASE_URL;
        const supabaseKey = import.meta.env.VITE_SUPABASE_ANON_KEY;
        
        output.innerHTML = `
            <p>VITE_SUPABASE_URL: ${supabaseUrl ? 'SET' : 'NOT SET'}</p>
            <p>VITE_SUPABASE_ANON_KEY: ${supabaseKey ? 'SET' : 'NOT SET'}</p>
            <p>URL Value: ${supabaseUrl || 'undefined'}</p>
            <p>Key Value: ${supabaseKey ? 'SET (length: ' + supabaseKey.length + ')' : 'undefined'}</p>
        `;
        
        // Test Supabase connection
        if (supabaseUrl && supabaseKey) {
            import('https://cdn.skypack.dev/@supabase/supabase-js').then(({ createClient }) => {
                const supabase = createClient(supabaseUrl, supabaseKey);
                
                supabase.from('games').select('count').then(({ data, error }) => {
                    if (error) {
                        output.innerHTML += `<p style="color: red;">❌ Database error: ${error.message}</p>`;
                    } else {
                        output.innerHTML += `<p style="color: green;">✅ Database connected successfully!</p>`;
                    }
                }).catch(err => {
                    output.innerHTML += `<p style="color: red;">❌ Connection failed: ${err.message}</p>`;
                });
            });
        } else {
            output.innerHTML += `<p style="color: red;">❌ Missing environment variables</p>`;
        }
    </script>
</body>
</html>
