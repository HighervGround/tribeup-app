{"version":3,"file":"UserProfile-BjBZfDSA.js","sources":["../../src/components/UserProfile.tsx"],"sourcesContent":["import React, { useState, useMemo } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport { Button } from './ui/button';\nimport { Card, CardContent, CardHeader, CardTitle } from './ui/card';\nimport { Badge } from './ui/badge';\nimport { Avatar, AvatarFallback, AvatarImage } from './ui/avatar';\nimport { Tabs, TabsContent, TabsList, TabsTrigger } from './ui/tabs';\nimport { Settings, Trophy, Calendar, MapPin } from 'lucide-react';\nimport { useAppStore } from '../store/appStore';\nimport { useUserStats, useUserRecentGames, useUserAchievements } from '../hooks/useUserProfile';\nimport { AchievementGrid } from './AchievementBadge';\nimport { formatTimeString } from '../lib/dateUtils';\n\nfunction UserProfile() {\n  const navigate = useNavigate();\n  const { user } = useAppStore();\n  const [activeTab, setActiveTab] = useState('overview');\n  \n  // Use React Query hooks for data fetching\n  const { data: stats, isLoading: statsLoading } = useUserStats(user?.id || '');\n  const { data: recentGamesData = [], isLoading: recentGamesLoading } = useUserRecentGames(user?.id || '', 5);\n  const { data: achievements = [], isLoading: achievementsLoading } = useUserAchievements(user?.id || '');\n  \n  const loading = statsLoading || recentGamesLoading || achievementsLoading;\n  \n  // Transform stats data for display\n  const userStats = useMemo(() => [\n    { label: 'Games Played', value: stats?.totalGamesPlayed?.toString() || '0', icon: Calendar },\n    { label: 'Games Hosted', value: stats?.totalGamesHosted?.toString() || '0', icon: MapPin },\n    { label: 'Achievements', value: achievements.length.toString(), icon: Trophy },\n  ], [stats, achievements]);\n  \n  // Transform recent games data\n  const recentGames = useMemo(() => {\n    return recentGamesData.map((participation: any) => ({\n      id: participation.games?.id || participation.id,\n      title: participation.games?.title || participation.title,\n      sport: participation.games?.sport || participation.sport,\n      date: participation.games?.date || participation.date,\n      time: participation.games?.time || participation.time,\n      location: participation.games?.location || participation.location,\n      isHost: (participation.games?.creator_id || participation.creator_id) === user?.id\n    }));\n  }, [recentGamesData, user?.id]);\n\n  // React Query handles all data loading automatically\n\n  // Get user data with fallbacks\n  const displayName = user?.name || 'User Profile';\n  const displayUsername = user?.username ? `@${user.username}` : '@user';\n  const displayBio = user?.bio || 'Sports enthusiast â€¢ Always up for a game!';\n  const displayAvatar = user?.avatar || '';\n  const displaySports = user?.preferences?.sports || ['Basketball', 'Soccer', 'Tennis', 'Volleyball'];\n  const needsCompletion = !(user?.name && user?.email);\n\n  return (\n    <div className=\"min-h-screen bg-background\">\n      {/* Header */}\n      <div className=\"flex items-center justify-between px-4 pt-12 pb-6\">\n        <h1 className=\"text-xl font-semibold\">Profile</h1>\n        <Button variant=\"ghost\" size=\"icon\" onClick={() => navigate('/settings')}>\n          <Settings className=\"w-5 h-5\" />\n        </Button>\n      </div>\n\n      <div className=\"px-4 space-y-6\">\n        {/* Profile Info */}\n        <Card>\n          <CardContent className=\"pt-6\">\n            <div className=\"flex items-center gap-4 mb-6\">\n              <Avatar className=\"w-16 h-16\">\n                <AvatarImage src={displayAvatar} alt={displayName} />\n                <AvatarFallback className=\"text-xl\">\n                  {displayName.charAt(0).toUpperCase()}\n                </AvatarFallback>\n              </Avatar>\n              <div className=\"flex-1\">\n                <h2 className=\"text-xl font-semibold\">{displayName}</h2>\n                <p className=\"text-muted-foreground\">{displayUsername}</p>\n                <p className=\"text-sm text-muted-foreground mt-1\">\n                  {displayBio}\n                </p>\n              </div>\n            </div>\n\n            <Button variant=\"outline\" className=\"w-full\" onClick={() => navigate('/profile/edit')}>\n              Edit Profile\n            </Button>\n            {needsCompletion && (\n              <Button variant=\"outline\" className=\"w-full mt-2\" onClick={() => navigate('/onboarding')}>\n                Complete Profile\n              </Button>\n            )}\n          </CardContent>\n        </Card>\n\n        {/* Stats */}\n        <Card>\n          <CardHeader>\n            <CardTitle>Stats</CardTitle>\n          </CardHeader>\n          <CardContent>\n            <div className=\"grid grid-cols-3 gap-4\">\n              {userStats.map((stat) => (\n                <div key={stat.label} className=\"text-center\">\n                  <div className=\"flex justify-center mb-2\">\n                    <stat.icon className=\"w-5 h-5 text-primary\" />\n                  </div>\n                  <div className=\"text-2xl font-semibold\">{stat.value}</div>\n                  <div className=\"text-xs text-muted-foreground\">{stat.label}</div>\n                </div>\n              ))}\n            </div>\n          </CardContent>\n        </Card>\n\n        {/* Sports Preferences */}\n        <Card>\n          <CardHeader>\n            <CardTitle>Sports I Play</CardTitle>\n          </CardHeader>\n          <CardContent>\n            <div className=\"flex flex-wrap gap-2\">\n              {displaySports.map((sport) => (\n                <Badge key={sport} variant=\"secondary\">\n                  {sport}\n                </Badge>\n              ))}\n            </div>\n          </CardContent>\n        </Card>\n\n        {/* Tabs for different sections */}\n        <Tabs value={activeTab} onValueChange={setActiveTab}>\n          <TabsList className=\"grid w-full grid-cols-2\">\n            <TabsTrigger value=\"overview\">Overview</TabsTrigger>\n            <TabsTrigger value=\"achievements\">Achievements</TabsTrigger>\n          </TabsList>\n\n          <TabsContent value=\"overview\" className=\"space-y-6\">\n            {/* Recent Games */}\n            <Card>\n              <CardHeader>\n                <CardTitle>Recent Games</CardTitle>\n              </CardHeader>\n              <CardContent>\n                <div className=\"space-y-3\">\n                  {loading ? (\n                    <div className=\"text-center py-8 text-muted-foreground\">\n                      <div className=\"animate-spin w-6 h-6 border-2 border-primary border-t-transparent rounded-full mx-auto mb-4\"></div>\n                      <p>Loading recent games...</p>\n                    </div>\n                  ) : recentGames.length > 0 ? (\n                    recentGames.map((game: any, index: number) => (\n                      <div key={game.id || index} className=\"flex items-center justify-between p-3 border rounded-lg\">\n                        <div className=\"flex-1\">\n                          <div className=\"font-medium\">{game.title}</div>\n                          <div className=\"text-sm text-muted-foreground\">\n                            {new Date(game.date).toLocaleDateString()} at {formatTimeString(game.time)}\n                          </div>\n                          <div className=\"text-xs text-muted-foreground mt-1\">\n                            {game.location}\n                          </div>\n                        </div>\n                        <div className=\"flex items-center gap-2\">\n                          {game.isHost && (\n                            <Badge variant=\"secondary\" className=\"text-xs\">\n                              Host\n                            </Badge>\n                          )}\n                          <Badge variant=\"outline\">{game.sport}</Badge>\n                        </div>\n                      </div>\n                    ))\n                  ) : (\n                    <div className=\"text-center py-8 text-muted-foreground\">\n                      <Calendar className=\"w-12 h-12 mx-auto mb-4 opacity-50\" />\n                      <p>No recent games</p>\n                      <p className=\"text-sm\">Join your first game to see it here!</p>\n                    </div>\n                  )}\n                </div>\n              </CardContent>\n            </Card>\n          </TabsContent>\n\n          <TabsContent value=\"achievements\" className=\"space-y-6\">\n            {/* Achievement Badges */}\n            <Card>\n              <CardHeader>\n                <CardTitle className=\"flex items-center gap-2\">\n                  <Trophy className=\"w-5 h-5\" />\n                  My Achievements ({achievements.length})\n                </CardTitle>\n              </CardHeader>\n              <CardContent>\n                {achievements.length > 0 ? (\n                  <AchievementGrid \n                    achievements={achievements.map((ua: any) => ({\n                      ...ua.achievements,\n                      earned_at: ua.earned_at\n                    }))} \n                    maxDisplay={12}\n                    size=\"md\"\n                    layout=\"card\"\n                    showScore={true}\n                  />\n                ) : (\n                  <div className=\"text-center py-8 text-muted-foreground\">\n                    <Trophy className=\"w-12 h-12 mx-auto mb-4 opacity-50\" />\n                    <p>No achievements yet</p>\n                    <p className=\"text-sm\">Play games to unlock your first achievement!</p>\n                  </div>\n                )}\n              </CardContent>\n            </Card>\n          </TabsContent>\n\n        </Tabs>\n      </div>\n    </div>\n  );\n}\n\nexport default UserProfile;"],"names":["UserProfile","navigate","useNavigate","user","useAppStore","activeTab","setActiveTab","useState","data","stats","isLoading","statsLoading","useUserStats","id","recentGamesData","recentGamesLoading","useUserRecentGames","achievements","achievementsLoading","useUserAchievements","loading","userStats","useMemo","label","value","totalGamesPlayed","toString","icon","Calendar","totalGamesHosted","MapPin","length","Trophy","recentGames","map","participation","games","title","sport","date","time","location","isHost","creator_id","displayName","name","displayUsername","username","displayBio","bio","displayAvatar","avatar","displaySports","preferences","sports","needsCompletion","email","jsxs","className","children","jsx","Button","variant","size","onClick","Settings","Card","CardContent","Avatar","AvatarImage","src","alt","AvatarFallback","charAt","toUpperCase","CardHeader","CardTitle","stat","Badge","Tabs","onValueChange","TabsList","TabsTrigger","TabsContent","game","index","Date","toLocaleDateString","formatTimeString","AchievementGrid","ua","earned_at","maxDisplay","layout","showScore"],"mappings":"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"}