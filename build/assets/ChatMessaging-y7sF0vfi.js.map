{"version":3,"file":"ChatMessaging-y7sF0vfi.js","sources":["../../node_modules/lucide-react/dist/esm/icons/ellipsis-vertical.js","../../node_modules/lucide-react/dist/esm/icons/send.js","../../node_modules/lucide-react/dist/esm/icons/video.js","../../src/components/ui/loading-skeleton.tsx","../../src/hooks/useWebSocket.ts","../../src/components/ChatMessaging.tsx"],"sourcesContent":["/**\n * @license lucide-react v0.487.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst __iconNode = [\n  [\"circle\", { cx: \"12\", cy: \"12\", r: \"1\", key: \"41hilf\" }],\n  [\"circle\", { cx: \"12\", cy: \"5\", r: \"1\", key: \"gxeob9\" }],\n  [\"circle\", { cx: \"12\", cy: \"19\", r: \"1\", key: \"lyex9k\" }]\n];\nconst EllipsisVertical = createLucideIcon(\"ellipsis-vertical\", __iconNode);\n\nexport { __iconNode, EllipsisVertical as default };\n//# sourceMappingURL=ellipsis-vertical.js.map\n","/**\n * @license lucide-react v0.487.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst __iconNode = [\n  [\n    \"path\",\n    {\n      d: \"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z\",\n      key: \"1ffxy3\"\n    }\n  ],\n  [\"path\", { d: \"m21.854 2.147-10.94 10.939\", key: \"12cjpa\" }]\n];\nconst Send = createLucideIcon(\"send\", __iconNode);\n\nexport { __iconNode, Send as default };\n//# sourceMappingURL=send.js.map\n","/**\n * @license lucide-react v0.487.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst __iconNode = [\n  [\n    \"path\",\n    {\n      d: \"m16 13 5.223 3.482a.5.5 0 0 0 .777-.416V7.87a.5.5 0 0 0-.752-.432L16 10.5\",\n      key: \"ftymec\"\n    }\n  ],\n  [\"rect\", { x: \"2\", y: \"6\", width: \"14\", height: \"12\", rx: \"2\", key: \"158x01\" }]\n];\nconst Video = createLucideIcon(\"video\", __iconNode);\n\nexport { __iconNode, Video as default };\n//# sourceMappingURL=video.js.map\n","import React from 'react';\n// import { motion } from 'framer-motion'; // TEMPORARILY DISABLED\nimport { cn } from './utils';\n\ninterface LoadingSkeletonProps {\n  className?: string;\n  variant?: 'default' | 'circular' | 'rectangular' | 'text';\n  animation?: 'pulse' | 'wave' | 'none';\n  width?: string | number;\n  height?: string | number;\n}\n\nexport function LoadingSkeleton({ \n  className, \n  variant = 'default',\n  animation = 'pulse',\n  width,\n  height\n}: LoadingSkeletonProps) {\n  const baseClasses = \"bg-muted animate-pulse\";\n  \n  const variantClasses = {\n    default: \"rounded-md\",\n    circular: \"rounded-full\",\n    rectangular: \"rounded-none\",\n    text: \"rounded-sm h-4\"\n  };\n\n  const animationClasses = {\n    pulse: \"animate-pulse\",\n    wave: \"loading\",\n    none: \"\"\n  };\n\n  const style = {\n    width: width || undefined,\n    height: height || undefined\n  };\n\n  return (\n    <div \n      className={cn(\n        baseClasses,\n        variantClasses[variant],\n        animationClasses[animation],\n        className\n      )}\n      style={style}\n      aria-label=\"Loading...\"\n      role=\"status\"\n    />\n  );\n}\n\n// Preset skeletons for common components\nexport function GameCardSkeleton() {\n  return (\n    <div className=\"bg-card border border-border rounded-lg p-4 space-y-4\">\n      <div className=\"flex items-center justify-between\">\n        <LoadingSkeleton className=\"h-6 w-24\" />\n        <LoadingSkeleton variant=\"circular\" className=\"h-8 w-8\" />\n      </div>\n      \n      <div className=\"space-y-2\">\n        <LoadingSkeleton className=\"h-4 w-3/4\" />\n        <LoadingSkeleton className=\"h-4 w-1/2\" />\n      </div>\n      \n      <div className=\"flex items-center justify-between\">\n        <div className=\"flex items-center gap-2\">\n          <LoadingSkeleton variant=\"circular\" className=\"h-6 w-6\" />\n          <LoadingSkeleton className=\"h-4 w-16\" />\n        </div>\n        <LoadingSkeleton className=\"h-8 w-20\" />\n      </div>\n    </div>\n  );\n}\n\nexport function ChatMessageSkeleton({ isOwn = false }: { isOwn?: boolean }) {\n  return (\n    <div className={`flex gap-3 ${isOwn ? 'justify-end' : 'justify-start'}`}>\n      {!isOwn && <LoadingSkeleton variant=\"circular\" className=\"h-8 w-8\" />}\n      <div className={`max-w-xs ${isOwn ? 'order-first' : ''}`}>\n        {!isOwn && <LoadingSkeleton className=\"h-3 w-16 mb-1\" />}\n        <LoadingSkeleton className={`h-10 ${isOwn ? 'w-32' : 'w-40'} rounded-2xl`} />\n      </div>\n    </div>\n  );\n}\n\nexport function UserProfileSkeleton() {\n  return (\n    <div className=\"space-y-6 p-4\">\n      {/* Header */}\n      <div className=\"flex flex-col items-center text-center space-y-4\">\n        <LoadingSkeleton variant=\"circular\" className=\"h-24 w-24\" />\n        <div className=\"space-y-2\">\n          <LoadingSkeleton className=\"h-6 w-32\" />\n          <LoadingSkeleton className=\"h-4 w-24\" />\n        </div>\n        <LoadingSkeleton className=\"h-4 w-64\" />\n        <div className=\"flex items-center gap-4\">\n          <LoadingSkeleton className=\"h-8 w-12\" />\n          <LoadingSkeleton className=\"h-8 w-12\" />\n          <LoadingSkeleton className=\"h-8 w-12\" />\n        </div>\n        <LoadingSkeleton className=\"h-10 w-48 rounded-full\" />\n      </div>\n      \n      {/* Cards */}\n      {Array.from({ length: 3 }).map((_, i) => (\n        <div key={i} className=\"bg-card border border-border rounded-lg p-4 space-y-3\">\n          <LoadingSkeleton className=\"h-5 w-24\" />\n          <div className=\"space-y-2\">\n            <LoadingSkeleton className=\"h-4 w-full\" />\n            <LoadingSkeleton className=\"h-4 w-3/4\" />\n          </div>\n        </div>\n      ))}\n    </div>\n  );\n}","import { useState, useEffect, useRef, useCallback } from 'react';\nimport { toast } from 'sonner';\n\nexport interface WebSocketMessage {\n  id: string;\n  type: 'message' | 'typing' | 'user_joined' | 'user_left' | 'game_update' | 'location_update';\n  chatId: string;\n  userId: string;\n  userName: string;\n  content?: string;\n  timestamp: Date;\n  metadata?: {\n    gameId?: string;\n    location?: { lat: number; lng: number };\n    isTyping?: boolean;\n  };\n}\n\nexport interface WebSocketState {\n  isConnected: boolean;\n  isConnecting: boolean;\n  error: string | null;\n  lastPing: Date | null;\n}\n\ninterface UseWebSocketOptions {\n  url?: string;\n  chatId: string;\n  userId: string;\n  userName: string;\n  autoConnect?: boolean;\n  retryInterval?: number;\n  maxRetries?: number;\n}\n\nexport function useWebSocket({\n  url = '', // Will be set by Supabase Realtime\n  chatId,\n  userId,\n  userName,\n  autoConnect = true,\n  retryInterval = 3000,\n  maxRetries = 5\n}: UseWebSocketOptions) {\n  const [state, setState] = useState<WebSocketState>({\n    isConnected: false,\n    isConnecting: false,\n    error: null,\n    lastPing: null\n  });\n\n  const [messages, setMessages] = useState<WebSocketMessage[]>([]);\n  const [typingUsers, setTypingUsers] = useState<Set<string>>(new Set());\n  const [onlineUsers, setOnlineUsers] = useState<Set<string>>(new Set());\n\n  const wsRef = useRef<WebSocket | null>(null);\n  const retryCountRef = useRef(0);\n  const retryTimeoutRef = useRef<NodeJS.Timeout | null>(null);\n  const heartbeatRef = useRef<NodeJS.Timeout | null>(null);\n  const typingTimeoutRef = useRef<NodeJS.Timeout | null>(null);\n\n\n\n  const handleMessage = useCallback((message: WebSocketMessage) => {\n    switch (message.type) {\n      case 'message':\n        setMessages(prev => [...prev, message]);\n        break;\n        \n      case 'typing':\n        setTypingUsers(prev => {\n          const newSet = new Set(prev);\n          if (message.metadata?.isTyping) {\n            newSet.add(message.userId);\n          } else {\n            newSet.delete(message.userId);\n          }\n          return newSet;\n        });\n        break;\n        \n      case 'user_joined':\n        setOnlineUsers(prev => new Set(prev).add(message.userId));\n        toast.success(`${message.userName} joined the chat`);\n        break;\n        \n      case 'user_left':\n        setOnlineUsers(prev => {\n          const newSet = new Set(prev);\n          newSet.delete(message.userId);\n          return newSet;\n        });\n        break;\n        \n      case 'game_update':\n        toast.info('Game details updated');\n        break;\n    }\n  }, []);\n\n  const connect = useCallback(() => {\n    if (wsRef.current?.readyState === WebSocket.OPEN) {\n      return;\n    }\n\n    setState(prev => ({ ...prev, isConnecting: true, error: null }));\n\n    try {\n      // Use Supabase Realtime instead of WebSocket\n      // This will be implemented with Supabase subscriptions\n      console.log('WebSocket connection replaced with Supabase Realtime');\n\n      // Simulate connection success\n      setTimeout(() => {\n        setState(prev => ({ \n          ...prev, \n          isConnected: true, \n          isConnecting: false,\n          lastPing: new Date()\n        }));\n        \n        retryCountRef.current = 0;\n        \n        // Simulate user joining\n        setOnlineUsers(new Set([userId, 'other-user']));\n        \n        // Start heartbeat\n        heartbeatRef.current = setInterval(() => {\n          setState(prev => ({ ...prev, lastPing: new Date() }));\n        }, 30000);\n        \n      }, 1000);\n\n    } catch (error) {\n      handleConnectionError(error);\n    }\n  }, [chatId, userId, userName, createMockWebSocket]);\n\n  const disconnect = useCallback(() => {\n    if (wsRef.current) {\n      wsRef.current.close();\n      wsRef.current = null;\n    }\n    \n    if (heartbeatRef.current) {\n      clearInterval(heartbeatRef.current);\n      heartbeatRef.current = null;\n    }\n    \n    if (retryTimeoutRef.current) {\n      clearTimeout(retryTimeoutRef.current);\n      retryTimeoutRef.current = null;\n    }\n\n    setState({\n      isConnected: false,\n      isConnecting: false,\n      error: null,\n      lastPing: null\n    });\n    \n    setTypingUsers(new Set());\n    setOnlineUsers(new Set());\n  }, []);\n\n  const handleConnectionError = useCallback((error: any) => {\n    console.error('WebSocket error:', error);\n    \n    setState(prev => ({\n      ...prev,\n      isConnected: false,\n      isConnecting: false,\n      error: error.message || 'Connection failed'\n    }));\n\n    // Retry connection\n    if (retryCountRef.current < maxRetries) {\n      retryTimeoutRef.current = setTimeout(() => {\n        retryCountRef.current++;\n        connect();\n      }, retryInterval);\n    } else {\n      toast.error('Failed to connect to chat. Please check your connection.');\n    }\n  }, [connect, maxRetries, retryInterval]);\n\n  const sendMessage = useCallback((content: string) => {\n    if (!wsRef.current || !state.isConnected) {\n      toast.error('Not connected to chat');\n      return;\n    }\n\n    const message: Omit<WebSocketMessage, 'id' | 'timestamp'> = {\n      type: 'message',\n      chatId,\n      userId,\n      userName,\n      content\n    };\n\n    try {\n      wsRef.current.send(JSON.stringify({\n        ...message,\n        id: Date.now().toString(),\n        timestamp: new Date()\n      }));\n    } catch (error) {\n      console.error('Failed to send message:', error);\n      toast.error('Failed to send message');\n    }\n  }, [state.isConnected, chatId, userId, userName]);\n\n  const sendTyping = useCallback((isTyping: boolean) => {\n    if (!wsRef.current || !state.isConnected) return;\n\n    const message = {\n      type: 'typing',\n      chatId,\n      userId,\n      userName,\n      metadata: { isTyping }\n    };\n\n    try {\n      wsRef.current.send(JSON.stringify(message));\n    } catch (error) {\n      console.error('Failed to send typing indicator:', error);\n    }\n  }, [state.isConnected, chatId, userId, userName]);\n\n  const startTyping = useCallback(() => {\n    sendTyping(true);\n    \n    // Clear existing timeout\n    if (typingTimeoutRef.current) {\n      clearTimeout(typingTimeoutRef.current);\n    }\n    \n    // Stop typing after 3 seconds of inactivity\n    typingTimeoutRef.current = setTimeout(() => {\n      sendTyping(false);\n    }, 3000);\n  }, [sendTyping]);\n\n  const stopTyping = useCallback(() => {\n    sendTyping(false);\n    \n    if (typingTimeoutRef.current) {\n      clearTimeout(typingTimeoutRef.current);\n      typingTimeoutRef.current = null;\n    }\n  }, [sendTyping]);\n\n  // Auto-connect on mount\n  useEffect(() => {\n    if (autoConnect) {\n      connect();\n    }\n\n    return () => {\n      disconnect();\n    };\n  }, [autoConnect, connect, disconnect]);\n\n  // Cleanup on unmount\n  useEffect(() => {\n    return () => {\n      if (typingTimeoutRef.current) {\n        clearTimeout(typingTimeoutRef.current);\n      }\n    };\n  }, []);\n\n  return {\n    // Connection state\n    ...state,\n    \n    // Data\n    messages,\n    typingUsers: Array.from(typingUsers).filter(id => id !== userId),\n    onlineUsers: Array.from(onlineUsers),\n    \n    // Actions\n    connect,\n    disconnect,\n    sendMessage,\n    startTyping,\n    stopTyping,\n    \n    // Utilities\n    isUserOnline: (userId: string) => onlineUsers.has(userId),\n    isUserTyping: (userId: string) => typingUsers.has(userId)\n  };\n}","import React, { useState, useRef, useEffect } from 'react';\nimport { useNavigate, useParams } from 'react-router-dom';\nimport { Button } from './ui/button';\nimport { Input } from './ui/input';\nimport { Avatar, AvatarFallback } from './ui/avatar';\nimport { Badge } from './ui/badge';\nimport { ArrowLeft, Send, MoreVertical, Phone, Video, Keyboard } from 'lucide-react';\nimport { useGames } from '../store/appStore';\nimport { ChatMessageSkeleton } from './ui/loading-skeleton';\nimport { NoMessages } from './ui/empty-state';\nimport { useWebSocket } from '../hooks/useWebSocket';\nimport { useDeepLinks } from '../hooks/useDeepLinks';\nimport { useCustomShortcuts } from '../hooks/useKeyboardShortcuts';\nimport { toast } from 'sonner';\nimport { SupabaseService } from '../lib/supabaseService';\n\ninterface ChatMessage {\n  id: string;\n  senderId: string;\n  senderName: string;\n  senderAvatar: string;\n  message: string;\n  timestamp: Date;\n  isCurrentUser: boolean;\n}\n\n\n\nexport function ChatMessaging() {\n  const navigate = useNavigate();\n  const { type, id } = useParams();\n  const games = useGames();\n  const { navigateToUser, copyCurrentUrl } = useDeepLinks();\n  const [newMessage, setNewMessage] = useState('');\n  const messagesEndRef = useRef<HTMLDivElement>(null);\n  const inputRef = useRef<HTMLInputElement>(null);\n\n  // Get context based on URL params\n  const context = React.useMemo(() => {\n    if (!type || !id) return null;\n    \n    if (type === 'game') {\n      const game = games.find(g => g.id === id);\n      return {\n        type: 'game' as const,\n        id,\n        title: game?.title || 'Game Chat',\n        gameData: game\n      };\n    } else if (type === 'direct') {\n      // In a real app, you'd fetch user data by ID\n      return {\n        type: 'direct' as const,\n        id,\n        title: 'Unknown User' // Will be loaded from user store\n      };\n    }\n    \n    return null;\n  }, [type, id, games]);\n\n  const [messages, setMessages] = useState<ChatMessage[]>([]);\n  const [isLoading, setIsLoading] = useState(false);\n\n  // Load messages from Supabase\n  useEffect(() => {\n    const loadMessages = async () => {\n      if (!context) return;\n      \n      setIsLoading(true);\n      try {\n        let messagesData: ChatMessage[] = [];\n        \n        if (context.type === 'game') {\n          messagesData = await SupabaseService.getChatMessages('game', context.id);\n        } else if (context.type === 'direct') {\n          messagesData = await SupabaseService.getChatMessages('direct', context.id);\n        }\n        \n        setMessages(messagesData);\n      } catch (error) {\n        console.error('Error loading messages:', error);\n        setMessages([]);\n      } finally {\n        setIsLoading(false);\n      }\n    };\n\n    loadMessages();\n  }, [context]);\n\n  // Set up custom keyboard shortcuts for chat\n  useCustomShortcuts([\n    {\n      key: 'i',\n      description: 'View user info',\n      action: () => {\n        if (context?.type === 'direct') {\n          navigateToUser(context.id);\n        } else if (context?.type === 'game' && context.gameData) {\n          navigate(`/game/${context.id}`);\n        }\n      },\n      disabled: !context\n    },\n    {\n      key: 'u',\n      description: 'Copy chat URL',\n      action: async () => {\n        const success = await copyCurrentUrl();\n        if (success) {\n          toast.success('Chat link copied!', {\n            description: 'Share this chat with others'\n          });\n        }\n      }\n    },\n    {\n      key: '/',\n      description: 'Focus message input',\n      action: () => {\n        if (inputRef.current) {\n          inputRef.current.focus();\n        }\n      }\n    }\n  ]);\n\n  // WebSocket integration\n  const {\n    isConnected,\n    isConnecting,\n    messages: wsMessages,\n    typingUsers,\n    onlineUsers,\n    sendMessage: wsSendMessage,\n    startTyping,\n    stopTyping,\n    error: wsError\n  } = useWebSocket({\n    chatId: `${context?.type}-${context?.id}` || 'general',\n    userId: 'current-user',\n    userName: 'You',\n    autoConnect: true\n  });\n\n  const scrollToBottom = () => {\n    messagesEndRef.current?.scrollIntoView({ behavior: 'smooth' });\n  };\n\n  useEffect(() => {\n    scrollToBottom();\n  }, [messages]);\n\n  // Handle pre-filled message from deep link\n  useEffect(() => {\n    const urlParams = new URLSearchParams(window.location.search);\n    const prefilledMessage = urlParams.get('message');\n    \n    if (prefilledMessage && inputRef.current) {\n      setNewMessage(decodeURIComponent(prefilledMessage));\n      inputRef.current.focus();\n      \n      // Clear the URL parameter\n      const newUrl = new URL(window.location.href);\n      newUrl.searchParams.delete('message');\n      window.history.replaceState({}, '', newUrl.toString());\n      \n      toast.info('Message pre-filled from shared link');\n    }\n  }, []);\n\n  const handleSendMessage = () => {\n    if (!newMessage.trim()) return;\n\n    // Send via WebSocket if connected, otherwise add locally\n    if (isConnected) {\n      wsSendMessage(newMessage);\n    } else {\n      const message: ChatMessage = {\n        id: Date.now().toString(),\n        senderId: 'current',\n        senderName: 'You',\n        senderAvatar: 'YO',\n        message: newMessage,\n        timestamp: new Date(),\n        isCurrentUser: true\n      };\n      setMessages(prev => [...prev, message]);\n    }\n\n    setNewMessage('');\n    stopTyping();\n  };\n\n  const handleKeyPress = (e: React.KeyboardEvent) => {\n    if (e.key === 'Enter' && !e.shiftKey && !e.ctrlKey) {\n      e.preventDefault();\n      handleSendMessage();\n    } else if (e.key === 'Enter' && (e.shiftKey || e.ctrlKey)) {\n      // Allow line breaks with Shift+Enter or Ctrl+Enter\n      // This would be handled by a textarea component in a real implementation\n    }\n  };\n\n  const formatTime = (date: Date) => {\n    return date.toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' });\n  };\n\n  const formatDate = (date: Date) => {\n    const today = new Date();\n    const yesterday = new Date(today);\n    yesterday.setDate(yesterday.getDate() - 1);\n\n    if (date.toDateString() === today.toDateString()) {\n      return 'Today';\n    } else if (date.toDateString() === yesterday.toDateString()) {\n      return 'Yesterday';\n    } else {\n      return date.toLocaleDateString([], { month: 'short', day: 'numeric' });\n    }\n  };\n\n  const handleBack = () => {\n    navigate(-1);\n  };\n\n  const handleCall = () => {\n    toast.info('Voice calling feature coming soon!');\n  };\n\n  const handleVideoCall = () => {\n    toast.info('Video calling feature coming soon!');\n  };\n\n  if (!context) {\n    return (\n      <div className=\"min-h-screen bg-background flex items-center justify-center\">\n        <div className=\"text-center\">\n          <p className=\"text-muted-foreground mb-4\">Chat not found</p>\n          <p className=\"text-sm text-muted-foreground mb-4\">\n            The chat you're looking for doesn't exist or you don't have access to it.\n          </p>\n          <Button onClick={() => navigate('/')}>Go Home</Button>\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"min-h-screen bg-background flex flex-col\">\n      {/* Header */}\n      <div className=\"sticky top-0 bg-background/95 backdrop-blur-sm border-b border-border z-10\">\n        <div className=\"flex items-center justify-between px-4 py-4\">\n          <div className=\"flex items-center gap-4\">\n            <Button \n              variant=\"ghost\" \n              size=\"icon\" \n              onClick={handleBack}\n              aria-label=\"Go back\"\n            >\n              <ArrowLeft className=\"w-5 h-5\" />\n            </Button>\n            <div className=\"flex items-center gap-3\">\n              {context.type === 'direct' ? (\n                <button\n                  onClick={() => navigateToUser(context.id)}\n                  className=\"flex items-center gap-3 hover:opacity-80 transition-opacity\"\n                  data-action=\"view-profile\"\n                >\n                  <Avatar>\n                    <AvatarFallback>\n                      {context.title.split(' ').map(n => n[0]).join('')}\n                    </AvatarFallback>\n                  </Avatar>\n                  <div>\n                    <h1 className=\"text-lg\">{context.title}</h1>\n                    <p className=\"text-sm text-muted-foreground\">\n                      {isConnected ? 'Online' : 'Offline'}\n                    </p>\n                  </div>\n                </button>\n              ) : (\n                <button\n                  onClick={() => navigate(`/game/${context.id}`)}\n                  className=\"flex items-center gap-3 hover:opacity-80 transition-opacity\"\n                >\n                  <Avatar>\n                    <AvatarFallback>üèÄ</AvatarFallback>\n                  </Avatar>\n                  <div>\n                    <h1 className=\"text-lg\">{context.title}</h1>\n                    <p className=\"text-sm text-muted-foreground\">\n                      {messages.length} messages ‚Ä¢ {onlineUsers.length} online\n                    </p>\n                  </div>\n                </button>\n              )}\n            </div>\n          </div>\n          <div className=\"flex items-center gap-2\">\n            {context.type === 'direct' && (\n              <>\n                <Button \n                  variant=\"ghost\" \n                  size=\"icon\"\n                  onClick={handleCall}\n                  aria-label=\"Voice call\"\n                >\n                  <Phone className=\"w-5 h-5\" />\n                </Button>\n                <Button \n                  variant=\"ghost\" \n                  size=\"icon\"\n                  onClick={handleVideoCall}\n                  aria-label=\"Video call\"\n                >\n                  <Video className=\"w-5 h-5\" />\n                </Button>\n              </>\n            )}\n            <Button variant=\"ghost\" size=\"icon\" aria-label=\"More options\">\n              <MoreVertical className=\"w-5 h-5\" />\n            </Button>\n          </div>\n        </div>\n        \n        {context.type === 'game' && (\n          <div className=\"px-4 pb-3\">\n            <div className=\"flex items-center justify-between\">\n              <Badge variant=\"secondary\" className=\"text-xs\">\n                Game Chat ‚Ä¢ {context.gameData?.sport || 'Pickup Game'}\n              </Badge>\n              \n              {/* Keyboard shortcuts hint for desktop */}\n              <div className=\"hidden lg:flex items-center gap-2 text-xs text-muted-foreground\">\n                <Keyboard className=\"w-3 h-3\" />\n                <span>I = Game info</span>\n                <span>U = Copy link</span>\n                <span>/ = Focus input</span>\n              </div>\n            </div>\n          </div>\n        )}\n\n        {context.type === 'direct' && (\n          <div className=\"hidden lg:block px-4 pb-2\">\n            <div className=\"flex items-center gap-4 text-xs text-muted-foreground\">\n              <span className=\"flex items-center gap-1\">\n                <Keyboard className=\"w-3 h-3\" />\n                Shortcuts:\n              </span>\n              <span>I = User profile</span>\n              <span>U = Copy link</span>\n              <span>/ = Focus input</span>\n            </div>\n          </div>\n        )}\n      </div>\n\n      {/* Connection Status */}\n      {wsError && (\n        <div className=\"bg-destructive/10 border-b border-destructive/20 px-4 py-2\">\n          <div className=\"flex items-center gap-2 text-sm text-destructive\">\n            <div className=\"w-2 h-2 bg-destructive rounded-full\" />\n            <span>Chat offline - messages will be sent when connection is restored</span>\n          </div>\n        </div>\n      )}\n\n      {isConnecting && (\n        <div className=\"bg-warning/10 border-b border-warning/20 px-4 py-2\">\n          <div className=\"flex items-center gap-2 text-sm text-warning-foreground\">\n            <div className=\"w-2 h-2 bg-warning rounded-full animate-pulse\" />\n            <span>Connecting to chat...</span>\n          </div>\n        </div>\n      )}\n\n      {/* Messages */}\n      <div className=\"flex-1 overflow-y-auto px-4 py-6\" id=\"main-content\">\n        {isLoading ? (\n          <div className=\"space-y-4\">\n            {Array.from({ length: 5 }).map((_, index) => (\n              <ChatMessageSkeleton \n                key={index} \n                isOwn={index % 3 === 0} \n              />\n            ))}\n          </div>\n        ) : messages.length === 0 ? (\n          <NoMessages />\n        ) : (\n          <div className=\"space-y-4\">\n            {messages.map((message, index) => {\n            const showDate = index === 0 || \n              formatDate(message.timestamp) !== formatDate(messages[index - 1].timestamp);\n            const showAvatar = !message.isCurrentUser && (\n              index === messages.length - 1 || \n              messages[index + 1].senderId !== message.senderId ||\n              messages[index + 1].isCurrentUser\n            );\n\n            return (\n              <div key={message.id}>\n                {showDate && (\n                  <div className=\"flex justify-center my-6\">\n                    <Badge variant=\"outline\" className=\"text-xs\">\n                      {formatDate(message.timestamp)}\n                    </Badge>\n                  </div>\n                )}\n                \n                <div className={`flex gap-3 ${message.isCurrentUser ? 'justify-end' : 'justify-start'}`}>\n                  {!message.isCurrentUser && (\n                    <button\n                      onClick={() => navigateToUser(message.senderId)}\n                      className={`${showAvatar ? 'opacity-100' : 'opacity-0'} hover:opacity-80 transition-opacity`}\n                    >\n                      <Avatar className=\"w-8 h-8\">\n                        <AvatarFallback className=\"text-xs\">{message.senderAvatar}</AvatarFallback>\n                      </Avatar>\n                    </button>\n                  )}\n                  \n                  <div className={`max-w-xs lg:max-w-md ${message.isCurrentUser ? 'order-first' : ''}`}>\n                    {!message.isCurrentUser && showAvatar && (\n                      <button \n                        onClick={() => navigateToUser(message.senderId)}\n                        className=\"text-xs text-muted-foreground mb-1 px-3 hover:text-primary transition-colors\"\n                      >\n                        {message.senderName}\n                      </button>\n                    )}\n                    \n                    <div className={`rounded-2xl px-4 py-2 ${\n                      message.isCurrentUser \n                        ? 'bg-primary text-primary-foreground ml-auto' \n                        : 'bg-muted'\n                    }`}>\n                      <p className=\"text-sm leading-relaxed\">{message.message}</p>\n                    </div>\n                    \n                    <div className={`text-xs text-muted-foreground mt-1 px-3 ${\n                      message.isCurrentUser ? 'text-right' : 'text-left'\n                    }`}>\n                      {formatTime(message.timestamp)}\n                    </div>\n                  </div>\n                </div>\n              </div>\n            );\n          })}\n\n          {/* Typing indicators */}\n          {typingUsers.length > 0 && (\n            <div className=\"flex items-center gap-2 px-3 py-2\">\n              <div className=\"flex gap-1\">\n                <div className=\"w-2 h-2 bg-muted-foreground rounded-full animate-bounce\" />\n                <div className=\"w-2 h-2 bg-muted-foreground rounded-full animate-bounce\" style={{ animationDelay: '0.1s' }} />\n                <div className=\"w-2 h-2 bg-muted-foreground rounded-full animate-bounce\" style={{ animationDelay: '0.2s' }} />\n              </div>\n              <span className=\"text-xs text-muted-foreground\">\n                {typingUsers.length === 1 \n                  ? `${typingUsers[0]} is typing...`\n                  : `${typingUsers.length} people are typing...`\n                }\n              </span>\n            </div>\n          )}\n          \n          <div ref={messagesEndRef} />\n          </div>\n        )}\n      </div>\n\n      {/* Message Input */}\n      <div className=\"border-t border-border p-4\">\n        <div className=\"flex items-end gap-3\">\n          <div className=\"flex-1\">\n            <Input\n              ref={inputRef}\n              value={newMessage}\n              onChange={(e) => {\n                setNewMessage(e.target.value);\n                startTyping();\n              }}\n              onKeyDown={handleKeyPress}\n              onBlur={stopTyping}\n              placeholder={`Message ${context.type === 'game' ? 'the group' : context.title}...`}\n              className=\"min-h-[44px] resize-none rounded-full px-4\"\n              data-action=\"send-message\"\n            />\n          </div>\n          <Button \n            onClick={handleSendMessage}\n            disabled={!newMessage.trim()}\n            size=\"icon\"\n            className=\"h-11 w-11 rounded-full\"\n            title=\"Send message (Enter)\"\n          >\n            <Send className=\"w-5 h-5\" />\n          </Button>\n        </div>\n        \n        {/* Input hints */}\n        <div className=\"mt-2 text-xs text-muted-foreground\">\n          <span>Press Enter to send ‚Ä¢ / to focus input ‚Ä¢ ? for all shortcuts</span>\n        </div>\n      </div>\n    </div>\n  );\n}\n\nexport default ChatMessaging;"],"names":["__iconNode","EllipsisVertical","createLucideIcon","Send","Video","LoadingSkeleton","className","variant","animation","width","height","baseClasses","variantClasses","animationClasses","style","jsx","cn","ChatMessageSkeleton","isOwn","useWebSocket","url","chatId","userId","userName","autoConnect","retryInterval","maxRetries","state","setState","useState","messages","setMessages","typingUsers","setTypingUsers","onlineUsers","setOnlineUsers","wsRef","useRef","retryCountRef","retryTimeoutRef","heartbeatRef","typingTimeoutRef","useCallback","message","prev","newSet","toast","connect","error","handleConnectionError","disconnect","sendMessage","content","sendTyping","isTyping","startTyping","stopTyping","useEffect","id","ChatMessaging","navigate","useNavigate","type","useParams","games","useGames","navigateToUser","copyCurrentUrl","useDeepLinks","newMessage","setNewMessage","messagesEndRef","inputRef","context","React","game","g","isLoading","setIsLoading","messagesData","SupabaseService","useCustomShortcuts","isConnected","isConnecting","wsSendMessage","wsError","scrollToBottom","prefilledMessage","newUrl","handleSendMessage","handleKeyPress","e","formatTime","date","formatDate","today","yesterday","handleBack","handleCall","handleVideoCall","jsxs","Button","ArrowLeft","Avatar","AvatarFallback","n","Fragment","Phone","MoreVertical","Badge","Keyboard","_","index","NoMessages","showDate","showAvatar","Input"],"mappings":"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","x_google_ignoreList":[0,1,2]}