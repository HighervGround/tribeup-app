import{c as W,a as F,r as j,t as w,i as de,j as e,C,d as k,e as $,B as g,b as S,A as X,f as ee,u as me,k as he,l as ue,m as xe,L as pe,S as fe}from"./index-DKEunsZq.js";import{B as P}from"./badge-DUWBc7_P.js";import{A as q,a as H}from"./avatar-CeB75Hq7.js";import{S as te}from"./separator-BW4YZkZ6.js";import{I as ge}from"./ImageWithFallback-D6oT56Ln.js";import{u as je}from"./useDeepLinks-BEW_Pnid.js";import{I}from"./input-Cy80KqV4.js";import{X as we}from"./x-Bl8xhzVq.js";import{U as ye}from"./user-f6I9hvBZ.js";import{M as D}from"./mail-CjbdeFjb.js";import{S as K,C as se}from"./share-2-CI9B_gSA.js";import{M as G}from"./map-pin-CM5q1nAJ.js";import{C as ae}from"./calendar-BUSwlk90.js";import{U as re}from"./users-Fj-9OU_6.js";import{M as Y}from"./message-square-CR-afeVq.js";import{A as ve}from"./arrow-left-CQeeOn6Q.js";import{S as Ne,a as Q}from"./star-Ba_OGJfV.js";import{F as be}from"./flag-DtBwgItl.js";import{K as Ce}from"./keyboard-DZ_iWmmH.js";import{N as Se}from"./navigation-CDJPZqgk.js";import"./index-CUjrRt2d.js";import"./index-CljikAQN.js";import"./index-D0hpshCk.js";import"./index-CWY0dTS_.js";/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ke=[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]],V=W("copy",ke);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $e=[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]],Me=W("dollar-sign",$e);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pe=[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]],Ae=W("phone",Pe);function Ie(){const{joinGame:s,leaveGame:t,updateGame:d,setLoading:a,setError:m}=F(),c=F(n=>n.games),l=j.useCallback(async n=>{const h=c.find(o=>o.id===n);if(!h)return w.error("Game not found"),!1;if(h.isJoined)return w("Already joined",{description:"You are already part of this game"}),!1;if(h.currentPlayers>=h.maxPlayers)return w.error("Game is full",{description:"This game has reached maximum capacity"}),!1;try{return a(!0),await new Promise(o=>setTimeout(o,800)),s(n),w.success("Joined game!",{description:`You're now part of ${h.title}`}),!0}catch{return m("Failed to join game"),w.error("Failed to join game",{description:"Please try again later"}),!1}finally{a(!1)}},[c,s,a,m]),x=j.useCallback(async n=>{const h=c.find(o=>o.id===n);if(!h)return w.error("Game not found"),!1;if(!h.isJoined)return w("Not joined",{description:"You are not part of this game"}),!1;try{return a(!0),await new Promise(o=>setTimeout(o,500)),t(n),w.success("Left game successfully",{description:`You've left ${h.title}`}),!0}catch{return m("Failed to leave game"),w.error("Failed to leave game",{description:"Please try again later"}),!1}finally{a(!1)}},[c,t,a,m]),u=j.useCallback(async n=>{const h=c.find(o=>o.id===n);return h?h.isJoined?await x(n):await l(n):!1},[c,l,x]),i=j.useCallback(async(n,h)=>{try{return a(!0),await new Promise(o=>setTimeout(o,1e3)),d(n,{description:`${h?`CANCELLED: ${h}`:"CANCELLED"}`}),w.success("Game cancelled",{description:h||"The game has been cancelled"}),!0}catch{return m("Failed to cancel game"),w.error("Failed to cancel game",{description:"Please try again later"}),!1}finally{a(!1)}},[d,a,m]);return{joinGame:l,leaveGame:x,toggleGameParticipation:u,cancelGame:i}}function Fe(s,t=!0){const d=j.useCallback(a=>{if(!t)return;const m=a.target;if(!((m.tagName==="INPUT"||m.tagName==="TEXTAREA"||m.contentEditable==="true")&&!["Escape","Enter"].includes(a.key)))for(const l of s){if(l.disabled)continue;const x=l.key.toLowerCase()===a.key.toLowerCase(),u=!!l.ctrlKey===a.ctrlKey,i=!!l.metaKey===a.metaKey,n=!!l.shiftKey===a.shiftKey,h=!!l.altKey===a.altKey;if(x&&u&&i&&n&&h){a.preventDefault(),a.stopPropagation();try{l.action()}catch(o){console.error("Error executing custom shortcut:",o)}break}}},[s,t]);j.useEffect(()=>{if(t)return document.addEventListener("keydown",d),()=>{document.removeEventListener("keydown",d)}},[t,d])}function De({isOpen:s,onClose:t,gameTitle:d,gameId:a,onJoinSuccess:m}){const{signUp:c,signInWithOAuth:l}=de(),[x,u]=j.useState("signup"),[i,n]=j.useState({name:"",email:"",phone:""}),[h,o]=j.useState(!1),[p,y]=j.useState("");if(!s)return null;const v=async N=>{N.preventDefault(),o(!0),y("");try{await c(i.email,"temp-password-"+Date.now(),{name:i.name,email:i.email,phone:i.phone,pendingGameId:a}),u("verify"),w.success("Account created! Check your email to verify and join the game.")}catch(r){y(r.message)}finally{o(!1)}},A=async N=>{try{o(!0),await l(N,{pendingGameId:a}),w.success(`Signing in with ${N}...`),t()}catch(r){w.error(r.message||"Social login failed")}finally{o(!1)}};return e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-50",children:e.jsxs(C,{className:"w-full max-w-md",children:[e.jsxs(k,{className:"flex flex-row items-center justify-between",children:[e.jsx($,{className:"text-lg",children:x==="signup"?`Join "${d}"`:"Check Your Email"}),e.jsx(g,{variant:"ghost",size:"icon",onClick:t,children:e.jsx(we,{className:"w-4 h-4"})})]}),e.jsx(S,{children:x==="signup"?e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs(g,{variant:"outline",className:"w-full",onClick:()=>A("google"),disabled:h,children:[e.jsxs("svg",{className:"w-4 h-4 mr-2",viewBox:"0 0 24 24",children:[e.jsx("path",{fill:"currentColor",d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"}),e.jsx("path",{fill:"currentColor",d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"}),e.jsx("path",{fill:"currentColor",d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"}),e.jsx("path",{fill:"currentColor",d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"})]}),"Continue with Google"]}),e.jsxs(g,{variant:"outline",className:"w-full",onClick:()=>A("apple"),disabled:h,children:[e.jsx("svg",{className:"w-4 h-4 mr-2",fill:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{d:"M18.71 19.5c-.83 1.24-1.71 2.45-3.05 2.47-1.34.03-1.77-.79-3.29-.79-1.53 0-2 .77-3.27.82-1.31.05-2.3-1.32-3.14-2.53C4.25 17 2.94 12.45 4.7 9.39c.87-1.52 2.43-2.48 4.12-2.51 1.28-.02 2.5.87 3.29.87.78 0 2.26-1.07 3.81-.91.65.03 2.47.26 3.64 1.98-.09.06-2.17 1.28-2.15 3.81.03 3.02 2.65 4.03 2.68 4.04-.03.07-.42 1.44-1.38 2.83M13 3.5c.73-.83 1.94-1.46 2.94-1.5.13 1.17-.34 2.35-1.04 3.19-.69.85-1.83 1.51-2.95 1.42-.15-1.15.41-2.35 1.05-3.11z"})}),"Continue with Apple"]})]}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-0 flex items-center",children:e.jsx("span",{className:"w-full border-t"})}),e.jsx("div",{className:"relative flex justify-center text-xs uppercase",children:e.jsx("span",{className:"bg-background px-2 text-muted-foreground",children:"Or continue with email"})})]}),e.jsxs("form",{onSubmit:v,className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx(I,{type:"text",placeholder:"Your name",value:i.name,onChange:N=>n(r=>({...r,name:N.target.value})),required:!0,className:"pl-10"}),e.jsx(ye,{className:"w-4 h-4 absolute left-3 top-3 text-muted-foreground"})]}),e.jsxs("div",{className:"relative",children:[e.jsx(I,{type:"email",placeholder:"Email address",value:i.email,onChange:N=>n(r=>({...r,email:N.target.value})),required:!0,className:"pl-10"}),e.jsx(D,{className:"w-4 h-4 absolute left-3 top-3 text-muted-foreground"})]}),e.jsxs("div",{className:"relative",children:[e.jsx(I,{type:"tel",placeholder:"Phone (optional)",value:i.phone,onChange:N=>n(r=>({...r,phone:N.target.value})),className:"pl-10"}),e.jsx(Ae,{className:"w-4 h-4 absolute left-3 top-3 text-muted-foreground"})]}),p&&e.jsx(X,{variant:"destructive",children:e.jsx(ee,{children:p})}),e.jsx(g,{type:"submit",className:"w-full",disabled:h,children:h?"Creating Account...":"Join Game"})]}),e.jsx("p",{className:"text-xs text-muted-foreground text-center",children:"By joining, you agree to our Terms of Service and Privacy Policy"})]}):e.jsxs("div",{className:"text-center space-y-4",children:[e.jsx("div",{className:"w-16 h-16 mx-auto bg-primary/10 rounded-full flex items-center justify-center",children:e.jsx(D,{className:"w-8 h-8 text-primary"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold mb-2",children:"Check your email"}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:["We sent a verification link to ",e.jsx("strong",{children:i.email})]}),e.jsxs("p",{className:"text-sm text-muted-foreground mt-2",children:['Click the link to verify your account and automatically join "',d,'"']})]}),e.jsx(g,{variant:"outline",onClick:t,className:"w-full",children:"Got it"})]})})]})})}function Ge({game:s,isOpen:t,onClose:d}){const[a,m]=j.useState(!1);if(!t)return null;const c=`${window.location.origin}/public/game/${s.id}`,l=`Join me for ${s.sport} at ${s.location} on ${s.date}!`,x=async()=>{try{await navigator.clipboard.writeText(c),m(!0),w.success("Link copied to clipboard!"),setTimeout(()=>m(!1),2e3)}catch{w.error("Failed to copy link")}},u=async()=>{if(navigator.share)try{await navigator.share({title:`Join ${s.title}`,text:l,url:c})}catch{}else x()},i=()=>{const o=encodeURIComponent(`Join me for ${s.sport}!`),p=encodeURIComponent(`
Hi!

I'm organizing a ${s.sport} game and would love for you to join:

ðŸ“ ${s.location}
ðŸ“… ${s.date} at ${s.time}
ðŸ’° ${s.cost||"Free"}
ðŸ‘¥ ${s.currentPlayers}/${s.maxPlayers} players

${s.description?s.description+`

`:""}RSVP here: ${c}

Hope to see you there!
    `.trim());window.open(`mailto:?subject=${o}&body=${p}`)},n=()=>{const o=encodeURIComponent(`${l} RSVP: ${c}`);window.open(`sms:?body=${o}`)},h=()=>{const o=encodeURIComponent(`${l} RSVP: ${c}`);window.open(`https://wa.me/?text=${o}`)};return e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-50",children:e.jsxs(C,{className:"w-full max-w-md",children:[e.jsx(k,{children:e.jsxs($,{className:"flex items-center gap-2",children:[e.jsx(K,{className:"w-5 h-5"}),"Share Game"]})}),e.jsxs(S,{className:"space-y-6",children:[e.jsxs("div",{className:"bg-muted/50 rounded-lg p-4",children:[e.jsx("h3",{className:"font-semibold mb-2",children:s.title}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsx("div",{className:"flex items-center gap-2",children:e.jsx(P,{variant:"secondary",children:s.sport})}),e.jsxs("div",{className:"flex items-center gap-2 text-muted-foreground",children:[e.jsx(G,{className:"w-4 h-4"}),e.jsx("span",{children:s.location})]}),e.jsxs("div",{className:"flex items-center gap-2 text-muted-foreground",children:[e.jsx(ae,{className:"w-4 h-4"}),e.jsx("span",{children:s.date})]}),e.jsxs("div",{className:"flex items-center gap-2 text-muted-foreground",children:[e.jsx(se,{className:"w-4 h-4"}),e.jsx("span",{children:s.time})]}),e.jsxs("div",{className:"flex items-center gap-2 text-muted-foreground",children:[e.jsx(re,{className:"w-4 h-4"}),e.jsxs("span",{children:[s.currentPlayers,"/",s.maxPlayers," players"]})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium mb-2 block",children:"Public RSVP Link"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(I,{value:c,readOnly:!0,className:"flex-1"}),e.jsx(g,{variant:"outline",size:"sm",onClick:x,className:a?"bg-green-50 text-green-700":"",children:e.jsx(V,{className:"w-4 h-4"})})]}),e.jsx("p",{className:"text-xs text-muted-foreground mt-2",children:"Anyone with this link can view game details and RSVP"})]}),e.jsx(te,{}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-medium mb-3",children:"Share via"}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs(g,{variant:"outline",onClick:u,className:"flex items-center gap-2",children:[e.jsx(K,{className:"w-4 h-4"}),"Share"]}),e.jsxs(g,{variant:"outline",onClick:i,className:"flex items-center gap-2",children:[e.jsx(D,{className:"w-4 h-4"}),"Email"]}),e.jsxs(g,{variant:"outline",onClick:n,className:"flex items-center gap-2",children:[e.jsx(Y,{className:"w-4 h-4"}),"SMS"]}),e.jsxs(g,{variant:"outline",onClick:h,className:"flex items-center gap-2",children:[e.jsx(Y,{className:"w-4 h-4"}),"WhatsApp"]})]})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx(g,{variant:"outline",onClick:d,className:"flex-1",children:"Close"}),e.jsxs(g,{onClick:x,className:"flex-1",children:[e.jsx(V,{className:"w-4 h-4 mr-2"}),"Copy Link"]})]})]})]})})}class M{static API_KEY="3d49d90fb511ba08385a88435f10825c";static BASE_URL="https://api.openweathermap.org/data/2.5";static CONFIG={temperatureUnit:"fahrenheit",updateInterval:3600,includeHourlyForecast:!0,rainThreshold:.1,windThreshold:15};static async getCurrentWeather(t,d){try{const a=await fetch(`${this.BASE_URL}/weather?lat=${t}&lon=${d}&appid=${this.API_KEY}&units=imperial`);if(!a.ok)throw new Error(`Weather API error: ${a.status}`);const m=await a.json();return this.transformWeatherData(m)}catch(a){return console.error("Error fetching weather:",a),this.getMockWeatherData()}}static async getGameWeather(t,d,a){try{console.log(`ðŸŒ¤ï¸ Fetching weather for coordinates: ${t}, ${d}`),console.log(`ðŸ• Game time: ${a.toISOString()}`);const m=await fetch(`${this.BASE_URL}/forecast?lat=${t}&lon=${d}&appid=${this.API_KEY}&units=imperial`);if(!m.ok)throw new Error(`Weather API error: ${m.status}`);const c=await m.json();console.log(`ðŸ“Š Received ${c.list.length} forecast entries`);const l=a.getTime(),x=l-2*60*60*1e3,u=l+2*60*60*1e3;console.log(`ðŸ• Weather window: ${new Date(x).toISOString()} to ${new Date(u).toISOString()}`);const i=c.list.filter(o=>{const p=o.dt*1e3;return p>=x&&p<=u});console.log(`ðŸ“ˆ Found ${i.length} forecasts in 4-hour window`);let n;i.length>0?(n=i.reduce((o,p)=>{const y=Math.abs(p.dt*1e3-l),v=Math.abs(o.dt*1e3-l);return y<v?p:o}),console.log(`ðŸŽ¯ Selected forecast: ${new Date(n.dt*1e3).toISOString()}`)):(n=c.list.reduce((o,p)=>{const y=Math.abs(p.dt*1e3-l),v=Math.abs(o.dt*1e3-l);return y<v?p:o}),console.log(`âš ï¸ No forecasts in window, using closest: ${new Date(n.dt*1e3).toISOString()}`));const h=this.analyzeWeatherWindow(i,n);return this.transformWeatherData(n,h)}catch(m){return console.error("Error fetching game weather:",m),this.getMockWeatherData()}}static async getWeatherByZipcode(t,d){try{console.log(`ðŸŒ¤ï¸ Fetching weather for zipcode: ${t}`),console.log(`ðŸ• Game time: ${d.toISOString()}`);const a=await fetch(`${this.BASE_URL}/forecast?zip=${t},US&appid=${this.API_KEY}&units=imperial`);if(!a.ok)throw new Error(`Weather API error: ${a.status}`);const m=await a.json();console.log(`ðŸ“Š Received ${m.list.length} forecast entries for ${t}`);const c=d.getTime(),l=c-2*60*60*1e3,x=c+2*60*60*1e3;console.log(`ðŸ• Weather window: ${new Date(l).toISOString()} to ${new Date(x).toISOString()}`);const u=m.list.filter(h=>{const o=h.dt*1e3;return o>=l&&o<=x});console.log(`ðŸ“ˆ Found ${u.length} forecasts in 4-hour window`);let i;u.length>0?(i=u.reduce((h,o)=>{const p=Math.abs(o.dt*1e3-c),y=Math.abs(h.dt*1e3-c);return p<y?o:h}),console.log(`ðŸŽ¯ Selected forecast: ${new Date(i.dt*1e3).toISOString()}`)):(i=m.list.reduce((h,o)=>{const p=Math.abs(o.dt*1e3-c),y=Math.abs(h.dt*1e3-c);return p<y?o:h}),console.log(`âš ï¸ No forecasts in window, using closest: ${new Date(i.dt*1e3).toISOString()}`));const n=this.analyzeWeatherWindow(u,i);return this.transformWeatherData(i,n)}catch(a){return console.error("Error fetching weather by zipcode:",a),null}}static extractZipcode(t){const d=t.match(/\b(\d{5}(?:-\d{4})?)\b/);return d?d[1].split("-")[0]:null}static analyzeWeatherWindow(t,d){if(t.length===0)return{alerts:[],windowSummary:""};const a=t.map(o=>o.main.temp),m=t.map(o=>o.weather[0].main),c=t.map(o=>o.rain?.["3h"]||o.snow?.["3h"]||0),l=Math.min(...a),x=Math.max(...a);a.reduce((o,p)=>o+p,0)/a.length;const u=Math.max(...c),i=[];let n="";x-l>10&&i.push(`ðŸŒ¡ï¸ Temperature will vary ${Math.round(l)}Â°F to ${Math.round(x)}Â°F during game time`),u>.1&&i.push("ðŸŒ§ï¸ Possible precipitation during game window");const h=[...new Set(m)];return h.length>1&&i.push(`ðŸŒ¤ï¸ Weather conditions may change: ${h.join(", ")}`),t.length>1&&(n=`4-hour forecast: ${Math.round(l)}-${Math.round(x)}Â°F, ${h.join("/")}`),{alerts:i,windowSummary:n}}static transformWeatherData(t,d){const a=Math.round(t.main.temp),m=t.weather[0].main,c=t.weather[0].description,l=t.rain?.["1h"]||t.snow?.["1h"]||0,x=this.generateWeatherAlerts(m,a,l,t.wind.speed),u=d?[...x,...d.alerts]:x,i=d?.windowSummary||this.capitalizeWords(c);return{temperature:a,condition:m,description:i,humidity:t.main.humidity,windSpeed:Math.round(t.wind.speed),precipitation:l,icon:this.getWeatherIcon(m),isOutdoorFriendly:this.isOutdoorFriendly(m,a,l,t.wind.speed),alerts:u}}static isOutdoorFriendly(t,d,a,m){return!(d<40||d>95||a>this.CONFIG.rainThreshold||m>this.CONFIG.windThreshold||["Thunderstorm","Tornado","Squall"].includes(t))}static generateWeatherAlerts(t,d,a,m){const c=[];return d<50?c.push("ðŸ§¥ Dress warmly - temperature below 50Â°F"):d>85&&c.push("â˜€ï¸ Stay hydrated - high temperature expected"),a>this.CONFIG.rainThreshold&&c.push("ðŸŒ§ï¸ Rain expected - consider indoor backup plan"),m>12&&c.push("ðŸ’¨ Windy conditions - secure loose items"),t==="Thunderstorm"&&c.push("âš¡ Thunderstorm warning - move indoors immediately"),c}static getWeatherIcon(t){return{Clear:"â˜€ï¸",Clouds:"â˜ï¸",Rain:"ðŸŒ§ï¸",Drizzle:"ðŸŒ¦ï¸",Thunderstorm:"â›ˆï¸",Snow:"â„ï¸",Mist:"ðŸŒ«ï¸",Fog:"ðŸŒ«ï¸",Haze:"ðŸŒ«ï¸"}[t]||"ðŸŒ¤ï¸"}static capitalizeWords(t){return t.replace(/\b\w/g,d=>d.toUpperCase())}static getMockWeatherData(){return{temperature:72,condition:"Clear",description:"Clear Sky",humidity:65,windSpeed:8,precipitation:0,icon:"â˜€ï¸",isOutdoorFriendly:!0,alerts:[]}}static isConfigured(){return this.API_KEY!=="demo_key"&&this.API_KEY.length>0}static getWeatherRecommendation(t){return t.isOutdoorFriendly?t.temperature<60?"Cool weather - dress in layers and bring warm clothing.":t.temperature>80?"Warm weather - bring water and sun protection.":"Great weather for outdoor activities!":"Weather conditions may not be ideal for outdoor activities. Consider rescheduling or moving indoors."}}function Z(s){return new Date(s.getFullYear(),s.getMonth(),s.getDate())}function ie(s,t){if(!s&&!t)return null;if(s&&!t){const d=new Date(s);return isNaN(d.getTime())?null:d}if(!s&&t){const d=new Date(t);return isNaN(d.getTime())?null:d}try{const[d,a,m]=s.split("-").map(Number);if(!d||!a||!m)throw new Error("bad date");let c=0,l=0;if(t){const u=t.trim().match(/^(\d{1,2})(?::(\d{2}))?\s*(AM|PM)?$/i);if(u){c=parseInt(u[1],10),l=u[2]?parseInt(u[2],10):0;const i=u[3]?.toUpperCase();i&&(i==="PM"&&c<12&&(c+=12),i==="AM"&&c===12&&(c=0))}}const x=new Date(d,a-1,m,c,l);return isNaN(x.getTime())?null:x}catch{return null}}function ne(s,t){return new Intl.DateTimeFormat(void 0,{hour:"numeric",minute:"2-digit"}).format(s)}function oe(s,t){return new Intl.DateTimeFormat(void 0,{month:"short",day:"numeric"}).format(s)}function We(s,t,d){const a=new Date,m=ie(s,t);if(!m){const y=s||"",v=t||"";return{label:[y,v].filter(Boolean).join(" Â· "),aria:`Event ${[y,v].filter(Boolean).join(" at ")}`,isPast:!1,isToday:!1,date:y,time:v}}const c=Z(a),l=Z(m),x=Math.round((l.getTime()-c.getTime())/864e5),u=t?ne(m):"";let i="",n=!1;x===0?(i="Today",n=!0):x===1?i="Tomorrow":i=oe(m);const h=[i,u].filter(Boolean).join(" Â· "),o=`Event ${i}${u?` at ${u}`:""}`,p=m.getTime()<a.getTime();return{label:h,aria:o,isPast:p,isToday:n,date:i,time:u}}function Ee(s,t,d){const a=ie(s,t);return a?{date:oe(a),time:ne(a)}:{date:s||"",time:t||""}}function Te({game:s}){const[t,d]=j.useState(null),[a,m]=j.useState(!0);return j.useEffect(()=>{(async()=>{console.log("ðŸŒ¤ï¸ Getting weather data for game:",s.id),console.log("ðŸ“ Coordinates:",s.latitude,s.longitude),console.log("ðŸ“ Location:",s.location);try{let l=null;const x=new Date(`${s.date} ${s.time}`);if(s.latitude&&s.longitude)console.log("ðŸŽ¯ Using exact coordinates for weather"),l=await M.getGameWeather(s.latitude,s.longitude,x);else if(s.location){console.log("ðŸ—ºï¸ Using Google Maps geocoding for weather (same as map)");const u="AIzaSyCs_MsE3qt74h6eIR04QJqmf2FYgSys4UQ";try{const i=await fetch(`https://maps.googleapis.com/maps/api/geocode/json?address=${encodeURIComponent(s.location)}&key=${u}`);if(i.ok){const n=await i.json();if(console.log("ðŸ—ºï¸ Google geocoding results:",n),n.results&&n.results.length>0){const{lat:h,lng:o}=n.results[0].geometry.location;console.log("ðŸŽ¯ Using Google Maps coordinates for weather:",h,o),l=await M.getGameWeather(h,o,x),console.log("âœ… Weather from Google Maps coordinates:",l)}}}catch(i){console.error("âŒ Google Maps geocoding failed:",i)}if(!l){const i=M.extractZipcode(s.location);i&&(console.log("ðŸ“® Fallback: Using zipcode for weather:",i),l=await M.getWeatherByZipcode(i,x))}if(!l){console.log("ðŸŒ¤ï¸ Final fallback: Simple weather search");const i=await fetch(`https://api.openweathermap.org/data/2.5/weather?q=${encodeURIComponent(s.location)}&appid=3d49d90fb511ba08385a88435f10825c&units=imperial`);if(i.ok){const n=await i.json();l={temperature:Math.round(n.main.temp),condition:n.weather[0].main,description:n.weather[0].description,humidity:n.main.humidity,windSpeed:Math.round(n.wind.speed),precipitation:n.rain?.["1h"]||n.snow?.["1h"]||0,icon:n.weather[0].main==="Clear"?"â˜€ï¸":n.weather[0].main==="Clouds"?"â˜ï¸":n.weather[0].main==="Rain"?"ðŸŒ§ï¸":"ðŸŒ¤ï¸",isOutdoorFriendly:!0,alerts:[]}}}}if(l)console.log("âœ… Weather data received:",l),d(l);else throw new Error("No weather data available")}catch(l){console.error("âŒ Weather error:",l);try{console.log("ðŸ”„ Final attempt: Using current weather API");const x=await fetch("https://api.openweathermap.org/data/2.5/weather?zip=10001,US&appid=3d49d90fb511ba08385a88435f10825c&units=imperial");if(x.ok){const u=await x.json(),i=Math.round(u.main.temp),n=u.weather[0].main,h=u.weather[0].description;d({temperature:i,condition:n,description:`${h.charAt(0).toUpperCase()+h.slice(1)} (nearby area)`,humidity:u.main.humidity,windSpeed:Math.round(u.wind.speed),precipitation:u.rain?.["1h"]||u.snow?.["1h"]||0,icon:n==="Clear"?"â˜€ï¸":n==="Clouds"?"â˜ï¸":n==="Rain"?"ðŸŒ§ï¸":"ðŸŒ¤ï¸",isOutdoorFriendly:i>40&&i<95,alerts:[`ðŸ“ Showing weather for nearby area - actual conditions at ${s.location||"game location"} may vary`]})}else throw new Error("Fallback weather failed")}catch(x){console.error("âŒ All weather sources failed:",x),d({temperature:72,condition:"Clear",description:"Weather data temporarily unavailable",humidity:65,windSpeed:8,precipitation:0,icon:"ðŸŒ¤ï¸",isOutdoorFriendly:!0,alerts:[`ðŸ”„ Weather service temporarily unavailable for ${s.location||"this location"}`]})}}m(!1)})()},[s.latitude,s.longitude,s.location,s.date,s.time]),a?e.jsx("div",{className:"text-sm text-muted-foreground",children:"Loading weather..."}):t?e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-2xl",children:t.icon}),e.jsxs("div",{children:[e.jsxs("div",{className:"font-medium",children:[t.temperature,"Â°F"]}),e.jsx("div",{className:"text-sm text-muted-foreground",children:t.description})]})]}),e.jsxs("div",{className:"text-right text-sm text-muted-foreground",children:[e.jsxs("div",{children:["Humidity: ",t.humidity,"%"]}),e.jsxs("div",{children:["Wind: ",t.windSpeed," mph"]})]})]}),t.alerts&&t.alerts.length>0&&e.jsx("div",{className:"space-y-1",children:t.alerts.map((c,l)=>e.jsx("div",{className:"text-xs bg-yellow-50 text-yellow-800 p-2 rounded",children:c},l))}),e.jsx("div",{className:"text-xs text-muted-foreground",children:M.getWeatherRecommendation(t)})]}):e.jsx("div",{className:"text-sm text-muted-foreground",children:"Weather unavailable"})}function lt(){const s=me(),{gameId:t}=he(),d=ue(),a=xe(),{user:m}=F(),{toggleGameParticipation:c}=Ie(),{navigateToChat:l,navigateToUser:x}=je(),[u,i]=j.useState(!1),[n,h]=j.useState([]),[o,p]=j.useState(!1),[y,v]=j.useState(!1),[A,N]=j.useState(!1),r=d.find(f=>f.id===t);if(j.useEffect(()=>{t&&(async()=>{p(!0);try{const b=await fe.getGameParticipants(t);h(b)}catch(b){console.error("Error loading players:",b),h([])}finally{p(!1)}})()},[t]),Fe([{key:"j",description:"Join/Leave game",action:()=>{r&&!a&&z()},disabled:!r||a},{key:"u",description:"Share game",action:()=>{r&&R()},disabled:!r},{key:"l",description:"Get directions",action:()=>{r&&O()},disabled:!r}]),!r)return e.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("h1",{className:"text-2xl mb-4",children:"Game not found"}),e.jsx("p",{className:"text-muted-foreground mb-4",children:"The game you're looking for doesn't exist or has been removed."}),e.jsx(g,{onClick:()=>s("/"),children:"Go Home"})]})});const E=We(r.date,r.time),T=Ee(r.date,r.time),L=r.currentPlayers>=r.maxPlayers,U=r.tags,z=async()=>{if(!m){v(!0);return}await c(r.id)},le=async()=>{v(!1),t&&await c(t)},ce=()=>{s(-1)},J=(f,b)=>{l("direct",f)},R=async()=>{N(!0)},O=()=>{const f=r.location||"Location not specified",b=encodeURIComponent(f),B=`https://maps.google.com/maps?q=${b}&t=m&z=16`;try{if(navigator.userAgent.match(/(iPhone|iPad|iPod|Android)/)){const _=`maps://maps.google.com/maps?q=${b}`;window.location.href=_,setTimeout(()=>{window.open(B,"_blank")},1e3)}else window.open(B,"_blank");w.success("Opening directions...")}catch{w.error("Failed to open directions")}};return e.jsxs("div",{className:"min-h-screen bg-background",children:[e.jsxs("div",{className:"sticky top-0 bg-background/95 backdrop-blur-sm border-b border-border z-10",children:[e.jsxs("div",{className:"flex items-center justify-between px-4 py-4",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(g,{variant:"ghost",size:"icon",onClick:ce,"aria-label":"Go back",children:e.jsx(ve,{className:"w-5 h-5"})}),e.jsxs("div",{role:"text","aria-label":`Event: ${r.title}. ${E.aria}`,children:[e.jsx("h1",{className:"text-xl font-semibold line-clamp-2",children:r.title}),e.jsx("p",{className:"text-sm text-muted-foreground",children:E.label})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(g,{variant:"ghost",size:"icon",onClick:R,"data-action":"share","aria-label":"Share game",title:"Share game (U)",children:e.jsx(Ne,{className:"w-5 h-5"})}),e.jsx(g,{variant:"ghost",size:"icon","aria-label":"Report game",children:e.jsx(be,{className:"w-5 h-5"})})]})]}),e.jsx("div",{className:"hidden lg:block px-4 pb-2",children:e.jsxs("div",{className:"flex items-center gap-4 text-xs text-muted-foreground",children:[e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(Ce,{className:"w-3 h-3"}),"Shortcuts:"]}),e.jsx("span",{children:"J = Join/Leave"}),e.jsx("span",{children:"U = Share"}),e.jsx("span",{children:"L = Directions"}),e.jsx("span",{children:"? = All shortcuts"})]})})]}),e.jsxs("div",{className:"px-4 py-6 space-y-6",id:"main-content",children:[e.jsxs(C,{children:[r.imageUrl&&e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"aspect-video overflow-hidden rounded-t-lg",children:e.jsx(ge,{src:r.imageUrl,alt:`${r.sport} game`,className:"w-full h-full object-cover"})}),e.jsx("div",{className:"absolute top-4 right-4",children:e.jsx(P,{className:`${r.sportColor} text-white border-none`,children:r.sport})})]}),!r.imageUrl&&e.jsx("div",{className:"p-4 border-b",children:e.jsx(P,{className:`${r.sportColor} text-white border-none`,children:r.sport})}),e.jsxs(S,{className:"p-6",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-6",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(ae,{className:"w-5 h-5 text-muted-foreground"}),e.jsxs("div",{children:[e.jsx("div",{children:T.date}),e.jsx("div",{className:"text-sm text-muted-foreground",children:T.time})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(se,{className:"w-5 h-5 text-muted-foreground"}),e.jsxs("div",{children:[e.jsx("div",{children:"2 hours"}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"Duration"})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(re,{className:"w-5 h-5 text-muted-foreground"}),e.jsxs("div",{children:[e.jsxs("div",{children:[r.currentPlayers,"/",r.maxPlayers]}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"Players"})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Me,{className:"w-5 h-5 text-muted-foreground"}),e.jsxs("div",{children:[e.jsx("div",{children:r.cost}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"Cost"})]})]})]}),e.jsx("div",{className:"flex flex-wrap gap-2 mb-6",children:Array.isArray(U)&&U.map(f=>e.jsx(P,{variant:"secondary",children:f},f))}),e.jsx(g,{onClick:z,disabled:!r.isJoined&&L||a,className:"w-full h-12",variant:r.isJoined?"outline":"default","data-action":"join-game",title:`${r.isJoined?"Leave":"Join"} game (J)`,children:a?e.jsxs(e.Fragment,{children:[e.jsx(pe,{className:"w-4 h-4 mr-2 animate-spin"}),r.isJoined?"Leaving...":"Joining..."]}):L&&!r.isJoined?"Game is Full":r.isJoined?"Leave Game":m?"Join Game":"Join Game - Sign Up"})]})]}),e.jsxs(C,{children:[e.jsx(k,{children:e.jsxs($,{className:"flex items-center gap-2",children:[e.jsx(G,{className:"w-5 h-5"}),"Location"]})}),e.jsx(S,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{children:e.jsx("div",{children:r.location})}),e.jsx("div",{className:"aspect-video bg-muted rounded-lg flex items-center justify-center",children:r.latitude&&r.longitude||r.location?e.jsx("iframe",{src:`https://www.google.com/maps/embed/v1/place?key=AIzaSyCs_MsE3qt74h6eIR04QJqmf2FYgSys4UQ&q=${r.latitude&&r.longitude?`${r.latitude},${r.longitude}`:encodeURIComponent(r.location)}&zoom=15`,width:"100%",height:"100%",style:{border:0},allowFullScreen:!0,loading:"lazy",referrerPolicy:"no-referrer-when-downgrade",className:"rounded-lg",title:"Game location map"}):e.jsxs("div",{className:"text-center text-muted-foreground",children:[e.jsx(G,{className:"w-8 h-8 mx-auto mb-2"}),e.jsx("p",{children:"Map not available"})]})}),e.jsxs(g,{variant:"outline",className:"w-full",onClick:O,"data-action":"directions",title:"Get directions (L)",children:[e.jsx(Se,{className:"w-4 h-4 mr-2"}),"Get Directions"]})]})})]}),(r.latitude&&r.longitude||r.location)&&e.jsxs(C,{children:[e.jsx(k,{children:e.jsx($,{className:"flex items-center gap-2",children:"â˜€ï¸ Weather Forecast"})}),e.jsx(S,{children:e.jsx(Te,{game:r})})]}),e.jsxs(C,{children:[e.jsx(k,{children:e.jsx($,{children:"About This Game"})}),e.jsx(S,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsx("p",{className:`text-sm leading-relaxed ${u?"":"line-clamp-3"}`,children:r.description}),r.description.length>150&&e.jsx(g,{variant:"ghost",size:"sm",onClick:()=>i(!u),className:"p-0 h-auto",children:u?"Show less":"Show more"}),e.jsxs("div",{children:[e.jsx("h4",{className:"mb-2",children:"Requirements"}),e.jsx("ul",{className:"space-y-1",children:["Athletic shoes required","Bring water bottle","No experience necessary"].map((f,b)=>e.jsxs("li",{className:"text-sm text-muted-foreground flex items-start gap-2",children:[e.jsx("span",{className:"w-1 h-1 bg-muted-foreground rounded-full mt-2 flex-shrink-0"}),f]},b))})]})]})})]}),e.jsxs(C,{children:[e.jsx(k,{children:e.jsx($,{children:"Game Host"})}),e.jsx(S,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{className:"flex items-center gap-3",children:e.jsxs("button",{onClick:()=>x("host1"),className:"flex items-center gap-3 hover:opacity-80 transition-opacity","data-action":"view-profile",children:[e.jsx(q,{children:e.jsx(H,{children:r.createdBy?.charAt(0)||"U"})}),e.jsxs("div",{children:[e.jsx("div",{children:r.createdBy||"Unknown"}),e.jsxs("div",{className:"flex items-center gap-1 text-sm text-muted-foreground",children:[e.jsx(Q,{className:"w-3 h-3 fill-current text-warning"}),"No rating yet"]})]})]})}),e.jsx(g,{variant:"outline",size:"sm",onClick:()=>J("host1",r.createdBy||"Host"),children:"Message"})]})})]}),e.jsxs(C,{children:[e.jsx(k,{children:e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs($,{children:["Players (",n.length,"/",r.maxPlayers,")"]})})}),e.jsx(S,{children:e.jsx("div",{className:"space-y-3",children:n.map((f,b)=>e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(q,{children:e.jsx(H,{children:f.avatar})}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:()=>x(f.id),className:"hover:text-primary transition-colors cursor-pointer",children:f.name}),f.isHost&&e.jsx(P,{variant:"secondary",className:"text-xs px-2 py-0",children:"Host"})]}),e.jsxs("div",{className:"flex items-center gap-1 text-sm text-muted-foreground",children:[e.jsx(Q,{className:"w-3 h-3 fill-current text-warning"}),f.rating]})]})]}),!f.isHost&&e.jsx(g,{variant:"ghost",size:"sm",onClick:()=>J(f.id,f.name),children:"Message"})]}),b<n.length-1&&e.jsx(te,{className:"mt-3"})]},f.id))})})]}),r.isJoined&&e.jsx(X,{className:"border-success text-success-foreground",children:e.jsx(ee,{children:"You're joined! See you on the field!"})})]}),e.jsx(De,{isOpen:y,onClose:()=>v(!1),gameTitle:r.title,gameId:r.id,onJoinSuccess:le}),e.jsx(Ge,{isOpen:A,onClose:()=>N(!1),game:r})]})}export{lt as GameDetails,lt as default};
//# sourceMappingURL=GameDetails--I-QluUE.js.map
