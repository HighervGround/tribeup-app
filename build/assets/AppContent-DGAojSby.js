import{j as e}from"./ui-Cc4ivZpV.js";import{r as d,b as p}from"./vendor-IUqyc6Bg.js";import{c as B,u as N,m as b,H as k,B as f,a as x,o as T,O as y}from"./index-vn8qaKZ9.js";import{B as g}from"./badge-D3Wcm4kG.js";import{u as C}from"./useNotifications-CzKNUhK-.js";import{S}from"./search-BAOB9Tgn.js";import{P as E}from"./plus-DnDxt0lg.js";import{B as P}from"./bell-Cwq5DnQJ.js";import{U as L}from"./user-C44FqhlE.js";import{A,a as F}from"./avatar-DEitvPZ-.js";/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const M=[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]],D=B("menu",M),U=[{path:"/",icon:k,label:"Home"},{path:"/search",icon:S,label:"Search"},{path:"/create",icon:E,label:"Create"},{path:"/notifications",icon:P,label:"Notifications",showBadge:!0},{path:"/profile",icon:L,label:"Profile"}];function $(){const r=N(),i=b(),{unreadCount:c}=C();return e.jsxs("div",{className:"fixed bottom-0 left-0 right-0 bg-background/95 backdrop-blur-sm border-t border-border",children:[e.jsx("div",{className:"flex items-center justify-around px-2 py-2 max-w-lg mx-auto",children:U.map(a=>{const l=i.pathname===a.path,o=a.icon;return e.jsx("div",{className:"relative",children:e.jsxs(f,{variant:"ghost",onClick:()=>r(a.path),className:`flex flex-col items-center gap-1 p-2 h-auto min-w-[50px] transition-all duration-200 ${l?"text-primary":"text-muted-foreground hover:text-foreground"}`,"aria-label":`Navigate to ${a.label}`,"aria-current":l?"page":void 0,children:[e.jsxs("div",{className:"relative",children:[e.jsx(o,{className:"w-5 h-5"}),a.showBadge&&c>0&&e.jsx(g,{variant:"destructive",className:"absolute -top-2 -right-2 h-5 w-5 p-0 text-xs flex items-center justify-center min-w-[20px]",children:c>99?"99+":c})]}),e.jsx("span",{className:"text-xs font-medium",children:a.label}),e.jsx("div",{className:`absolute -top-1 left-1/2 w-1 h-1 bg-primary rounded-full transition-all duration-200 ${l?"scale-100":"scale-0"}`,style:{transform:"translateX(-50%)"}}),e.jsx("div",{className:"absolute inset-0 bg-primary/10 rounded-lg scale-0 opacity-0 transition-all duration-200"})]})},a.path)})}),e.jsx("div",{className:"pb-safe bg-background/95"})]})}const H=[{path:"/",icon:k,label:"Home",description:"Discover games"},{path:"/search",icon:S,label:"Search",description:"Find your game"},{path:"/notifications",icon:P,label:"Notifications",description:"Stay updated",showBadge:!0},{path:"/profile",icon:L,label:"Profile",description:"Your account"}];function O({children:r}){const i=N(),c=b(),{unreadCount:a}=C(),{user:l}=x(),[o,u]=d.useState(!1);return e.jsxs("div",{className:"flex h-screen bg-background",children:[e.jsxs("aside",{className:`bg-card border-r border-border transition-all duration-300 ${o?"w-16":"w-64"}`,children:[e.jsx("div",{className:"p-6 border-b border-border",children:e.jsxs("div",{className:"flex items-center justify-between",children:[!o&&e.jsxs("div",{children:[e.jsx("h1",{className:"text-xl text-foreground",children:"TribeUp"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Find your tribe"})]}),e.jsx(f,{variant:"ghost",size:"icon",onClick:()=>u(!o),"aria-label":o?"Expand sidebar":"Collapse sidebar",children:e.jsx(D,{className:"w-5 h-5"})})]})}),e.jsx("div",{className:"p-4",children:e.jsxs(f,{onClick:()=>i("/create"),className:"w-full justify-start gap-3","aria-label":"Create new game",children:[e.jsx(E,{className:"w-5 h-5"}),!o&&"Create Game"]})}),e.jsx("nav",{className:"flex-1 px-4 space-y-2",role:"menubar",children:H.map(t=>{const s=c.pathname===t.path,n=t.icon;return e.jsx("div",{children:e.jsxs(f,{variant:s?"default":"ghost",onClick:()=>i(t.path),className:`w-full justify-start gap-3 h-12 relative ${o?"px-2":"px-4"}`,role:"menuitem","aria-current":s?"page":void 0,title:o?t.label:void 0,children:[e.jsxs("div",{className:"relative",children:[e.jsx(n,{className:"w-5 h-5 flex-shrink-0"}),t.showBadge&&a>0&&e.jsx(g,{variant:"destructive",className:"absolute -top-1 -right-1 h-4 min-w-4 p-0 text-xs flex items-center justify-center",children:a>99?"99+":a})]}),!o&&e.jsxs("div",{className:"flex-1 text-left",children:[e.jsxs("div",{className:"font-medium flex items-center gap-2",children:[t.label,t.showBadge&&a>0&&e.jsx(g,{variant:"destructive",className:"h-5 px-2 text-xs",children:a>99?"99+":a})]}),e.jsx("div",{className:"text-xs text-muted-foreground",children:t.description})]})]})},t.path)})}),e.jsx("div",{className:"p-4 border-t border-border",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(A,{className:"cursor-pointer",onClick:()=>i("/profile"),children:e.jsx(F,{children:l?.name?.charAt(0)||"U"})}),!o&&e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-sm font-medium truncate",children:l?.name||"User"}),e.jsx("p",{className:"text-xs text-muted-foreground truncate",children:l?.email||"user@example.com"})]})]})})]}),e.jsx("main",{className:"flex-1 overflow-hidden",children:r})]})}const j=({...r})=>e.jsx(T,{theme:"system",className:"toaster group",style:{"--normal-bg":"var(--popover)","--normal-text":"var(--popover-foreground)","--normal-border":"var(--border)"},...r}),m={mobile:768,tablet:1024,desktop:1440,desktopLarge:1920};function R(){const[r,i]=d.useState("mobile"),[c,a]=d.useState({width:typeof window<"u"?window.innerWidth:0,height:typeof window<"u"?window.innerHeight:0});return d.useEffect(()=>{const l=()=>{const o=window.innerWidth;a({width:o,height:window.innerHeight}),o>=m.desktopLarge?i("desktop-large"):o>=m.desktop?i("desktop"):o>=m.tablet||o>=m.mobile?i("tablet"):i("mobile")};return l(),window.addEventListener("resize",l),()=>window.removeEventListener("resize",l)},[]),{screenSize:r,dimensions:c,isMobile:r==="mobile",isTablet:r==="tablet",isDesktop:r==="desktop"||r==="desktop-large",isDesktopLarge:r==="desktop-large",breakpoints:m}}function z(){const r=x(t=>t.user),i=x(t=>t.updateUserPreferences),c=d.useCallback((t,s="polite")=>{let n=document.getElementById("live-region");n?n.setAttribute("aria-live",s):(n=document.createElement("div"),n.id="live-region",n.setAttribute("aria-live",s),n.setAttribute("aria-atomic","true"),n.className="sr-only",document.body.appendChild(n)),n.textContent="",setTimeout(()=>{n&&(n.textContent=t)},100),setTimeout(()=>{n&&n.textContent===t&&(n.textContent="")},5e3)},[]),a=d.useCallback(t=>{const s=document.documentElement;if(s.classList.remove("light","dark"),t.theme==="dark")s.classList.add("dark");else if(t.theme==="light")s.classList.add("light");else{const n=window.matchMedia("(prefers-color-scheme: dark)").matches;s.classList.toggle("dark",n),s.classList.toggle("light",!n)}s.classList.toggle("high-contrast",t.highContrast),s.classList.toggle("large-text",t.largeText),s.classList.toggle("colorblind-friendly",t.colorBlindFriendly),t.reducedMotion?(s.style.setProperty("--duration-fast","0ms"),s.style.setProperty("--duration-normal","0ms"),s.style.setProperty("--duration-slow","0ms")):(s.style.removeProperty("--duration-fast"),s.style.removeProperty("--duration-normal"),s.style.removeProperty("--duration-slow"))},[]);d.useEffect(()=>{if(r?.preferences)a({theme:r.preferences.theme,highContrast:r.preferences.highContrast,largeText:r.preferences.largeText,reducedMotion:r.preferences.reducedMotion,colorBlindFriendly:r.preferences.colorBlindFriendly});else{const t=document.documentElement;window.matchMedia("(prefers-color-scheme: dark)").matches&&t.classList.add("dark"),window.matchMedia("(prefers-contrast: high)").matches&&t.classList.add("high-contrast"),window.matchMedia("(prefers-reduced-motion: reduce)").matches&&(t.style.setProperty("--duration-fast","0ms"),t.style.setProperty("--duration-normal","0ms"),t.style.setProperty("--duration-slow","0ms"))}},[r?.preferences,a]);const l=d.useCallback(t=>{if(r){const s={...r.preferences,...t};i(s),a({theme:s.theme,highContrast:s.highContrast,largeText:s.largeText,reducedMotion:s.reducedMotion,colorBlindFriendly:s.colorBlindFriendly})}},[r,i,a]),o=d.useCallback(t=>{t&&(t.focus(),c(`Focused on ${t.getAttribute("aria-label")||t.textContent||"element"}`))},[c]),u=d.useCallback(t=>{const s=t.querySelectorAll('button, [href], input, select, textarea, [tabindex]:not([tabindex="-1"])'),n=s[0],v=s[s.length-1],w=h=>{h.key==="Tab"&&(h.shiftKey?document.activeElement===n&&(h.preventDefault(),v.focus()):document.activeElement===v&&(h.preventDefault(),n.focus()))};return t.addEventListener("keydown",w),n?.focus(),()=>{t.removeEventListener("keydown",w)}},[]);return{preferences:r?.preferences,updatePreferences:l,applyPreferences:a,announceToScreenReader:c,focusElement:o,trapFocus:u}}function V(){const{isMobile:r}=R(),i=b(),{announceToScreenReader:c}=z(),[a,l]=p.useState(!1);return p.useEffect(()=>{const o=i.state||window.history.state?.usr||{};console.log("AppContent: Current location state:",o),o.fromOnboarding&&!a&&(console.log("AppContent: Detected navigation from onboarding, marking as complete"),l(!0),window.history.replaceState({...window.history.state,usr:{...window.history.state?.usr,fromOnboarding:!1}},""))},[i.state,a]),p.useEffect(()=>{const u=(t=>t==="/"?"Home":t==="/search"?"Search":t==="/create"?"Create Game":t==="/profile"?"Profile":t.startsWith("/game/")?"Game Details":t.startsWith("/chat/")?"Chat":t.startsWith("/user/")?"User Profile":t.startsWith("/settings")?"Settings":"Page")(i.pathname);c(`Navigated to ${u}`),document.title=`${u} - TribeUp`},[i.pathname,c]),r?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"min-h-screen bg-background flex flex-col",children:[e.jsx("main",{className:"flex-1 overflow-hidden",children:e.jsx(y,{})}),e.jsx($,{})]}),e.jsx(j,{position:"top-center",toastOptions:{duration:4e3,className:"animate-slide-in-down"}})]}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"min-h-screen bg-background",children:e.jsx(O,{children:e.jsx("main",{id:"main-content",className:"flex-1 overflow-hidden",children:e.jsx(y,{})})})}),e.jsx(j,{position:"bottom-right",toastOptions:{duration:4e3,className:"animate-slide-in-down"}})]})}export{V as AppContent};
//# sourceMappingURL=AppContent-DGAojSby.js.map
