import{u as $,a as S,r as l,S as w,j as e,B as c,R as g}from"./index-BQ6ii6ap.js";import{P as k}from"./plus-C6RJwa0G.js";function j({game:t,onSelect:a}){const{joinGame:o,leaveGame:n}=S(),d=u=>{u.stopPropagation(),t.isJoined?n(t.id):o(t.id)},m=()=>{a()};return e.jsxs("div",{className:"bg-card rounded-lg p-4 border border-border cursor-pointer hover:shadow-md transition-shadow",onClick:m,children:[e.jsxs("div",{className:"flex items-start justify-between mb-3",children:[e.jsxs("div",{className:"flex-1 pr-4",children:[e.jsx("h3",{className:"font-semibold text-lg",children:t.title}),e.jsx("p",{className:"text-sm text-muted-foreground",children:t.sport})]}),e.jsxs("div",{className:"text-right flex-shrink-0",children:[e.jsx("div",{className:"text-sm font-medium",children:t.cost}),e.jsxs("div",{className:"text-xs text-muted-foreground",children:[t.currentPlayers,"/",t.maxPlayers," players"]})]})]}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-muted-foreground",children:"ðŸ“"}),e.jsx("span",{children:t.location})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-muted-foreground",children:"ðŸ•’"}),e.jsxs("span",{children:[t.date," at ",t.time]})]}),t.distance&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-muted-foreground",children:"ðŸ“"}),e.jsx("span",{children:t.distance})]})]}),e.jsx("p",{className:"text-sm text-muted-foreground mt-3",children:t.description}),e.jsxs("div",{className:"flex items-center justify-between mt-3",children:[t.isJoined?e.jsx("span",{className:"inline-block bg-green-100 text-green-800 text-xs px-2 py-1 rounded",children:"Joined"}):e.jsx("div",{}),e.jsx("button",{onClick:d,className:`px-3 py-1 rounded text-sm font-medium transition-colors ${t.isJoined?"bg-red-100 text-red-700 hover:bg-red-200":"bg-primary text-primary-foreground hover:bg-primary/90"}`,children:t.isJoined?"Leave":"Join"})]})]})}function D(){const t=$(),{games:a,setGames:o,isLoading:n,setLoading:d,user:m}=S(),[u,N]=l.useState(!1),[C,f]=l.useState(!1),G=l.useMemo(()=>m?.preferences?.sports??[],[m]),[i,b]=l.useState("all");l.useEffect(()=>{v()},[i]),l.useEffect(()=>()=>{d(!1)},[d]);const v=async()=>{const s=`Home loadGames (${i}) ${Date.now()}-${Math.random().toString(36).slice(2,6)}`;f(!1),console.time?.(s);try{d(!0);const r=i==="recommended"?await w.getRecommendedGames(G):await w.getGames();await o(r)}catch(r){console.error("Error loading games:",r),f(!0),await o([])}finally{console.timeEnd?.(s),d(!1)}},p=async()=>{if(!u){f(!1),N(!0);try{await v()}finally{N(!1)}}},x=s=>{t(`/game/${s}`)},y=()=>{t("/create-game")},h=a.filter(s=>{const r=new Date(s.date),R=new Date;return r.toDateString()===R.toDateString()});return n&&a.length===0?e.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary mx-auto mb-4"}),e.jsx("p",{className:"text-muted-foreground",children:"Loading games..."})]})}):C&&a.length===0?e.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center",children:e.jsxs("div",{className:"text-center space-y-3",children:[e.jsx("p",{className:"text-muted-foreground",children:"Connection issues detected. Showing sample games."}),e.jsxs(c,{onClick:p,variant:"outline",children:[e.jsx(g,{className:"w-4 h-4 mr-2"})," Try Again"]})]})}):e.jsxs("div",{className:"min-h-screen bg-background",children:[e.jsx("div",{className:"block md:hidden",children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"px-4 pt-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold",children:"TribeUp"}),e.jsx("p",{className:"text-muted-foreground",children:"Find your next game"})]}),e.jsx(c,{onClick:y,size:"icon","aria-label":"Create new game",children:e.jsx(k,{className:"w-5 h-5"})})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-4 mb-6",children:[e.jsxs("div",{className:"bg-card rounded-lg p-4 text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-primary",children:a.length}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"Active Games"})]}),e.jsxs("div",{className:"bg-card rounded-lg p-4 text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-primary",children:"0"}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"Players Online"})]}),e.jsxs("div",{className:"bg-card rounded-lg p-4 text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-primary",children:"0"}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"This Week"})]})]})]}),h.length>0&&e.jsxs("div",{className:"px-4",children:[e.jsx("h2",{className:"text-lg mb-4",children:"Happening Soon"}),e.jsx("div",{className:"flex gap-4 overflow-x-auto pb-2",children:h.map(s=>e.jsx("div",{className:"flex-shrink-0 w-72",children:e.jsx(j,{game:s,onSelect:()=>x(s.id)})},s.id))})]}),e.jsxs("div",{className:"px-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h2",{className:"text-lg font-semibold",children:"All Games"}),e.jsx(c,{variant:"ghost",size:"sm",onClick:p,disabled:n,"aria-label":"Refresh games",children:e.jsx(g,{className:`w-4 h-4 ${n?"animate-spin":""}`})})]}),e.jsx("div",{className:"space-y-4",children:a.map(s=>e.jsx("div",{children:e.jsx(j,{game:s,onSelect:()=>x(s.id)})},s.id))})]})]})}),e.jsx("div",{className:"hidden md:block",children:e.jsx("div",{className:"max-w-7xl mx-auto p-6",children:e.jsxs("div",{className:"grid grid-cols-12 gap-6",children:[e.jsxs("div",{className:"col-span-8",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold",children:"TribeUp"}),e.jsx("p",{className:"text-muted-foreground",children:"Find your next game"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("div",{className:"bg-muted rounded-md p-1 flex",children:[e.jsx("button",{className:`px-3 py-1 text-sm rounded ${i==="recommended"?"bg-background shadow font-medium":"text-muted-foreground"}`,onClick:()=>b("recommended"),children:"Recommended"}),e.jsx("button",{className:`px-3 py-1 text-sm rounded ${i==="all"?"bg-background shadow font-medium":"text-muted-foreground"}`,onClick:()=>b("all"),children:"All"})]}),e.jsxs(c,{onClick:y,children:[e.jsx(k,{className:"w-4 h-4 mr-2"}),"Create Game"]})]})]}),h.length>0&&e.jsxs("div",{className:"mb-8",children:[e.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Happening Today"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:h.map(s=>e.jsx(j,{game:s,onSelect:()=>x(s.id)},s.id))})]}),e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h2",{className:"text-xl font-semibold",children:i==="recommended"?"Recommended For You":"All Games"}),e.jsxs(c,{variant:"outline",onClick:p,disabled:n,children:[e.jsx(g,{className:`w-4 h-4 mr-2 ${n?"animate-spin":""}`}),"Refresh"]})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:a.map(s=>e.jsx("div",{children:e.jsx(j,{game:s,onSelect:()=>x(s.id)})},s.id))})]}),e.jsx("div",{className:"col-span-4",children:e.jsxs("div",{className:"bg-card rounded-lg p-6 sticky top-6",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Quick Stats"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-muted-foreground",children:"Active Games"}),e.jsx("span",{className:"font-semibold",children:a.length})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-muted-foreground",children:"Players Online"}),e.jsx("span",{className:"font-semibold",children:"0"})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-muted-foreground",children:"This Week"}),e.jsx("span",{className:"font-semibold",children:"0"})]})]})]})})]})})})]})}export{D as HomeScreen};
//# sourceMappingURL=HomeScreen-DyPSYQna.js.map
