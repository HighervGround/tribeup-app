import{j as t}from"./ui-Ca5AhCQM.js";import{r as c}from"./vendor-IUqyc6Bg.js";import{u as i,t as r,L as u,s as m}from"./index-B_FlWj16.js";function p(){const e=i();return c.useEffect(()=>{const n=async()=>{try{console.log("[AuthCallback] Processing OAuth callback...");const{data:a,error:l}=await m.auth.getSession();if(l){console.error("[AuthCallback] Session error:",l),r.error("Authentication failed"),e("/auth",{replace:!0});return}a.session?(console.log("[AuthCallback] Session found, user authenticated"),setTimeout(()=>{const o=localStorage.getItem("pendingGameJoin");o?(console.log("[AuthCallback] Redirecting to pending game:",o),localStorage.removeItem("pendingGameJoin"),e(`/game/${o}`,{replace:!0})):(console.log("[AuthCallback] Redirecting to home"),e("/",{replace:!0}))},1e3)):(console.log("[AuthCallback] No session found"),e("/auth",{replace:!0}))}catch(a){console.error("[AuthCallback] Unexpected error:",a),r.error("Authentication failed"),e("/auth",{replace:!0})}},s=setTimeout(()=>{console.error("[AuthCallback] Timeout - redirecting to auth"),r.error("Authentication timed out"),e("/auth",{replace:!0})},1e4);return n().finally(()=>{clearTimeout(s)}),()=>clearTimeout(s)},[e]),t.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center",children:t.jsxs("div",{className:"text-center space-y-4",children:[t.jsx(u,{className:"w-8 h-8 animate-spin mx-auto"}),t.jsx("h2",{className:"text-xl font-semibold",children:"Completing sign in..."}),t.jsx("p",{className:"text-muted-foreground",children:"Please wait while we set up your account"})]})})}export{p as AuthCallback};
//# sourceMappingURL=AuthCallback-CTTmS7rq.js.map
