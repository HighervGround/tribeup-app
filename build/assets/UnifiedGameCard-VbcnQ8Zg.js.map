{"version":3,"file":"UnifiedGameCard-VbcnQ8Zg.js","sources":["../../src/hooks/useGameCard.ts","../../src/components/UnifiedGameCard.tsx"],"sourcesContent":["import { useNavigate } from 'react-router-dom';\nimport { useGameJoinToggle } from './useGameJoinToggle';\n\ninterface Game {\n  id: string;\n  title: string;\n  sport: string;\n  location: string;\n  date: string;\n  time: string;\n  description: string;\n  currentPlayers: number;\n  maxPlayers: number;\n  isJoined: boolean;\n  cost?: string;\n  category?: string;\n  [key: string]: any;\n}\n\ninterface UseGameCardOptions {\n  onSelect?: (gameId: string) => void;\n  onJoinLeave?: (gameId: string) => void;\n}\n\n/**\n * Custom hook for common game card functionality\n * Centralizes navigation, join/leave logic, and event handling\n */\nexport function useGameCard(game: Game, options: UseGameCardOptions = {}) {\n  const navigate = useNavigate();\n  const joinToggle = useGameJoinToggle();\n  \n  const handleCardClick = () => {\n    if (options.onSelect) {\n      options.onSelect(game.id);\n    } else {\n      navigate(`/game/${game.id}`);\n    }\n  };\n  \n  const handleJoinClick = (e: React.MouseEvent) => {\n    e.stopPropagation();\n    \n    if (options.onJoinLeave) {\n      // Use custom join/leave handler if provided (legacy support)\n      options.onJoinLeave(game.id);\n    } else {\n      // Use the centralized toggle logic\n      joinToggle.toggleJoin(game, e);\n    }\n  };\n  \n  /**\n   * Get category badge for time-based categorization\n   */\n  const getCategoryBadge = () => {\n    if (game.category === 'today') {\n      return {\n        text: 'Today',\n        className: 'bg-orange-100 text-orange-800 dark:bg-orange-900/30 dark:text-orange-300'\n      };\n    } else if (game.category === 'tomorrow') {\n      return {\n        text: 'Tomorrow', \n        className: 'bg-blue-100 text-blue-800 dark:bg-blue-900/30 dark:text-blue-300'\n      };\n    }\n    return null;\n  };\n  \n  /**\n   * Check if the game is full\n   */\n  const isFull = game.currentPlayers >= game.maxPlayers;\n  \n  /**\n   * Get formatted player count string\n   */\n  const getPlayerCount = () => `${game.currentPlayers}/${game.maxPlayers} players`;\n  \n  /**\n   * Get join status indicator props\n   */\n  const getJoinStatus = () => {\n    if (!game.isJoined) return null;\n    \n    return {\n      text: 'Joined âœ“',\n      className: 'bg-success/20 text-success dark:bg-success/30 dark:text-success text-xs px-2 py-1 rounded'\n    };\n  };\n  \n  return {\n    // Event handlers\n    handleCardClick,\n    handleJoinClick,\n    \n    // Join/leave functionality\n    ...joinToggle,\n    \n    // Computed values\n    getCategoryBadge,\n    isFull,\n    getPlayerCount,\n    getJoinStatus,\n    \n    // Game data\n    game,\n  };\n}\n","import React, { useState } from 'react';\nimport { Card, CardContent } from './ui/card';\nimport { Badge } from './ui/badge';\nimport { Button } from './ui/button';\nimport { Avatar, AvatarFallback } from './ui/avatar';\nimport { ClickableAvatar } from './ui/clickable-avatar';\nimport { ImageWithFallback } from './figma/ImageWithFallback';\nimport { MapPin, Calendar, Users, Clock, Star } from 'lucide-react';\nimport { useGameCard } from '../hooks/useGameCard';\nimport { formatTimeString } from '../lib/dateUtils';\n\ninterface Game {\n  id: string;\n  title: string;\n  sport: string;\n  sportColor?: string;\n  location: string;\n  date: string;\n  time: string;\n  description: string;\n  imageUrl?: string;\n  currentPlayers: number;\n  maxPlayers: number;\n  isJoined: boolean;\n  cost?: string;\n  category?: string;\n  host?: {\n    id?: string;\n    name: string;\n    avatar?: string;\n  };\n  rating?: number;\n  [key: string]: any;\n}\n\ninterface UnifiedGameCardProps {\n  game: Game;\n  variant?: 'full' | 'simple' | 'compact';\n  showImage?: boolean;\n  showJoinButton?: boolean;\n  onSelect?: (gameId: string) => void;\n  onJoinLeave?: (gameId: string) => void;\n}\n\n/**\n * Unified GameCard component that handles all game card variants\n * Replaces SimpleGameCard components in HomeScreen and SearchDiscovery\n */\nexport function UnifiedGameCard({ \n  game, \n  variant = 'simple',\n  showImage = false,\n  showJoinButton = true,\n  onSelect,\n  onJoinLeave\n}: UnifiedGameCardProps) {\n  const [isHovered, setIsHovered] = useState(false);\n  const {\n    handleCardClick,\n    handleJoinClick,\n    isLoading,\n    getButtonText,\n    getButtonVariant,\n    getCategoryBadge,\n    getPlayerCount,\n    getJoinStatus\n  } = useGameCard(game, { onSelect, onJoinLeave });\n\n  // Full variant (original GameCard)\n  if (variant === 'full') {\n    return (\n      <div\n        onMouseEnter={() => setIsHovered(true)}\n        onMouseLeave={() => setIsHovered(false)}\n      >\n        <Card \n          className={`overflow-hidden cursor-pointer transition-all duration-200 ease-out ${\n            isHovered ? 'shadow-medium' : 'shadow-subtle'\n          }`}\n          onClick={handleCardClick}\n        >\n          <div className=\"relative overflow-hidden\">\n            {game.imageUrl ? (\n              <div className=\"aspect-video overflow-hidden\">\n                <ImageWithFallback\n                  src={game.imageUrl}\n                  alt={game.sport}\n                  className=\"w-full h-full object-cover transition-transform duration-300 ease-out\"\n                />\n              </div>\n            ) : (\n              <div className=\"h-16 bg-gradient-to-r from-blue-50 to-purple-50 flex items-center justify-center\">\n                <Badge variant=\"secondary\" className=\"text-sm\">\n                  {game.sport}\n                </Badge>\n              </div>\n            )}\n            \n            {/* Gradient overlay on hover */}\n            <div\n              className={`absolute inset-0 bg-gradient-to-t from-black/20 to-transparent transition-opacity duration-200 ${\n                isHovered ? 'opacity-10' : 'opacity-0'\n              }`}\n            />\n            \n            {/* Date/Time Block - Top Left */}\n            <div className=\"absolute top-3 left-3 bg-background/95 backdrop-blur-sm rounded-lg px-3 py-2 min-w-[80px]\">\n              <div className=\"flex items-center gap-1 mb-1\">\n                <Calendar className=\"w-3 h-3 text-muted-foreground\" />\n                <span className=\"text-xs text-muted-foreground\">{game.date}</span>\n              </div>\n              <div className=\"text-sm font-medium\">{game.time}</div>\n            </div>\n\n            {/* Sport Tag - Top Right */}\n            <div className=\"absolute top-3 right-3\">\n              <Badge className={`${game.sportColor || 'bg-primary'} text-white border-none`}>\n                {game.sport}\n              </Badge>\n            </div>\n\n            {/* Join status indicator */}\n            {game.isJoined && (\n              <div className=\"absolute bottom-3 right-3 w-6 h-6 bg-success rounded-full flex items-center justify-center\">\n                <div className=\"w-2 h-2 bg-white rounded-full\" />\n              </div>\n            )}\n          </div>\n\n          <CardContent className=\"p-4\">\n            <div className=\"space-y-3\">\n              <div>\n                <h3 className=\"font-semibold text-lg mb-1\">{game.title}</h3>\n                <div className=\"flex items-center gap-2 text-sm text-muted-foreground\">\n                  <MapPin className=\"w-4 h-4\" />\n                  <span>{game.location}</span>\n                </div>\n              </div>\n              \n              {/* Host info */}\n              {game.host && (\n                <div className=\"flex items-center gap-2 text-sm\">\n                  <ClickableAvatar\n                    userId={game.host.id}\n                    src={game.host.avatar}\n                    alt={game.host.name}\n                    size=\"sm\"\n                  />\n                  <span className=\"text-muted-foreground\">Hosted by {game.host.name}</span>\n                </div>\n              )}\n              \n              <div className=\"flex items-center justify-between\">\n                <div className=\"flex items-center gap-1 text-sm text-muted-foreground\">\n                  <Users className=\"w-4 h-4\" />\n                  <span>{getPlayerCount()}</span>\n                </div>\n                \n                {showJoinButton && (\n                  <Button \n                    size=\"sm\" \n                    variant={getButtonVariant(game)}\n                    onClick={handleJoinClick}\n                    className=\"transition-all duration-200\"\n                    disabled={isLoading || (game.currentPlayers >= game.maxPlayers && !game.isJoined)}\n                  >\n                    {game.currentPlayers >= game.maxPlayers && !game.isJoined ? 'Game Full' : getButtonText(game)}\n                  </Button>\n                )}\n              </div>\n            </div>\n          </CardContent>\n        </Card>\n      </div>\n    );\n  }\n\n  // Simple variant (for HomeScreen and SearchDiscovery)\n  return (\n    <div \n      className=\"bg-card rounded-lg p-4 border border-border cursor-pointer hover:shadow-md transition-shadow\"\n      onClick={handleCardClick}\n    >\n      {/* Header with title and category badge */}\n      <div className=\"flex items-start justify-between mb-3\">\n        <div className=\"flex-1 pr-4\">\n          <div className=\"flex items-center gap-2 mb-1\">\n            <h3 className=\"font-semibold text-lg\">{game.title}</h3>\n            {getCategoryBadge() && (\n              <span className={`inline-block text-xs px-2 py-1 rounded-full font-medium ${getCategoryBadge()?.className}`}>\n                {getCategoryBadge()?.text}\n              </span>\n            )}\n          </div>\n          <p className=\"text-sm text-muted-foreground\">{game.sport}</p>\n          \n          {/* Host info for simple variant */}\n          {game.host && (\n            <div className=\"flex items-center gap-2 mt-2 text-sm\">\n              <ClickableAvatar\n                userId={game.host.id}\n                src={game.host.avatar}\n                alt={game.host.name}\n                size=\"sm\"\n              />\n              <span className=\"text-muted-foreground\">Hosted by {game.host.name}</span>\n            </div>\n          )}\n        </div>\n        <div className=\"text-right flex-shrink-0\">\n          {game.cost && <div className=\"text-sm font-medium\">{game.cost}</div>}\n          <div className=\"text-xs text-muted-foreground\">\n            {getPlayerCount()}\n          </div>\n        </div>\n      </div>\n      \n      {/* Game details */}\n      <div className=\"space-y-2 text-sm\">\n        <div className=\"flex items-center gap-2\">\n          <MapPin className=\"w-4 h-4 text-muted-foreground\" />\n          <span>{game.location}</span>\n        </div>\n        <div className=\"flex items-center gap-2\">\n          <Users className=\"w-4 h-4 text-muted-foreground\" />\n          <span>{getPlayerCount()}</span>\n        </div>\n        <div className=\"flex items-center gap-2\">\n          <Clock className=\"w-4 h-4 text-muted-foreground\" />\n          <span>{game.date} at {formatTimeString(game.time)}</span>\n        </div>\n      </div>\n      \n      <p className=\"text-sm text-muted-foreground mt-3\">{game.description}</p>\n      \n      {/* Footer with join status and button */}\n      {showJoinButton && (\n        <div className=\"flex items-center justify-between mt-3\">\n          {getJoinStatus() ? (\n            <span className={`inline-block ${getJoinStatus()?.className}`}>\n              {getJoinStatus()?.text}\n            </span>\n          ) : (\n            <div></div>\n          )}\n          \n          <button\n            onClick={handleJoinClick}\n            disabled={isLoading}\n            className={`px-3 py-1 rounded text-sm font-medium transition-colors ${\n              isLoading \n                ? 'opacity-50 cursor-not-allowed' \n                : game.isJoined \n                  ? 'bg-destructive/20 text-destructive dark:bg-destructive/30 dark:text-destructive hover:bg-destructive/30 dark:hover:bg-destructive/40' \n                  : 'bg-primary text-primary-foreground hover:bg-primary/90'\n            }`}\n          >\n            {getButtonText(game)}\n          </button>\n        </div>\n      )}\n    </div>\n  );\n}\n\nexport default UnifiedGameCard;\n"],"names":["useGameCard","game","options","navigate","useNavigate","joinToggle","useGameJoinToggle","handleCardClick","handleJoinClick","e","getCategoryBadge","isFull","UnifiedGameCard","variant","showImage","showJoinButton","onSelect","onJoinLeave","isHovered","setIsHovered","useState","isLoading","getButtonText","getButtonVariant","getPlayerCount","getJoinStatus","jsx","jsxs","Card","ImageWithFallback","Badge","Calendar","CardContent","MapPin","ClickableAvatar","Users","Button","Clock","formatTimeString"],"mappings":"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"}