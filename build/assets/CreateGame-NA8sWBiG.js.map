{"version":3,"file":"CreateGame-NA8sWBiG.js","sources":["../../src/hooks/useLocationSearch.ts","../../src/hooks/useGeolocation.ts","../../src/lib/systemConfig.ts","../../src/components/CreateGame.tsx"],"sourcesContent":["import { useState, useCallback } from 'react';\n\ninterface LocationSuggestion {\n  place_id: string;\n  description: string;\n  structured_formatting: {\n    main_text: string;\n    secondary_text: string;\n  };\n}\n\ninterface Coordinates {\n  lat: number;\n  lng: number;\n}\n\nexport function useLocationSearch() {\n  const [suggestions, setSuggestions] = useState<LocationSuggestion[]>([]);\n  const [loading, setLoading] = useState(false);\n\n  const GOOGLE_API_KEY = (import.meta as any).env?.VITE_GOOGLE_PLACES_API_KEY || 'AIzaSyATPbnuTvpYDDY0vLrKy0IoS80A27rpq-4';\n\n  // Simple geocoding using Google Places API or fallback\n  const geocodeLocation = useCallback(async (address: string): Promise<Coordinates | null> => {\n    try {\n      // Try Google Geocoding API first\n      if (GOOGLE_API_KEY && GOOGLE_API_KEY !== 'demo_key') {\n        const response = await fetch(\n          `https://maps.googleapis.com/maps/api/geocode/json?address=${encodeURIComponent(address)}&key=${GOOGLE_API_KEY}`\n        );\n        \n        if (response.ok) {\n          const data = await response.json();\n          if (data.results && data.results.length > 0) {\n            const location = data.results[0].geometry.location;\n            return {\n              lat: location.lat,\n              lng: location.lng\n            };\n          }\n        }\n      }\n      \n      // Fallback to OpenStreetMap\n      const response = await fetch(\n        `https://nominatim.openstreetmap.org/search?format=json&q=${encodeURIComponent(address)}&limit=1`\n      );\n      \n      if (!response.ok) throw new Error('Geocoding failed');\n      \n      const data = await response.json();\n      if (data.length > 0) {\n        return {\n          lat: parseFloat(data[0].lat),\n          lng: parseFloat(data[0].lon)\n        };\n      }\n      \n      return null;\n    } catch (error) {\n      console.error('Geocoding error:', error);\n      return null;\n    }\n  }, [GOOGLE_API_KEY]);\n\n  // Search for location suggestions with proximity bias\n  const searchLocations = useCallback(async (query: string, userLat?: number, userLng?: number) => {\n    if (!query.trim()) {\n      setSuggestions([]);\n      return;\n    }\n\n    console.log('üîç Starting location search for:', query);\n    setLoading(true);\n    \n    try {\n      // Try Google Places API (Legacy) first - more stable\n      if (GOOGLE_API_KEY && GOOGLE_API_KEY !== 'demo_key' && GOOGLE_API_KEY !== 'your_anon_key_here') {\n        console.log('üåê Trying Google Places API...');\n        let placesUrl = `https://maps.googleapis.com/maps/api/place/autocomplete/json?input=${encodeURIComponent(query)}&key=${GOOGLE_API_KEY}`;\n        \n        // Add location bias if available\n        if (userLat && userLng) {\n          placesUrl += `&location=${userLat},${userLng}&radius=50000`;\n        }\n\n        console.log('üì° Google Places URL:', placesUrl);\n        const response = await fetch(placesUrl);\n\n        if (response.ok) {\n          const data = await response.json();\n          console.log('‚úÖ Google Places response:', data);\n          \n          if (data.predictions && data.predictions.length > 0) {\n            const suggestions: LocationSuggestion[] = data.predictions.map((place: any) => ({\n              place_id: place.place_id,\n              description: place.description,\n              structured_formatting: {\n                main_text: place.structured_formatting?.main_text || place.description.split(',')[0],\n                secondary_text: place.structured_formatting?.secondary_text || place.description.split(',').slice(1).join(',').trim()\n              }\n            }));\n            console.log('üéØ Google Places suggestions:', suggestions);\n            setSuggestions(suggestions);\n            setLoading(false);\n            return;\n          } else {\n            console.log('‚ö†Ô∏è Google Places returned no predictions');\n          }\n        } else {\n          console.log('‚ùå Google Places API error:', response.status, response.statusText);\n        }\n      } else {\n        console.log('‚ö†Ô∏è Google API key not available or invalid:', GOOGLE_API_KEY);\n      }\n      \n      // Fallback to OpenStreetMap\n      console.log('üó∫Ô∏è Trying OpenStreetMap...');\n      let searchUrl = `https://nominatim.openstreetmap.org/search?format=json&q=${encodeURIComponent(query)}&limit=5&addressdetails=1`;\n      \n      if (userLat && userLng) {\n        searchUrl += `&lat=${userLat}&lon=${userLng}&bounded=1&viewbox=${userLng-0.1},${userLat+0.1},${userLng+0.1},${userLat-0.1}`;\n      }\n      \n      console.log('üì° OpenStreetMap URL:', searchUrl);\n      const response = await fetch(searchUrl);\n      \n      if (response.ok) {\n        const data = await response.json();\n        console.log('‚úÖ OpenStreetMap response:', data);\n        \n        const suggestions: LocationSuggestion[] = data.map((place: any, index: number) => ({\n          place_id: place.place_id || `osm-${index}`,\n          description: place.display_name,\n          structured_formatting: {\n            main_text: place.name || place.display_name.split(',')[0],\n            secondary_text: place.display_name.split(',').slice(1, 3).join(',').trim()\n          }\n        }));\n\n        console.log('üéØ OpenStreetMap suggestions:', suggestions);\n        setSuggestions(suggestions);\n        setLoading(false);\n        return;\n      } else {\n        console.log('‚ùå OpenStreetMap API error:', response.status, response.statusText);\n      }\n      \n      // If both APIs fail, show a helpful message instead of mock suggestions\n      console.log('‚ùå All location APIs failed, showing no suggestions');\n      setSuggestions([]);\n      \n    } catch (error) {\n      console.error('‚ùå Location search error:', error);\n      // Don't show mock suggestions - just show empty\n      setSuggestions([]);\n    } finally {\n      setLoading(false);\n    }\n  }, [GOOGLE_API_KEY]);\n\n  return {\n    suggestions,\n    loading,\n    searchLocations,\n    geocodeLocation\n  };\n}\n","import { useState, useEffect } from 'react';\n\ninterface GeolocationState {\n  latitude: number | null;\n  longitude: number | null;\n  error: string | null;\n  loading: boolean;\n}\n\ninterface GeolocationOptions {\n  enableHighAccuracy?: boolean;\n  timeout?: number;\n  maximumAge?: number;\n}\n\nexport function useGeolocation(options: GeolocationOptions = {}) {\n  const [state, setState] = useState<GeolocationState>({\n    latitude: null,\n    longitude: null,\n    error: null,\n    loading: true,\n  });\n\n  useEffect(() => {\n    console.log('useGeolocation hook initializing...');\n    \n    if (!navigator.geolocation) {\n      console.log('Geolocation not supported');\n      setState(prev => ({\n        ...prev,\n        error: 'Geolocation is not supported by this browser',\n        loading: false,\n      }));\n      return;\n    }\n\n    const handleSuccess = (position: GeolocationPosition) => {\n      console.log('GPS location obtained:', position.coords.latitude, position.coords.longitude);\n      setState({\n        latitude: position.coords.latitude,\n        longitude: position.coords.longitude,\n        error: null,\n        loading: false,\n      });\n    };\n\n    const handleError = (error: GeolocationPositionError) => {\n      let errorMessage = 'Unable to retrieve location';\n      \n      switch (error.code) {\n        case error.PERMISSION_DENIED:\n          errorMessage = 'Location access denied by user';\n          break;\n        case error.POSITION_UNAVAILABLE:\n          errorMessage = 'Location information unavailable';\n          break;\n        case error.TIMEOUT:\n          errorMessage = 'Location request timed out';\n          break;\n      }\n\n      console.log('GPS error:', errorMessage, error);\n      setState(prev => ({\n        ...prev,\n        error: errorMessage,\n        loading: false,\n      }));\n    };\n\n    const geoOptions: PositionOptions = {\n      enableHighAccuracy: options.enableHighAccuracy ?? true,\n      timeout: options.timeout ?? 10000,\n      maximumAge: options.maximumAge ?? 300000, // 5 minutes\n    };\n\n    console.log('Requesting GPS permission with options:', geoOptions);\n    navigator.geolocation.getCurrentPosition(handleSuccess, handleError, geoOptions);\n  }, [options.enableHighAccuracy, options.timeout, options.maximumAge]);\n\n  return state;\n}\n\n// Utility function to calculate distance between two coordinates\nexport function calculateDistance(\n  lat1: number,\n  lon1: number,\n  lat2: number,\n  lon2: number\n): number {\n  const R = 3959; // Earth's radius in miles\n  const dLat = (lat2 - lat1) * (Math.PI / 180);\n  const dLon = (lon2 - lon1) * (Math.PI / 180);\n  const a =\n    Math.sin(dLat / 2) * Math.sin(dLat / 2) +\n    Math.cos(lat1 * (Math.PI / 180)) *\n      Math.cos(lat2 * (Math.PI / 180)) *\n      Math.sin(dLon / 2) *\n      Math.sin(dLon / 2);\n  const c = 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1 - a));\n  return R * c;\n}\n\n// Format distance for display\nexport function formatDistance(miles: number): string {\n  if (miles < 0.1) return 'Less than 0.1 mi';\n  if (miles < 1) return `${(miles * 5280).toFixed(0)} ft`;\n  return `${miles.toFixed(1)} mi`;\n}\n","// System configuration service for runtime configurable settings\nimport { supabase } from './supabase';\n\nexport interface SystemConfigValue {\n  key: string;\n  value: any;\n  description?: string;\n  category: string;\n  is_public: boolean;\n  created_at: string;\n  updated_at: string;\n}\n\nexport interface SystemConfigCache {\n  [key: string]: {\n    value: any;\n    timestamp: number;\n    ttl: number;\n  };\n}\n\nclass SystemConfigService {\n  private static instance: SystemConfigService;\n  private cache: SystemConfigCache = {};\n  private readonly CACHE_TTL = 5 * 60 * 1000; // 5 minutes\n\n  private constructor() {}\n\n  public static getInstance(): SystemConfigService {\n    if (!SystemConfigService.instance) {\n      SystemConfigService.instance = new SystemConfigService();\n    }\n    return SystemConfigService.instance;\n  }\n\n  private async fetchConfigValue(key: string): Promise<any> {\n    try {\n      const { data, error } = await supabase\n        .from('system_config')\n        .select('value')\n        .eq('key', key)\n        .single();\n\n      if (error) {\n        if (error.code === 'PGRST116') {\n          // No rows returned - config doesn't exist\n          console.warn(`Config key '${key}' not found in database`);\n          return null;\n        }\n        throw error;\n      }\n\n      return this.parseConfigValue(data.value);\n    } catch (error) {\n      console.log(`‚ö†Ô∏è system_config table not found or error fetching '${key}', using default`);\n      return null;\n    }\n  }\n\n  private parseConfigValue(value: any): any {\n    // Parse JSON strings back to their original types\n    if (typeof value === 'string') {\n      try {\n        // Try to parse as JSON first\n        const parsed = JSON.parse(value);\n        return parsed;\n      } catch {\n        // If parsing fails, keep as string\n        // Handle boolean strings\n        if (value === 'true') return true;\n        if (value === 'false') return false;\n        // Handle numeric strings\n        if (!isNaN(Number(value)) && value !== '') {\n          return Number(value);\n        }\n        return value;\n      }\n    }\n\n    return value;\n  }\n\n  // Get a configuration value with caching\n  async get<T = string>(key: string, defaultValue?: T): Promise<T> {\n    // Check cache first\n    const cached = this.cache[key];\n    if (cached && Date.now() - cached.timestamp < cached.ttl) {\n      return cached.value as T;\n    }\n\n    const value = await this.fetchConfigValue(key);\n\n    // Cache the result\n    this.cache[key] = {\n      value,\n      timestamp: Date.now(),\n      ttl: this.CACHE_TTL\n    };\n\n    return (value !== null ? value : defaultValue) as T;\n  }\n}\n\nexport const systemConfig = SystemConfigService.getInstance();\n","import React, { useState, useEffect, useRef } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport { Button } from './ui/button';\nimport { Card, CardContent, CardHeader, CardTitle } from './ui/card';\nimport { Progress } from './ui/progress';\nimport { Input } from './ui/input';\nimport { Textarea } from './ui/textarea';\nimport { Alert, AlertDescription } from './ui/alert';\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from './ui/select';\nimport { ArrowLeft, CheckCircle, Loader2, MapPin, Clock, Users, DollarSign, AlertCircle } from 'lucide-react';\nimport { useAppStore } from '../store/appStore';\nimport { SupabaseService } from '../lib/supabaseService';\nimport { useLocationSearch } from '../hooks/useLocationSearch';\nimport { useGeolocation } from '../hooks/useGeolocation';\nimport { systemConfig } from '../lib/systemConfig';\n\ninterface FormData {\n  sport: string;\n  title: string;\n  description: string;\n  date: string;\n  time: string;\n  duration: string;\n  location: string;\n  latitude: number | null;\n  longitude: number | null;\n  maxPlayers: string;\n  cost: string;\n  requirements: string;\n  skillLevel: string;\n  minEloRating: string;\n  maxEloRating: string;\n  minReputation: string;\n  competitiveMode: boolean;\n}\n\nconst sportOptions = [\n  { value: 'basketball', label: 'Basketball', icon: 'üèÄ' },\n  { value: 'soccer', label: 'Soccer', icon: '‚öΩ' },\n  { value: 'tennis', label: 'Tennis', icon: 'üéæ' },\n  { value: 'pickleball', label: 'Pickleball', icon: 'ü•í' },\n  { value: 'volleyball', label: 'Volleyball', icon: 'üèê' },\n  { value: 'football', label: 'Football', icon: 'üèà' },\n  { value: 'baseball', label: 'Baseball', icon: '‚öæ' },\n];\n\nconst steps = [\n  { id: 1, title: 'What & When', fields: ['sport', 'date', 'time', 'duration'] },\n  { id: 2, title: 'Where & Who', fields: ['location', 'maxPlayers', 'cost'] },\n  { id: 3, title: 'Skill & Requirements', fields: ['skillLevel'] },\n  { id: 4, title: 'Review & Create', fields: [] },\n];\n\n// Quick times default values (will be loaded from system config)\nconst DEFAULT_QUICK_TIMES = [\n  '09:00', '12:00', '15:00', '17:00', '18:00', '19:00', '20:00', '21:00'\n];\n\nfunction CreateGame() {\n  const navigate = useNavigate();\n  const [currentStep, setCurrentStep] = useState(1);\n  const [isSubmitting, setIsSubmitting] = useState(false);\n  const [errors, setErrors] = useState<Record<string, string>>({});\n  const [submitError, setSubmitError] = useState<string | null>(null);\n  const [showLocationSuggestions, setShowLocationSuggestions] = useState(false);\n  const [quickTimes, setQuickTimes] = useState<string[]>(DEFAULT_QUICK_TIMES);\n  \n  // Location hooks\n  const { latitude: userLat, longitude: userLng, error: geoError } = useGeolocation();\n  const { searchLocations, loading: isLocationLoading, suggestions, geocodeLocation } = useLocationSearch();\n  const { user } = useAppStore();\n  const navigationRef = useRef<HTMLDivElement>(null);\n  const [navigationHeight, setNavigationHeight] = useState(0);\n\n  // Smart defaults\n  const getDefaultDate = () => {\n    const tomorrow = new Date();\n    tomorrow.setDate(tomorrow.getDate() + 1);\n    return tomorrow.toISOString().split('T')[0];\n  };\n  \n  const [formData, setFormData] = useState({\n    title: '',\n    sport: '',\n    date: getDefaultDate(), // Default to tomorrow\n    time: '',\n    duration: '60', // Will be updated from system config\n    location: '',\n    latitude: null as number | null,\n    longitude: null as number | null,\n    maxPlayers: '10', // Will be updated from system config\n    cost: 'FREE',\n    imageUrl: '',\n    skillLevel: 'mixed',\n    minEloRating: '',\n    maxEloRating: '',\n    minReputation: '70',\n    competitiveMode: false\n  });\n\n  // Load system configuration on component mount\n  useEffect(() => {\n    const loadSystemConfig = async () => {\n      try {\n        // Load quick time slots from system config\n        const timeSlots = await systemConfig.get<string[]>('quick_time_slots', [\n          '09:00', '12:00', '15:00', '17:00', '18:00', '19:00', '20:00', '21:00'\n        ]);\n        setQuickTimes(timeSlots);\n\n        // Load default max players\n        const defaultMaxPlayers = await systemConfig.get<number>('max_players_per_game', 10);\n        \n        setFormData(prev => ({\n          ...prev,\n          maxPlayers: defaultMaxPlayers.toString()\n        }));\n      } catch (error) {\n        console.error('Error loading system config:', error);\n      }\n    };\n\n    loadSystemConfig();\n  }, []);\n\n  // Update sport-specific defaults when sport changes\n  useEffect(() => {\n    const updateSportDefaults = async () => {\n      if (formData.sport) {\n        try {\n          const defaultDuration = await systemConfig.get(\n            `sport_${formData.sport}_duration`, \n            60\n          );\n          \n          setFormData(prev => ({\n            ...prev,\n            duration: defaultDuration ? defaultDuration.toString() : '60'\n          }));\n        } catch (error) {\n          console.error('Error loading sport defaults:', error);\n        }\n      }\n    };\n\n    updateSportDefaults();\n  }, [formData.sport]);\n\n  // Sport-based defaults\n  const sportDefaults = {\n    basketball: { maxPlayers: 10 },\n    soccer: { maxPlayers: 22 },\n    football: { maxPlayers: 22 },\n    tennis: { maxPlayers: 4 },\n    volleyball: { maxPlayers: 12 },\n    baseball: { maxPlayers: 18 },\n    hockey: { maxPlayers: 12 },\n    badminton: { maxPlayers: 4 },\n    pickleball: { maxPlayers: 4 },\n    golf: { maxPlayers: 4 },\n    running: { maxPlayers: 20 },\n    cycling: { maxPlayers: 15 },\n    swimming: { maxPlayers: 8 },\n    yoga: { maxPlayers: 15 },\n    crossfit: { maxPlayers: 12 }\n  };\n\n  // Smart time suggestions based on current time and day\n  const getSmartTimes = () => {\n    const now = new Date();\n    const currentHour = now.getHours();\n    const isWeekend = now.getDay() === 0 || now.getDay() === 6;\n    \n    if (isWeekend) {\n      // Weekend: suggest morning and afternoon times\n      return ['09:00', '10:00', '11:00', '14:00', '15:00', '16:00', '17:00'];\n    } else {\n      // Weekday: suggest evening times after work\n      if (currentHour < 17) {\n        return ['17:00', '18:00', '19:00', '20:00', '21:00'];\n      } else {\n        return ['18:00', '19:00', '20:00', '21:00'];\n      }\n    }\n  };\n  \n  const popularTimes = getSmartTimes();\n\n  // Recent locations (stored in localStorage)\n  const [recentLocations, setRecentLocations] = useState<string[]>(() => {\n    try {\n      return JSON.parse(localStorage.getItem('recentGameLocations') || '[]');\n    } catch {\n      return [];\n    }\n  });\n\n  // Auto-populate location when GPS is available and location field is empty\n  useEffect(() => {\n    console.log('Location effect triggered:', { \n      userLat, \n      userLng, \n      location: formData.location, \n      latitude: formData.latitude,\n      geoError \n    });\n    \n    // Only auto-fill if we have GPS coordinates and no location is set yet\n    if (userLat && userLng && !formData.location.trim()) {\n      console.log('Auto-filling location with GPS coordinates');\n      \n      // Auto-fill with coordinates and try to get address\n      const autoFillLocation = async () => {\n        try {\n          console.log('Fetching reverse geocoding for:', userLat, userLng);\n          \n          // Try Google Geocoding API first if available\n          const googleApiKey = (import.meta as any).env?.VITE_GOOGLE_PLACES_API_KEY;\n          let response;\n          \n          if (googleApiKey) {\n            response = await fetch(\n              `https://maps.googleapis.com/maps/api/geocode/json?latlng=${userLat},${userLng}&key=${googleApiKey}`\n            );\n          } else {\n            response = await fetch(\n              `https://nominatim.openstreetmap.org/reverse?format=json&lat=${userLat}&lon=${userLng}&addressdetails=1`\n            );\n          }\n          \n          if (!response.ok) {\n            throw new Error(`HTTP ${response.status}`);\n          }\n          \n          const data = await response.json();\n          console.log('Reverse geocoding response:', data);\n          \n          // Create a more readable address\n          let address = '';\n          \n          if (googleApiKey && data.results && data.results.length > 0) {\n            // Google Geocoding API response\n            address = data.results[0].formatted_address;\n          } else if (data.address) {\n            // OpenStreetMap response\n            const parts: string[] = [];\n            if (data.address.house_number && data.address.road) {\n              parts.push(`${data.address.house_number} ${data.address.road}`);\n            } else if (data.address.road) {\n              parts.push(data.address.road);\n            }\n            if (data.address.city || data.address.town || data.address.village) {\n              parts.push(data.address.city || data.address.town || data.address.village);\n            }\n            if (data.address.state) {\n              parts.push(data.address.state);\n            }\n            address = parts.join(', ');\n          }\n          \n          // Fallback to display_name if address parsing fails\n          if (!address) {\n            address = data.display_name || `${userLat.toFixed(4)}, ${userLng.toFixed(4)}`;\n          }\n          \n          console.log('Setting location to:', address);\n          setFormData(prev => ({\n            ...prev,\n            location: address,\n            latitude: userLat,\n            longitude: userLng\n          }));\n        } catch (error) {\n          console.error('Reverse geocoding failed:', error);\n          // Fallback to coordinates if reverse geocoding fails\n          const fallbackLocation = `${userLat.toFixed(4)}, ${userLng.toFixed(4)}`;\n          console.log('Using fallback location:', fallbackLocation);\n          \n          setFormData(prev => ({\n            ...prev,\n            location: fallbackLocation,\n            latitude: userLat,\n            longitude: userLng\n          }));\n        }\n      };\n      \n      autoFillLocation();\n    }\n  }, [userLat, userLng, geoError]);\n\n  useEffect(() => {\n    if (!user) {\n      navigate('/auth');\n    }\n  }, [user, navigate]);\n\n  // Dynamic navigation height calculation\n  useEffect(() => {\n    const updateNavigationHeight = () => {\n      if (navigationRef.current) {\n        const height = navigationRef.current.offsetHeight;\n        setNavigationHeight(height);\n      }\n    };\n\n    updateNavigationHeight();\n    window.addEventListener('resize', updateNavigationHeight);\n    \n    return () => window.removeEventListener('resize', updateNavigationHeight);\n  }, [currentStep, isSubmitting]);\n\n  const generateGameTitle = (sport: string, time: string, location: string) => {\n    if (!sport || !time || !location) return '';\n    \n    const timeFormats = {\n      morning: ['Morning', 'AM', 'Early'],\n      afternoon: ['Afternoon', 'PM', 'Midday'],\n      evening: ['Evening', 'Night', 'Late']\n    };\n    \n    const hour = parseInt(time.split(':')[0]);\n    let timeOfDay = 'Morning';\n    if (hour >= 12 && hour < 17) timeOfDay = 'Afternoon';\n    else if (hour >= 17) timeOfDay = 'Evening';\n    \n    const locationName = location.split(',')[0].trim();\n    const sportName = sport.charAt(0).toUpperCase() + sport.slice(1);\n    \n    const templates = [\n      `${timeOfDay} ${sportName} at ${locationName}`,\n      `${sportName} Game - ${locationName}`,\n      `${timeOfDay} ${sportName} Session`,\n      `${locationName} ${sportName} Meetup`,\n      `${sportName} @ ${locationName}`,\n    ];\n    \n    return templates[Math.floor(Math.random() * templates.length)];\n  };\n\n  const checkForDuplicateGame = async (sport: string, date: string, time: string, location: string): Promise<string | null> => {\n    if (!sport || !date || !time || !location) return null;\n    \n    try {\n      const games = await SupabaseService.getGames();\n      const duplicates = games.filter(game => {\n        const sameDate = game.date === date;\n        const sameTime = Math.abs(new Date(`2000-01-01T${game.time}`).getTime() - new Date(`2000-01-01T${time}`).getTime()) < 3600000; // Within 1 hour\n        const sameSport = game.sport.toLowerCase() === sport.toLowerCase();\n        const sameLocation = game.location.toLowerCase().includes(location.toLowerCase()) || location.toLowerCase().includes(game.location.toLowerCase());\n        \n        return sameDate && sameTime && sameSport && sameLocation;\n      });\n      \n      if (duplicates.length > 0) {\n        return `Similar ${sport} game already exists at ${location} on ${date} around ${time}`;\n      }\n      \n      return null;\n    } catch (error) {\n      console.error('Error checking duplicates:', error);\n      return null;\n    }\n  };\n\n  const validateField = (name: string, value: string): string | null => {\n    switch (name) {\n      case 'date':\n        if (!value) return null;\n        const today = new Date();\n        const chosen = new Date(value + 'T00:00:00');\n        if (chosen < new Date(today.toDateString())) {\n          return 'Date cannot be in the past';\n        }\n        return null;\n        \n      case 'time':\n        if (!value) return null;\n        const hour = parseInt(value.split(':')[0]);\n        if (hour < 6 || hour > 23) {\n          return 'Unusual time - games typically happen 6 AM - 11 PM';\n        }\n        if (hour >= 2 && hour <= 5) {\n          return 'Did you mean PM instead of AM?';\n        }\n        return null;\n        \n      case 'maxPlayers':\n        if (!value) return null;\n        const num = parseInt(value);\n        if (num < 2) return 'Need at least 2 players';\n        if (num > 100) return 'That seems like a lot of players - double check?';\n        \n        // Smart capacity check based on sport\n        const sportLower = formData.sport?.toLowerCase();\n        if (sportLower === 'tennis' && num > 4) return 'Tennis usually has 2-4 players';\n        if (sportLower === 'basketball' && num > 10) return 'Basketball usually has 6-10 players';\n        if (sportLower === 'soccer' && num > 22) return 'Soccer usually has up to 22 players';\n        \n        return null;\n        \n      case 'location':\n        if (!value) return null;\n        if (value.length < 3) return 'Location too short';\n        if (value.toLowerCase().includes('ocean') || value.toLowerCase().includes('sea')) {\n          return 'Are you sure this location is correct?';\n        }\n        if (value.toLowerCase().includes('home') || value.toLowerCase().includes('house')) {\n          return 'Consider using a public venue for safety';\n        }\n        return null;\n        \n      case 'cost':\n        if (!value) return null;\n        const cost = parseFloat(value);\n        if (cost < 0) return 'Cost cannot be negative';\n        if (cost > 500) return 'That seems expensive - double check?';\n        return null;\n        \n      case 'duration':\n        if (!value) return null;\n        const duration = parseInt(value);\n        if (duration < 15) return 'Duration should be at least 15 minutes';\n        if (duration > 480) return 'Duration seems too long - max 8 hours';\n        if (duration > 240) return 'That\\'s a long game - are you sure?';\n        return null;\n        \n      default:\n        return null;\n    }\n  };\n\n  const handleInputChange = (name: string, value: string) => {\n    setFormData(prev => {\n      const newData = { ...prev, [name]: value };\n      \n      // Auto-generate title when sport, time, or location changes (only if title is empty or matches previous auto-generated title)\n      const currentAutoTitle = generateGameTitle(prev.sport, prev.time, prev.location);\n      const newAutoTitle = generateGameTitle(\n        name === 'sport' ? value : prev.sport,\n        name === 'time' ? value : prev.time,\n        name === 'location' ? value : prev.location\n      );\n      \n      if ((name === 'sport' || name === 'time' || name === 'location') && \n          (!prev.title || prev.title === currentAutoTitle) && newAutoTitle) {\n        newData.title = newAutoTitle;\n      }\n      \n      // Auto-set max players based on sport\n      if (name === 'sport' && sportDefaults[value.toLowerCase()]) {\n        newData.maxPlayers = sportDefaults[value.toLowerCase()].maxPlayers.toString();\n      }\n      \n      // Save location to recent locations\n      if (name === 'location' && value.trim()) {\n        const updated = [value, ...recentLocations.filter(loc => loc !== value)].slice(0, 5);\n        setRecentLocations(updated);\n        localStorage.setItem('recentGameLocations', JSON.stringify(updated));\n      }\n      \n      return newData;\n    });\n    \n    // Real-time validation\n    const fieldError = validateField(name, value);\n    setErrors(prev => {\n      if (fieldError) {\n        return { ...prev, [name]: fieldError };\n      } else {\n        const { [name]: _removed, ...rest } = prev;\n        return rest;\n      }\n    });\n\n    // Check for duplicate games when all key fields are filled\n    if (name === 'location' && formData.sport && formData.date && formData.time && value) {\n      checkForDuplicateGame(formData.sport, formData.date, formData.time, value).then(duplicateError => {\n        if (duplicateError) {\n          setErrors(prev => ({ ...prev, duplicate: duplicateError }));\n        } else {\n          setErrors(prev => {\n            const { duplicate: _removed, ...rest } = prev;\n            return rest;\n          });\n        }\n      });\n    }\n    \n    // Auto-advance to next step when current step is complete\n    setTimeout(() => {\n      if (isStepComplete(currentStep) && !Object.keys(errors).length) {\n        if (currentStep < steps.length) {\n          setCurrentStep(currentStep + 1);\n        }\n      }\n    }, 500);\n  };\n  \n  const isStepComplete = (step: number): boolean => {\n    const stepFields = steps[step - 1]?.fields || [];\n    const isComplete = stepFields.every(field => {\n      const value = formData[field as keyof typeof formData];\n      return value && value.toString().trim() !== '';\n    });\n    \n    console.log('[CreateGame] isStepComplete - Step:', step, 'Fields:', stepFields, 'Complete:', isComplete, 'FormData:', formData);\n    return isComplete;\n  };\n\n  const validateCurrentStep = (): boolean => {\n    const stepErrors: Record<string, string> = {};\n    if (currentStep === 1) {\n      if (!formData.sport) stepErrors.sport = 'Please select a sport.';\n      if (!formData.date) stepErrors.date = 'Please choose a date.';\n      if (!formData.time) stepErrors.time = 'Please choose a time.';\n      if (!formData.duration) stepErrors.duration = 'Please set a duration.';\n      if (formData.date) {\n        const today = new Date();\n        const chosen = new Date(formData.date + 'T00:00:00');\n        if (chosen < new Date(today.toDateString())) {\n          stepErrors.date = 'Date cannot be in the past.';\n        }\n      }\n      if (formData.duration) {\n        const duration = parseInt(formData.duration);\n        if (duration < 15) stepErrors.duration = 'Duration should be at least 15 minutes.';\n        if (duration > 480) stepErrors.duration = 'Duration seems too long - max 8 hours.';\n      }\n    }\n    if (currentStep === 2) {\n      if (!formData.location.trim()) stepErrors.location = 'Location is required.';\n      const mp = parseInt(formData.maxPlayers, 10);\n      if (!formData.maxPlayers) stepErrors.maxPlayers = 'Max players is required.';\n      else if (Number.isNaN(mp) || mp <= 0) stepErrors.maxPlayers = 'Enter a valid number greater than 0.';\n      if (!formData.cost) stepErrors.cost = 'Please select a cost option.';\n    }\n    if (currentStep === 3) {\n      if (!formData.skillLevel) stepErrors.skillLevel = 'Please select a skill level.';\n    }\n    \n    console.log('[CreateGame] Validation - Step:', currentStep, 'Errors:', stepErrors, 'FormData:', formData);\n    setErrors(stepErrors);\n    return Object.keys(stepErrors).length === 0;\n  };\n\n  const handleNext = () => {\n    if (!validateCurrentStep()) return;\n    if (currentStep < steps.length) setCurrentStep(currentStep + 1);\n  };\n\n  const handleBack = () => {\n    if (currentStep > 1) {\n      setCurrentStep(currentStep - 1);\n    } else {\n      navigate(-1);\n    }\n  };\n\n  const handleSubmit = async () => {\n    if (!validateCurrentStep()) return;\n    setIsSubmitting(true);\n    setSubmitError(null);\n    try {\n      const { user } = useAppStore.getState();\n      console.log('[CreateGame] submit clicked. user =', user?.id);\n      if (!user) {\n        throw new Error('You must be logged in to create a game');\n      }\n\n      const gameData = {\n        title: formData.title,\n        sport: formData.sport,\n        date: formData.date,\n        time: formData.time,\n        duration: parseInt(formData.duration) || 60,\n        location: formData.location,\n        latitude: formData.latitude,\n        longitude: formData.longitude,\n        maxPlayers: parseInt(formData.maxPlayers) || 10,\n        cost: formData.cost || 'Free',\n        description: '', // Default empty description\n        imageUrl: formData.imageUrl,\n        skillLevel: formData.skillLevel,\n        minEloRating: formData.minEloRating ? parseInt(formData.minEloRating) : null,\n        maxEloRating: formData.maxEloRating ? parseInt(formData.maxEloRating) : null,\n        minReputation: formData.minReputation ? parseInt(formData.minReputation) : 70,\n        competitiveMode: formData.competitiveMode\n      };\n      console.log('[CreateGame] creating game with data =', gameData);\n      await SupabaseService.createGame(gameData as any);\n      navigate('/');\n    } catch (error) {\n      console.error('Error creating game:', error);\n      setSubmitError(error instanceof Error ? error.message : 'Failed to create game');\n    } finally {\n      setIsSubmitting(false);\n    }\n  };\n\n  const progress = (currentStep / steps.length) * 100;\n  const selectedSport = sportOptions.find(sport => sport.value === formData.sport);\n\n  const renderField = (name: string, label: string, type: string = 'text', options?: Array<{ value: string; label: string; icon?: React.ReactNode }>) => {\n    const value = formData[name as keyof typeof formData] as string;\n    const error = errors[name];\n    const isValid = value && !error;\n\n    if (type === 'select') {\n      return (\n        <div className=\"space-y-2\">\n          <label className=\"text-sm font-medium text-foreground\">{label}</label>\n          <select \n            value={value} \n            onChange={(e) => handleInputChange(name, e.target.value)}\n            className={`w-full p-3 border rounded-lg transition-colors bg-background text-foreground ${\n              error ? 'border-destructive bg-destructive/10' : \n              isValid ? 'border-green-500 bg-green-50 dark:bg-green-950/50 dark:border-green-400' : \n              'border-input hover:border-ring focus:border-ring focus:ring-2 focus:ring-ring/20'\n            }`}\n          >\n            <option value=\"\" className=\"bg-background text-foreground\">Select {label.toLowerCase()}</option>\n            {options?.map((option) => (\n              <option key={option.value} value={option.value} className=\"bg-background text-foreground\">\n                {option.label}\n              </option>\n            ))}\n          </select>\n          {error && <p className=\"text-sm text-destructive flex items-center gap-1\">\n            <span>‚ö†Ô∏è</span> {error}\n          </p>}\n          {isValid && !error && <p className=\"text-sm text-green-600 dark:text-green-400 flex items-center gap-1\">\n            <span>‚úÖ</span> Looks good!\n          </p>}\n        </div>\n      );\n    } else if (type === 'textarea') {\n      return (\n        <div className=\"space-y-2\">\n          <label className=\"text-sm font-medium flex items-center gap-2\">\n            {label}\n            {steps[currentStep - 1].fields.includes(name) && (\n              <span className=\"text-destructive\">*</span>\n            )}\n          </label>\n          <Textarea\n            value={value}\n            onChange={(e) => handleInputChange(name, e.target.value)}\n            placeholder={`Enter ${label.toLowerCase()}`}\n            className={`resize-none ${error ? 'border-destructive' : ''}`}\n            rows={3}\n          />\n          {error && (\n            <p className=\"text-sm text-destructive\">{error}</p>\n          )}\n        </div>\n      );\n    } else {\n      return (\n        <div className=\"space-y-2\">\n          <label className=\"text-sm font-medium flex items-center gap-2\">\n            {label}\n            {steps[currentStep - 1].fields.includes(name) && (\n              <span className=\"text-destructive\">*</span>\n            )}\n          </label>\n          <Input\n            type={type}\n            value={formData[name]}\n            onChange={(e) => handleInputChange(name, e.target.value)}\n            placeholder={`Enter ${label.toLowerCase()}`}\n            min={type === 'date' ? new Date().toISOString().split('T')[0] : undefined}\n            className={`transition-colors ${\n              error ? 'border-red-500 bg-red-50' : \n              isValid ? 'border-green-500 bg-green-50' : \n              'border-gray-300'\n            }`}\n          />\n          {error && <p className=\"text-sm text-red-500 dark:text-red-400 flex items-center gap-1\">\n            <span>‚ö†Ô∏è</span> {error}\n          </p>}\n          {isValid && !error && <p className=\"text-sm text-green-600 dark:text-green-400 flex items-center gap-1\">\n            <span>‚úÖ</span> Looks good!\n          </p>}\n        </div>\n      );\n    }\n  };\n\n  return (\n    <div className=\"min-h-screen bg-background\" style={{ paddingBottom: `${navigationHeight + 16}px` }}>\n      <div className=\"max-w-2xl mx-auto px-4 py-6\">\n        {/* Header */}\n        <div className=\"sticky top-0 bg-background/95 backdrop-blur-sm border-b border-border z-10\">\n          <div className=\"flex items-center justify-between px-4 py-4\">\n            <div className=\"flex items-center gap-4\">\n              <Button variant=\"ghost\" size=\"icon\" onClick={handleBack}>\n                <ArrowLeft className=\"w-5 h-5\" />\n              </Button>\n              <div>\n                <h1 className=\"text-xl font-semibold\">Create Game</h1>\n                <p className=\"text-sm text-muted-foreground\">\n                  {steps[currentStep - 1].title}\n                </p>\n              </div>\n            </div>\n          </div>\n        </div>\n\n        {/* Progress Bar */}\n        <div className=\"px-4 pb-4\">\n          <Progress value={progress} className=\"h-2\" />\n        </div>\n      </div>\n\n      <div className=\"px-4 pt-6\" style={{ paddingBottom: `${navigationHeight + 16}px` }}>\n        {/* Selected Sport Preview */}\n        {selectedSport && (\n          <div className=\"mb-6\">\n            <Card>\n              <CardContent className=\"pt-6\">\n                <div className=\"flex items-center gap-4\">\n                  <div className=\"w-12 h-12 bg-primary/10 rounded-lg flex items-center justify-center text-2xl\">\n                    {selectedSport.icon}\n                  </div>\n                  <div>\n                    <h3 className=\"font-semibold\">{formData.title || 'New Game'}</h3>\n                    <p className=\"text-sm text-muted-foreground\">{selectedSport.label}</p>\n                  </div>\n                </div>\n              </CardContent>\n            </Card>\n          </div>\n        )}\n\n        {/* Form Steps */}\n        {currentStep === 1 && (\n          <div className=\"space-y-6\">\n            <Card>\n              <CardHeader>\n                <CardTitle className=\"flex items-center gap-2\">\n                  <div className=\"w-8 h-8 bg-primary/10 rounded-full flex items-center justify-center text-primary font-semibold text-sm\">\n                    1\n                  </div>\n                  What & When\n                </CardTitle>\n              </CardHeader>\n              <CardContent className=\"space-y-6\">\n                {/* Sport Selection */}\n                <div className=\"space-y-2\">\n                  <label className=\"block text-sm font-medium text-foreground\">\n                    Sport\n                  </label>\n                  <div className=\"grid grid-cols-3 sm:grid-cols-4 gap-2\">\n                    {sportOptions.map((sport) => (\n                      <button\n                        key={sport.value}\n                        type=\"button\"\n                        onClick={() => handleInputChange('sport', sport.value)}\n                        className={`p-2 rounded-lg border-2 transition-all duration-200 ${\n                          formData.sport === sport.value\n                            ? 'border-primary bg-primary/10 text-primary'\n                            : 'border-input hover:border-ring text-foreground bg-background'\n                        }`}\n                      >\n                        <div className=\"text-lg mb-1\">{sport.icon}</div>\n                        <div className=\"text-xs font-medium\">{sport.label}</div>\n                      </button>\n                    ))}\n                  </div>\n                  {errors.sport && (\n                    <p className=\"text-sm text-destructive\">{errors.sport}</p>\n                  )}\n                </div>\n\n                {renderField('date', 'Date', 'date')}\n                \n                {/* Quick Time Selection */}\n                <div className=\"space-y-3\">\n                  <label className=\"block text-sm font-medium text-foreground\">\n                    Time\n                  </label>\n                  \n                  {/* Quick Time Buttons */}\n                  <div className=\"grid grid-cols-4 gap-2\">\n                    {quickTimes.map((timeOption) => (\n                      <button\n                        key={timeOption}\n                        type=\"button\"\n                        onClick={() => handleInputChange('time', timeOption)}\n                        className={`px-2 py-2 text-xs rounded-md border transition-colors ${\n                          formData.time === timeOption\n                            ? 'bg-primary text-primary-foreground border-primary'\n                            : 'bg-background text-foreground border-input hover:bg-muted hover:border-ring'\n                        }`}\n                      >\n                        {/* Convert 24-hour to 12-hour for display */}\n                        {new Date(`2000-01-01T${timeOption}:00`).toLocaleTimeString('en-US', {\n                          hour: 'numeric',\n                          minute: '2-digit',\n                          hour12: true\n                        })}\n                      </button>\n                    ))}\n                  </div>\n                  \n                  {/* Custom Time Input */}\n                  <div className=\"space-y-1\">\n                    <label className=\"text-xs text-muted-foreground\">Or enter custom time:</label>\n                    <Input\n                      type=\"time\"\n                      value={formData.time}\n                      onChange={(e) => handleInputChange('time', e.target.value)}\n                      className={errors.time ? 'border-destructive' : ''}\n                      placeholder=\"Select time\"\n                    />\n                  </div>\n                  \n                  {errors.time && (\n                    <p className=\"text-sm text-destructive\">{errors.time}</p>\n                  )}\n                </div>\n\n                {/* Duration Selection */}\n                <div className=\"space-y-3\">\n                  <label className=\"block text-sm font-medium text-foreground\">\n                    Duration <span className=\"text-destructive\">*</span>\n                  </label>\n                  \n                  {/* Quick Duration Buttons */}\n                  <div className=\"grid grid-cols-4 gap-2\">\n                    {['30', '60', '90', '120'].map((durationOption) => (\n                      <button\n                        key={durationOption}\n                        type=\"button\"\n                        onClick={() => handleInputChange('duration', durationOption)}\n                        className={`px-2 py-2 text-xs rounded-md border transition-colors ${\n                          formData.duration === durationOption\n                            ? 'bg-primary text-primary-foreground border-primary'\n                            : 'bg-background text-foreground border-input hover:bg-muted hover:border-ring'\n                        }`}\n                      >\n                        {durationOption} min\n                      </button>\n                    ))}\n                  </div>\n                  \n                  {/* Custom Duration Input */}\n                  <div className=\"space-y-1\">\n                    <label className=\"text-xs text-muted-foreground\">Or enter custom duration (minutes):</label>\n                    <Input\n                      type=\"number\"\n                      value={formData.duration}\n                      onChange={(e) => handleInputChange('duration', e.target.value)}\n                      className={errors.duration ? 'border-destructive' : ''}\n                      placeholder=\"Duration in minutes\"\n                      min=\"15\"\n                      max=\"480\"\n                    />\n                  </div>\n                  \n                  {errors.duration && (\n                    <p className=\"text-sm text-destructive\">{errors.duration}</p>\n                  )}\n                </div>\n              </CardContent>\n            </Card>\n          </div>\n        )}\n\n        {currentStep === 2 && (\n          <div className=\"space-y-6\">\n            <Card>\n              <CardHeader>\n                <CardTitle className=\"flex items-center gap-2\">\n                  <div className=\"w-8 h-8 bg-primary/10 rounded-full flex items-center justify-center text-primary font-semibold text-sm\">\n                    2\n                  </div>\n                  Where & Who\n                </CardTitle>\n              </CardHeader>\n              <CardContent className=\"space-y-6\">\n                {/* Location Input Field */}\n                <div className=\"space-y-2\">\n                  <label className=\"block text-sm font-medium text-foreground\">\n                    Location\n                  </label>\n                  <div className=\"relative\">\n                    <Input\n                      value={formData.location}\n                      onChange={(e) => {\n                        handleInputChange('location', e.target.value);\n                        console.log('Location input changed:', e.target.value);\n                        if (e.target.value.length > 2) {\n                          console.log('Triggering location search for:', e.target.value);\n                          searchLocations(e.target.value, userLat || undefined, userLng || undefined);\n                          setShowLocationSuggestions(true);\n                        } else {\n                          console.log('Hiding location suggestions');\n                          setShowLocationSuggestions(false);\n                        }\n                      }}\n                      placeholder=\"Enter location or address\"\n                      className={errors.location ? 'border-destructive' : ''}\n                    />\n                    <div className=\"absolute right-3 top-1/2 transform -translate-y-1/2 flex gap-2\">\n                      {isLocationLoading && <Loader2 className=\"w-4 h-4 animate-spin text-muted-foreground\" />}\n                      <Button\n                        type=\"button\"\n                        variant=\"ghost\"\n                        size=\"sm\"\n                        className=\"h-6 w-6 p-0\"\n                        onClick={async () => {\n                          if (userLat && userLng) {\n                            try {\n                              const response = await fetch(\n                                `https://nominatim.openstreetmap.org/reverse?format=json&lat=${userLat}&lon=${userLng}`\n                              );\n                              const data = await response.json();\n                              const address = data.display_name || `${userLat.toFixed(4)}, ${userLng.toFixed(4)}`;\n                              setFormData(prev => ({\n                                ...prev,\n                                location: address,\n                                latitude: userLat,\n                                longitude: userLng\n                              }));\n                            } catch (error) {\n                              console.error('Reverse geocoding failed:', error);\n                              setFormData(prev => ({\n                                ...prev,\n                                location: `${userLat.toFixed(4)}, ${userLng.toFixed(4)}`,\n                                latitude: userLat,\n                                longitude: userLng\n                              }));\n                            }\n                          }\n                        }}\n                        disabled={!userLat || !userLng}\n                        title={userLat && userLng ? \"Use my current location\" : geoError || \"Location not available\"}\n                      >\n                        <MapPin className=\"w-4 h-4\" />\n                      </Button>\n                    </div>\n                  </div>\n                  \n                  {/* Location Suggestions */}\n                  {showLocationSuggestions && (\n                    <div className=\"border border-border rounded-md bg-background shadow-lg max-h-48 overflow-y-auto\">\n                      {suggestions.length > 0 ? (\n                        suggestions.map((suggestion) => (\n                          <button\n                            key={suggestion.place_id}\n                            type=\"button\"\n                            className=\"w-full text-left px-3 py-2 hover:bg-muted border-b border-border last:border-b-0 flex items-center gap-2\"\n                            onClick={async () => {\n                              setFormData(prev => ({ ...prev, location: suggestion.description }));\n                              setShowLocationSuggestions(false);\n                              \n                              const coords = await geocodeLocation(suggestion.description);\n                              if (coords) {\n                                setFormData(prev => ({\n                                  ...prev,\n                                  latitude: coords.lat,\n                                  longitude: coords.lng\n                                }));\n                              }\n                            }}\n                          >\n                            <MapPin className=\"w-4 h-4 text-muted-foreground flex-shrink-0\" />\n                            <div>\n                              <div className=\"font-medium\">{suggestion.structured_formatting.main_text}</div>\n                              <div className=\"text-sm text-muted-foreground\">{suggestion.structured_formatting.secondary_text}</div>\n                            </div>\n                          </button>\n                        ))\n                      ) : (\n                        <div className=\"px-3 py-2 text-sm text-muted-foreground\">\n                          {isLocationLoading ? 'Searching...' : 'No suggestions found. Try typing a more specific location.'}\n                        </div>\n                      )}\n                    </div>\n                  )}\n                  \n                  {errors.location && (\n                    <p className=\"text-sm text-destructive\">{errors.location}</p>\n                  )}\n                </div>\n\n                {renderField('maxPlayers', 'Max Players', 'number')}\n                \n                {/* Cost Selection */}\n                <div className=\"space-y-2\">\n                  <label className=\"text-sm font-medium text-foreground\">\n                    Cost <span className=\"text-destructive\">*</span>\n                  </label>\n                  <Select value={formData.cost} onValueChange={(value) => handleInputChange('cost', value)}>\n                    <SelectTrigger className={errors.cost ? 'border-destructive' : ''}>\n                      <SelectValue placeholder=\"Select cost\" />\n                    </SelectTrigger>\n                    <SelectContent>\n                      <SelectItem value=\"FREE\">Free</SelectItem>\n                      <SelectItem value=\"$5\">$5 per person</SelectItem>\n                      <SelectItem value=\"$10\">$10 per person</SelectItem>\n                      <SelectItem value=\"$15\">$15 per person</SelectItem>\n                      <SelectItem value=\"$20\">$20 per person</SelectItem>\n                      <SelectItem value=\"custom\">Custom amount</SelectItem>\n                    </SelectContent>\n                  </Select>\n                  {errors.cost && (\n                    <p className=\"text-sm text-destructive flex items-center gap-1\">\n                      <span>‚ö†Ô∏è</span> {errors.cost}\n                    </p>\n                  )}\n                  {formData.cost && !errors.cost && (\n                    <p className=\"text-sm text-green-600 dark:text-green-400 flex items-center gap-1\">\n                      <span>‚úÖ</span> Looks good!\n                    </p>\n                  )}\n                </div>\n              </CardContent>\n            </Card>\n          </div>\n        )}\n\n        {currentStep === 3 && (\n          <div className=\"space-y-6\">\n            <Card>\n              <CardHeader>\n                <CardTitle className=\"flex items-center gap-2\">\n                  <div className=\"w-8 h-8 bg-primary/10 rounded-full flex items-center justify-center text-primary font-semibold text-sm\">\n                    3\n                  </div>\n                  Skill & Requirements\n                </CardTitle>\n              </CardHeader>\n              <CardContent className=\"space-y-6\">\n                {/* Skill Level Selection */}\n                <div className=\"space-y-3\">\n                  <label className=\"block text-sm font-medium text-foreground\">\n                    Skill Level\n                  </label>\n                  <div className=\"grid grid-cols-2 gap-3\">\n                    {[\n                      { value: 'beginner', label: 'Beginner', description: 'New to the sport' },\n                      { value: 'intermediate', label: 'Intermediate', description: 'Some experience' },\n                      { value: 'advanced', label: 'Advanced', description: 'Experienced player' },\n                      { value: 'competitive', label: 'Competitive', description: 'High skill level' },\n                      { value: 'mixed', label: 'Mixed', description: 'All skill levels welcome' }\n                    ].map((skill) => (\n                      <button\n                        key={skill.value}\n                        type=\"button\"\n                        onClick={() => handleInputChange('skillLevel', skill.value)}\n                        className={`p-3 rounded-lg border-2 text-left transition-all duration-200 ${\n                          formData.skillLevel === skill.value\n                            ? 'border-primary bg-primary/10 text-primary'\n                            : 'border-input hover:border-ring text-foreground bg-background'\n                        }`}\n                      >\n                        <div className=\"font-medium text-sm\">{skill.label}</div>\n                        <div className=\"text-xs text-muted-foreground mt-1\">{skill.description}</div>\n                      </button>\n                    ))}\n                  </div>\n                </div>\n\n                {/* Competitive Mode Toggle */}\n                <div className=\"space-y-3\">\n                  <div className=\"flex items-center justify-between\">\n                    <div>\n                      <label className=\"text-sm font-medium text-foreground\">Competitive Mode</label>\n                      <p className=\"text-xs text-muted-foreground\">Stricter skill matching and ELO tracking</p>\n                    </div>\n                    <button\n                      type=\"button\"\n                      onClick={() => handleInputChange('competitiveMode', (!formData.competitiveMode).toString())}\n                      className={`relative inline-flex h-6 w-11 items-center rounded-full transition-colors ${\n                        formData.competitiveMode ? 'bg-primary' : 'bg-muted'\n                      }`}\n                    >\n                      <span\n                        className={`inline-block h-4 w-4 transform rounded-full bg-white transition-transform ${\n                          formData.competitiveMode ? 'translate-x-6' : 'translate-x-1'\n                        }`}\n                      />\n                    </button>\n                  </div>\n                </div>\n\n                {/* ELO Rating Requirements (shown when competitive mode is enabled) */}\n                {formData.competitiveMode && (\n                  <div className=\"space-y-4 p-4 bg-muted/50 rounded-lg\">\n                    <h4 className=\"text-sm font-medium mb-2\">ELO Rating Requirements</h4>\n                    <div className=\"text-sm text-muted-foreground\">\n                      {formData.minEloRating && formData.maxEloRating ? (\n                        `Players must have ELO between ${formData.minEloRating} and ${formData.maxEloRating}`\n                      ) : formData.minEloRating ? (\n                        `Players must have ELO of at least ${formData.minEloRating}`\n                      ) : formData.maxEloRating ? (\n                        `Players must have ELO no higher than ${formData.maxEloRating}`\n                      ) : null}\n                    </div>\n                    <div className=\"grid grid-cols-2 gap-4\">\n                      <div className=\"space-y-2\">\n                        <label className=\"text-sm font-medium text-foreground\">Minimum ELO</label>\n                        <Input\n                          type=\"number\"\n                          value={formData.minEloRating}\n                          onChange={(e) => handleInputChange('minEloRating', e.target.value)}\n                          placeholder=\"e.g. 1200\"\n                          min=\"100\"\n                          max=\"3000\"\n                        />\n                        <p className=\"text-xs text-muted-foreground\">Leave empty for no minimum</p>\n                      </div>\n                      <div className=\"space-y-2\">\n                        <label className=\"text-sm font-medium text-foreground\">Maximum ELO</label>\n                        <Input\n                          type=\"number\"\n                          value={formData.maxEloRating}\n                          onChange={(e) => handleInputChange('maxEloRating', e.target.value)}\n                          placeholder=\"e.g. 1800\"\n                          min=\"100\"\n                          max=\"3000\"\n                        />\n                        <p className=\"text-xs text-muted-foreground\">Leave empty for no maximum</p>\n                      </div>\n                    </div>\n                  </div>\n                )}\n\n                {/* Reputation Requirement */}\n                <div className=\"space-y-3\">\n                  <label className=\"text-sm font-medium text-foreground\">Minimum Reputation</label>\n                  <div className=\"space-y-2\">\n                    <Input\n                      type=\"number\"\n                      value={formData.minReputation}\n                      onChange={(e) => handleInputChange('minReputation', e.target.value)}\n                      placeholder=\"70\"\n                      min=\"0\"\n                      max=\"100\"\n                    />\n                    <p className=\"text-xs text-muted-foreground\">\n                      Players need at least this reputation score to join (0-100). \n                      Lower values allow players with poor attendance history.\n                    </p>\n                  </div>\n                </div>\n\n                {/* Skill Level Info */}\n                <Alert>\n                  <AlertCircle className=\"h-4 w-4\" />\n                  <AlertDescription>\n                    {formData.skillLevel === 'mixed' && \n                      \"Mixed skill level games welcome players of all abilities. Great for casual, fun games!\"\n                    }\n                    {formData.skillLevel === 'beginner' && \n                      \"Beginner games are perfect for new players learning the sport. Experienced players may find it too easy.\"\n                    }\n                    {formData.skillLevel === 'competitive' && \n                      \"Competitive games are for skilled players who want serious competition. ELO ratings will be tracked.\"\n                    }\n                    {(formData.skillLevel === 'intermediate' || formData.skillLevel === 'advanced') && \n                      `${formData.skillLevel.charAt(0).toUpperCase() + formData.skillLevel.slice(1)} level games are for players with some experience in the sport.`\n                    }\n                  </AlertDescription>\n                </Alert>\n              </CardContent>\n            </Card>\n          </div>\n        )}\n\n        {currentStep === 4 && (\n          <div className=\"space-y-6\">\n            <Card>\n              <CardHeader>\n                <CardTitle className=\"flex items-center gap-2\">\n                  <div className=\"w-8 h-8 bg-primary/10 rounded-full flex items-center justify-center text-primary font-semibold text-sm\">\n                    4\n                  </div>\n                  Review & Create\n                </CardTitle>\n              </CardHeader>\n              <CardContent className=\"space-y-6\">\n                {/* Game Summary */}\n                <div className=\"space-y-4\">\n                  <h3 className=\"text-lg font-semibold\">Game Summary</h3>\n                  \n                  <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n                    <div className=\"space-y-2\">\n                      <div className=\"flex items-center gap-2\">\n                        <span className=\"text-sm font-medium text-muted-foreground\">Sport:</span>\n                        <span className=\"text-sm\">{selectedSport?.icon} {selectedSport?.label}</span>\n                      </div>\n                      <div className=\"flex items-center gap-2\">\n                        <span className=\"text-sm font-medium text-muted-foreground\">Date:</span>\n                        <span className=\"text-sm\">{formData.date}</span>\n                      </div>\n                      <div className=\"flex items-center gap-2\">\n                        <span className=\"text-sm font-medium text-muted-foreground\">Time:</span>\n                        <span className=\"text-sm\">\n                          {formData.time ? new Date(`2000-01-01T${formData.time}:00`).toLocaleTimeString('en-US', {\n                            hour: 'numeric',\n                            minute: '2-digit',\n                            hour12: true\n                          }) : ''}\n                        </span>\n                      </div>\n                      <div className=\"flex items-center gap-2\">\n                        <span className=\"text-sm font-medium text-muted-foreground\">Duration:</span>\n                        <span className=\"text-sm\">{formData.duration} minutes</span>\n                      </div>\n                      <div className=\"flex items-center gap-2\">\n                        <span className=\"text-sm font-medium text-muted-foreground\">Skill Level:</span>\n                        <span className=\"text-sm capitalize\">{formData.skillLevel}</span>\n                        {formData.competitiveMode && (\n                          <span className=\"text-xs bg-primary/10 text-primary px-2 py-1 rounded\">Competitive</span>\n                        )}\n                      </div>\n                    </div>\n                    \n                    <div className=\"space-y-2\">\n                      <div className=\"flex items-center gap-2\">\n                        <span className=\"text-sm font-medium text-muted-foreground\">Location:</span>\n                        <span className=\"text-sm\">{formData.location}</span>\n                      </div>\n                      <div className=\"flex items-center gap-2\">\n                        <span className=\"text-sm font-medium text-muted-foreground\">Max Players:</span>\n                        <span className=\"text-sm\">{formData.maxPlayers}</span>\n                      </div>\n                      <div className=\"flex items-center gap-2\">\n                        <span className=\"text-sm font-medium text-muted-foreground\">Cost:</span>\n                        <span className=\"text-sm\">{formData.cost}</span>\n                      </div>\n                      <div className=\"flex items-center gap-2\">\n                        <span className=\"text-sm font-medium text-muted-foreground\">Min Reputation:</span>\n                        <span className=\"text-sm\">{formData.minReputation}%</span>\n                      </div>\n                    </div>\n                  </div>\n\n                  {/* ELO Requirements Display */}\n                  {formData.competitiveMode && (formData.minEloRating || formData.maxEloRating) && (\n                    <div className=\"mt-4 p-3 bg-muted/50 rounded-lg\">\n                      <h4 className=\"text-sm font-medium mb-2\">ELO Requirements</h4>\n                      <div className=\"text-sm text-muted-foreground\">\n                        {formData.minEloRating && formData.maxEloRating ? (\n                          `Players must have ELO between ${formData.minEloRating} and ${formData.maxEloRating}`\n                        ) : formData.minEloRating ? (\n                          `Players must have ELO of at least ${formData.minEloRating}`\n                        ) : formData.maxEloRating ? (\n                          `Players must have ELO no higher than ${formData.maxEloRating}`\n                        ) : null}\n                      </div>\n                    </div>\n                  )}\n                </div>\n\n                {/* Ready to Create Alert */}\n                <Alert>\n                  <CheckCircle className=\"h-4 w-4\" />\n                  <AlertDescription>\n                    Ready to create \"{formData.title}\" for {formData.maxPlayers} players \n                    on {formData.date} at {formData.time ? new Date(`2000-01-01T${formData.time}:00`).toLocaleTimeString('en-US', {\n                      hour: 'numeric',\n                      minute: '2-digit',\n                      hour12: true\n                    }) : ''}?\n                  </AlertDescription>\n                </Alert>\n                \n                {errors.duplicate && (\n                  <div className=\"mt-2\">\n                    <p className=\"text-sm text-yellow-700 mt-1\">{errors.duplicate}</p>\n                    <p className=\"text-xs text-yellow-600 mt-2\">You can still create this game if it's intentional.</p>\n                  </div>\n                )}\n              </CardContent>\n            </Card>\n          </div>\n        )}\n        \n        {/* Submit Error Display */}\n        {submitError && (\n          <div className=\"mt-4\">\n            <Alert variant=\"destructive\">\n              <AlertDescription>{submitError}</AlertDescription>\n            </Alert>\n          </div>\n        )}\n      </div>\n\n      {/* Mobile Navigation */}\n      <div ref={navigationRef} className=\"fixed bottom-0 left-0 right-0 bg-background/95 backdrop-blur-sm border-t border-border safe-area-inset-bottom z-50\">\n        <div className=\"px-4 py-3 pb-safe\">\n          {/* Step Indicator for Mobile */}\n          <div className=\"flex justify-center mb-3 sm:hidden\">\n            <div className=\"flex items-center gap-2\">\n              {steps.map((step, index) => (\n                <div key={step.id} className=\"flex items-center\">\n                  <div className={`w-6 h-6 rounded-full flex items-center justify-center text-xs font-medium transition-colors ${\n                    currentStep === step.id \n                      ? 'bg-primary text-primary-foreground' \n                      : currentStep > step.id \n                        ? 'bg-green-500 text-white' \n                        : 'bg-muted text-muted-foreground'\n                  }`}>\n                    {currentStep > step.id ? '‚úì' : step.id}\n                  </div>\n                  {index < steps.length - 1 && (\n                    <div className={`w-8 h-0.5 mx-1 ${\n                      currentStep > step.id ? 'bg-green-500' : 'bg-muted'\n                    }`} />\n                  )}\n                </div>\n              ))}\n            </div>\n          </div>\n          \n          {/* Navigation Buttons */}\n          <div className=\"flex justify-between items-center gap-3\">\n            {currentStep > 1 ? (\n              <Button \n                variant=\"outline\" \n                onClick={handleBack}\n                className=\"min-h-[48px] px-4 sm:px-6 flex-1 max-w-[120px] touch-manipulation text-sm sm:text-base\"\n                size=\"lg\"\n              >\n                <ArrowLeft className=\"w-4 h-4 mr-1 sm:mr-2\" />\n                <span className=\"hidden sm:inline\">Previous</span>\n                <span className=\"sm:hidden\">Back</span>\n              </Button>\n            ) : (\n              <Button \n                variant=\"ghost\" \n                onClick={() => navigate(-1)}\n                className=\"min-h-[48px] px-4 touch-manipulation text-sm sm:text-base\"\n                size=\"lg\"\n              >\n                Cancel\n              </Button>\n            )}\n            \n            {/* Progress indicator for larger screens */}\n            <div className=\"hidden sm:flex items-center gap-2 text-sm text-muted-foreground\">\n              Step {currentStep} of {steps.length}\n            </div>\n            \n            {currentStep < steps.length ? (\n              <Button \n                onClick={handleNext}\n                disabled={!isStepComplete(currentStep) || Object.keys(errors).some(key => key !== 'duplicate')}\n                className=\"min-h-[48px] px-4 sm:px-6 flex-1 max-w-[120px] touch-manipulation text-sm sm:text-base\"\n                size=\"lg\"\n              >\n                <span className=\"hidden sm:inline\">Continue</span>\n                <span className=\"sm:hidden\">Next</span>\n                <ArrowLeft className=\"w-4 h-4 ml-1 sm:ml-2 rotate-180\" />\n              </Button>\n            ) : (\n              <Button \n                onClick={handleSubmit}\n                disabled={!isStepComplete(currentStep) || Object.keys(errors).some(key => key !== 'duplicate') || isSubmitting}\n                className=\"min-h-[48px] px-4 sm:px-6 flex-1 max-w-[140px] touch-manipulation text-sm sm:text-base\"\n                size=\"lg\"\n              >\n                {isSubmitting ? (\n                  <>\n                    <Loader2 className=\"w-4 h-4 mr-1 sm:mr-2 animate-spin\" />\n                    <span className=\"hidden sm:inline\">Creating...</span>\n                    <span className=\"sm:hidden\">Wait...</span>\n                  </>\n                ) : (\n                  <>\n                    <CheckCircle className=\"w-4 h-4 mr-1 sm:mr-2\" />\n                    <span className=\"hidden sm:inline\">Create Game</span>\n                    <span className=\"sm:hidden\">Create</span>\n                  </>\n                )}\n              </Button>\n            )}\n          </div>\n          \n          {/* Validation Status for Mobile */}\n          {!isStepComplete(currentStep) && (\n            <div className=\"mt-2 text-center\">\n              <p className=\"text-xs text-muted-foreground\">\n                Complete required fields to continue\n              </p>\n            </div>\n          )}\n          \n          {/* Debug Info - Remove in production */}\n          {process.env.NODE_ENV === 'development' && (\n            <div className=\"mt-2 text-xs text-muted-foreground text-center\">\n              Debug: Step {currentStep} complete: {isStepComplete(currentStep) ? 'Yes' : 'No'} | \n              Errors: {Object.keys(errors).filter(key => key !== 'duplicate').length} | \n              Submitting: {isSubmitting ? 'Yes' : 'No'}\n            </div>\n          )}\n        </div>\n      </div>\n    </div>\n  );\n}\n\nexport default CreateGame;"],"names":["useLocationSearch","suggestions","setSuggestions","useState","loading","setLoading","GOOGLE_API_KEY","geocodeLocation","useCallback","address","response","data","location","error","searchLocations","query","userLat","userLng","placesUrl","place","searchUrl","index","useGeolocation","options","state","setState","useEffect","prev","handleSuccess","position","handleError","errorMessage","geoOptions","SystemConfigService","key","supabase","value","defaultValue","cached","systemConfig","sportOptions","steps","DEFAULT_QUICK_TIMES","CreateGame","navigate","useNavigate","currentStep","setCurrentStep","isSubmitting","setIsSubmitting","errors","setErrors","submitError","setSubmitError","showLocationSuggestions","setShowLocationSuggestions","quickTimes","setQuickTimes","geoError","isLocationLoading","user","useAppStore","navigationRef","useRef","navigationHeight","setNavigationHeight","getDefaultDate","tomorrow","formData","setFormData","timeSlots","defaultMaxPlayers","defaultDuration","sportDefaults","now","currentHour","recentLocations","setRecentLocations","googleApiKey","parts","fallbackLocation","updateNavigationHeight","height","generateGameTitle","sport","time","hour","timeOfDay","locationName","sportName","templates","checkForDuplicateGame","date","SupabaseService","game","sameDate","sameTime","sameSport","sameLocation","validateField","name","today","num","sportLower","cost","duration","handleInputChange","newData","currentAutoTitle","newAutoTitle","updated","loc","fieldError","_removed","rest","duplicateError","isStepComplete","step","stepFields","isComplete","field","validateCurrentStep","stepErrors","mp","handleNext","handleBack","handleSubmit","gameData","progress","selectedSport","renderField","label","type","isValid","jsxs","e","option","jsx","Textarea","Input","Button","ArrowLeft","Progress","Card","CardContent","CardHeader","CardTitle","timeOption","durationOption","Loader2","MapPin","suggestion","coords","Select","SelectTrigger","SelectValue","SelectContent","SelectItem","skill","Alert","AlertCircle","AlertDescription","CheckCircle","Fragment"],"mappings":"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"}