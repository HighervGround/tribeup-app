import{j as s}from"./ui-Ca5AhCQM.js";import{r as m}from"./vendor-IUqyc6Bg.js";import{S as se,p as z,r as N,s as U,a as M,n as G,i as B,b as $,t as ne,c as Q,f as oe,d as ce,e as V,g as F,h as Y,j as le,k as re,u as J,l as D,m as W,o as q,q as L,C as ue,v as he,w as de,B as P,R as A}from"./index-CgFXuVCN.js";import{f as me}from"./dateUtils-But3d3jk.js";import{S as b}from"./skeleton-DDo3YZPa.js";import{P as X}from"./plus-uarbS-kF.js";import{M as fe}from"./map-pin-DffyMoe2.js";import{U as pe}from"./users-Byz5f1Hg.js";import{C as xe}from"./clock-C7S_tc4T.js";var ge=class extends se{constructor(e,t){super(),this.options=t,this.#s=e,this.#o=null,this.#n=z(),this.bindMethods(),this.setOptions(t)}#s;#e=void 0;#r=void 0;#t=void 0;#i;#a;#n;#o;#p;#d;#m;#l;#u;#c;#f=new Set;bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(this.#e.addObserver(this),Z(this.#e,this.options)?this.#h():this.updateResult(),this.#y())}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return K(this.#e,this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return K(this.#e,this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,this.#b(),this.#j(),this.#e.removeObserver(this)}setOptions(e){const t=this.options,i=this.#e;if(this.options=this.#s.defaultQueryOptions(e),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean"&&typeof this.options.enabled!="function"&&typeof N(this.options.enabled,this.#e)!="boolean")throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");this.#N(),this.#e.setOptions(this.options),t._defaulted&&!U(this.options,t)&&this.#s.getQueryCache().notify({type:"observerOptionsUpdated",query:this.#e,observer:this});const r=this.hasListeners();r&&ee(this.#e,i,this.options,t)&&this.#h(),this.updateResult(),r&&(this.#e!==i||N(this.options.enabled,this.#e)!==N(t.enabled,this.#e)||M(this.options.staleTime,this.#e)!==M(t.staleTime,this.#e))&&this.#x();const a=this.#g();r&&(this.#e!==i||N(this.options.enabled,this.#e)!==N(t.enabled,this.#e)||a!==this.#c)&&this.#v(a)}getOptimisticResult(e){const t=this.#s.getQueryCache().build(this.#s,e),i=this.createResult(t,e);return ye(this,i)&&(this.#t=i,this.#a=this.options,this.#i=this.#e.state),i}getCurrentResult(){return this.#t}trackResult(e,t){return new Proxy(e,{get:(i,r)=>(this.trackProp(r),t?.(r),r==="promise"&&!this.options.experimental_prefetchInRender&&this.#n.status==="pending"&&this.#n.reject(new Error("experimental_prefetchInRender feature flag is not enabled")),Reflect.get(i,r))})}trackProp(e){this.#f.add(e)}getCurrentQuery(){return this.#e}refetch({...e}={}){return this.fetch({...e})}fetchOptimistic(e){const t=this.#s.defaultQueryOptions(e),i=this.#s.getQueryCache().build(this.#s,t);return i.fetch().then(()=>this.createResult(i,t))}fetch(e){return this.#h({...e,cancelRefetch:e.cancelRefetch??!0}).then(()=>(this.updateResult(),this.#t))}#h(e){this.#N();let t=this.#e.fetch(this.options,e);return e?.throwOnError||(t=t.catch(G)),t}#x(){this.#b();const e=M(this.options.staleTime,this.#e);if(B||this.#t.isStale||!$(e))return;const i=ne(this.#t.dataUpdatedAt,e)+1;this.#l=Q.setTimeout(()=>{this.#t.isStale||this.updateResult()},i)}#g(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(this.#e):this.options.refetchInterval)??!1}#v(e){this.#j(),this.#c=e,!(B||N(this.options.enabled,this.#e)===!1||!$(this.#c)||this.#c===0)&&(this.#u=Q.setInterval(()=>{(this.options.refetchIntervalInBackground||oe.isFocused())&&this.#h()},this.#c))}#y(){this.#x(),this.#v(this.#g())}#b(){this.#l&&(Q.clearTimeout(this.#l),this.#l=void 0)}#j(){this.#u&&(Q.clearInterval(this.#u),this.#u=void 0)}createResult(e,t){const i=this.#e,r=this.options,a=this.#t,c=this.#i,n=this.#a,o=e!==i?e.state:this.#r,{state:u}=e;let l={...u},j=!1,d;if(t._optimisticResults){const x=this.hasListeners(),w=!x&&Z(e,t),y=x&&ee(e,i,t,r);(w||y)&&(l={...l,...ce(u.data,e.options)}),t._optimisticResults==="isRestoring"&&(l.fetchStatus="idle")}let{error:S,errorUpdatedAt:T,status:R}=l;d=l.data;let C=!1;if(t.placeholderData!==void 0&&d===void 0&&R==="pending"){let x;a?.isPlaceholderData&&t.placeholderData===n?.placeholderData?(x=a.data,C=!0):x=typeof t.placeholderData=="function"?t.placeholderData(this.#m?.state.data,this.#m):t.placeholderData,x!==void 0&&(R="success",d=V(a?.data,x,t),j=!0)}if(t.select&&d!==void 0&&!C)if(a&&d===c?.data&&t.select===this.#p)d=this.#d;else try{this.#p=t.select,d=t.select(d),d=V(a?.data,d,t),this.#d=d,this.#o=null}catch(x){this.#o=x}this.#o&&(S=this.#o,d=this.#d,T=Date.now(),R="error");const O=l.fetchStatus==="fetching",k=R==="pending",E=R==="error",_=k&&O,h=d!==void 0,f={status:R,fetchStatus:l.fetchStatus,isPending:k,isSuccess:R==="success",isError:E,isInitialLoading:_,isLoading:_,data:d,dataUpdatedAt:l.dataUpdatedAt,error:S,errorUpdatedAt:T,failureCount:l.fetchFailureCount,failureReason:l.fetchFailureReason,errorUpdateCount:l.errorUpdateCount,isFetched:l.dataUpdateCount>0||l.errorUpdateCount>0,isFetchedAfterMount:l.dataUpdateCount>o.dataUpdateCount||l.errorUpdateCount>o.errorUpdateCount,isFetching:O,isRefetching:O&&!k,isLoadingError:E&&!h,isPaused:l.fetchStatus==="paused",isPlaceholderData:j,isRefetchError:E&&h,isStale:H(e,t),refetch:this.refetch,promise:this.#n,isEnabled:N(t.enabled,e)!==!1};if(this.options.experimental_prefetchInRender){const x=I=>{f.status==="error"?I.reject(f.error):f.data!==void 0&&I.resolve(f.data)},w=()=>{const I=this.#n=f.promise=z();x(I)},y=this.#n;switch(y.status){case"pending":e.queryHash===i.queryHash&&x(y);break;case"fulfilled":(f.status==="error"||f.data!==y.value)&&w();break;case"rejected":(f.status!=="error"||f.error!==y.reason)&&w();break}}return f}updateResult(){const e=this.#t,t=this.createResult(this.#e,this.options);if(this.#i=this.#e.state,this.#a=this.options,this.#i.data!==void 0&&(this.#m=this.#e),U(t,e))return;this.#t=t;const i=()=>{if(!e)return!0;const{notifyOnChangeProps:r}=this.options,a=typeof r=="function"?r():r;if(a==="all"||!a&&!this.#f.size)return!0;const c=new Set(a??this.#f);return this.options.throwOnError&&c.add("error"),Object.keys(this.#t).some(n=>{const v=n;return this.#t[v]!==e[v]&&c.has(v)})};this.#w({listeners:i()})}#N(){const e=this.#s.getQueryCache().build(this.#s,this.options);if(e===this.#e)return;const t=this.#e;this.#e=e,this.#r=e.state,this.hasListeners()&&(t?.removeObserver(this),e.addObserver(this))}onQueryUpdate(){this.updateResult(),this.hasListeners()&&this.#y()}#w(e){F.batch(()=>{e.listeners&&this.listeners.forEach(t=>{t(this.#t)}),this.#s.getQueryCache().notify({query:this.#e,type:"observerResultsUpdated"})})}};function ve(e,t){return N(t.enabled,e)!==!1&&e.state.data===void 0&&!(e.state.status==="error"&&t.retryOnMount===!1)}function Z(e,t){return ve(e,t)||e.state.data!==void 0&&K(e,t,t.refetchOnMount)}function K(e,t,i){if(N(t.enabled,e)!==!1&&M(t.staleTime,e)!=="static"){const r=typeof i=="function"?i(e):i;return r==="always"||r!==!1&&H(e,t)}return!1}function ee(e,t,i,r){return(e!==t||N(r.enabled,e)===!1)&&(!i.suspense||e.state.status!=="error")&&H(e,i)}function H(e,t){return N(t.enabled,e)!==!1&&e.isStaleByTime(M(t.staleTime,e))}function ye(e,t){return!U(e.getCurrentResult(),t)}var be=class extends se{#s;#e=void 0;#r;#t;constructor(e,t){super(),this.#s=e,this.setOptions(t),this.bindMethods(),this.#i()}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(e){const t=this.options;this.options=this.#s.defaultMutationOptions(e),U(this.options,t)||this.#s.getMutationCache().notify({type:"observerOptionsUpdated",mutation:this.#r,observer:this}),t?.mutationKey&&this.options.mutationKey&&Y(t.mutationKey)!==Y(this.options.mutationKey)?this.reset():this.#r?.state.status==="pending"&&this.#r.setOptions(this.options)}onUnsubscribe(){this.hasListeners()||this.#r?.removeObserver(this)}onMutationUpdate(e){this.#i(),this.#a(e)}getCurrentResult(){return this.#e}reset(){this.#r?.removeObserver(this),this.#r=void 0,this.#i(),this.#a()}mutate(e,t){return this.#t=t,this.#r?.removeObserver(this),this.#r=this.#s.getMutationCache().build(this.#s,this.options),this.#r.addObserver(this),this.#r.execute(e)}#i(){const e=this.#r?.state??le();this.#e={...e,isPending:e.status==="pending",isSuccess:e.status==="success",isError:e.status==="error",isIdle:e.status==="idle",mutate:this.mutate,reset:this.reset}}#a(e){F.batch(()=>{if(this.#t&&this.hasListeners()){const t=this.#e.variables,i=this.#e.context;e?.type==="success"?(this.#t.onSuccess?.(e.data,t,i),this.#t.onSettled?.(e.data,null,t,i)):e?.type==="error"&&(this.#t.onError?.(e.error,t,i),this.#t.onSettled?.(void 0,e.error,t,i))}this.listeners.forEach(t=>{t(this.#e)})})}},ie=m.createContext(!1),je=()=>m.useContext(ie);ie.Provider;function Ne(){let e=!1;return{clearReset:()=>{e=!1},reset:()=>{e=!0},isReset:()=>e}}var we=m.createContext(Ne()),Se=()=>m.useContext(we),Re=(e,t)=>{(e.suspense||e.throwOnError||e.experimental_prefetchInRender)&&(t.isReset()||(e.retryOnMount=!1))},Ce=e=>{m.useEffect(()=>{e.clearReset()},[e])},Oe=({result:e,errorResetBoundary:t,throwOnError:i,query:r,suspense:a})=>e.isError&&!t.isReset()&&!e.isFetching&&r&&(a&&e.data===void 0||re(i,[e.error,r])),Ee=e=>{if(e.suspense){const i=a=>a==="static"?a:Math.max(a??1e3,1e3),r=e.staleTime;e.staleTime=typeof r=="function"?(...a)=>i(r(...a)):i(r),typeof e.gcTime=="number"&&(e.gcTime=Math.max(e.gcTime,1e3))}},ke=(e,t)=>e.isLoading&&e.isFetching&&!t,De=(e,t)=>e?.suspense&&t.isPending,te=(e,t,i)=>t.fetchOptimistic(e).catch(()=>{i.clearReset()});function Pe(e,t,i){const r=je(),a=Se(),c=J(),n=c.defaultQueryOptions(e);c.getDefaultOptions().queries?._experimental_beforeQuery?.(n),n._optimisticResults=r?"isRestoring":"optimistic",Ee(n),Re(n,a),Ce(a);const v=!c.getQueryCache().get(n.queryHash),[o]=m.useState(()=>new t(c,n)),u=o.getOptimisticResult(n),l=!r&&e.subscribed!==!1;if(m.useSyncExternalStore(m.useCallback(j=>{const d=l?o.subscribe(F.batchCalls(j)):G;return o.updateResult(),d},[o,l]),()=>o.getCurrentResult(),()=>o.getCurrentResult()),m.useEffect(()=>{o.setOptions(n)},[n,o]),De(n,u))throw te(n,o,a);if(Oe({result:u,errorResetBoundary:a,throwOnError:n.throwOnError,query:c.getQueryCache().get(n.queryHash),suspense:n.suspense}))throw u.error;return c.getDefaultOptions().queries?._experimental_afterQuery?.(n,u),n.experimental_prefetchInRender&&!B&&ke(u,r)&&(v?te(n,o,a):c.getQueryCache().get(n.queryHash)?.promise)?.catch(G).finally(()=>{o.updateResult()}),n.notifyOnChangeProps?u:o.trackResult(u)}function Me(e,t){return Pe(e,ge)}function ae(e,t){const i=J(),[r]=m.useState(()=>new be(i,e));m.useEffect(()=>{r.setOptions(e)},[r,e]);const a=m.useSyncExternalStore(m.useCallback(n=>r.subscribe(F.batchCalls(n)),[r]),()=>r.getCurrentResult(),()=>r.getCurrentResult()),c=m.useCallback((n,v)=>{r.mutate(n,v).catch(G)},[r]);if(a.error&&re(r.options.throwOnError,[a.error]))throw a.error;return{...a,mutate:c,mutateAsync:a.mutate}}function Te(){const[e,t]=m.useState([]),[i,r]=m.useState(!0);return m.useEffect(()=>{let a,c;const n=async()=>{try{const{data:{user:o}}=await D.auth.getUser();if(!o)return;await D.from("user_presence").upsert({user_id:o.id,last_seen:new Date().toISOString(),is_online:!0});const u=new Date(Date.now()-5*60*1e3).toISOString(),{data:l,error:j}=await D.from("user_presence").select("user_id, last_seen, is_online").gte("last_seen",u).eq("is_online",!0);if(j){console.error("Error fetching user presence:",j);return}const d=(l||[]).map(S=>({userId:S.user_id,lastSeen:new Date(S.last_seen),isOnline:S.is_online}));t(d),r(!1)}catch(o){console.error("Error updating presence:",o),r(!1)}};return(async()=>{const{data:{user:o}}=await D.auth.getUser();if(!o){r(!1);return}c=D.channel("user-presence",{config:{presence:{key:o.id}}}),c.on("presence",{event:"sync"},()=>{const u=c.presenceState(),l=Object.values(u).flat().map(j=>({userId:j.user_id,lastSeen:new Date,isOnline:!0}));t(l),r(!1)}).on("presence",{event:"join"},({key:u,newPresences:l})=>{console.log("User joined:",u,l)}).on("presence",{event:"leave"},({key:u,leftPresences:l})=>{console.log("User left:",u,l)}).subscribe(async u=>{u==="SUBSCRIBED"&&await c.track({user_id:o.id,online_at:new Date().toISOString()})}),a=setInterval(n,3e4),n()})(),()=>{a&&clearInterval(a),c&&c.unsubscribe()}},[]),{onlineUsers:e,onlineCount:e.length,isLoading:i}}const g={all:["games"],lists:()=>[...g.all,"list"],list:e=>[...g.lists(),{filters:e}],details:()=>[...g.all,"detail"],detail:e=>[...g.details(),e],participants:e=>[...g.detail(e),"participants"]};function _e(){const{user:e}=W();return Me({queryKey:g.lists(),queryFn:async()=>{console.log("ðŸ” Fetching games with React Query");const t=await q.getGames();return console.log("âœ… Games fetched:",t.length),t},staleTime:2*60*1e3,cacheTime:5*60*1e3,enabled:!!e})}function Ie(){const e=J(),{user:t}=W();return ae({mutationFn:async i=>{console.log("ðŸ”§ Joining game:",i),await q.joinGame(i)},onMutate:async i=>{await e.cancelQueries({queryKey:g.lists()});const r=e.getQueryData(g.lists());return e.setQueryData(g.lists(),a=>a&&a.map(c=>c.id===i?{...c,isJoined:!0,currentPlayers:Math.min(c.currentPlayers+1,c.maxPlayers)}:c)),{previousGames:r}},onError:(i,r,a)=>{console.error("âŒ Join game error:",i),a?.previousGames&&e.setQueryData(g.lists(),a.previousGames),L.error("Failed to join game",{description:"Please try again later"})},onSuccess:(i,r)=>{console.log("âœ… Successfully joined game:",r),e.invalidateQueries({queryKey:g.participants(r)}),L.success("Joined game!",{description:"You're now part of this game"})}})}function Qe(){const e=J();return ae({mutationFn:async t=>{console.log("ðŸ”§ Leaving game:",t),await q.leaveGame(t)},onMutate:async t=>{await e.cancelQueries({queryKey:g.lists()});const i=e.getQueryData(g.lists());return e.setQueryData(g.lists(),r=>r&&r.map(a=>a.id===t?{...a,isJoined:!1,currentPlayers:Math.max(a.currentPlayers-1,0)}:a)),{previousGames:i}},onError:(t,i,r)=>{console.error("âŒ Leave game error:",t),r?.previousGames&&e.setQueryData(g.lists(),r.previousGames),L.error("Failed to leave game",{description:"Please try again later"})},onSuccess:(t,i)=>{console.log("âœ… Successfully left game:",i),e.invalidateQueries({queryKey:g.participants(i)}),L.success("Left game successfully",{description:"You've left this game"})}})}function Ue(){return s.jsx(ue,{className:"w-full",children:s.jsx(he,{className:"p-4",children:s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"flex items-start justify-between",children:[s.jsxs("div",{className:"space-y-2 flex-1",children:[s.jsx(b,{className:"h-5 w-3/4"}),s.jsx(b,{className:"h-4 w-1/2"})]}),s.jsx(b,{className:"h-8 w-16"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(b,{className:"h-4 w-4"}),s.jsx(b,{className:"h-4 w-2/3"})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(b,{className:"h-4 w-4"}),s.jsx(b,{className:"h-4 w-1/3"})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(b,{className:"h-4 w-4"}),s.jsx(b,{className:"h-4 w-1/4"})]})]}),s.jsx(b,{className:"h-4 w-full"}),s.jsx(b,{className:"h-4 w-3/4"}),s.jsxs("div",{className:"flex items-center justify-between pt-2",children:[s.jsx(b,{className:"h-6 w-20"}),s.jsx(b,{className:"h-8 w-16"})]})]})})})}function Ge({game:e,onSelect:t,onJoinLeave:i,isLoading:r}){const a=v=>{v.stopPropagation(),i(e.id)},c=()=>{t()},n=()=>e.category==="today"?s.jsx("span",{className:"inline-block bg-orange-100 text-orange-800 dark:bg-orange-900/30 dark:text-orange-300 text-xs px-2 py-1 rounded-full font-medium",children:"Today"}):e.category==="tomorrow"?s.jsx("span",{className:"inline-block bg-blue-100 text-blue-800 dark:bg-blue-900/30 dark:text-blue-300 text-xs px-2 py-1 rounded-full font-medium",children:"Tomorrow"}):null;return s.jsxs("div",{className:"bg-card rounded-lg p-4 border border-border cursor-pointer hover:shadow-md transition-shadow",onClick:c,children:[s.jsxs("div",{className:"flex items-start justify-between mb-3",children:[s.jsxs("div",{className:"flex-1 pr-4",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[s.jsx("h3",{className:"font-semibold text-lg",children:e.title}),n()]}),s.jsx("p",{className:"text-sm text-muted-foreground",children:e.sport})]}),s.jsxs("div",{className:"text-right flex-shrink-0",children:[s.jsx("div",{className:"text-sm font-medium",children:e.cost}),s.jsxs("div",{className:"text-xs text-muted-foreground",children:[e.currentPlayers,"/",e.maxPlayers," players"]})]})]}),s.jsxs("div",{className:"space-y-2 text-sm",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(fe,{className:"w-4 h-4 text-muted-foreground"}),s.jsx("span",{children:e.location})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(pe,{className:"w-4 h-4 text-muted-foreground"}),s.jsxs("span",{children:[e.currentPlayers,"/",e.maxPlayers," players"]})]}),e.distance&&s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{className:"text-muted-foreground",children:"ðŸ“"}),s.jsx("span",{children:e.distance})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(xe,{className:"w-4 h-4 text-muted-foreground"}),s.jsxs("span",{children:[e.date," at ",me(e.time)]})]})]}),s.jsx("p",{className:"text-sm text-muted-foreground mt-3",children:e.description}),s.jsxs("div",{className:"flex items-center justify-between mt-3",children:[e.isJoined?s.jsx("span",{className:"inline-block bg-success/20 text-success dark:bg-success/30 dark:text-success text-xs px-2 py-1 rounded",children:"Joined âœ“"}):s.jsx("div",{}),s.jsx("button",{onClick:a,disabled:r,className:`px-3 py-1 rounded text-sm font-medium transition-colors ${r?"opacity-50 cursor-not-allowed":e.isJoined?"bg-destructive/20 text-destructive dark:bg-destructive/30 dark:text-destructive hover:bg-destructive/30 dark:hover:bg-destructive/40":"bg-primary text-primary-foreground hover:bg-primary/90"}`,children:r?"...":e.isJoined?"Leave":"Join"})]})]})}function ze(){const e=de(),{user:t}=W(),[i,r]=m.useState(!1),[a,c]=m.useState(!1);m.useMemo(()=>t?.preferences?.sports??[],[t]);const{onlineCount:n,isLoading:v}=Te(),{data:o=[],isLoading:u,error:l,refetch:j}=_e(),d=Ie(),S=Qe(),T=h=>{o.find(f=>f.id===h)?.isJoined?S.mutate(h):d.mutate(h)},R=d.isPending||S.isPending,C=m.useMemo(()=>{const h=new Date,p=new Date(h);p.setDate(h.getDate()-h.getDay()),p.setHours(0,0,0,0);const f=new Date(p);f.setDate(p.getDate()+6),f.setHours(23,59,59,999);const x=o.filter(w=>{const y=new Date(w.date);return y>=p&&y<=f}).length;return{totalGames:o.length,thisWeekGames:x,onlinePlayers:n}},[o,n]),O=async()=>{if(!i){c(!1),r(!0);try{await j()}finally{r(!1)}}},k=h=>{e(`/game/${h}`)},E=()=>{e("/create")},_=o.map(h=>{const p=new Date(h.date),f=new Date,x=new Date(f);x.setDate(x.getDate()+1);let w="future",y=p.getTime();return p.toDateString()===f.toDateString()?(w="today",y=0):p.toDateString()===x.toDateString()&&(w="tomorrow",y=1),{...h,category:w,sortOrder:y,gameDate:p}}).sort((h,p)=>h.sortOrder!==p.sortOrder?h.sortOrder-p.sortOrder:h.gameDate.getTime()-p.gameDate.getTime());return u&&o.length===0?s.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center",children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary mx-auto mb-4"}),s.jsx("p",{className:"text-muted-foreground",children:"Loading games..."})]})}):a&&o.length===0?s.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center",children:s.jsxs("div",{className:"text-center space-y-3",children:[s.jsx("p",{className:"text-muted-foreground",children:"Connection issues detected. Showing sample games."}),s.jsxs(P,{onClick:O,variant:"outline",children:[s.jsx(A,{className:"w-4 h-4 mr-2"})," Try Again"]})]})}):s.jsx("div",{className:"min-h-screen bg-background",children:s.jsx("div",{className:"max-w-7xl mx-auto p-4 md:p-6",children:s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-12 gap-6",children:[s.jsxs("div",{className:"lg:col-span-8",children:[s.jsxs("div",{className:"flex items-center justify-between mb-6",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-2xl md:text-3xl font-bold",children:"TribeUp"}),s.jsx("p",{className:"text-muted-foreground",children:"Find your next game"})]}),s.jsxs(P,{onClick:E,className:"hidden md:flex",children:[s.jsx(X,{className:"w-4 h-4 mr-2"}),"Create Game"]}),s.jsx(P,{onClick:E,size:"icon",className:"md:hidden","aria-label":"Create new game",children:s.jsx(X,{className:"w-5 h-5"})})]}),s.jsxs("div",{className:"grid grid-cols-3 gap-4 mb-6 lg:hidden",children:[s.jsxs("div",{className:"bg-card rounded-lg p-4 text-center",children:[s.jsx("div",{className:"text-2xl font-bold text-primary",children:C.totalGames}),s.jsx("div",{className:"text-sm text-muted-foreground",children:"Active Games"})]}),s.jsxs("div",{className:"bg-card rounded-lg p-4 text-center",children:[s.jsx("div",{className:"text-2xl font-bold text-primary",children:v?"...":C.onlinePlayers}),s.jsx("div",{className:"text-sm text-muted-foreground",children:"Players Online"})]}),s.jsxs("div",{className:"bg-card rounded-lg p-4 text-center",children:[s.jsx("div",{className:"text-2xl font-bold text-primary",children:C.thisWeekGames}),s.jsx("div",{className:"text-sm text-muted-foreground",children:"This Week"})]})]}),s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsx("h2",{className:"text-lg md:text-xl font-semibold",children:"Upcoming Games"}),s.jsxs(P,{variant:"outline",size:"sm",onClick:O,disabled:u,className:"hidden md:flex",children:[s.jsx(A,{className:`w-4 h-4 mr-2 ${u?"animate-spin":""}`}),"Refresh"]}),s.jsx(P,{variant:"ghost",size:"sm",onClick:O,disabled:u,className:"md:hidden","aria-label":"Refresh games",children:s.jsx(A,{className:`w-4 h-4 ${u?"animate-spin":""}`})})]}),s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:u?Array.from({length:6}).map((h,p)=>s.jsx(Ue,{},p)):_.map(h=>s.jsx("div",{children:s.jsx(Ge,{game:h,onSelect:()=>k(h.id),onJoinLeave:T,isLoading:R})},h.id))})]}),s.jsx("div",{className:"hidden lg:block lg:col-span-4",children:s.jsxs("div",{className:"bg-card rounded-lg p-6 sticky top-6",children:[s.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Quick Stats"}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("span",{className:"text-muted-foreground",children:"Active Games"}),s.jsx("span",{className:"font-semibold",children:C.totalGames})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("span",{className:"text-muted-foreground",children:"Players Online"}),s.jsx("span",{className:"font-semibold",children:v?"...":C.onlinePlayers})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("span",{className:"text-muted-foreground",children:"This Week"}),s.jsx("span",{className:"font-semibold",children:C.thisWeekGames})]})]})]})})]})})})}export{ze as HomeScreen};
//# sourceMappingURL=HomeScreen-B_u1Ud63.js.map
