import{j as e}from"./ui-Bz49QZar.js";import{i as s,C as a,c as t,d as r,t as n,a as l,B as i,A as o,e as c,s as d,k as u}from"./index-C1rAQj-O.js";import{I as m}from"./input-CjRmnmg3.js";import{r as x,e as h}from"./vendor-CVaDA-xz.js";import{am as j,r as f,t as p}from"./utils-e0hEqRVR.js";import"./data-BwpJIDKS.js";function g({className:u,onEmailAuth:h,onForgotPassword:p,...g}){const[v,y]=x.useState(null),[N,w]=x.useState(null),[b,k]=x.useState(!1),[C,S]=x.useState(!1),[E,A]=x.useState(!1),[F,I]=x.useState(""),[P,q]=x.useState(""),[U,B]=x.useState("");return e.jsx("div",{className:s("flex flex-col gap-6",u),...g,children:e.jsxs(a,{children:[e.jsxs(t,{children:[e.jsx(r,{className:"text-2xl",children:"Welcome to TribeUp!"}),e.jsx(n,{children:"Find your tribe and join the game"})]}),e.jsx(l,{children:C?e.jsxs("form",{onSubmit:async e=>{if(e.preventDefault(),h){k(!0),y(null),w(null);try{await h(F,P,E),E&&w("Check your email for confirmation link!")}catch(s){y(s instanceof Error?s.message:"An error occurred")}finally{k(!1)}}},className:"space-y-4",children:[E&&e.jsxs("div",{children:[e.jsx("label",{htmlFor:"name",className:"text-sm font-medium",children:"Name"}),e.jsx(m,{id:"name",type:"text",value:U,onChange:e=>B(e.target.value),required:E,placeholder:"Enter your full name"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"email",className:"text-sm font-medium",children:"Email"}),e.jsx(m,{id:"email",type:"email",value:F,onChange:e=>I(e.target.value),required:!0,placeholder:"Enter your email"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"password",className:"text-sm font-medium",children:"Password"}),e.jsx(m,{id:"password",type:"password",value:P,onChange:e=>q(e.target.value),required:!0,placeholder:"Enter your password"})]}),v&&e.jsx(o,{variant:"destructive",children:e.jsx(c,{children:v})}),N&&e.jsx(o,{children:e.jsx(c,{children:N})}),e.jsx(i,{type:"submit",variant:"default",className:"w-full",disabled:b,style:{backgroundColor:"#FA4616",color:"white"},children:b?"Loading...":E?"Sign Up":"Sign In"}),e.jsxs("div",{className:"text-center space-y-2",children:[e.jsx("button",{type:"button",onClick:()=>A(!E),className:"text-sm text-muted-foreground hover:text-foreground",children:E?"Already have an account? Sign In":"Need an account? Sign Up"}),e.jsx("br",{}),!E&&p&&e.jsxs(e.Fragment,{children:[e.jsx("button",{type:"button",onClick:p,className:"text-sm text-muted-foreground hover:text-foreground",children:"Forgot your password?"}),e.jsx("br",{})]}),e.jsx("button",{type:"button",onClick:()=>S(!1),className:"text-sm text-muted-foreground hover:text-foreground",children:"Back to social login"})]})]}):e.jsxs("div",{className:"space-y-4",children:[e.jsxs(i,{variant:"outline",onClick:()=>(async e=>{k(!0),y(null);try{const{error:s}=await d.auth.signInWithOAuth({provider:e,options:{redirectTo:`${window.location.origin}/auth/callback`,queryParams:{access_type:"offline",prompt:"consent"}}});if(s)throw s}catch(s){y(s instanceof Error?s.message:"An error occurred"),k(!1)}})("google"),disabled:b,className:"w-full",children:[e.jsx(j,{className:"mr-2 h-4 w-4"}),"Continue with Google"]}),e.jsxs("div",{className:"relative my-6",children:[e.jsx("div",{className:"absolute inset-0 flex items-center",children:e.jsx("span",{className:"w-full border-t"})}),e.jsx("div",{className:"relative flex justify-center text-xs uppercase",children:e.jsx("span",{className:"bg-background px-2 text-muted-foreground",children:"Or continue with email"})})]}),e.jsxs(i,{variant:"outline",onClick:()=>S(!0),disabled:b,className:"w-full",children:[e.jsx(f,{className:"mr-2 h-4 w-4"}),"Continue with Email"]}),v&&e.jsx(o,{variant:"destructive",children:e.jsx(c,{children:v})})]})})]})})}function v(){h();const{signIn:s,signUp:a}=u();return e.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center p-4",children:e.jsxs("div",{className:"w-full max-w-md",children:[e.jsx(g,{onEmailAuth:async(e,t,r)=>{try{r?(await a(e,t,{name:e.split("@")[0],email:e}),p.success("Check your email for confirmation link!")):await s(e,t)}catch(n){throw n}},className:"w-full"}),e.jsx("div",{className:"mt-6 text-center",children:e.jsx("p",{className:"text-xs text-muted-foreground",children:"By continuing, you agree to our Terms of Service and Privacy Policy"})})]})})}export{v as default};
//# sourceMappingURL=Auth-DKyXWxz7.js.map
