import{c as S,u as C,r as t,j as e,B as c,S as L}from"./index-CLSPCKxk.js";import{u as z}from"./useGeolocation-A60NcH6i.js";import{I as G}from"./input-D8CqTDfZ.js";import{B as E}from"./badge-B8S8i3SD.js";import{A as $}from"./arrow-left-P4C-ubXU.js";import{S as y}from"./search-CDbbeqma.js";/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const T=[["line",{x1:"21",x2:"14",y1:"4",y2:"4",key:"obuewd"}],["line",{x1:"10",x2:"3",y1:"4",y2:"4",key:"1q6298"}],["line",{x1:"21",x2:"12",y1:"12",y2:"12",key:"1iu8h1"}],["line",{x1:"8",x2:"3",y1:"12",y2:"12",key:"ntss68"}],["line",{x1:"21",x2:"16",y1:"20",y2:"20",key:"14d8ph"}],["line",{x1:"12",x2:"3",y1:"20",y2:"20",key:"m0wm8r"}],["line",{x1:"14",x2:"14",y1:"2",y2:"6",key:"14e1ph"}],["line",{x1:"8",x2:"8",y1:"10",y2:"14",key:"1i6ji0"}],["line",{x1:"16",x2:"16",y1:"18",y2:"22",key:"1lctlv"}]],B=S("sliders-horizontal",T),M=[{name:"All Sports",value:"all"},{name:"Basketball",value:"basketball"},{name:"Soccer",value:"soccer"},{name:"Tennis",value:"tennis"},{name:"Pickleball",value:"pickleball"},{name:"Volleyball",value:"volleyball"},{name:"Football",value:"football"},{name:"Baseball",value:"baseball"}];function g({game:a,onSelect:i}){return e.jsxs("div",{className:"bg-card rounded-lg p-4 border border-border cursor-pointer hover:shadow-md transition-shadow",onClick:i,children:[e.jsxs("div",{className:"flex items-start justify-between mb-3",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-lg",children:a.title}),e.jsx("p",{className:"text-sm text-muted-foreground",children:a.sport})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("div",{className:"text-sm font-medium",children:a.cost}),e.jsxs("div",{className:"text-xs text-muted-foreground",children:[a.currentPlayers,"/",a.maxPlayers," players"]})]})]}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-muted-foreground",children:"ðŸ“"}),e.jsx("span",{children:a.location})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-muted-foreground",children:"ðŸ•’"}),e.jsxs("span",{children:[a.date," at ",a.time]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-muted-foreground",children:"ðŸ“"}),e.jsx("span",{children:a.distance})]})]}),e.jsx("p",{className:"text-sm text-muted-foreground mt-3",children:a.description}),a.isJoined&&e.jsx("div",{className:"mt-3",children:e.jsx("span",{className:"inline-block bg-green-100 text-green-800 text-xs px-2 py-1 rounded",children:"Joined"})})]})}function R(){const a=C(),{latitude:i,longitude:d}=z(),[r,u]=t.useState(""),[m,h]=t.useState("all"),[p,N]=t.useState(!1),[x,j]=t.useState("list"),[w,b]=t.useState([]),[A,v]=t.useState(!1);t.useEffect(()=>{(async()=>{v(!0);try{const l=await L.getGames();b(l)}catch(l){console.error("Error loading games:",l),b([])}finally{v(!1)}})()},[]);const f=s=>{a(`/game/${s}`)},k=()=>{a(-1)},n=w.filter(s=>{const l=s.title.toLowerCase().includes(r.toLowerCase())||s.sport.toLowerCase().includes(r.toLowerCase())||s.location.toLowerCase().includes(r.toLowerCase()),o=m==="all"||s.sport.toLowerCase()===m.toLowerCase();return l&&o});return e.jsxs("div",{className:"min-h-screen bg-background",children:[e.jsxs("div",{className:"sticky top-0 bg-background/95 backdrop-blur-sm border-b border-border z-10",children:[e.jsxs("div",{className:"flex items-center gap-4 px-4 py-4",children:[e.jsx(c,{variant:"ghost",size:"icon",onClick:k,children:e.jsx($,{className:"w-5 h-5"})}),e.jsxs("div",{className:"flex-1 relative",children:[e.jsx(y,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-muted-foreground"}),e.jsx(G,{value:r,onChange:s=>u(s.target.value),placeholder:"Search games, sports, locations...",className:"pl-10"})]}),e.jsx(c,{variant:"outline",size:"icon",onClick:()=>N(!p),children:e.jsx(B,{className:"w-4 h-4"})})]}),p&&e.jsx("div",{className:"px-4 pb-4 space-y-4",children:e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium mb-2 block",children:"Sort by"}),e.jsxs("select",{className:"w-full p-2 border rounded-md",children:[e.jsx("option",{value:"distance",children:"Distance"}),e.jsx("option",{value:"time",children:"Time"}),e.jsx("option",{value:"players",children:"Players Needed"}),e.jsx("option",{value:"cost",children:"Cost"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium mb-2 block",children:"Date"}),e.jsxs("select",{className:"w-full p-2 border rounded-md",children:[e.jsx("option",{value:"",children:"Any time"}),e.jsx("option",{value:"today",children:"Today"}),e.jsx("option",{value:"tomorrow",children:"Tomorrow"}),e.jsx("option",{value:"week",children:"This Week"}),e.jsx("option",{value:"month",children:"This Month"})]})]})]})}),e.jsx("div",{className:"px-4 pb-4",children:e.jsx("div",{className:"flex gap-2 overflow-x-auto pb-2",children:M.map(s=>e.jsx(E,{variant:m===s.value?"default":"outline",className:"cursor-pointer whitespace-nowrap",onClick:()=>h(s.value),children:s.name},s.value))})})]}),e.jsxs("div",{className:"px-4 py-6",children:[e.jsxs("div",{className:"flex gap-2 mb-6",children:[e.jsx(c,{variant:x==="list"?"default":"outline",size:"sm",onClick:()=>j("list"),children:"List View"}),e.jsx(c,{variant:x==="map"?"default":"outline",size:"sm",onClick:()=>j("map"),children:"Map View"})]}),x==="list"?e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{children:[e.jsxs("h2",{className:"text-lg font-semibold",children:[n.length," games found"]}),r&&e.jsxs("p",{className:"text-sm text-muted-foreground",children:['Results for "',r,'"']})]})}),e.jsx("div",{className:"space-y-4",children:n.map(s=>e.jsxs("div",{className:"relative",children:[e.jsx(g,{game:s,onSelect:()=>f(s.id)}),e.jsx("div",{className:"absolute top-4 left-4 bg-background/95 backdrop-blur-sm rounded px-2 py-1",children:e.jsx("span",{className:"text-xs text-muted-foreground",children:s.distance})})]},s.id))}),n.length===0&&e.jsxs("div",{className:"text-center py-12",children:[e.jsx("div",{className:"w-16 h-16 bg-muted rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx(y,{className:"w-6 h-6 text-muted-foreground"})}),e.jsx("h3",{className:"text-lg font-semibold mb-2",children:"No games found"}),e.jsx("p",{className:"text-muted-foreground mb-4",children:"Try adjusting your search or filters"}),e.jsx(c,{variant:"outline",onClick:()=>{u(""),h("all")},children:"Clear filters"})]})]}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-card rounded-lg p-4",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Games Near You"}),i&&d?e.jsxs("div",{className:"relative",children:[e.jsx("img",{src:`https://maps.googleapis.com/maps/api/staticmap?center=${i},${d}&zoom=13&size=600x400&maptype=roadmap&markers=color:red%7Clabel:You%7C${i},${d}${n.map(s=>s.latitude&&s.longitude?`&markers=color:blue%7Clabel:G%7C${s.latitude},${s.longitude}`:"").join("")}&key=AIzaSyCs_MsE3qt74h6eIR04QJqmf2FYgSys4UQ`,alt:"Map showing your location and nearby games",className:"w-full h-64 object-cover rounded-lg border",loading:"lazy",decoding:"async",onError:s=>{console.error("Map image failed to load");const l=s.target;l.style.display="none";const o=document.createElement("div");o.className="w-full h-64 bg-muted rounded-lg flex items-center justify-center border",o.innerHTML='<p class="text-muted-foreground">Map temporarily unavailable</p>',l.parentElement?.appendChild(o)}}),e.jsx("div",{className:"absolute top-2 right-2 bg-background/90 backdrop-blur-sm rounded-md px-2 py-1 text-xs",children:"ðŸ“ You â€¢ ðŸŽ® Games"})]}):e.jsxs("div",{className:"w-full h-64 bg-muted rounded-lg flex flex-col items-center justify-center border",children:[e.jsx("div",{className:"text-4xl mb-2",children:"ðŸ“"}),e.jsx("p",{className:"text-muted-foreground text-center",children:"Allow location access to see games on map"}),e.jsx("button",{onClick:()=>navigator.geolocation?.getCurrentPosition(()=>window.location.reload()),className:"mt-2 text-sm text-primary hover:underline",children:"Enable Location"})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"flex items-center justify-between mb-4",children:e.jsxs("h3",{className:"text-lg font-semibold",children:[n.length," games in map area"]})}),n.map(s=>e.jsx(g,{game:s,onSelect:()=>f(s.id)},s.id))]})]})]})]})}export{R as SearchDiscovery};
//# sourceMappingURL=SearchDiscovery-BYqQnpyD.js.map
