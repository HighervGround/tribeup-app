import{r as a}from"./vendor-IUqyc6Bg.js";import{u as y,m as S,k as _,t as n}from"./index-Ikr-E216.js";function L(){const l=y(),o=S(),u=_(),g=a.useCallback((e,r)=>{const t=window.location.origin,i=new URL(`${t}/game/${e}`);return r&&Object.entries(r).forEach(([s,c])=>{c&&i.searchParams.set(s,c)}),i.toString()},[]),d=a.useCallback((e,r,t)=>{const i=window.location.origin,s=new URL(`${i}/chat/${e}/${r}`);return t&&Object.entries(t).forEach(([c,f])=>{f&&s.searchParams.set(c,f)}),s.toString()},[]),m=a.useCallback(e=>`${window.location.origin}/user/${e}`,[]),h=a.useCallback(async e=>{const r=g(e.id,{utm_source:"app_share",utm_medium:"native_share",utm_campaign:"game_invitation"}),t={title:`Join me for ${e.title}!`,description:`${e.sport} game at ${e.location} on ${e.date} at ${e.time}. Tap to join!`,url:r};try{return navigator.share&&navigator.canShare&&navigator.canShare(t)?(await navigator.share(t),n.success("Game shared successfully!"),!0):(await navigator.clipboard.writeText(r),n.success("Game link copied to clipboard!",{description:"Share with your friends",action:{label:"Share again",onClick:()=>h(e)}}),!0)}catch(i){return console.error("Error sharing game:",i),n.error("Failed to share game"),!1}},[g]),w=a.useCallback(async e=>{const r=m(e.id),t={title:`Check out ${e.name}'s TribeUp profile`,description:`${e.name}${e.rating?` (${e.rating}â­)`:""} is on TribeUp! Connect and play sports together.`,url:r};try{return navigator.share&&navigator.canShare&&navigator.canShare(t)?(await navigator.share(t),n.success("Profile shared successfully!"),!0):(await navigator.clipboard.writeText(r),n.success("Profile link copied to clipboard!"),!0)}catch(i){return console.error("Error sharing profile:",i),n.error("Failed to share profile"),!1}},[m]),b=a.useCallback((e,r)=>{l(`/game/${e}`,{state:r})},[l]),k=a.useCallback((e,r,t)=>{l(`/chat/${e}/${r}`,{state:t})},[l]),C=a.useCallback((e,r)=>{l(`/user/${e}`,{state:r})},[l]),p=a.useCallback(()=>{const e=new URLSearchParams(o.search),r=e.get("utm_source"),t=e.get("utm_medium"),i=e.get("utm_campaign");if((r||t||i)&&console.log("Deep link opened with UTM parameters:",{source:r,medium:t,campaign:i,path:o.pathname}),o.pathname.startsWith("/game/")&&u.gameId&&i==="game_invitation"&&n.success("Welcome to the game!",{description:"You were invited to join this game"}),o.pathname.startsWith("/chat/")){const s=e.get("message");s&&setTimeout(()=>{const c=document.querySelector('input[placeholder*="message" i]');c&&(c.value=decodeURIComponent(s),c.focus())},500)}},[o,u]),$=a.useCallback(e=>({"og:title":e.title,"og:description":e.description,"og:url":e.url,"og:image":e.image||`${window.location.origin}/og-image.png`,"og:type":"website","twitter:card":"summary_large_image","twitter:title":e.title,"twitter:description":e.description,"twitter:image":e.image||`${window.location.origin}/og-image.png`}),[]),U=a.useCallback(async()=>{try{return await navigator.clipboard.writeText(window.location.href),n.success("Link copied to clipboard!"),!0}catch(e){return console.error("Error copying URL:",e),n.error("Failed to copy link"),!1}},[]),v=a.useCallback(()=>{const e=o.pathname;return e==="/"?"home":e==="/search"?"search":e==="/create"?"create":e==="/profile"?"profile":e.startsWith("/game/")?"game":e.startsWith("/chat/")?"chat":e.startsWith("/user/")?"user_profile":e.startsWith("/settings")?"settings":"unknown"},[o.pathname]);return a.useEffect(()=>{p()},[p]),{generateGameUrl:g,generateChatUrl:d,generateUserUrl:m,shareGame:h,shareProfile:w,copyCurrentUrl:U,navigateToGame:b,navigateToChat:k,navigateToUser:C,generateMetaTags:$,getCurrentContext:v,currentPath:o.pathname,currentSearch:o.search,currentParams:u,currentState:o.state}}export{L as u};
//# sourceMappingURL=useDeepLinks-CZWewHrB.js.map
