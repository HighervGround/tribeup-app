{"version":3,"file":"AdminDashboard-B15cJRW-.js","sources":["../../src/hooks/useAdmin.ts","../../src/components/AdminDashboard.tsx"],"sourcesContent":["import { useQuery, useMutation, useQueryClient } from '@tanstack/react-query';\nimport { SupabaseService } from '../lib/supabaseService';\nimport { toast } from 'sonner';\nimport { useAppStore } from '../store/appStore';\n\n// Query keys\nexport const adminKeys = {\n  all: ['admin'] as const,\n  users: () => [...adminKeys.all, 'users'] as const,\n  auditLog: () => [...adminKeys.all, 'auditLog'] as const,\n  permissions: (userId: string) => [...adminKeys.all, 'permissions', userId] as const,\n};\n\n/**\n * Hook to check if current user has admin role\n */\nexport function useIsAdmin() {\n  const { user } = useAppStore();\n  \n  return useQuery({\n    queryKey: ['admin', 'isAdmin', user?.id],\n    queryFn: async () => {\n      if (!user?.id) return false;\n      return await SupabaseService.hasAdminRole(user.id);\n    },\n    enabled: !!user?.id,\n    staleTime: 5 * 60 * 1000, // 5 minutes\n  });\n}\n\n/**\n * Hook to check if current user has moderator role\n */\nexport function useIsModerator() {\n  const { user } = useAppStore();\n  \n  return useQuery({\n    queryKey: ['admin', 'isModerator', user?.id],\n    queryFn: async () => {\n      if (!user?.id) return false;\n      return await SupabaseService.hasModeratorRole(user.id);\n    },\n    enabled: !!user?.id,\n    staleTime: 5 * 60 * 1000, // 5 minutes\n  });\n}\n\n/**\n * Hook to get all users (admin only)\n */\nexport function useAllUsers() {\n  return useQuery({\n    queryKey: adminKeys.users(),\n    queryFn: async () => {\n      return await SupabaseService.getAllUsers();\n    },\n    staleTime: 2 * 60 * 1000, // 2 minutes\n  });\n}\n\n/**\n * Hook to get admin audit log\n */\nexport function useAdminAuditLog(limit = 50) {\n  return useQuery({\n    queryKey: [...adminKeys.auditLog(), limit],\n    queryFn: async () => {\n      return await SupabaseService.getAdminAuditLog(limit);\n    },\n    staleTime: 1 * 60 * 1000, // 1 minute\n  });\n}\n\n/**\n * Hook to update user role (admin only)\n */\nexport function useUpdateUserRole() {\n  const queryClient = useQueryClient();\n\n  return useMutation({\n    mutationFn: async ({ userId, role }: { userId: string; role: 'user' | 'moderator' | 'admin' }) => {\n      return await SupabaseService.updateUserRole(userId, role);\n    },\n    onSuccess: (_, { userId, role }) => {\n      // Invalidate related queries\n      queryClient.invalidateQueries({ queryKey: adminKeys.users() });\n      queryClient.invalidateQueries({ queryKey: adminKeys.auditLog() });\n      \n      toast.success('User role updated successfully!', {\n        description: `User role changed to ${role}`,\n      });\n    },\n    onError: (error) => {\n      console.error('Update user role error:', error);\n      toast.error('Failed to update user role', {\n        description: error instanceof Error ? error.message : 'Please try again later',\n      });\n    },\n  });\n}\n\n/**\n * Hook to delete game (admin/moderator)\n */\nexport function useDeleteGame() {\n  const queryClient = useQueryClient();\n\n  return useMutation({\n    mutationFn: async ({ gameId, reason }: { gameId: string; reason?: string }) => {\n      return await SupabaseService.deleteGame(gameId, reason);\n    },\n    onSuccess: (_, { gameId }) => {\n      // Invalidate games queries\n      queryClient.invalidateQueries({ queryKey: ['games'] });\n      queryClient.invalidateQueries({ queryKey: adminKeys.auditLog() });\n      \n      toast.success('Game deleted successfully!', {\n        description: 'The game has been removed and participants have been notified',\n      });\n    },\n    onError: (error) => {\n      console.error('Delete game error:', error);\n      toast.error('Failed to delete game', {\n        description: error instanceof Error ? error.message : 'Please try again later',\n      });\n    },\n  });\n}\n\n/**\n * Hook to check if user can perform admin actions\n */\nexport function useCanPerformAdminActions() {\n  const { data: isAdmin } = useIsAdmin();\n  const { data: isModerator } = useIsModerator();\n  \n  return {\n    canDeleteAnyGame: isAdmin || isModerator,\n    canManageUsers: isAdmin,\n    canViewAuditLog: isAdmin,\n    canAssignModerators: isAdmin,\n  };\n}\n","import React, { useState } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport { Button } from './ui/button';\nimport { Card, CardContent, CardHeader, CardTitle } from './ui/card';\nimport { Badge } from './ui/badge';\nimport { Input } from './ui/input';\nimport { Textarea } from './ui/textarea';\nimport { \n  ArrowLeft, \n  Users, \n  Calendar, \n  Shield, \n  Trash2, \n  UserCheck, \n  UserX,\n  Eye,\n  AlertTriangle,\n  Activity\n} from 'lucide-react';\nimport { toast } from 'sonner';\nimport { useAllUsers, useAdminAuditLog, useUpdateUserRole, useDeleteGame, useCanPerformAdminActions } from '../hooks/useAdmin';\nimport { useGames } from '../hooks/useGames';\nimport { useAppStore } from '../store/appStore';\n\nfunction AdminDashboard() {\n  const navigate = useNavigate();\n  const { user } = useAppStore();\n  const [selectedTab, setSelectedTab] = useState<'overview' | 'users' | 'games' | 'audit'>('overview');\n  const [deleteReason, setDeleteReason] = useState('');\n  const [gameToDelete, setGameToDelete] = useState<string | null>(null);\n\n  // Hooks\n  const { data: allUsers, isLoading: usersLoading } = useAllUsers();\n  const { data: games, isLoading: gamesLoading } = useGames();\n  const { data: auditLog, isLoading: auditLoading } = useAdminAuditLog();\n  const updateUserRoleMutation = useUpdateUserRole();\n  const deleteGameMutation = useDeleteGame();\n  const canPerform = useCanPerformAdminActions();\n\n  // Check if user has admin access\n  if (!canPerform?.canViewAuditLog) {\n    return (\n      <div className=\"min-h-screen bg-background p-4\">\n        <div className=\"max-w-2xl mx-auto\">\n          <Card>\n            <CardHeader>\n              <CardTitle className=\"flex items-center gap-2\">\n                <Shield className=\"w-5 h-5\" />\n                Access Denied\n              </CardTitle>\n            </CardHeader>\n            <CardContent>\n              <p className=\"text-muted-foreground mb-4\">\n                You don't have permission to access the admin dashboard.\n              </p>\n              <Button onClick={() => navigate('/')} variant=\"outline\">\n                <ArrowLeft className=\"w-4 h-4 mr-2\" />\n                Back to Home\n              </Button>\n            </CardContent>\n          </Card>\n        </div>\n      </div>\n    );\n  }\n\n  // Check if user has admin access\n  if (!user || user.role !== 'admin') {\n    return (\n      <div className=\"min-h-screen bg-background flex items-center justify-center\">\n        <Card className=\"w-full max-w-md\">\n          <CardContent className=\"pt-6\">\n            <div className=\"text-center\">\n              <Shield className=\"w-12 h-12 mx-auto mb-4 text-muted-foreground\" />\n              <h2 className=\"text-xl font-semibold mb-2\">Access Denied</h2>\n              <p className=\"text-muted-foreground mb-4\">\n                You don't have permission to access the admin dashboard.\n              </p>\n              <Button onClick={() => navigate('/')}>\n                Return to Home\n              </Button>\n            </div>\n          </CardContent>\n        </Card>\n      </div>\n    );\n  }\n\n  const handleRoleUpdate = (userId: string, newRole: 'user' | 'moderator' | 'admin') => {\n    if (userId === user.id && newRole !== 'admin') {\n      toast.error('You cannot remove your own admin privileges');\n      return;\n    }\n    \n    updateUserRoleMutation.mutate({ userId, role: newRole });\n  };\n\n  const handleDeleteGame = (gameId: string) => {\n    if (!deleteReason.trim()) {\n      toast.error('Please provide a reason for deletion');\n      return;\n    }\n    \n    deleteGameMutation.mutate({ \n      gameId, \n      reason: deleteReason \n    }, {\n      onSuccess: () => {\n        setGameToDelete(null);\n        setDeleteReason('');\n      }\n    });\n  };\n\n  const getRoleBadgeVariant = (role: string) => {\n    switch (role) {\n      case 'admin': return 'destructive';\n      case 'moderator': return 'default';\n      default: return 'secondary';\n    }\n  };\n\n  const tabs = [\n    { id: 'overview', label: 'Overview', icon: Activity },\n    { id: 'users', label: 'Users', icon: Users },\n    { id: 'games', label: 'Games', icon: Calendar },\n    { id: 'audit', label: 'Audit Log', icon: Eye },\n  ];\n\n  return (\n    <div className=\"min-h-screen bg-background\">\n      {/* Header */}\n      <div className=\"flex items-center justify-between px-4 pt-12 pb-6\">\n        <div className=\"flex items-center gap-4\">\n          <Button variant=\"ghost\" size=\"icon\" onClick={() => navigate('/')}>\n            <ArrowLeft className=\"w-5 h-5\" />\n          </Button>\n          <div>\n            <h1 className=\"text-xl font-semibold\">Admin Dashboard</h1>\n            <p className=\"text-sm text-muted-foreground\">Manage users, games, and platform settings</p>\n          </div>\n        </div>\n        <Badge variant=\"destructive\" className=\"flex items-center gap-1\">\n          <Shield className=\"w-3 h-3\" />\n          Admin\n        </Badge>\n      </div>\n\n      {/* Tab Navigation */}\n      <div className=\"px-4 mb-6\">\n        <div className=\"flex space-x-1 bg-muted p-1 rounded-lg\">\n          {tabs.map((tab) => {\n            const Icon = tab.icon;\n            return (\n              <button\n                key={tab.id}\n                onClick={() => setSelectedTab(tab.id as any)}\n                className={`flex items-center gap-2 px-3 py-2 rounded-md text-sm font-medium transition-colors ${\n                  selectedTab === tab.id\n                    ? 'bg-background text-foreground shadow-sm'\n                    : 'text-muted-foreground hover:text-foreground'\n                }`}\n              >\n                <Icon className=\"w-4 h-4\" />\n                {tab.label}\n              </button>\n            );\n          })}\n        </div>\n      </div>\n\n      <div className=\"px-4 space-y-6\">\n        {/* Overview Tab */}\n        {selectedTab === 'overview' && (\n          <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4\">\n            <Card>\n              <CardContent className=\"pt-6\">\n                <div className=\"flex items-center justify-between\">\n                  <div>\n                    <p className=\"text-sm font-medium text-muted-foreground\">Total Users</p>\n                    <p className=\"text-2xl font-bold\">{allUsers?.length || 0}</p>\n                  </div>\n                  <Users className=\"w-8 h-8 text-muted-foreground\" />\n                </div>\n              </CardContent>\n            </Card>\n            \n            <Card>\n              <CardContent className=\"pt-6\">\n                <div className=\"flex items-center justify-between\">\n                  <div>\n                    <p className=\"text-sm font-medium text-muted-foreground\">Active Games</p>\n                    <p className=\"text-2xl font-bold\">{games?.length || 0}</p>\n                  </div>\n                  <Calendar className=\"w-8 h-8 text-muted-foreground\" />\n                </div>\n              </CardContent>\n            </Card>\n            \n            <Card>\n              <CardContent className=\"pt-6\">\n                <div className=\"flex items-center justify-between\">\n                  <div>\n                    <p className=\"text-sm font-medium text-muted-foreground\">Moderators</p>\n                    <p className=\"text-2xl font-bold\">\n                      {allUsers?.filter(u => u.role === 'moderator').length || 0}\n                    </p>\n                  </div>\n                  <Shield className=\"w-8 h-8 text-muted-foreground\" />\n                </div>\n              </CardContent>\n            </Card>\n            \n            <Card>\n              <CardContent className=\"pt-6\">\n                <div className=\"flex items-center justify-between\">\n                  <div>\n                    <p className=\"text-sm font-medium text-muted-foreground\">Recent Actions</p>\n                    <p className=\"text-2xl font-bold\">{auditLog?.length || 0}</p>\n                  </div>\n                  <Activity className=\"w-8 h-8 text-muted-foreground\" />\n                </div>\n              </CardContent>\n            </Card>\n          </div>\n        )}\n\n        {/* Users Tab */}\n        {selectedTab === 'users' && (\n          <Card>\n            <CardHeader>\n              <CardTitle>User Management</CardTitle>\n            </CardHeader>\n            <CardContent>\n              {usersLoading ? (\n                <p>Loading users...</p>\n              ) : (\n                <div className=\"space-y-4\">\n                  {allUsers?.map((userItem) => (\n                    <div key={userItem.id} className=\"flex items-center justify-between p-4 border rounded-lg\">\n                      <div className=\"flex items-center gap-3\">\n                        <div className=\"w-10 h-10 rounded-full bg-muted flex items-center justify-center\">\n                          {userItem.name?.charAt(0).toUpperCase() || 'U'}\n                        </div>\n                        <div>\n                          <p className=\"font-medium\">{userItem.name}</p>\n                          <p className=\"text-sm text-muted-foreground\">{userItem.email}</p>\n                          <p className=\"text-xs text-muted-foreground\">@{userItem.username}</p>\n                        </div>\n                      </div>\n                      <div className=\"flex items-center gap-2\">\n                        <Badge variant={getRoleBadgeVariant(userItem.role)}>\n                          {userItem.role}\n                        </Badge>\n                        {userItem.id !== user.id && (\n                          <div className=\"flex gap-1\">\n                            {userItem.role !== 'moderator' && (\n                              <Button\n                                size=\"sm\"\n                                variant=\"outline\"\n                                onClick={() => handleRoleUpdate(userItem.id, 'moderator')}\n                                disabled={updateUserRoleMutation.isPending}\n                              >\n                                <UserCheck className=\"w-3 h-3 mr-1\" />\n                                Make Moderator\n                              </Button>\n                            )}\n                            {userItem.role !== 'user' && (\n                              <Button\n                                size=\"sm\"\n                                variant=\"outline\"\n                                onClick={() => handleRoleUpdate(userItem.id, 'user')}\n                                disabled={updateUserRoleMutation.isPending}\n                              >\n                                <UserX className=\"w-3 h-3 mr-1\" />\n                                Remove Role\n                              </Button>\n                            )}\n                          </div>\n                        )}\n                      </div>\n                    </div>\n                  ))}\n                </div>\n              )}\n            </CardContent>\n          </Card>\n        )}\n\n        {/* Games Tab */}\n        {selectedTab === 'games' && (\n          <Card>\n            <CardHeader>\n              <CardTitle>Game Management</CardTitle>\n            </CardHeader>\n            <CardContent>\n              {gamesLoading ? (\n                <p>Loading games...</p>\n              ) : (\n                <div className=\"space-y-4\">\n                  {games?.map((game) => (\n                    <div key={game.id} className=\"flex items-center justify-between p-4 border rounded-lg\">\n                      <div>\n                        <h3 className=\"font-medium\">{game.title}</h3>\n                        <p className=\"text-sm text-muted-foreground\">\n                          {game.sport} • {game.date} at {game.time}\n                        </p>\n                        <p className=\"text-sm text-muted-foreground\">\n                          {game.location} • {game.currentPlayers}/{game.maxPlayers} players\n                        </p>\n                      </div>\n                      <Button\n                        size=\"sm\"\n                        variant=\"destructive\"\n                        onClick={() => setGameToDelete(game.id)}\n                        disabled={deleteGameMutation.isPending}\n                      >\n                        <Trash2 className=\"w-3 h-3 mr-1\" />\n                        Delete\n                      </Button>\n                    </div>\n                  ))}\n                </div>\n              )}\n            </CardContent>\n          </Card>\n        )}\n\n        {/* Audit Log Tab */}\n        {selectedTab === 'audit' && (\n          <Card>\n            <CardHeader>\n              <CardTitle>Audit Log</CardTitle>\n            </CardHeader>\n            <CardContent>\n              {auditLoading ? (\n                <p>Loading audit log...</p>\n              ) : (\n                <div className=\"space-y-4\">\n                  {auditLog?.map((entry) => (\n                    <div key={entry.id} className=\"p-4 border rounded-lg\">\n                      <div className=\"flex items-center justify-between mb-2\">\n                        <Badge variant=\"outline\">{entry.action}</Badge>\n                        <span className=\"text-xs text-muted-foreground\">\n                          {new Date(entry.created_at).toLocaleString()}\n                        </span>\n                      </div>\n                      <p className=\"text-sm\">\n                        <strong>{entry.admin?.full_name || 'Unknown Admin'}</strong> performed{' '}\n                        <strong>{entry.action}</strong> on {entry.target_type}\n                        {entry.target_id && ` (${entry.target_id.slice(0, 8)}...)`}\n                      </p>\n                      {entry.details && (\n                        <pre className=\"text-xs text-muted-foreground mt-2 bg-muted p-2 rounded\">\n                          {JSON.stringify(entry.details, null, 2)}\n                        </pre>\n                      )}\n                    </div>\n                  ))}\n                </div>\n              )}\n            </CardContent>\n          </Card>\n        )}\n      </div>\n\n      {/* Delete Game Modal */}\n      {gameToDelete && (\n        <div className=\"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-50\">\n          <Card className=\"w-full max-w-md\">\n            <CardHeader>\n              <CardTitle className=\"flex items-center gap-2\">\n                <AlertTriangle className=\"w-5 h-5 text-destructive\" />\n                Delete Game\n              </CardTitle>\n            </CardHeader>\n            <CardContent className=\"space-y-4\">\n              <p className=\"text-sm text-muted-foreground\">\n                This action cannot be undone. Please provide a reason for deleting this game.\n              </p>\n              <Textarea\n                placeholder=\"Reason for deletion...\"\n                value={deleteReason}\n                onChange={(e) => setDeleteReason(e.target.value)}\n                rows={3}\n              />\n              <div className=\"flex gap-2\">\n                <Button\n                  variant=\"outline\"\n                  onClick={() => {\n                    setGameToDelete(null);\n                    setDeleteReason('');\n                  }}\n                  className=\"flex-1\"\n                >\n                  Cancel\n                </Button>\n                <Button\n                  variant=\"destructive\"\n                  onClick={() => handleDeleteGame(gameToDelete)}\n                  disabled={deleteGameMutation.isPending || !deleteReason.trim()}\n                  className=\"flex-1\"\n                >\n                  {deleteGameMutation.isPending ? 'Deleting...' : 'Delete Game'}\n                </Button>\n              </div>\n            </CardContent>\n          </Card>\n        </div>\n      )}\n    </div>\n  );\n}\n\nexport default AdminDashboard;\n"],"names":["adminKeys","all","users","auditLog","permissions","userId","useCanPerformAdminActions","data","isAdmin","user","useAppStore","useQuery","queryKey","id","queryFn","async","SupabaseService","hasAdminRole","enabled","staleTime","useIsAdmin","isModerator","hasModeratorRole","useIsModerator","canDeleteAnyGame","canManageUsers","canViewAuditLog","canAssignModerators","AdminDashboard","navigate","useNavigate","selectedTab","setSelectedTab","useState","deleteReason","setDeleteReason","gameToDelete","setGameToDelete","allUsers","isLoading","usersLoading","getAllUsers","games","gamesLoading","useGames","auditLoading","limit","getAdminAuditLog","useAdminAuditLog","updateUserRoleMutation","queryClient","useQueryClient","useMutation","mutationFn","role","updateUserRole","onSuccess","_","invalidateQueries","toast","success","description","onError","error","Error","message","useUpdateUserRole","deleteGameMutation","gameId","reason","deleteGame","useDeleteGame","canPerform","jsx","className","children","jsxs","Card","CardHeader","CardTitle","Shield","CardContent","Button","onClick","variant","ArrowLeft","handleRoleUpdate","newRole","mutate","getRoleBadgeVariant","tabs","label","icon","Activity","Users","Calendar","Eye","size","Badge","map","tab","Icon","length","filter","u","userItem","name","charAt","toUpperCase","email","username","disabled","isPending","UserCheck","UserX","game","title","sport","date","time","location","currentPlayers","maxPlayers","Trash2","entry","action","Date","created_at","toLocaleString","admin","full_name","target_type","target_id","slice","details","JSON","stringify","AlertTriangle","Textarea","placeholder","value","onChange","e","target","rows","handleDeleteGame","trim"],"mappings":"2aAMO,MAAMA,EAAY,CACvBC,IAAK,CAAC,SACNC,MAAO,IAAM,IAAIF,EAAUC,IAAK,SAChCE,SAAU,IAAM,IAAIH,EAAUC,IAAK,YACnCG,YAAcC,GAAmB,IAAIL,EAAUC,IAAK,cAAeI,IA0H9D,SAASC,IACd,MAAQC,KAAMC,GArHT,WACL,MAAMC,KAAEA,GAASC,IAEjB,OAAOC,EAAS,CACdC,SAAU,CAAC,QAAS,UAAWH,GAAMI,IACrCC,QAASC,WACFN,GAAMI,UACEG,EAAgBC,aAAaR,EAAKI,IAEjDK,UAAWT,GAAMI,GACjBM,UAAW,KAEf,CAyG4BC,IAClBb,KAAMc,GArGT,WACL,MAAMZ,KAAEA,GAASC,IAEjB,OAAOC,EAAS,CACdC,SAAU,CAAC,QAAS,cAAeH,GAAMI,IACzCC,QAASC,WACFN,GAAMI,UACEG,EAAgBM,iBAAiBb,EAAKI,IAErDK,UAAWT,GAAMI,GACjBM,UAAW,KAEf,CAyFgCI,GAE9B,MAAO,CACLC,iBAAkBhB,GAAWa,EAC7BI,eAAgBjB,EAChBkB,gBAAiBlB,EACjBmB,oBAAqBnB,EAEzB,CCtHA,SAASoB,IACP,MAAMC,EAAWC,KACXrB,KAAEA,GAASC,KACVqB,EAAaC,GAAkBC,EAAAA,SAAmD,aAClFC,EAAcC,GAAmBF,EAAAA,SAAS,KAC1CG,EAAcC,GAAmBJ,EAAAA,SAAwB,OAGxD1B,KAAM+B,EAAUC,UAAWC,GDmB5B7B,EAAS,CACdC,SAAUZ,EAAUE,QACpBY,QAASC,eACMC,EAAgByB,cAE/BtB,UAAW,QCvBLZ,KAAMmC,EAAOH,UAAWI,GAAiBC,KACzCrC,KAAMJ,EAAUoC,UAAWM,GD6B9B,SAA0BC,EAAQ,IACvC,OAAOnC,EAAS,CACdC,SAAU,IAAIZ,EAAUG,WAAY2C,GACpChC,QAASC,eACMC,EAAgB+B,iBAAiBD,GAEhD3B,UAAW,KAEf,CCrCsD6B,GAC9CC,EDyCD,WACL,MAAMC,EAAcC,IAEpB,OAAOC,EAAY,CACjBC,WAAYtC,OAASV,SAAQiD,gBACdtC,EAAgBuC,eAAelD,EAAQiD,GAEtDE,UAAW,CAACC,GAAKpD,SAAQiD,WAEvBJ,EAAYQ,kBAAkB,CAAE9C,SAAUZ,EAAUE,UACpDgD,EAAYQ,kBAAkB,CAAE9C,SAAUZ,EAAUG,aAEpDwD,EAAMC,QAAQ,kCAAmC,CAC/CC,YAAa,wBAAwBP,OAGzCQ,QAAUC,IAERJ,EAAMI,MAAM,6BAA8B,CACxCF,YAAaE,aAAiBC,MAAQD,EAAME,QAAU,6BAI9D,CChEiCC,GACzBC,EDoED,WACL,MAAMjB,EAAcC,IAEpB,OAAOC,EAAY,CACjBC,WAAYtC,OAASqD,SAAQC,kBACdrD,EAAgBsD,WAAWF,EAAQC,GAElDb,UAAW,CAACC,GAAKW,aAEflB,EAAYQ,kBAAkB,CAAE9C,SAAU,CAAC,WAC3CsC,EAAYQ,kBAAkB,CAAE9C,SAAUZ,EAAUG,aAEpDwD,EAAMC,QAAQ,6BAA8B,CAC1CC,YAAa,mEAGjBC,QAAUC,IAERJ,EAAMI,MAAM,wBAAyB,CACnCF,YAAaE,aAAiBC,MAAQD,EAAME,QAAU,6BAI9D,CC3F6BM,GACrBC,EAAalE,IAGnB,IAAKkE,GAAY9C,gBACf,OACE+C,EAAAA,IAAC,OAAIC,UAAU,iCACbC,eAAC,MAAA,CAAID,UAAU,oBACbC,SAAAC,EAAAA,KAACC,EAAA,CACCF,SAAA,CAAAF,MAACK,EAAA,CACCH,SAAAC,EAAAA,KAACG,EAAA,CAAUL,UAAU,0BACnBC,SAAA,CAAAF,EAAAA,IAACO,EAAA,CAAON,UAAU,YAAY,4BAIjCO,EAAA,CACCN,SAAA,CAAAF,EAAAA,IAAC,IAAA,CAAEC,UAAU,6BAA6BC,SAAA,6DAG1CC,OAACM,GAAOC,QAAS,IAAMtD,EAAS,KAAMuD,QAAQ,UAC5CT,SAAA,CAAAF,EAAAA,IAACY,EAAA,CAAUX,UAAU,iBAAiB,4BAWpD,IAAKjE,GAAsB,UAAdA,EAAK6C,KAChB,OACEmB,MAAC,MAAA,CAAIC,UAAU,8DACbC,eAACE,EAAA,CAAKH,UAAU,kBACdC,SAAAF,EAAAA,IAACQ,GAAYP,UAAU,OACrBC,SAAAC,OAAC,MAAA,CAAIF,UAAU,cACbC,SAAA,CAAAF,EAAAA,IAACO,EAAA,CAAON,UAAU,iDAClBD,EAAAA,IAAC,KAAA,CAAGC,UAAU,6BAA6BC,SAAA,kBAC3CF,EAAAA,IAAC,IAAA,CAAEC,UAAU,6BAA6BC,SAAA,mEAGzCO,EAAA,CAAOC,QAAS,IAAMtD,EAAS,KAAM8C,SAAA,4BAUlD,MAAMW,EAAmB,CAACjF,EAAgBkF,KACpClF,IAAWI,EAAKI,IAAkB,UAAZ0E,EAK1BtC,EAAuBuC,OAAO,CAAEnF,SAAQiD,KAAMiC,IAJ5C5B,EAAMI,MAAM,gDAwBV0B,EAAuBnC,IAC3B,OAAQA,GACN,IAAK,QAAS,MAAO,cACrB,IAAK,YAAa,MAAO,UACzB,QAAS,MAAO,cAIdoC,EAAO,CACX,CAAE7E,GAAI,WAAY8E,MAAO,WAAYC,KAAMC,GAC3C,CAAEhF,GAAI,QAAS8E,MAAO,QAASC,KAAME,GACrC,CAAEjF,GAAI,QAAS8E,MAAO,QAASC,KAAMG,GACrC,CAAElF,GAAI,QAAS8E,MAAO,YAAaC,KAAMI,IAG3C,OACEpB,EAAAA,KAAC,MAAA,CAAIF,UAAU,6BAEbC,SAAA,CAAAC,EAAAA,KAAC,MAAA,CAAIF,UAAU,oDACbC,SAAA,CAAAC,EAAAA,KAAC,MAAA,CAAIF,UAAU,0BACbC,SAAA,CAAAF,EAAAA,IAACS,EAAA,CAAOE,QAAQ,QAAQa,KAAK,OAAOd,QAAS,IAAMtD,EAAS,KAC1D8C,SAAAF,MAACY,EAAA,CAAUX,UAAU,qBAEtB,MAAA,CACCC,SAAA,CAAAF,EAAAA,IAAC,KAAA,CAAGC,UAAU,wBAAwBC,SAAA,oBACtCF,EAAAA,IAAC,IAAA,CAAEC,UAAU,gCAAgCC,SAAA,qDAGjDC,EAAAA,KAACsB,EAAA,CAAMd,QAAQ,cAAcV,UAAU,0BACrCC,SAAA,CAAAF,EAAAA,IAACO,EAAA,CAAON,UAAU,YAAY,cAMlCD,EAAAA,IAAC,MAAA,CAAIC,UAAU,YACbC,SAAAF,EAAAA,IAAC,MAAA,CAAIC,UAAU,yCACZC,SAAAe,EAAKS,IAAKC,IACT,MAAMC,EAAOD,EAAIR,KACjB,OACEhB,EAAAA,KAAC,SAAA,CAECO,QAAS,IAAMnD,EAAeoE,EAAIvF,IAClC6D,UAAW,uFACT3C,IAAgBqE,EAAIvF,GAChB,0CACA,+CAGN8D,SAAA,CAAAF,EAAAA,IAAC4B,EAAA,CAAK3B,UAAU,YACf0B,EAAIT,QATAS,EAAIvF,UAgBnB+D,EAAAA,KAAC,MAAA,CAAIF,UAAU,iBAEZC,SAAA,CAAgB,aAAhB5C,GACC6C,OAAC,MAAA,CAAIF,UAAU,uDACbC,SAAA,CAAAF,EAAAA,IAACI,EAAA,CACCF,eAACM,EAAA,CAAYP,UAAU,OACrBC,SAAAC,EAAAA,KAAC,MAAA,CAAIF,UAAU,oCACbC,SAAA,CAAAC,OAAC,MAAA,CACCD,SAAA,CAAAF,EAAAA,IAAC,IAAA,CAAEC,UAAU,4CAA4CC,SAAA,sBACxD,IAAA,CAAED,UAAU,qBAAsBC,SAAArC,GAAUgE,QAAU,OAEzD7B,EAAAA,IAACqB,EAAA,CAAMpB,UAAU,yCAKvBD,EAAAA,IAACI,GACCF,SAAAF,EAAAA,IAACQ,EAAA,CAAYP,UAAU,OACrBC,SAAAC,EAAAA,KAAC,MAAA,CAAIF,UAAU,oCACbC,SAAA,CAAAC,OAAC,MAAA,CACCD,SAAA,CAAAF,EAAAA,IAAC,IAAA,CAAEC,UAAU,4CAA4CC,SAAA,uBACxD,IAAA,CAAED,UAAU,qBAAsBC,SAAAjC,GAAO4D,QAAU,OAEtD7B,EAAAA,IAACsB,EAAA,CAASrB,UAAU,yCAK1BD,EAAAA,IAACI,GACCF,SAAAF,EAAAA,IAACQ,EAAA,CAAYP,UAAU,OACrBC,SAAAC,EAAAA,KAAC,MAAA,CAAIF,UAAU,oCACbC,SAAA,CAAAC,OAAC,MAAA,CACCD,SAAA,CAAAF,EAAAA,IAAC,IAAA,CAAEC,UAAU,4CAA4CC,SAAA,eACzDF,EAAAA,IAAC,IAAA,CAAEC,UAAU,qBACVC,SAAArC,GAAUiE,OAAOC,GAAgB,cAAXA,EAAElD,MAAsBgD,QAAU,OAG7D7B,EAAAA,IAACO,EAAA,CAAON,UAAU,yCAKxBD,EAAAA,IAACI,GACCF,SAAAF,EAAAA,IAACQ,EAAA,CAAYP,UAAU,OACrBC,SAAAC,EAAAA,KAAC,MAAA,CAAIF,UAAU,oCACbC,SAAA,CAAAC,OAAC,MAAA,CACCD,SAAA,CAAAF,EAAAA,IAAC,IAAA,CAAEC,UAAU,4CAA4CC,SAAA,yBACxD,IAAA,CAAED,UAAU,qBAAsBC,SAAAxE,GAAUmG,QAAU,OAEzD7B,EAAAA,IAACoB,EAAA,CAASnB,UAAU,4CAQb,UAAhB3C,GACC6C,EAAAA,KAACC,EAAA,CACCF,SAAA,CAAAF,MAACK,EAAA,CACCH,SAAAF,EAAAA,IAACM,EAAA,CAAUJ,SAAA,4BAEZM,EAAA,CACEN,SAAAnC,QACE,IAAA,CAAEmC,SAAA,qBAEHF,EAAAA,IAAC,MAAA,CAAIC,UAAU,YACZC,YAAUwB,IAAKM,GACd7B,EAAAA,KAAC,MAAA,CAAsBF,UAAU,0DAC/BC,SAAA,CAAAC,EAAAA,KAAC,MAAA,CAAIF,UAAU,0BACbC,SAAA,CAAAF,EAAAA,IAAC,MAAA,CAAIC,UAAU,mEACZC,SAAA8B,EAASC,MAAMC,OAAO,GAAGC,eAAiB,aAE5C,MAAA,CACCjC,SAAA,CAAAF,EAAAA,IAAC,IAAA,CAAEC,UAAU,cAAeC,SAAA8B,EAASC,OACrCjC,EAAAA,IAAC,IAAA,CAAEC,UAAU,gCAAiCC,WAASkC,QACvDjC,EAAAA,KAAC,IAAA,CAAEF,UAAU,gCAAgCC,SAAA,CAAA,IAAE8B,EAASK,kBAG5DlC,EAAAA,KAAC,MAAA,CAAIF,UAAU,0BACbC,SAAA,CAAAF,EAAAA,IAACyB,GAAMd,QAASK,EAAoBgB,EAASnD,MAC1CqB,WAASrB,OAEXmD,EAAS5F,KAAOJ,EAAKI,IACpB+D,EAAAA,KAAC,MAAA,CAAIF,UAAU,aACZC,SAAA,CAAkB,cAAlB8B,EAASnD,MACRsB,EAAAA,KAACM,EAAA,CACCe,KAAK,KACLb,QAAQ,UACRD,QAAS,IAAMG,EAAiBmB,EAAS5F,GAAI,aAC7CkG,SAAU9D,EAAuB+D,UAEjCrC,SAAA,CAAAF,EAAAA,IAACwC,EAAA,CAAUvC,UAAU,iBAAiB,oBAIvB,SAAlB+B,EAASnD,MACRsB,EAAAA,KAACM,EAAA,CACCe,KAAK,KACLb,QAAQ,UACRD,QAAS,IAAMG,EAAiBmB,EAAS5F,GAAI,QAC7CkG,SAAU9D,EAAuB+D,UAEjCrC,SAAA,CAAAF,EAAAA,IAACyC,EAAA,CAAMxC,UAAU,iBAAiB,yBAnCpC+B,EAAS5F,YAmDd,UAAhBkB,GACC6C,EAAAA,KAACC,EAAA,CACCF,SAAA,CAAAF,MAACK,EAAA,CACCH,SAAAF,EAAAA,IAACM,EAAA,CAAUJ,SAAA,4BAEZM,EAAA,CACEN,SAAAhC,QACE,IAAA,CAAEgC,SAAA,qBAEHF,EAAAA,IAAC,MAAA,CAAIC,UAAU,YACZC,YAAOwB,IAAKgB,GACXvC,EAAAA,KAAC,MAAA,CAAkBF,UAAU,0DAC3BC,SAAA,CAAAC,OAAC,MAAA,CACCD,SAAA,CAAAF,EAAAA,IAAC,KAAA,CAAGC,UAAU,cAAeC,SAAAwC,EAAKC,QAClCxC,EAAAA,KAAC,IAAA,CAAEF,UAAU,gCACVC,SAAA,CAAAwC,EAAKE,MAAM,MAAIF,EAAKG,KAAK,OAAKH,EAAKI,QAEtC3C,EAAAA,KAAC,IAAA,CAAEF,UAAU,gCACVC,SAAA,CAAAwC,EAAKK,SAAS,MAAIL,EAAKM,eAAe,IAAEN,EAAKO,WAAW,iBAG7D9C,EAAAA,KAACM,EAAA,CACCe,KAAK,KACLb,QAAQ,cACRD,QAAS,IAAM9C,EAAgB8E,EAAKtG,IACpCkG,SAAU5C,EAAmB6C,UAE7BrC,SAAA,CAAAF,EAAAA,IAACkD,EAAA,CAAOjD,UAAU,iBAAiB,cAhB7ByC,EAAKtG,YA4BV,UAAhBkB,GACC6C,EAAAA,KAACC,EAAA,CACCF,SAAA,CAAAF,MAACK,EAAA,CACCH,SAAAF,EAAAA,IAACM,EAAA,CAAUJ,SAAA,sBAEZM,EAAA,CACEN,SAAA9B,QACE,IAAA,CAAE8B,SAAA,yBAEHF,EAAAA,IAAC,MAAA,CAAIC,UAAU,YACZC,YAAUwB,IAAKyB,GACdhD,EAAAA,KAAC,MAAA,CAAmBF,UAAU,wBAC5BC,SAAA,CAAAC,EAAAA,KAAC,MAAA,CAAIF,UAAU,yCACbC,SAAA,CAAAF,EAAAA,IAACyB,EAAA,CAAMd,QAAQ,UAAWT,SAAAiD,EAAMC,SAChCpD,EAAAA,IAAC,OAAA,CAAKC,UAAU,gCACbC,SAAA,IAAImD,KAAKF,EAAMG,YAAYC,sBAGhCpD,EAAAA,KAAC,IAAA,CAAEF,UAAU,UACXC,SAAA,CAAAF,EAAAA,IAAC,SAAA,CAAQE,SAAAiD,EAAMK,OAAOC,WAAa,kBAAyB,aAAW,IACvEzD,EAAAA,IAAC,SAAA,CAAQE,SAAAiD,EAAMC,SAAgB,OAAKD,EAAMO,YACzCP,EAAMQ,WAAa,KAAKR,EAAMQ,UAAUC,MAAM,EAAG,YAEnDT,EAAMU,SACL7D,EAAAA,IAAC,MAAA,CAAIC,UAAU,0DACZC,SAAA4D,KAAKC,UAAUZ,EAAMU,QAAS,KAAM,OAdjCV,EAAM/G,eA2B7BuB,SACE,MAAA,CAAIsC,UAAU,sEACbC,SAAAC,EAAAA,KAACC,EAAA,CAAKH,UAAU,kBACdC,SAAA,CAAAF,MAACK,EAAA,CACCH,SAAAC,EAAAA,KAACG,EAAA,CAAUL,UAAU,0BACnBC,SAAA,CAAAF,EAAAA,IAACgE,EAAA,CAAc/D,UAAU,6BAA6B,mBAI1DE,EAAAA,KAACK,EAAA,CAAYP,UAAU,YACrBC,SAAA,CAAAF,EAAAA,IAAC,IAAA,CAAEC,UAAU,gCAAgCC,SAAA,kFAG7CF,EAAAA,IAACiE,EAAA,CACCC,YAAY,yBACZC,MAAO1G,EACP2G,SAAWC,GAAM3G,EAAgB2G,EAAEC,OAAOH,OAC1CI,KAAM,IAERpE,EAAAA,KAAC,MAAA,CAAIF,UAAU,aACbC,SAAA,CAAAF,EAAAA,IAACS,EAAA,CACCE,QAAQ,UACRD,QAAS,KACP9C,EAAgB,MAChBF,EAAgB,KAElBuC,UAAU,SACXC,SAAA,WAGDF,EAAAA,IAACS,EAAA,CACCE,QAAQ,cACRD,QAAS,KAAM8D,OA9SL7E,EA8SsBhC,OA7SzCF,EAAagH,OAKlB/E,EAAmBqB,OAAO,CACxBpB,SACAC,OAAQnC,GACP,CACDsB,UAAW,KACTnB,EAAgB,MAChBF,EAAgB,OAVlBwB,EAAMI,MAAM,yCAFS,IAACK,GA+SV2C,SAAU5C,EAAmB6C,YAAc9E,EAAagH,OACxDxE,UAAU,SAETC,SAAAR,EAAmB6C,UAAY,cAAgB,6BASlE"}