import{j as e}from"./ui-B4gQYcc6.js";import{e as s,u as a,r as t}from"./vendor-CTE-63Sz.js";import{i as r,C as n,d as i,e as l,a as o,B as c}from"./index-KT6d_1Zf.js";import{I as d}from"./input-Blmf8RA4.js";import{A as m,a as u}from"./alert-DSh9Bxk_.js";import{ak as x,al as h}from"./utils-B5KmqWpW.js";import"./data-pHbUkPVm.js";function g(){s();const g=a(),{signIn:p,signUp:j,resetPassword:f,signInWithOAuth:v}=r(),[w,y]=t.useState(!1),[N,b]=t.useState(!1),[k,S]=t.useState(""),[C,A]=t.useState(""),[P,I]=t.useState(""),[E,F]=t.useState(!1),[U,q]=t.useState(""),[O,R]=t.useState("");t.useEffect(()=>{"true"===new URLSearchParams(g.search).get("reset")&&b(!0)},[g]);const B=async e=>{F(!0),q("");try{await v(e)}catch(s){s.message?.includes("popup")?q("Authentication popup was blocked. Please allow popups and try again."):s.message?.includes("network")||s.message?.includes("fetch")?q("Network error during authentication. Please check your connection and try again."):q("Authentication failed. Please try again or use email sign-in."),F(!1)}};return e.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center p-4",children:e.jsxs(n,{className:"w-full max-w-md",children:[e.jsx(i,{children:e.jsx(l,{className:"text-center",children:N?"Reset Password":w?"Create Account":"Sign In"})}),e.jsxs(o,{children:[!N&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-6",children:[e.jsxs(c,{variant:"outline",onClick:()=>B("google"),disabled:E,className:"w-full",children:[e.jsx(x,{className:"mr-2 h-4 w-4"}),"Google"]}),e.jsxs(c,{variant:"outline",onClick:()=>B("apple"),disabled:E,className:"w-full",children:[e.jsx(h,{className:"mr-2 h-4 w-4"}),"Apple"]})]}),e.jsx("div",{className:"text-xs text-muted-foreground text-center mb-4",children:"Note: You may see browser warnings during OAuth sign-in. These are from external services and don't affect your account security."}),e.jsxs("div",{className:"relative my-6",children:[e.jsx("div",{className:"absolute inset-0 flex items-center",children:e.jsx("span",{className:"w-full border-t"})}),e.jsx("div",{className:"relative flex justify-center text-xs uppercase",children:e.jsx("span",{className:"bg-background px-2 text-muted-foreground",children:"Or continue with email"})})]})]}),e.jsxs("form",{onSubmit:async e=>{e.preventDefault(),F(!0),q(""),R("");try{N?(await f(k),R("Password reset email sent! Check your inbox."),b(!1)):w?(await j(k,C,{name:P,email:k}),R("Check your email for confirmation link!")):await p(k,C)}catch(s){q(s.message)}finally{F(!1)}},className:"space-y-4",children:[w&&!N&&e.jsxs("div",{children:[e.jsx("label",{htmlFor:"name",className:"text-sm font-medium",children:"Name"}),e.jsx(d,{id:"name",name:"name",type:"text",value:P,onChange:e=>I(e.target.value),required:w,placeholder:"Enter your full name"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"email",className:"text-sm font-medium",children:"Email"}),e.jsx(d,{id:"email",name:"email",type:"email",value:k,onChange:e=>S(e.target.value),required:!0,placeholder:"Enter your email"})]}),!N&&e.jsxs("div",{children:[e.jsx("label",{htmlFor:"password",className:"text-sm font-medium",children:"Password"}),e.jsx(d,{id:"password",name:"password",type:"password",value:C,onChange:e=>A(e.target.value),required:!N,placeholder:"Enter your password"})]}),U&&e.jsx(m,{variant:"destructive",children:e.jsx(u,{children:U})}),O&&e.jsx(m,{children:e.jsx(u,{children:O})}),e.jsx(c,{type:"submit",className:"w-full",disabled:E,children:E?"Loading...":N?"Send Reset Email":w?"Sign Up":"Sign In"})]}),e.jsx("div",{className:"mt-4 space-y-2 text-center",children:N?e.jsx("button",{onClick:()=>{y(!1),b(!1),q(""),R("")},className:"text-sm text-muted-foreground hover:text-foreground",children:"Back to Sign In"}):e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:()=>y(!w),className:"text-sm text-muted-foreground hover:text-foreground block",children:w?"Already have an account? Sign In":"Need an account? Sign Up"}),e.jsx("button",{onClick:()=>b(!0),className:"text-sm text-muted-foreground hover:text-foreground block",children:"Forgot your password?"})]})})]})]})})}export{g as default};
//# sourceMappingURL=Auth-DkkR0GwI.js.map
