import{j as e}from"./ui-BV8hHw1h.js";import{i as s,C as a,c as t,d as r,t as l,a as n,B as i,A as o,e as c,s as d,k as m}from"./index-B8aSsUS3.js";import{I as u}from"./input-a8OuQscY.js";import{r as x,e as h}from"./vendor-C07EgOn8.js";import{am as j,an as p,v as f,t as g}from"./utils-sWWcUyIH.js";import"./data-Bnv2A4Es.js";function v({className:m,onEmailAuth:h,onForgotPassword:g,...v}){const[y,N]=x.useState(null),[w,b]=x.useState(null),[k,S]=x.useState(!1),[C,A]=x.useState(!1),[E,F]=x.useState(!1),[I,P]=x.useState(""),[q,U]=x.useState(""),[B,T]=x.useState(""),O=async e=>{S(!0),N(null);try{const{error:s}=await d.auth.signInWithOAuth({provider:e,options:{redirectTo:`${window.location.origin}/auth/callback`,queryParams:{access_type:"offline",prompt:"consent"}}});if(s)throw s}catch(s){N(s instanceof Error?s.message:"An error occurred"),S(!1)}};return e.jsx("div",{className:s("flex flex-col gap-6",m),...v,children:e.jsxs(a,{children:[e.jsxs(t,{children:[e.jsx(r,{className:"text-2xl",children:"Welcome to TribeUp!"}),e.jsx(l,{children:"Find your tribe and join the game"})]}),e.jsx(n,{children:C?e.jsxs("form",{onSubmit:async e=>{if(e.preventDefault(),h){S(!0),N(null),b(null);try{await h(I,q,E),E&&b("Check your email for confirmation link!")}catch(s){N(s instanceof Error?s.message:"An error occurred")}finally{S(!1)}}},className:"space-y-4",children:[E&&e.jsxs("div",{children:[e.jsx("label",{htmlFor:"name",className:"text-sm font-medium",children:"Name"}),e.jsx(u,{id:"name",type:"text",value:B,onChange:e=>T(e.target.value),required:E,placeholder:"Enter your full name"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"email",className:"text-sm font-medium",children:"Email"}),e.jsx(u,{id:"email",type:"email",value:I,onChange:e=>P(e.target.value),required:!0,placeholder:"Enter your email"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"password",className:"text-sm font-medium",children:"Password"}),e.jsx(u,{id:"password",type:"password",value:q,onChange:e=>U(e.target.value),required:!0,placeholder:"Enter your password"})]}),y&&e.jsx(o,{variant:"destructive",children:e.jsx(c,{children:y})}),w&&e.jsx(o,{children:e.jsx(c,{children:w})}),e.jsx(i,{type:"submit",className:"w-full",disabled:k,children:k?"Loading...":E?"Sign Up":"Sign In"}),e.jsxs("div",{className:"text-center space-y-2",children:[e.jsx("button",{type:"button",onClick:()=>F(!E),className:"text-sm text-muted-foreground hover:text-foreground",children:E?"Already have an account? Sign In":"Need an account? Sign Up"}),e.jsx("br",{}),!E&&g&&e.jsxs(e.Fragment,{children:[e.jsx("button",{type:"button",onClick:g,className:"text-sm text-muted-foreground hover:text-foreground",children:"Forgot your password?"}),e.jsx("br",{})]}),e.jsx("button",{type:"button",onClick:()=>A(!1),className:"text-sm text-muted-foreground hover:text-foreground",children:"Back to social login"})]})]}):e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs(i,{variant:"outline",onClick:()=>O("google"),disabled:k,className:"w-full",children:[e.jsx(j,{className:"mr-2 h-4 w-4"}),"Google"]}),e.jsxs(i,{variant:"outline",onClick:()=>O("apple"),disabled:k,className:"w-full",children:[e.jsx(p,{className:"mr-2 h-4 w-4"}),"Apple"]})]}),e.jsxs("div",{className:"relative my-6",children:[e.jsx("div",{className:"absolute inset-0 flex items-center",children:e.jsx("span",{className:"w-full border-t"})}),e.jsx("div",{className:"relative flex justify-center text-xs uppercase",children:e.jsx("span",{className:"bg-background px-2 text-muted-foreground",children:"Or continue with email"})})]}),e.jsxs(i,{variant:"outline",onClick:()=>A(!0),disabled:k,className:"w-full",children:[e.jsx(f,{className:"mr-2 h-4 w-4"}),"Continue with Email"]}),y&&e.jsx(o,{variant:"destructive",children:e.jsx(c,{children:y})})]})})]})})}function y(){h();const{signIn:s,signUp:a}=m();return e.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center p-4",children:e.jsxs("div",{className:"w-full max-w-md",children:[e.jsx(v,{onEmailAuth:async(e,t,r)=>{try{r?(await a(e,t,{name:e.split("@")[0],email:e}),g.success("Check your email for confirmation link!")):await s(e,t)}catch(l){throw l}},className:"w-full"}),e.jsx("div",{className:"mt-6 text-center",children:e.jsx("p",{className:"text-xs text-muted-foreground",children:"By continuing, you agree to our Terms of Service and Privacy Policy"})})]})})}export{y as Auth};
//# sourceMappingURL=Auth-BBqbG-SI.js.map
