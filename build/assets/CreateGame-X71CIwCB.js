import{u as I,r as o,j as e,B as u,C as x,b as p,d as j,e as v,L as B,A as D,f as E,a as A,S as O}from"./index-1UwNT_Si.js";import{I as R}from"./input-BsRlT7DO.js";import{T as z}from"./textarea-B3_Cv84v.js";import{P as M}from"./progress-lO3l97P_.js";import{A as H}from"./arrow-left-BIM28Npq.js";import{C as G}from"./circle-check-big-mR77UU1L.js";import"./index-FskIEi2Y.js";const $=[{value:"basketball",label:"Basketball",icon:"ðŸ€"},{value:"soccer",label:"Soccer",icon:"âš½"},{value:"tennis",label:"Tennis",icon:"ðŸŽ¾"},{value:"pickleball",label:"Pickleball",icon:"ðŸ¥’"},{value:"volleyball",label:"Volleyball",icon:"ðŸ"},{value:"football",label:"Football",icon:"ðŸˆ"},{value:"baseball",label:"Baseball",icon:"âš¾"}],d=[{id:1,title:"Game Details",fields:["sport","title","description"]},{id:2,title:"Date & Time",fields:["date","time","duration"]},{id:3,title:"Location & Players",fields:["location","maxPlayers","cost","requirements"]}];function W(){const g=I(),[a,N]=o.useState(1),[m,y]=o.useState(!1),[n,C]=o.useState({}),[w,S]=o.useState(null),[t,L]=o.useState({sport:"",title:"",description:"",date:"",time:"",duration:"",location:"",maxPlayers:"",cost:"",requirements:""}),h=(s,r)=>{L(c=>({...c,[s]:r})),n[s]&&C(c=>{const{[s]:f,...l}=c;return l})},k=()=>{const s={};if(a===1&&(t.sport||(s.sport="Please select a sport."),t.title.trim()||(s.title="Game title is required."),t.description.trim()||(s.description="Description is required.")),a===2&&(t.date||(s.date="Please choose a date."),t.time||(s.time="Please choose a time."),t.date)){const r=new Date;new Date(t.date+"T00:00:00")<new Date(r.toDateString())&&(s.date="Date cannot be in the past.")}if(a===3){t.location.trim()||(s.location="Location is required.");const r=parseInt(t.maxPlayers,10);t.maxPlayers?(Number.isNaN(r)||r<=0)&&(s.maxPlayers="Enter a valid number greater than 0."):s.maxPlayers="Max players is required.",t.cost||(s.cost="Please select a cost option.")}return C(s),Object.keys(s).length===0},T=()=>{k()&&a<d.length&&N(a+1)},P=()=>{a>1?N(a-1):g(-1)},F=async()=>{if(k()){y(!0),S(null);try{const{user:s}=A.getState();if(console.log("[CreateGame] submit clicked. user =",s?.id),!s)throw new Error("You must be logged in to create a game");const r={title:t.title,sport:t.sport,location:t.location,date:t.date,time:t.time,cost:t.cost||"Free",maxPlayers:parseInt(t.maxPlayers),description:t.description,creatorId:s.id};console.log("[CreateGame] creating game with data =",r),await O.createGame(r),g("/")}catch(s){console.error("Error creating game:",s),S(s instanceof Error?s.message:"Failed to create game")}finally{y(!1)}}},q=a/d.length*100,b=$.find(s=>s.value===t.sport),i=(s,r,c="text",f)=>e.jsxs("div",{className:"space-y-2",children:[e.jsxs("label",{className:"text-sm font-medium flex items-center gap-2",children:[r,d[a-1].fields.includes(s)&&e.jsx("span",{className:"text-destructive",children:"*"})]}),c==="select"&&f?e.jsxs("select",{value:t[s],onChange:l=>h(s,l.target.value),className:`w-full p-2 border rounded-md ${n[s]?"border-destructive":""}`,children:[e.jsxs("option",{value:"",children:["Select ",r.toLowerCase()]}),f.map(l=>e.jsxs("option",{value:l.value,children:[l.icon," ",l.label]},l.value))]}):c==="textarea"?e.jsx(z,{value:t[s],onChange:l=>h(s,l.target.value),placeholder:`Enter ${r.toLowerCase()}`,className:`resize-none ${n[s]?"border-destructive":""}`,rows:3}):e.jsx(R,{type:c,value:t[s],onChange:l=>h(s,l.target.value),placeholder:`Enter ${r.toLowerCase()}`,min:c==="date"?new Date().toISOString().split("T")[0]:void 0,className:n[s]?"border-destructive":""}),n[s]&&e.jsx("p",{className:"text-sm text-destructive",children:n[s]})]});return e.jsxs("div",{className:"min-h-screen bg-background",children:[e.jsxs("div",{className:"sticky top-0 bg-background/95 backdrop-blur-sm border-b border-border z-10",children:[e.jsx("div",{className:"flex items-center justify-between px-4 py-4",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(u,{variant:"ghost",size:"icon",onClick:P,children:e.jsx(H,{className:"w-5 h-5"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-xl font-semibold",children:"Create Game"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:d[a-1].title})]})]})}),e.jsx("div",{className:"px-4 pb-4",children:e.jsx(M,{value:q,className:"h-2"})})]}),e.jsxs("div",{className:"px-4 pb-40 pt-6",children:[b&&e.jsx("div",{className:"mb-6",children:e.jsx(x,{children:e.jsx(p,{className:"pt-6",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-12 h-12 bg-primary/10 rounded-lg flex items-center justify-center text-2xl",children:b.icon}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold",children:t.title||"New Game"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:b.label})]})]})})})}),a===1&&e.jsx("div",{className:"space-y-6",children:e.jsxs(x,{children:[e.jsx(j,{children:e.jsxs(v,{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-8 h-8 bg-primary/10 rounded-full flex items-center justify-center text-primary font-semibold text-sm",children:"1"}),"Game Details"]})}),e.jsxs(p,{className:"space-y-6",children:[i("sport","Sport","select",$),i("title","Game Title"),i("description","Description","textarea")]})]})}),a===2&&e.jsx("div",{className:"space-y-6",children:e.jsxs(x,{children:[e.jsx(j,{children:e.jsxs(v,{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-8 h-8 bg-primary/10 rounded-full flex items-center justify-center text-primary font-semibold text-sm",children:"2"}),"Date & Time"]})}),e.jsxs(p,{className:"space-y-6",children:[i("date","Date","date"),i("time","Time","time"),i("duration","Duration","select",[{value:"30min",label:"30 minutes"},{value:"1hr",label:"1 hour"},{value:"1.5hr",label:"1.5 hours"},{value:"2hr",label:"2 hours"},{value:"3hr",label:"3 hours"}])]})]})}),a===3&&e.jsx("div",{className:"space-y-6",children:e.jsxs(x,{children:[e.jsx(j,{children:e.jsxs(v,{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-8 h-8 bg-primary/10 rounded-full flex items-center justify-center text-primary font-semibold text-sm",children:"3"}),"Location & Players"]})}),e.jsxs(p,{className:"space-y-6",children:[i("location","Location"),i("maxPlayers","Max Players","number"),i("cost","Cost","select",[{value:"FREE",label:"Free"},{value:"$5",label:"$5 per person"},{value:"$10",label:"$10 per person"},{value:"$15",label:"$15 per person"},{value:"$20",label:"$20 per person"},{value:"custom",label:"Custom amount"}]),i("requirements","Requirements (Optional)","textarea")]})]})}),e.jsx("div",{className:"sticky bottom-0 left-0 right-0 bg-background/95 backdrop-blur supports-[backdrop-filter]:bg-background/60 border-t border-border px-4 py-4 mt-8",children:e.jsxs("div",{className:"flex gap-3",children:[e.jsx(u,{variant:"outline",onClick:P,className:"w-auto px-4",disabled:m,children:a===1?"Cancel":"Back"}),a<d.length?e.jsx(u,{onClick:T,className:"flex-1",disabled:m||Object.keys(n).length>0,children:"Next Step"}):e.jsx(u,{onClick:F,disabled:m,className:"flex-1",children:m?e.jsxs(e.Fragment,{children:[e.jsx(B,{className:"w-4 h-4 mr-2 animate-spin"}),"Creating Game..."]}):e.jsxs(e.Fragment,{children:[e.jsx(G,{className:"w-4 h-4 mr-2"}),"Create Game"]})})]})}),w&&e.jsx("div",{className:"mt-4",children:e.jsx(D,{variant:"destructive",children:e.jsx(E,{children:w})})}),a===3&&t.sport&&e.jsx("div",{className:"mt-6",children:e.jsxs(D,{children:[e.jsx(G,{className:"h-4 w-4"}),e.jsxs(E,{children:['Ready to create "',t.title,'" for ',t.maxPlayers," players on ",t.date," at ",t.time,"?"]})]})})]})]})}export{W as CreateGame};
//# sourceMappingURL=CreateGame-X71CIwCB.js.map
