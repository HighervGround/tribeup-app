{"version":3,"file":"SearchDiscovery-CLkAkW_T.js","sources":["../../src/components/SearchDiscovery.tsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport { SupabaseService } from '../lib/supabaseService';\nimport { Button } from './ui/button';\nimport { Input } from './ui/input';\nimport { Badge } from './ui/badge';\nimport { ArrowLeft, Search, SlidersHorizontal, Clock, Users } from 'lucide-react';\nimport { useAppStore } from '../store/appStore';\nimport { useGames } from '../hooks/useGames';\nimport { UnifiedGameCard } from './UnifiedGameCard';\nimport { formatTimeString } from '../lib/dateUtils';\n\n\n\nconst sportFilters = [\n  { name: 'All Sports', value: 'all' },\n  { name: 'Basketball', value: 'basketball' },\n  { name: 'Soccer', value: 'soccer' },\n  { name: 'Tennis', value: 'tennis' },\n  { name: 'Pickleball', value: 'pickleball' },\n  { name: 'Volleyball', value: 'volleyball' },\n  { name: 'Flag Football', value: 'flag football' },\n  { name: 'Baseball', value: 'baseball' },\n  { name: 'Golf', value: 'golf' },\n  { name: 'Hockey', value: 'hockey' },\n  { name: 'Rugby', value: 'rugby' },\n];\n\n// Using UnifiedGameCard component for consistency\n\nfunction SearchDiscovery() {\n  const navigate = useNavigate();\n  const [searchQuery, setSearchQuery] = useState('');\n  const [selectedSport, setSelectedSport] = useState('all');\n  const [showFilters, setShowFilters] = useState(false);\n  // Use React Query for consistent data loading\n  const { data: games = [], isLoading: loading, error } = useGames();\n\n  const handleGameSelect = (gameId: string) => {\n    navigate(`/game/${gameId}`);\n  };\n\n  const handleBack = () => {\n    navigate(-1);\n  };\n\n  // Get sport color helper\n  const getSportColor = (sport: string) => {\n    const colors = {\n      'Basketball': 'bg-orange-500',\n      'Soccer': 'bg-green-500',\n      'Tennis': 'bg-yellow-500',\n      'Pickleball': 'bg-purple-500',\n      'Volleyball': 'bg-blue-500',\n      'Flag Football': 'bg-red-500',\n      'Baseball': 'bg-amber-600',\n      'Golf': 'bg-emerald-600',\n      'Hockey': 'bg-slate-600',\n      'Rugby': 'bg-indigo-600'\n    };\n    return colors[sport as keyof typeof colors] || 'bg-gray-500';\n  };\n\n  // Filter games\n  const filteredResults = games\n    .map(game => ({\n      ...game,\n      sportColor: getSportColor(game.sport),\n      imageUrl: game.imageUrl || '',\n      currentPlayers: game.currentPlayers || game.participants || 0,\n      maxPlayers: game.maxPlayers || game.maxParticipants || 0\n    }))\n    .filter(game => {\n      const matchesSearch = game.title.toLowerCase().includes(searchQuery.toLowerCase()) ||\n                           game.sport.toLowerCase().includes(searchQuery.toLowerCase()) ||\n                           game.location.toLowerCase().includes(searchQuery.toLowerCase());\n      const matchesSport = selectedSport === 'all' || game.sport.toLowerCase() === selectedSport.toLowerCase();\n      return matchesSearch && matchesSport;\n    });\n\n  return (\n    <div className=\"min-h-screen bg-background\">\n      {/* Header */}\n      <div className=\"sticky top-0 bg-background/95 backdrop-blur-sm border-b border-border z-10\">\n        <div className=\"flex items-center gap-4 px-4 py-4\">\n          <Button variant=\"ghost\" size=\"icon\" onClick={handleBack}>\n            <ArrowLeft className=\"w-5 h-5\" />\n          </Button>\n          <div className=\"flex-1 relative\">\n            <Search className=\"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-muted-foreground\" />\n            <Input\n              id=\"search-games\"\n              name=\"search-games\"\n              value={searchQuery}\n              onChange={(e) => setSearchQuery(e.target.value)}\n              placeholder=\"Search games, sports, locations...\"\n              className=\"pl-10\"\n            />\n          </div>\n          <Button \n            variant=\"outline\" \n            size=\"icon\"\n            onClick={() => setShowFilters(!showFilters)}\n          >\n            <SlidersHorizontal className=\"w-4 h-4\" />\n          </Button>\n        </div>\n\n        {/* Filter Bar */}\n        {showFilters && (\n          <div className=\"px-4 pb-4 space-y-4\">\n            <div className=\"grid grid-cols-2 gap-4\">\n              <div>\n                <label className=\"text-sm font-medium mb-2 block\">Sort by</label>\n                <select className=\"w-full p-2 border rounded-md\">\n                  <option value=\"distance\">Distance</option>\n                  <option value=\"time\">Time</option>\n                  <option value=\"players\">Players Needed</option>\n                  <option value=\"cost\">Cost</option>\n                </select>\n              </div>\n              <div>\n                <label className=\"text-sm font-medium mb-2 block\">Date</label>\n                <select className=\"w-full p-2 border rounded-md\">\n                  <option value=\"\">Any time</option>\n                  <option value=\"today\">Today</option>\n                  <option value=\"tomorrow\">Tomorrow</option>\n                  <option value=\"week\">This Week</option>\n                  <option value=\"month\">This Month</option>\n                </select>\n              </div>\n            </div>\n          </div>\n        )}\n\n        {/* Sport Filter Chips */}\n        <div className=\"px-4 pb-4\">\n          <div className=\"flex gap-2 overflow-x-auto pb-2\">\n            {sportFilters.map((sport) => (\n              <Badge\n                key={sport.value}\n                variant={selectedSport === sport.value ? \"default\" : \"outline\"}\n                className=\"cursor-pointer whitespace-nowrap\"\n                onClick={() => setSelectedSport(sport.value)}\n              >\n                {sport.name}\n              </Badge>\n            ))}\n          </div>\n        </div>\n      </div>\n\n      <div className=\"px-4 py-6\">\n        {/* Results Header */}\n        <div className=\"flex items-center justify-between mb-6\">\n          <div>\n            <h2 className=\"text-lg font-semibold\">\n              {filteredResults.length} games found\n            </h2>\n            {searchQuery && (\n              <p className=\"text-sm text-muted-foreground\">\n                Results for \"{searchQuery}\"\n              </p>\n            )}\n          </div>\n        </div>\n\n        {/* Results List */}\n        <div className=\"space-y-4\">\n          {filteredResults.map((game) => (\n            <UnifiedGameCard\n              key={game.id}\n              game={game}\n              variant=\"simple\"\n              onSelect={() => handleGameSelect(game.id)}\n            />\n          ))}\n        </div>\n\n        {filteredResults.length === 0 && (\n          <div className=\"text-center py-12\">\n            <div className=\"w-16 h-16 bg-muted rounded-full flex items-center justify-center mx-auto mb-4\">\n              <Search className=\"w-6 h-6 text-muted-foreground\" />\n            </div>\n            <h3 className=\"text-lg font-semibold mb-2\">No games found</h3>\n            <p className=\"text-muted-foreground mb-4\">\n              Try adjusting your search or filters\n            </p>\n            <Button variant=\"outline\" onClick={() => {\n              setSearchQuery('');\n              setSelectedSport('all');\n            }}>\n              Clear filters\n            </Button>\n          </div>\n        )}\n      </div>\n    </div>\n  );\n}\n\nexport default SearchDiscovery;"],"names":["sportFilters","name","value","SearchDiscovery","navigate","useNavigate","searchQuery","setSearchQuery","useState","selectedSport","setSelectedSport","showFilters","setShowFilters","data","games","isLoading","loading","error","useGames","filteredResults","map","game","sportColor","sport","Basketball","Soccer","Tennis","Pickleball","Volleyball","Baseball","Golf","Hockey","Rugby","imageUrl","currentPlayers","participants","maxPlayers","maxParticipants","filter","matchesSearch","title","toLowerCase","includes","location","matchesSport","jsxs","className","children","jsx","Button","variant","size","onClick","ArrowLeft","Search","Input","id","onChange","e","target","placeholder","SlidersHorizontal","Badge","length","UnifiedGameCard","onSelect","handleGameSelect","gameId"],"mappings":"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"}