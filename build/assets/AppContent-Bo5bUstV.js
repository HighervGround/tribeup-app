import{j as e}from"./ui-Ca5AhCQM.js";import{r as c,b as x}from"./vendor-IUqyc6Bg.js";import{c as A,u as N,G as v,B as p,b as g,J as T,O as y}from"./index-DAbKcXBL.js";import{B as b}from"./badge-DWKnx1MB.js";import{u as k}from"./useNotifications-DL1txJ0j.js";import{H as C}from"./house-dMXRNyRk.js";import{S as E}from"./search-B54mhzdP.js";import{P as S}from"./plus-BnnnwDzX.js";import{B as L}from"./bell-CJ456smW.js";import{U as P}from"./user-DV59EkLM.js";import{A as F,a as H,b as M}from"./avatar-IBi9SeLW.js";/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const R=[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]],D=A("menu",R),U=[{path:"/",icon:C,label:"Home"},{path:"/search",icon:E,label:"Search"},{path:"/create",icon:S,label:"Create"},{path:"/notifications",icon:L,label:"Notifications",showBadge:!0},{path:"/profile",icon:P,label:"Profile"}],B=c.forwardRef((o,n)=>{const d=N(),i=v(),{unreadCount:l}=k();return e.jsxs("div",{ref:n,className:"fixed bottom-0 left-0 right-0 bg-background/95 backdrop-blur-sm border-t border-border",children:[e.jsx("div",{className:"flex items-center justify-between px-4 py-2 max-w-lg mx-auto",children:U.map(r=>{const m=i.pathname===r.path,t=r.icon;return e.jsx("div",{className:"relative flex-1 flex justify-center",children:e.jsxs(p,{variant:"ghost",onClick:()=>d(r.path),className:`flex flex-col items-center gap-1 p-2 h-auto w-full transition-all duration-200 ${m?"text-primary":"text-muted-foreground hover:text-foreground"}`,"aria-label":`Navigate to ${r.label}`,"aria-current":m?"page":void 0,children:[e.jsxs("div",{className:"relative",children:[e.jsx(t,{className:"w-5 h-5"}),r.showBadge&&l>0&&e.jsx(b,{variant:"destructive",className:"absolute -top-2 -right-2 h-5 w-5 p-0 text-xs flex items-center justify-center min-w-[20px]",children:l>99?"99+":l})]}),e.jsx("span",{className:"text-xs font-medium",children:r.label}),m&&e.jsx("div",{className:"absolute -top-1 left-1/2 w-1 h-1 bg-primary rounded-full transition-all duration-200",style:{transform:"translateX(-50%)"}})]})},r.path)})}),e.jsx("div",{className:"pb-safe bg-background/95"})]})});B.displayName="BottomNavigation";const z=[{path:"/",icon:C,label:"Home",description:"Discover games"},{path:"/search",icon:E,label:"Search",description:"Find your game"},{path:"/notifications",icon:L,label:"Notifications",description:"Stay updated",showBadge:!0},{path:"/profile",icon:P,label:"Profile",description:"Your account"}];function $({children:o}){const n=N(),d=v(),{unreadCount:i}=k(),{user:l}=g(),[r,m]=c.useState(!1);return e.jsxs("div",{className:"flex h-screen bg-background",children:[e.jsxs("aside",{className:`bg-card border-r border-border transition-all duration-300 ${r?"w-16":"w-64"}`,children:[e.jsx("div",{className:"p-6 border-b border-border",children:e.jsxs("div",{className:"flex items-center justify-between",children:[!r&&e.jsxs("div",{children:[e.jsx("h1",{className:"text-xl text-foreground",children:"TribeUp"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Find your tribe"})]}),e.jsx(p,{variant:"ghost",size:"icon",onClick:()=>m(!r),"aria-label":r?"Expand sidebar":"Collapse sidebar",children:e.jsx(D,{className:"w-5 h-5"})})]})}),e.jsx("div",{className:"p-4",children:e.jsxs(p,{onClick:()=>n("/create"),className:"w-full justify-start gap-3","aria-label":"Create new game",children:[e.jsx(S,{className:"w-5 h-5"}),!r&&"Create Game"]})}),e.jsx("nav",{className:"flex-1 px-4 space-y-2",role:"menubar",children:z.map(t=>{const s=d.pathname===t.path,a=t.icon;return e.jsx("div",{children:e.jsxs(p,{variant:s?"default":"ghost",onClick:()=>n(t.path),className:`w-full justify-start gap-3 h-12 relative ${r?"px-2":"px-4"}`,role:"menuitem","aria-current":s?"page":void 0,title:r?t.label:void 0,children:[e.jsxs("div",{className:"relative",children:[e.jsx(a,{className:"w-5 h-5 flex-shrink-0"}),t.showBadge&&i>0&&e.jsx(b,{variant:"destructive",className:"absolute -top-1 -right-1 h-4 min-w-4 p-0 text-xs flex items-center justify-center",children:i>99?"99+":i})]}),!r&&e.jsxs("div",{className:"flex-1 text-left",children:[e.jsxs("div",{className:"font-medium flex items-center gap-2",children:[t.label,t.showBadge&&i>0&&e.jsx(b,{variant:"destructive",className:"h-5 px-2 text-xs",children:i>99?"99+":i})]}),e.jsx("div",{className:"text-xs text-muted-foreground",children:t.description})]})]})},t.path)})}),e.jsx("div",{className:"p-4 border-t border-border",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs(F,{className:"cursor-pointer",onClick:()=>n("/profile"),children:[l?.avatar&&e.jsx(H,{src:l.avatar,alt:l.name||"User"}),e.jsx(M,{children:l?.name?.charAt(0)||"U"})]}),!r&&e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-sm font-medium truncate",children:l?.name||"User"}),e.jsx("p",{className:"text-xs text-muted-foreground truncate",children:l?.email||"user@example.com"})]})]})})]}),e.jsx("main",{className:"flex-1 overflow-hidden",children:o})]})}const j=({...o})=>e.jsx(T,{theme:"system",className:"toaster group",style:{"--normal-bg":"var(--popover)","--normal-text":"var(--popover-foreground)","--normal-border":"var(--border)"},...o}),f={mobile:768,tablet:1024,desktop:1440,desktopLarge:1920};function O(){const[o,n]=c.useState("mobile"),[d,i]=c.useState({width:typeof window<"u"?window.innerWidth:0,height:typeof window<"u"?window.innerHeight:0});return c.useEffect(()=>{const l=()=>{const r=window.innerWidth;i({width:r,height:window.innerHeight}),r>=f.desktopLarge?n("desktop-large"):r>=f.desktop?n("desktop"):r>=f.tablet||r>=f.mobile?n("tablet"):n("mobile")};return l(),window.addEventListener("resize",l),()=>window.removeEventListener("resize",l)},[]),{screenSize:o,dimensions:d,isMobile:o==="mobile",isTablet:o==="tablet",isDesktop:o==="desktop"||o==="desktop-large",isDesktopLarge:o==="desktop-large",breakpoints:f}}function I(){const o=g(t=>t.user),n=g(t=>t.updateUserPreferences),d=c.useCallback((t,s="polite")=>{let a=document.getElementById("live-region");a?a.setAttribute("aria-live",s):(a=document.createElement("div"),a.id="live-region",a.setAttribute("aria-live",s),a.setAttribute("aria-atomic","true"),a.className="sr-only",document.body.appendChild(a)),a.textContent="",setTimeout(()=>{a&&(a.textContent=t)},100),setTimeout(()=>{a&&a.textContent===t&&(a.textContent="")},5e3)},[]),i=c.useCallback(t=>{const s=document.documentElement;if(s.classList.remove("light","dark"),t.theme==="dark")s.classList.add("dark");else if(t.theme==="light")s.classList.add("light");else{const a=window.matchMedia("(prefers-color-scheme: dark)").matches;s.classList.toggle("dark",a),s.classList.toggle("light",!a)}s.classList.toggle("high-contrast",t.highContrast),s.classList.toggle("large-text",t.largeText),s.classList.toggle("colorblind-friendly",t.colorBlindFriendly),t.reducedMotion?(s.style.setProperty("--duration-fast","0ms"),s.style.setProperty("--duration-normal","0ms"),s.style.setProperty("--duration-slow","0ms")):(s.style.removeProperty("--duration-fast"),s.style.removeProperty("--duration-normal"),s.style.removeProperty("--duration-slow"))},[]);c.useEffect(()=>{if(o?.preferences)i({theme:o.preferences.theme,highContrast:o.preferences.highContrast,largeText:o.preferences.largeText,reducedMotion:o.preferences.reducedMotion,colorBlindFriendly:o.preferences.colorBlindFriendly});else{const t=document.documentElement;window.matchMedia("(prefers-color-scheme: dark)").matches&&t.classList.add("dark"),window.matchMedia("(prefers-contrast: high)").matches&&t.classList.add("high-contrast"),window.matchMedia("(prefers-reduced-motion: reduce)").matches&&(t.style.setProperty("--duration-fast","0ms"),t.style.setProperty("--duration-normal","0ms"),t.style.setProperty("--duration-slow","0ms"))}},[o?.preferences,i]);const l=c.useCallback(t=>{if(o){const s={...o.preferences,...t};n(s),i({theme:s.theme,highContrast:s.highContrast,largeText:s.largeText,reducedMotion:s.reducedMotion,colorBlindFriendly:s.colorBlindFriendly})}},[o,n,i]),r=c.useCallback(t=>{t&&(t.focus(),d(`Focused on ${t.getAttribute("aria-label")||t.textContent||"element"}`))},[d]),m=c.useCallback(t=>{const s=t.querySelectorAll('button, [href], input, select, textarea, [tabindex]:not([tabindex="-1"])'),a=s[0],u=s[s.length-1],w=h=>{h.key==="Tab"&&(h.shiftKey?document.activeElement===a&&(h.preventDefault(),u.focus()):document.activeElement===u&&(h.preventDefault(),a.focus()))};return t.addEventListener("keydown",w),a?.focus(),()=>{t.removeEventListener("keydown",w)}},[]);return{preferences:o?.preferences,updatePreferences:l,applyPreferences:i,announceToScreenReader:d,focusElement:r,trapFocus:m}}function ee(){const{isMobile:o}=O(),n=v(),{announceToScreenReader:d}=I(),[i,l]=x.useState(!1),r=c.useRef(null),[m,t]=c.useState(0);if(x.useEffect(()=>{const s=n.state||window.history.state?.usr||{};console.log("AppContent: Current location state:",s),s.fromOnboarding&&!i&&(console.log("AppContent: Detected navigation from onboarding, marking as complete"),l(!0),window.history.replaceState({...window.history.state,usr:{...window.history.state?.usr,fromOnboarding:!1}},""))},[n.state,i]),x.useEffect(()=>{const a=(u=>u==="/"?"Home":u==="/search"?"Search":u==="/create"?"Create Game":u==="/profile"?"Profile":u.startsWith("/game/")?"Game Details":u.startsWith("/chat/")?"Chat":u.startsWith("/user/")?"User Profile":u.startsWith("/settings")?"Settings":"Page")(n.pathname);d(`Navigated to ${a}`),document.title=`${a} - TribeUp`},[n.pathname,d]),c.useEffect(()=>{const s=()=>{if(r.current){const a=r.current.offsetHeight;t(a)}};return s(),window.addEventListener("resize",s),()=>window.removeEventListener("resize",s)},[]),o){const s=n.pathname==="/create";return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"min-h-screen bg-background",children:[e.jsx("main",{style:{paddingBottom:s?"0px":`${m+16}px`},children:e.jsx(y,{})}),!s&&e.jsx(B,{ref:r})]}),e.jsx(j,{position:"top-center",toastOptions:{duration:4e3,className:"animate-slide-in-down"}})]})}return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"min-h-screen bg-background",children:e.jsx($,{children:e.jsx("main",{id:"main-content",className:"flex-1 overflow-hidden",children:e.jsx(y,{})})})}),e.jsx(j,{position:"bottom-right",toastOptions:{duration:4e3,className:"animate-slide-in-down"}})]})}export{ee as AppContent};
//# sourceMappingURL=AppContent-Bo5bUstV.js.map
