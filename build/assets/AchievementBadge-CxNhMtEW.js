import{j as e,c as t,i as r,k as n,l as s,m as a,n as o,A as i,P as l,o as c,p as d,q as u,r as p,s as x,t as m,v as h,w as f}from"./ui-Bz49QZar.js";import{j as g,b as y}from"./index-C1rAQj-O.js";import{r as b}from"./vendor-CVaDA-xz.js";import{l as v,w as j,I as w,J as N}from"./utils-e0hEqRVR.js";var[C,T]=t("Tooltip",[r]),k=r(),E="TooltipProvider",_=700,D="tooltip.open",[R,L]=C(E),P=t=>{const{__scopeTooltip:r,delayDuration:n=_,skipDelayDuration:s=300,disableHoverableContent:a=!1,children:o}=t,i=b.useRef(!0),l=b.useRef(!1),c=b.useRef(0);return b.useEffect(()=>{const e=c.current;return()=>window.clearTimeout(e)},[]),e.jsx(R,{scope:r,isOpenDelayedRef:i,delayDuration:n,onOpen:b.useCallback(()=>{window.clearTimeout(c.current),i.current=!1},[]),onClose:b.useCallback(()=>{window.clearTimeout(c.current),c.current=window.setTimeout(()=>i.current=!0,s)},[s]),isPointerInTransitRef:l,onPointerInTransitChange:b.useCallback(e=>{l.current=e},[]),disableHoverableContent:a,children:o})};P.displayName=E;var O="Tooltip",[M,I]=C(O),z=t=>{const{__scopeTooltip:r,children:o,open:i,defaultOpen:l,onOpenChange:c,disableHoverableContent:d,delayDuration:u}=t,p=L(O,t.__scopeTooltip),x=k(r),[m,h]=b.useState(null),f=n(),g=b.useRef(0),y=d??p.disableHoverableContent,v=u??p.delayDuration,j=b.useRef(!1),[w,N]=s({prop:i,defaultProp:l??!1,onChange:e=>{e?(p.onOpen(),document.dispatchEvent(new CustomEvent(D))):p.onClose(),c?.(e)},caller:O}),C=b.useMemo(()=>w?j.current?"delayed-open":"instant-open":"closed",[w]),T=b.useCallback(()=>{window.clearTimeout(g.current),g.current=0,j.current=!1,N(!0)},[N]),E=b.useCallback(()=>{window.clearTimeout(g.current),g.current=0,N(!1)},[N]),_=b.useCallback(()=>{window.clearTimeout(g.current),g.current=window.setTimeout(()=>{j.current=!0,N(!0),g.current=0},v)},[v,N]);return b.useEffect(()=>()=>{g.current&&(window.clearTimeout(g.current),g.current=0)},[]),e.jsx(a,{...x,children:e.jsx(M,{scope:r,contentId:f,open:w,stateAttribute:C,trigger:m,onTriggerChange:h,onTriggerEnter:b.useCallback(()=>{p.isOpenDelayedRef.current?_():T()},[p.isOpenDelayedRef,_,T]),onTriggerLeave:b.useCallback(()=>{y?E():(window.clearTimeout(g.current),g.current=0)},[E,y]),onOpen:T,onClose:E,disableHoverableContent:y,children:o})})};z.displayName=O;var S="TooltipTrigger",A=b.forwardRef((t,r)=>{const{__scopeTooltip:n,...s}=t,a=I(S,n),d=L(S,n),u=k(n),p=b.useRef(null),x=o(r,p,a.onTriggerChange),m=b.useRef(!1),h=b.useRef(!1),f=b.useCallback(()=>m.current=!1,[]);return b.useEffect(()=>()=>document.removeEventListener("pointerup",f),[f]),e.jsx(i,{asChild:!0,...u,children:e.jsx(l.button,{"aria-describedby":a.open?a.contentId:void 0,"data-state":a.stateAttribute,...s,ref:x,onPointerMove:c(t.onPointerMove,e=>{"touch"!==e.pointerType&&(h.current||d.isPointerInTransitRef.current||(a.onTriggerEnter(),h.current=!0))}),onPointerLeave:c(t.onPointerLeave,()=>{a.onTriggerLeave(),h.current=!1}),onPointerDown:c(t.onPointerDown,()=>{a.open&&a.onClose(),m.current=!0,document.addEventListener("pointerup",f,{once:!0})}),onFocus:c(t.onFocus,()=>{m.current||a.onOpen()}),onBlur:c(t.onBlur,a.onClose),onClick:c(t.onClick,a.onClose)})})});A.displayName=S;var H="TooltipPortal",[B,$]=C(H,{forceMount:void 0}),F=t=>{const{__scopeTooltip:r,forceMount:n,children:s,container:a}=t,o=I(H,r);return e.jsx(B,{scope:r,forceMount:n,children:e.jsx(d,{present:n||o.open,children:e.jsx(u,{asChild:!0,container:a,children:s})})})};F.displayName=H;var K="TooltipContent",X=b.forwardRef((t,r)=>{const n=$(K,t.__scopeTooltip),{forceMount:s=n.forceMount,side:a="top",...o}=t,i=I(K,t.__scopeTooltip);return e.jsx(d,{present:s||i.open,children:i.disableHoverableContent?e.jsx(Q,{side:a,...o,ref:r}):e.jsx(Y,{side:a,...o,ref:r})})}),Y=b.forwardRef((t,r)=>{const n=I(K,t.__scopeTooltip),s=L(K,t.__scopeTooltip),a=b.useRef(null),i=o(r,a),[l,c]=b.useState(null),{trigger:d,onClose:u}=n,p=a.current,{onPointerInTransitChange:x}=s,m=b.useCallback(()=>{c(null),x(!1)},[x]),h=b.useCallback((e,t)=>{const r=e.currentTarget,n={x:e.clientX,y:e.clientY},s=function(e,t,r=5){const n=[];switch(t){case"top":n.push({x:e.x-r,y:e.y+r},{x:e.x+r,y:e.y+r});break;case"bottom":n.push({x:e.x-r,y:e.y-r},{x:e.x+r,y:e.y-r});break;case"left":n.push({x:e.x+r,y:e.y-r},{x:e.x+r,y:e.y+r});break;case"right":n.push({x:e.x-r,y:e.y-r},{x:e.x-r,y:e.y+r})}return n}(n,function(e,t){const r=Math.abs(t.top-e.y),n=Math.abs(t.bottom-e.y),s=Math.abs(t.right-e.x),a=Math.abs(t.left-e.x);switch(Math.min(r,n,s,a)){case a:return"left";case s:return"right";case r:return"top";case n:return"bottom";default:throw new Error("unreachable")}}(n,r.getBoundingClientRect())),a=function(e){const t=e.slice();return t.sort((e,t)=>e.x<t.x?-1:e.x>t.x?1:e.y<t.y?-1:e.y>t.y?1:0),function(e){if(e.length<=1)return e.slice();const t=[];for(let n=0;n<e.length;n++){const r=e[n];for(;t.length>=2;){const e=t[t.length-1],n=t[t.length-2];if(!((e.x-n.x)*(r.y-n.y)>=(e.y-n.y)*(r.x-n.x)))break;t.pop()}t.push(r)}t.pop();const r=[];for(let n=e.length-1;n>=0;n--){const t=e[n];for(;r.length>=2;){const e=r[r.length-1],n=r[r.length-2];if(!((e.x-n.x)*(t.y-n.y)>=(e.y-n.y)*(t.x-n.x)))break;r.pop()}r.push(t)}return r.pop(),1===t.length&&1===r.length&&t[0].x===r[0].x&&t[0].y===r[0].y?t:t.concat(r)}(t)}([...s,...function(e){const{top:t,right:r,bottom:n,left:s}=e;return[{x:s,y:t},{x:r,y:t},{x:r,y:n},{x:s,y:n}]}(t.getBoundingClientRect())]);c(a),x(!0)},[x]);return b.useEffect(()=>()=>m(),[m]),b.useEffect(()=>{if(d&&p){const e=e=>h(e,p),t=e=>h(e,d);return d.addEventListener("pointerleave",e),p.addEventListener("pointerleave",t),()=>{d.removeEventListener("pointerleave",e),p.removeEventListener("pointerleave",t)}}},[d,p,h,m]),b.useEffect(()=>{if(l){const e=e=>{const t=e.target,r={x:e.clientX,y:e.clientY},n=d?.contains(t)||p?.contains(t),s=!function(e,t){const{x:r,y:n}=e;let s=!1;for(let a=0,o=t.length-1;a<t.length;o=a++){const e=t[a],i=t[o],l=e.x,c=e.y,d=i.x,u=i.y;c>n!=u>n&&r<(d-l)*(n-c)/(u-c)+l&&(s=!s)}return s}(r,l);n?m():s&&(m(),u())};return document.addEventListener("pointermove",e),()=>document.removeEventListener("pointermove",e)}},[d,p,l,u,m]),e.jsx(Q,{...t,ref:i})}),[q,J]=C(O,{isInside:!1}),G=h("TooltipContent"),Q=b.forwardRef((t,r)=>{const{__scopeTooltip:n,children:s,"aria-label":a,onEscapeKeyDown:o,onPointerDownOutside:i,...l}=t,c=I(K,n),d=k(n),{onClose:u}=c;return b.useEffect(()=>(document.addEventListener(D,u),()=>document.removeEventListener(D,u)),[u]),b.useEffect(()=>{if(c.trigger){const e=e=>{const t=e.target;t?.contains(c.trigger)&&u()};return window.addEventListener("scroll",e,{capture:!0}),()=>window.removeEventListener("scroll",e,{capture:!0})}},[c.trigger,u]),e.jsx(x,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:o,onPointerDownOutside:i,onFocusOutside:e=>e.preventDefault(),onDismiss:u,children:e.jsxs(m,{"data-state":c.stateAttribute,...d,...l,ref:r,style:{...l.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"},children:[e.jsx(G,{children:s}),e.jsx(q,{scope:n,isInside:!0,children:e.jsx(f,{id:c.contentId,role:"tooltip",children:a||s})})]})})});X.displayName=K;var U="TooltipArrow",V=b.forwardRef((t,r)=>{const{__scopeTooltip:n,...s}=t,a=k(n);return J(U,n).isInside?null:e.jsx(p,{...a,...s,ref:r})});V.displayName=U;var W=P,Z=z,ee=A,te=F,re=X,ne=V;function se({delayDuration:t=0,...r}){return e.jsx(W,{"data-slot":"tooltip-provider",delayDuration:t,...r})}function ae({...t}){return e.jsx(se,{children:e.jsx(Z,{"data-slot":"tooltip",...t})})}function oe({...t}){return e.jsx(ee,{"data-slot":"tooltip-trigger",...t})}function ie({className:t,sideOffset:r=0,children:n,...s}){return e.jsx(te,{children:e.jsxs(re,{"data-slot":"tooltip-content",sideOffset:r,className:g("bg-primary text-primary-foreground animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-50 w-fit origin-(--radix-tooltip-content-transform-origin) rounded-md px-3 py-1.5 text-xs text-balance",t),...s,children:[n,e.jsx(ne,{className:"bg-primary fill-primary z-50 size-2.5 translate-y-[calc(-50%_-_2px)] rotate-45 rounded-[2px]"})]})})}const le=e=>{switch(e){case"trophy":return"ðŸ†";case"star":return"â­";case"handshake":return"ðŸ¤";case"runner":return"ðŸƒ";case"crown":return"ðŸ‘‘";default:return"ðŸŽ¯"}},ce=t=>{switch(t){case"engagement":return e.jsx(N,{className:"w-3 h-3"});case"milestone":default:return e.jsx(v,{className:"w-3 h-3"});case"hosting":return e.jsx(w,{className:"w-3 h-3"});case"social":return e.jsx(j,{className:"w-3 h-3"})}},de=e=>{switch(e){case"engagement":return"bg-blue-100 text-blue-700 border-blue-200 dark:bg-blue-900 dark:text-blue-300";case"milestone":return"bg-yellow-100 text-yellow-700 border-yellow-200 dark:bg-yellow-900 dark:text-yellow-300";case"hosting":return"bg-purple-100 text-purple-700 border-purple-200 dark:bg-purple-900 dark:text-purple-300";case"social":return"bg-green-100 text-green-700 border-green-200 dark:bg-green-900 dark:text-green-300";default:return"bg-gray-100 text-gray-700 border-gray-200 dark:bg-gray-900 dark:text-gray-300"}};function ue({achievement:t,size:r="md",showTooltip:n=!0,variant:s="default",showScore:a=!0,layout:o="compact"}){const i={sm:"card"===o?"text-xs p-2 gap-1":"text-xs px-1.5 py-0.5 gap-1",md:"card"===o?"text-sm p-3 gap-2":"text-xs px-2 py-1 gap-1.5",lg:"card"===o?"text-base p-4 gap-3":"text-sm px-3 py-1.5 gap-2"};if("card"===o){const o=e.jsxs("div",{className:`\n        ${i[r]} \n        ${"default"===s?de(t.category):"bg-card border border-border"}\n        rounded-lg flex flex-col items-center text-center font-medium transition-all hover:shadow-md cursor-pointer\n      `,children:[e.jsx("div",{className:"text-3xl mb-2",children:le(t.icon)}),e.jsx("div",{className:"font-semibold text-sm mb-1 line-clamp-2",children:t.name}),a&&e.jsxs("div",{className:"text-lg font-bold text-primary",children:["+",t.points]}),t.earned_at&&e.jsx("div",{className:"text-xs text-muted-foreground mt-1",children:new Date(t.earned_at).toLocaleDateString()})]});return n?e.jsx(se,{children:e.jsxs(ae,{children:[e.jsx(oe,{asChild:!0,children:o}),e.jsx(ie,{side:"top",className:"max-w-xs",children:e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-lg",children:le(t.icon)}),e.jsx("span",{className:"font-semibold",children:t.name})]}),e.jsx("p",{className:"text-sm text-muted-foreground",children:t.description}),e.jsxs("div",{className:"flex items-center justify-between text-xs",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[ce(t.category),e.jsx("span",{className:"capitalize",children:t.category})]}),e.jsxs("span",{className:"text-primary font-medium",children:["+",t.points," pts"]})]}),t.earned_at&&e.jsxs("p",{className:"text-xs text-muted-foreground",children:["Earned ",new Date(t.earned_at).toLocaleDateString()]})]})})]})}):o}const l=e.jsxs(y,{variant:s,className:`\n        ${i[r]} \n        ${"default"===s?de(t.category):""}\n        inline-flex items-center font-medium\n      `,children:[e.jsx("span",{className:"text-lg",children:le(t.icon)}),e.jsx("span",{className:"truncate max-w-[100px]",children:t.name}),a&&("lg"===r||"md"===r)&&e.jsxs("span",{className:"text-xs font-bold text-primary bg-primary/10 px-1.5 py-0.5 rounded ml-1",children:["+",t.points]})]});return n?e.jsx(se,{children:e.jsxs(ae,{children:[e.jsx(oe,{asChild:!0,children:l}),e.jsx(ie,{side:"top",className:"max-w-xs",children:e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-lg",children:le(t.icon)}),e.jsx("span",{className:"font-semibold",children:t.name})]}),e.jsx("p",{className:"text-sm text-muted-foreground",children:t.description}),e.jsxs("div",{className:"flex items-center justify-between text-xs",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[ce(t.category),e.jsx("span",{className:"capitalize",children:t.category})]}),e.jsxs("span",{className:"text-primary font-medium",children:["+",t.points," pts"]})]}),t.earned_at&&e.jsxs("p",{className:"text-xs text-muted-foreground",children:["Earned ",new Date(t.earned_at).toLocaleDateString()]})]})})]})}):l}function pe({achievements:t,maxDisplay:r=6,size:n="md",layout:s="compact",showScore:a=!0}){const o=t.slice(0,r),i=Math.max(0,t.length-r),l="card"===s?"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 gap-3":"flex flex-wrap gap-2";return e.jsxs("div",{className:l,children:[o.map(t=>e.jsx(ue,{achievement:t,size:n,layout:s,showScore:a},t.id)),i>0&&"compact"===s&&e.jsxs(y,{variant:"outline",className:""+("sm"===n?"text-xs px-1.5 py-0.5":"text-xs px-2 py-1"),children:["+",i," more"]}),i>0&&"card"===s&&e.jsx("div",{className:"flex items-center justify-center p-4 border-2 border-dashed border-muted-foreground/30 rounded-lg text-muted-foreground",children:e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:"text-2xl mb-1",children:["+",i]}),e.jsx("div",{className:"text-xs",children:"more"})]})})]})}export{pe as A};
//# sourceMappingURL=AchievementBadge-CxNhMtEW.js.map
