{"version":3,"file":"useGameJoinToggle-DMCoFyaE.js","sources":["../../src/hooks/useGameJoinToggle.ts"],"sourcesContent":["import { useCallback } from 'react';\nimport { toast } from 'sonner';\nimport { useJoinGame, useLeaveGame } from './useGames';\n\ninterface Game {\n  id: string;\n  isJoined: boolean;\n  [key: string]: any;\n}\n\n/**\n * Custom hook to handle game join/leave toggle functionality\n * Eliminates duplication of join/leave logic across components\n */\nexport function useGameJoinToggle() {\n  const joinGameMutation = useJoinGame();\n  const leaveGameMutation = useLeaveGame();\n  \n  /**\n   * Toggle join/leave status for a game\n   * @param game - Game object with id and isJoined status\n   * @param e - Optional React MouseEvent to prevent propagation\n   */\n  const toggleJoin = useCallback((game: Game, e?: React.MouseEvent) => {\n    // Prevent event bubbling if provided (useful for cards)\n    e?.stopPropagation();\n    \n    console.log('ðŸŽ¯ toggleJoin called with game:', game.id, 'isJoined:', game.isJoined);\n    \n    if (game.isJoined) {\n      console.log('ðŸ”„ Attempting to leave game:', game.id);\n      leaveGameMutation.mutate(game.id, {\n        onSuccess: () => {\n          console.log('âœ… Leave game success callback');\n          toast.success('Left game successfully');\n        },\n        onError: (error) => {\n          console.error('âŒ Leave game error callback:', error);\n        }\n      });\n    } else {\n      console.log('ðŸ”„ Attempting to join game:', game.id);\n      joinGameMutation.mutate(game.id, {\n        onSuccess: () => {\n          console.log('âœ… Join game success callback');\n          toast.success('Joined game successfully!');\n        },\n        onError: (error) => {\n          console.error('âŒ Join game error callback:', error);\n        }\n      });\n    }\n  }, [joinGameMutation, leaveGameMutation]);\n  \n  /**\n   * Check if join/leave operations are currently loading\n   */\n  const isLoading = joinGameMutation.isPending || leaveGameMutation.isPending;\n  \n  /**\n   * Get the appropriate button text based on game state and loading\n   * @param game - Game object with isJoined status\n   * @returns Button text string\n   */\n  const getButtonText = useCallback((game: Game) => {\n    if (isLoading) return '...';\n    return game.isJoined ? 'Leave' : 'Join';\n  }, [isLoading]);\n  \n  /**\n   * Get appropriate button variant based on game state\n   * @param game - Game object with isJoined status\n   * @returns Button variant string\n   */\n  const getButtonVariant = useCallback((game: Game) => {\n    return game.isJoined ? 'outline' : 'default';\n  }, []);\n  \n  return {\n    toggleJoin,\n    isLoading,\n    getButtonText,\n    getButtonVariant,\n    // Individual mutation states for advanced use cases\n    isJoining: joinGameMutation.isPending,\n    isLeaving: leaveGameMutation.isPending,\n  };\n}\n"],"names":["useGameJoinToggle","joinGameMutation","useJoinGame","leaveGameMutation","useLeaveGame","toggleJoin","useCallback","game","e","stopPropagation","isJoined","mutate","id","onSuccess","toast","success","onError","error","isLoading","isPending","getButtonText","getButtonVariant","isJoining","isLeaving"],"mappings":"mIAcO,SAASA,IACd,MAAMC,EAAmBC,IACnBC,EAAoBC,IAOpBC,EAAaC,EAAAA,YAAY,CAACC,EAAYC,KAE1CA,GAAGC,kBAICF,EAAKG,SAEPP,EAAkBQ,OAAOJ,EAAKK,GAAI,CAChCC,UAAW,KAETC,EAAMC,QAAQ,2BAEhBC,QAAUC,QAMZhB,EAAiBU,OAAOJ,EAAKK,GAAI,CAC/BC,UAAW,KAETC,EAAMC,QAAQ,8BAEhBC,QAAUC,SAKb,CAAChB,EAAkBE,IAKhBe,EAAYjB,EAAiBkB,WAAahB,EAAkBgB,UAO5DC,EAAgBd,cAAaC,GAC7BW,EAAkB,MACfX,EAAKG,SAAW,QAAU,OAChC,CAACQ,IAOEG,EAAmBf,cAAaC,GAC7BA,EAAKG,SAAW,UAAY,UAClC,IAEH,MAAO,CACLL,aACAa,YACAE,gBACAC,mBAEAC,UAAWrB,EAAiBkB,UAC5BI,UAAWpB,EAAkBgB,UAEjC"}