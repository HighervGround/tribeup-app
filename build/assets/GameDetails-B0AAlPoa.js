import{j as e,n as a,T as s,o as t,p as i,I as n,q as r,r as l,s as o,t as c,v as d,w as m,O as h}from"./ui-B4gQYcc6.js";import{r as x,e as u,i as p}from"./vendor-CTE-63Sz.js";import{f as g,i as j,C as f,d as v,e as w,B as y,a as N,b,A as C,g as k,h as S,S as $,j as P,u as I,c as R}from"./index-DLF2PjT_.js";import{S as F}from"./separator-CWMDVUrx.js";import{A as z,a as W}from"./alert-BKUy97CU.js";import{X as A,U as M,p as T,q as G,t as O,r as U,e as D,C as E,g as L,f as _,s as J,u as H,i as Y,h as q,j as B,L as K,A as V,v as Q,E as Z,w as X,x as ee,F as ae,D as se,N as te}from"./utils-B5KmqWpW.js";import{I as ie}from"./input-DgMnD6oO.js";import{T as ne}from"./textarea-kcz2LC5T.js";import{I as re}from"./ImageWithFallback-CGJF3SkS.js";import{a as le,b as oe}from"./useGames-dj6uDBvX.js";import{u as ce}from"./useGameJoinToggle-Bx8nl2Qv.js";import{u as de}from"./useDeepLinks-DCaDGyBd.js";import{u as me}from"./useAchievements-sHSBulEr.js";import{a as he,b as xe}from"./dateUtils-DKSG3jUc.js";import"./data-pHbUkPVm.js";function ue({...s}){return e.jsx(a,{"data-slot":"dropdown-menu",...s})}function pe({...a}){return e.jsx(s,{"data-slot":"dropdown-menu-trigger",...a})}function ge({className:a,sideOffset:s=4,...n}){return e.jsx(t,{children:e.jsx(i,{"data-slot":"dropdown-menu-content",sideOffset:s,className:g("z-[99999] min-w-32 overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2","max-h-(--radix-dropdown-menu-content-available-height) min-w-[8rem] origin-(--radix-dropdown-menu-content-transform-origin) overflow-x-hidden overflow-y-auto rounded-md border p-1 shadow-md",a),...n})})}function je({className:a,inset:s,variant:t="default",...i}){return e.jsx(n,{"data-slot":"dropdown-menu-item","data-inset":s,"data-variant":t,className:g("focus:bg-accent focus:text-accent-foreground data-[variant=destructive]:text-destructive data-[variant=destructive]:focus:bg-destructive/10 dark:data-[variant=destructive]:focus:bg-destructive/20 data-[variant=destructive]:focus:text-destructive data-[variant=destructive]:*:[svg]:!text-destructive [&_svg:not([class*='text-'])]:text-muted-foreground relative flex cursor-default items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 data-[inset]:pl-8 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",a),...i})}function fe({...a}){return e.jsx(r,{"data-slot":"dialog",...a})}function ve({...a}){return e.jsx(m,{"data-slot":"dialog-portal",...a})}function we({className:a,...s}){return e.jsx(h,{"data-slot":"dialog-overlay",className:g("data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/50",a),...s})}function ye({className:a,children:s,...t}){return e.jsxs(ve,{"data-slot":"dialog-portal",children:[e.jsx(we,{}),e.jsxs(l,{"data-slot":"dialog-content",className:g("bg-background data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 fixed top-[50%] left-[50%] z-50 grid w-full max-w-[calc(100%-2rem)] translate-x-[-50%] translate-y-[-50%] gap-4 rounded-lg border p-6 shadow-lg duration-200 sm:max-w-lg",a),...t,children:[s,e.jsxs(o,{className:"ring-offset-background focus:ring-ring data-[state=open]:bg-accent data-[state=open]:text-muted-foreground absolute top-4 right-4 rounded-xs opacity-70 transition-opacity hover:opacity-100 focus:ring-2 focus:ring-offset-2 focus:outline-hidden disabled:pointer-events-none [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",children:[e.jsx(A,{}),e.jsx("span",{className:"sr-only",children:"Close"})]})]})]})}function Ne({className:a,...s}){return e.jsx("div",{"data-slot":"dialog-header",className:g("flex flex-col gap-2 text-center sm:text-left",a),...s})}function be({className:a,...s}){return e.jsx("div",{"data-slot":"dialog-footer",className:g("flex flex-col-reverse gap-2 sm:flex-row sm:justify-end",a),...s})}function Ce({className:a,...s}){return e.jsx(c,{"data-slot":"dialog-title",className:g("text-lg leading-none font-semibold",a),...s})}function ke({className:a,...s}){return e.jsx(d,{"data-slot":"dialog-description",className:g("text-muted-foreground text-sm",a),...s})}function Se({isOpen:a,onClose:s,gameTitle:t,gameId:i,onJoinSuccess:n}){const{signUp:r,signInWithOAuth:l}=j(),[o,c]=x.useState("signup"),[d,m]=x.useState({name:"",email:"",phone:""}),[h,u]=x.useState(!1),[p,g]=x.useState("");if(!a)return null;const b=async e=>{try{u(!0),await l(e,{pendingGameId:i}),O.success(`Signing in with ${e}...`),s()}catch(a){O.error(a.message||"Social login failed")}finally{u(!1)}};return e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-50",children:e.jsxs(f,{className:"w-full max-w-md",children:[e.jsxs(v,{className:"flex flex-row items-center justify-between",children:[e.jsx(w,{className:"text-lg",children:"signup"===o?`Join "${t}"`:"Check Your Email"}),e.jsx(y,{variant:"ghost",size:"icon",onClick:s,children:e.jsx(A,{className:"w-4 h-4"})})]}),e.jsx(N,{children:"signup"===o?e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs(y,{variant:"outline",className:"w-full",onClick:()=>b("google"),disabled:h,children:[e.jsxs("svg",{className:"w-4 h-4 mr-2",viewBox:"0 0 24 24",children:[e.jsx("path",{fill:"currentColor",d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"}),e.jsx("path",{fill:"currentColor",d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"}),e.jsx("path",{fill:"currentColor",d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"}),e.jsx("path",{fill:"currentColor",d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"})]}),"Continue with Google"]}),e.jsxs(y,{variant:"outline",className:"w-full",onClick:()=>b("apple"),disabled:h,children:[e.jsx("svg",{className:"w-4 h-4 mr-2",fill:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{d:"M18.71 19.5c-.83 1.24-1.71 2.45-3.05 2.47-1.34.03-1.77-.79-3.29-.79-1.53 0-2 .77-3.27.82-1.31.05-2.3-1.32-3.14-2.53C4.25 17 2.94 12.45 4.7 9.39c.87-1.52 2.43-2.48 4.12-2.51 1.28-.02 2.5.87 3.29.87.78 0 2.26-1.07 3.81-.91.65.03 2.47.26 3.64 1.98-.09.06-2.17 1.28-2.15 3.81.03 3.02 2.65 4.03 2.68 4.04-.03.07-.42 1.44-1.38 2.83M13 3.5c.73-.83 1.94-1.46 2.94-1.5.13 1.17-.34 2.35-1.04 3.19-.69.85-1.83 1.51-2.95 1.42-.15-1.15.41-2.35 1.05-3.11z"})}),"Continue with Apple"]})]}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-0 flex items-center",children:e.jsx("span",{className:"w-full border-t"})}),e.jsx("div",{className:"relative flex justify-center text-xs uppercase",children:e.jsx("span",{className:"bg-background px-2 text-muted-foreground",children:"Or continue with email"})})]}),e.jsxs("form",{onSubmit:async e=>{e.preventDefault(),u(!0),g("");try{await r(d.email,"temp-password-"+Date.now(),{name:d.name,email:d.email,phone:d.phone,pendingGameId:i}),c("verify"),O.success("Account created! Check your email to verify and join the game.")}catch(a){g(a.message)}finally{u(!1)}},className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx(ie,{type:"text",placeholder:"Your name",value:d.name,onChange:e=>m(a=>({...a,name:e.target.value})),required:!0,className:"pl-10"}),e.jsx(M,{className:"w-4 h-4 absolute left-3 top-3 text-muted-foreground"})]}),e.jsxs("div",{className:"relative",children:[e.jsx(ie,{type:"email",placeholder:"Email address",value:d.email,onChange:e=>m(a=>({...a,email:e.target.value})),required:!0,className:"pl-10"}),e.jsx(T,{className:"w-4 h-4 absolute left-3 top-3 text-muted-foreground"})]}),e.jsxs("div",{className:"relative",children:[e.jsx(ie,{type:"tel",placeholder:"Phone (optional)",value:d.phone,onChange:e=>m(a=>({...a,phone:e.target.value})),className:"pl-10"}),e.jsx(G,{className:"w-4 h-4 absolute left-3 top-3 text-muted-foreground"})]}),p&&e.jsx(z,{variant:"destructive",children:e.jsx(W,{children:p})}),e.jsx(y,{type:"submit",className:"w-full",disabled:h,children:h?"Creating Account...":"Join Game"})]}),e.jsx("p",{className:"text-xs text-muted-foreground text-center",children:"By joining, you agree to our Terms of Service and Privacy Policy"})]}):e.jsxs("div",{className:"text-center space-y-4",children:[e.jsx("div",{className:"w-16 h-16 mx-auto bg-primary/10 rounded-full flex items-center justify-center",children:e.jsx(T,{className:"w-8 h-8 text-primary"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold mb-2",children:"Check your email"}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:["We sent a verification link to ",e.jsx("strong",{children:d.email})]}),e.jsxs("p",{className:"text-sm text-muted-foreground mt-2",children:['Click the link to verify your account and automatically join "',t,'"']})]}),e.jsx(y,{variant:"outline",onClick:s,className:"w-full",children:"Got it"})]})})]})})}function $e({game:a,isOpen:s,onClose:t}){const[i,n]=x.useState(!1);if(!s)return null;const r=`${window.location.origin}/public/game/${a.id}`,l=`Join me for ${a.sport} at ${a.location} on ${a.date}!`,o=async()=>{try{await navigator.clipboard.writeText(r),n(!0),O.success("Link copied to clipboard!"),setTimeout(()=>n(!1),2e3)}catch(e){O.error("Failed to copy link")}};return e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-50",children:e.jsxs(f,{className:"w-full max-w-md",children:[e.jsx(v,{children:e.jsxs(w,{className:"flex items-center gap-2",children:[e.jsx(U,{className:"w-5 h-5"}),"Share Game"]})}),e.jsxs(N,{className:"space-y-6",children:[e.jsxs("div",{className:"bg-muted/50 rounded-lg p-4",children:[e.jsx("h3",{className:"font-semibold mb-2",children:a.title}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsx("div",{className:"flex items-center gap-2",children:e.jsx(b,{variant:"secondary",children:a.sport})}),e.jsxs("div",{className:"flex items-center gap-2 text-muted-foreground",children:[e.jsx(D,{className:"w-4 h-4"}),e.jsx("span",{children:a.location})]}),e.jsxs("div",{className:"flex items-center gap-2 text-muted-foreground",children:[e.jsx(E,{className:"w-4 h-4"}),e.jsx("span",{children:a.date})]}),e.jsxs("div",{className:"flex items-center gap-2 text-muted-foreground",children:[e.jsx(L,{className:"w-4 h-4"}),e.jsx("span",{children:a.time})]}),e.jsxs("div",{className:"flex items-center gap-2 text-muted-foreground",children:[e.jsx(_,{className:"w-4 h-4"}),e.jsxs("span",{children:[a.currentPlayers,"/",a.maxPlayers," players"]})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium mb-2 block",children:"Public RSVP Link"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(ie,{value:r,readOnly:!0,className:"flex-1"}),e.jsx(y,{variant:"outline",size:"sm",onClick:o,className:i?"bg-green-50 text-green-700":"",children:e.jsx(J,{className:"w-4 h-4"})})]}),e.jsx("p",{className:"text-xs text-muted-foreground mt-2",children:"Anyone with this link can view game details and RSVP"})]}),e.jsx(F,{}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-medium mb-3",children:"Share via"}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs(y,{variant:"outline",onClick:async()=>{if(navigator.share)try{await navigator.share({title:`Join ${a.title}`,text:l,url:r})}catch(e){}else o()},className:"flex items-center gap-2",children:[e.jsx(U,{className:"w-4 h-4"}),"Share"]}),e.jsxs(y,{variant:"outline",onClick:()=>{const e=encodeURIComponent(`Join me for ${a.sport}!`),s=encodeURIComponent(`\nHi!\n\nI'm organizing a ${a.sport} game and would love for you to join:\n\nðŸ“ ${a.location}\nðŸ“… ${a.date} at ${a.time}\nðŸ’° ${a.cost||"Free"}\nðŸ‘¥ ${a.currentPlayers}/${a.maxPlayers} players\n\n${a.description?a.description+"\n\n":""}RSVP here: ${r}\n\nHope to see you there!\n    `.trim());window.open(`mailto:?subject=${e}&body=${s}`)},className:"flex items-center gap-2",children:[e.jsx(T,{className:"w-4 h-4"}),"Email"]}),e.jsxs(y,{variant:"outline",onClick:()=>{const e=encodeURIComponent(`${l} RSVP: ${r}`);window.open(`sms:?body=${e}`)},className:"flex items-center gap-2",children:[e.jsx(H,{className:"w-4 h-4"}),"SMS"]}),e.jsxs(y,{variant:"outline",onClick:()=>{const e=encodeURIComponent(`${l} RSVP: ${r}`);window.open(`https://wa.me/?text=${e}`)},className:"flex items-center gap-2",children:[e.jsx(H,{className:"w-4 h-4"}),"WhatsApp"]})]})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx(y,{variant:"outline",onClick:t,className:"flex-1",children:"Close"}),e.jsxs(y,{onClick:o,className:"flex-1",children:[e.jsx(J,{className:"w-4 h-4 mr-2"}),"Copy Link"]})]})]})]})})}function Pe({isOpen:a,onClose:s,gameId:t,gameTitle:i,players:n}){const{checkForNewAchievements:r}=me(),[l,o]=x.useState("game"),[c,d]=x.useState(!1),[m,h]=x.useState({overall:0,organization:0,skillLevel:0,fun:0,reviewText:"",wouldPlayAgain:!0,recommendToOthers:!0}),[u,p]=x.useState(n.map(e=>({playerId:e.id,skill:0,sportsmanship:0,communication:0,feedback:""}))),g=({rating:a,onRatingChange:s,label:t})=>e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium",children:t}),e.jsx("div",{className:"flex gap-1",children:[1,2,3,4,5].map(t=>e.jsx("button",{type:"button",onClick:()=>s(t),className:"p-1 hover:scale-110 transition-transform",children:e.jsx(B,{className:"w-6 h-6 "+(t<=a?"fill-yellow-400 text-yellow-400":"text-gray-300 hover:text-yellow-400")})},t))})]}),j=(e,a,s)=>{p(t=>t.map(t=>t.playerId===e?{...t,[a]:s}:t))};return e.jsx(fe,{open:a,onOpenChange:s,children:e.jsxs(ye,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:[e.jsxs(Ne,{children:[e.jsxs(Ce,{className:"flex items-center gap-2",children:[e.jsx(Y,{className:"w-5 h-5 text-primary"}),"Rate Your Experience"]}),e.jsxs(ke,{children:["Help improve the community by rating ",i]})]}),"game"===l&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("h3",{className:"text-lg font-semibold mb-2",children:"How was the game?"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Your feedback helps other players"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsx(g,{rating:m.overall,onRatingChange:e=>h(a=>({...a,overall:e})),label:"Overall Rating *"}),e.jsx(g,{rating:m.organization,onRatingChange:e=>h(a=>({...a,organization:e})),label:"Organization"}),e.jsx(g,{rating:m.skillLevel,onRatingChange:e=>h(a=>({...a,skillLevel:e})),label:"Skill Level Match"}),e.jsx(g,{rating:m.fun,onRatingChange:e=>h(a=>({...a,fun:e})),label:"Fun Factor"})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("label",{className:"text-sm font-medium",children:"Additional Comments"}),e.jsx(ne,{placeholder:"Share your experience with other players...",value:m.reviewText,onChange:e=>h(a=>({...a,reviewText:e.target.value})),className:"min-h-[80px]"})]}),e.jsxs("div",{className:"flex gap-4",children:[e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:m.wouldPlayAgain,onChange:e=>h(a=>({...a,wouldPlayAgain:e.target.checked})),className:"rounded"}),e.jsx("span",{className:"text-sm",children:"I'd play again"})]}),e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:m.recommendToOthers,onChange:e=>h(a=>({...a,recommendToOthers:e.target.checked})),className:"rounded"}),e.jsx("span",{className:"text-sm",children:"Recommend to others"})]})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx(y,{variant:"outline",onClick:s,className:"flex-1",children:"Skip"}),e.jsx(y,{onClick:async()=>{if(0!==m.overall)try{d(!0),await $.submitGameReview({gameId:t,overallRating:m.overall,organizationRating:m.organization||void 0,skillLevelRating:m.skillLevel||void 0,funRating:m.fun||void 0,reviewText:m.reviewText||void 0,wouldPlayAgain:m.wouldPlayAgain,recommendToOthers:m.recommendToOthers}),o("players")}catch(e){O.error("Failed to submit rating. Please try again.")}finally{d(!1)}else O.error("Please provide an overall rating")},disabled:c||0===m.overall,className:"flex-1",children:c?"Submitting...":"Next: Rate Players"})]})]}),"players"===l&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Rate Your Fellow Players"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Optional but helps build a better community"})]}),e.jsx("div",{className:"space-y-6",children:n.map(a=>{const s=u.find(e=>e.playerId===a.id);return s?e.jsxs(f,{children:[e.jsx(v,{className:"pb-3",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs(C,{children:[a.avatar&&e.jsx(k,{src:a.avatar,alt:a.name}),e.jsx(S,{children:a.name.charAt(0)})]}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"font-medium",children:a.name}),a.isHost&&e.jsx(b,{variant:"secondary",className:"text-xs",children:"Host"})]})]})}),e.jsxs(N,{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsx(g,{rating:s.skill,onRatingChange:e=>j(a.id,"skill",e),label:"Skill Level"}),e.jsx(g,{rating:s.sportsmanship,onRatingChange:e=>j(a.id,"sportsmanship",e),label:"Sportsmanship"}),e.jsx(g,{rating:s.communication,onRatingChange:e=>j(a.id,"communication",e),label:"Communication"})]}),e.jsx(ne,{placeholder:"Optional feedback for this player...",value:s.feedback,onChange:e=>j(a.id,"feedback",e.target.value),className:"min-h-[60px]"})]})]},a.id):null})}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx(y,{variant:"outline",onClick:()=>o("complete"),className:"flex-1",children:"Skip Player Ratings"}),e.jsx(y,{onClick:async()=>{const e=u.filter(e=>e.skill>0&&e.sportsmanship>0&&e.communication>0);if(0!==e.length)try{d(!0),await Promise.all(e.map(e=>$.submitPlayerRating({gameId:t,ratedPlayerId:e.playerId,skillRating:e.skill,sportsmanshipRating:e.sportsmanship,communicationRating:e.communication,feedbackText:e.feedback||void 0}))),o("complete")}catch(a){O.error("Failed to submit player ratings. Please try again.")}finally{d(!1)}else o("complete")},disabled:c,className:"flex-1",children:c?"Submitting...":"Submit Ratings"})]})]}),"complete"===l&&e.jsxs("div",{className:"text-center space-y-6 py-8",children:[e.jsx("div",{className:"w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mx-auto",children:e.jsx(q,{className:"w-8 h-8 text-green-600"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Thanks for your feedback!"}),e.jsx("p",{className:"text-muted-foreground",children:"Your ratings help make TribeUp better for everyone"})]}),e.jsx("div",{className:"bg-muted/50 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-center justify-center gap-2 text-sm text-muted-foreground",children:[e.jsx(Y,{className:"w-4 h-4"}),e.jsx("span",{children:"Check your profile for any new achievements!"})]})}),e.jsx(y,{onClick:async()=>{await r(),s()},className:"w-full",children:"Done"})]})]})})}class Ie{static API_KEY=P.get("openWeatherApiKey");static BASE_URL="https://api.openweathermap.org/data/2.5";static CONFIG={temperatureUnit:P.get("weatherTempUnit"),updateInterval:P.get("weatherUpdateInterval"),includeHourlyForecast:P.get("weatherIncludeHourly"),rainThreshold:P.get("weatherRainThreshold"),windThreshold:P.get("weatherWindThreshold")};static async getCurrentWeather(e,a){if(!this.API_KEY)return this.getMockWeatherData();try{const s=await fetch(`${this.BASE_URL}/weather?lat=${e}&lon=${a}&appid=${this.API_KEY}&units=imperial`);if(!s.ok)throw new Error(`Weather API error: ${s.status}`);const t=await s.json();return this.transformWeatherData(t)}catch(s){return this.getMockWeatherData()}}static async getGameWeather(e,a,s){if(!this.API_KEY)return this.getMockWeatherData();try{const t=parseFloat(e.toFixed(6)),i=parseFloat(a.toFixed(6)),n=await fetch(`${this.BASE_URL}/forecast?lat=${t}&lon=${i}&appid=${this.API_KEY}&units=imperial`);if(!n.ok)return await this.getCurrentWeather(t,i);const r=await n.json();if(!r.list||0===r.list.length)return await this.getCurrentWeather(t,i);const l=s.getTime(),o=l-72e5,c=l+72e5,d=r.list.filter(e=>{const a=1e3*e.dt;return a>=o&&a<=c});let m;m=d.length>0?d.reduce((e,a)=>Math.abs(1e3*a.dt-l)<Math.abs(1e3*e.dt-l)?a:e):r.list.reduce((e,a)=>Math.abs(1e3*a.dt-l)<Math.abs(1e3*e.dt-l)?a:e);const h=this.analyzeWeatherWindow(d,m);return this.transformWeatherData(m,h)}catch(t){return this.getMockWeatherData()}}static async getWeatherByZipcode(e,a){if(!this.API_KEY)return this.getMockWeatherData();try{const s=await fetch(`${this.BASE_URL}/forecast?zip=${e},US&appid=${this.API_KEY}&units=imperial`);if(!s.ok)throw new Error(`Weather API error: ${s.status}`);const t=await s.json(),i=a.getTime(),n=i-72e5,r=i+72e5,l=t.list.filter(e=>{const a=1e3*e.dt;return a>=n&&a<=r});let o;o=l.length>0?l.reduce((e,a)=>Math.abs(1e3*a.dt-i)<Math.abs(1e3*e.dt-i)?a:e):t.list.reduce((e,a)=>Math.abs(1e3*a.dt-i)<Math.abs(1e3*e.dt-i)?a:e);const c=this.analyzeWeatherWindow(l,o);return this.transformWeatherData(o,c)}catch(s){return null}}static extractZipcode(e){const a=e.match(/\b(\d{5}(?:-\d{4})?)\b/);return a?a[1].split("-")[0]:null}static analyzeWeatherWindow(e,a){if(0===e.length)return{alerts:[],windowSummary:""};const s=e.map(e=>e.main.temp),t=e.map(e=>e.weather[0].main),i=e.map(e=>e.rain?.["3h"]||e.snow?.["3h"]||0),n=Math.min(...s),r=Math.max(...s);s.reduce((e,a)=>e+a,0),s.length;const l=Math.max(...i),o=[];let c="";r-n>10&&o.push(`ðŸŒ¡ï¸ Temperature will vary ${Math.round(n)}Â°F to ${Math.round(r)}Â°F during game time`),l>.1&&o.push("ðŸŒ§ï¸ Possible precipitation during game window");const d=[...new Set(t)];return d.length>1&&o.push(`ðŸŒ¤ï¸ Weather conditions may change: ${d.join(", ")}`),e.length>1&&(c=`4-hour forecast: ${Math.round(n)}-${Math.round(r)}Â°F, ${d.join("/")}`),{alerts:o,windowSummary:c}}static transformWeatherData(e,a){const s=Math.round(e.main.temp),t=e.weather[0].main,i=e.weather[0].description,n=e.rain?.["1h"]||e.snow?.["1h"]||0,r=this.generateWeatherAlerts(t,s,n,e.wind.speed),l=a?[...r,...a.alerts]:r;return{temperature:s,condition:t,description:a?.windowSummary||this.capitalizeWords(i),humidity:e.main.humidity,windSpeed:Math.round(e.wind.speed),precipitation:n,icon:this.getWeatherIcon(t),isOutdoorFriendly:this.isOutdoorFriendly(t,s,n,e.wind.speed),alerts:l}}static isOutdoorFriendly(e,a,s,t){if(a<40||a>95)return!1;if(s>this.CONFIG.rainThreshold)return!1;if(t>this.CONFIG.windThreshold)return!1;return!["Thunderstorm","Tornado","Squall"].includes(e)}static generateWeatherAlerts(e,a,s,t){const i=[];return a<50?i.push("ðŸ§¥ Dress warmly - temperature below 50Â°F"):a>85&&i.push("â˜€ï¸ Stay hydrated - high temperature expected"),s>this.CONFIG.rainThreshold&&i.push("ðŸŒ§ï¸ Rain expected - consider indoor backup plan"),t>12&&i.push("ðŸ’¨ Windy conditions - secure loose items"),"Thunderstorm"===e&&i.push("âš¡ Thunderstorm warning - move indoors immediately"),i}static getWeatherIcon(e){return{Clear:"â˜€ï¸",Clouds:"â˜ï¸",Rain:"ðŸŒ§ï¸",Drizzle:"ðŸŒ¦ï¸",Thunderstorm:"â›ˆï¸",Snow:"â„ï¸",Mist:"ðŸŒ«ï¸",Fog:"ðŸŒ«ï¸",Haze:"ðŸŒ«ï¸"}[e]||"ðŸŒ¤ï¸"}static capitalizeWords(e){return e.replace(/\b\w/g,e=>e.toUpperCase())}static getMockWeatherData(){return{temperature:72,condition:"Clear",description:"Clear Sky",humidity:65,windSpeed:8,precipitation:0,icon:"â˜€ï¸",isOutdoorFriendly:!0,alerts:[]}}static isConfigured(){return!!this.API_KEY&&this.API_KEY.length>0}static getWeatherRecommendation(e){return e.isOutdoorFriendly?e.temperature<60?"Cool weather - dress in layers and bring warm clothing.":e.temperature>80?"Warm weather - bring water and sun protection.":"Great weather for outdoor activities!":"Weather conditions may not be ideal for outdoor activities. Consider rescheduling or moving indoors."}}function Re({game:a}){const[s,t]=x.useState(null),[i,n]=x.useState(!0);return x.useEffect(()=>{(async()=>{try{let s=null;const i=new Date(`${a.date} ${a.time}`);if(a.latitude&&a.longitude)s=await Ie.getGameWeather(a.latitude,a.longitude,i);else if(a.location){const t="AIzaSyCs_MsE3qt74h6eIR04QJqmf2FYgSys4UQ";try{const e=await fetch(`https://maps.googleapis.com/maps/api/geocode/json?address=${encodeURIComponent(a.location)}&key=${t}`);if(e.ok){const a=await e.json();if("OK"===a.status&&a.results&&a.results.length>0){const{lat:e,lng:t}=a.results[0].geometry.location;s=await Ie.getGameWeather(e,t,i)}}}catch(e){}if(!s){const e=Ie.extractZipcode(a.location);e&&(s=await Ie.getWeatherByZipcode(e,i))}if(!s){const e=await fetch(`https://api.openweathermap.org/data/2.5/weather?q=${encodeURIComponent(a.location)}&appid=3d49d90fb511ba08385a88435f10825c&units=imperial`);if(e.ok){const a=await e.json();s={temperature:Math.round(a.main.temp),condition:a.weather[0].main,description:a.weather[0].description,humidity:a.main.humidity,windSpeed:Math.round(a.wind.speed),precipitation:a.rain?.["1h"]||a.snow?.["1h"]||0,icon:"Clear"===a.weather[0].main?"â˜€ï¸":"Clouds"===a.weather[0].main?"â˜ï¸":"Rain"===a.weather[0].main?"ðŸŒ§ï¸":"ðŸŒ¤ï¸",isOutdoorFriendly:!0,alerts:[]}}}}if(!s)throw new Error("No weather data available");t(s)}catch(e){try{const e=await fetch("https://api.openweathermap.org/data/2.5/weather?zip=10001,US&appid=3d49d90fb511ba08385a88435f10825c&units=imperial");if(!e.ok)throw new Error("Fallback weather failed");{const s=await e.json(),i=Math.round(s.main.temp),n=s.weather[0].main,r=s.weather[0].description;t({temperature:i,condition:n,description:`${r.charAt(0).toUpperCase()+r.slice(1)} (nearby area)`,humidity:s.main.humidity,windSpeed:Math.round(s.wind.speed),precipitation:s.rain?.["1h"]||s.snow?.["1h"]||0,icon:"Clear"===n?"â˜€ï¸":"Clouds"===n?"â˜ï¸":"Rain"===n?"ðŸŒ§ï¸":"ðŸŒ¤ï¸",isOutdoorFriendly:i>40&&i<95,alerts:[`ðŸ“ Showing weather for nearby area - actual conditions at ${a.location||"game location"} may vary`]})}}catch(s){t({temperature:72,condition:"Clear",description:"Weather data temporarily unavailable",humidity:65,windSpeed:8,precipitation:0,icon:"ðŸŒ¤ï¸",isOutdoorFriendly:!0,alerts:[`ðŸ”„ Weather service temporarily unavailable for ${a.location||"this location"}`]})}}n(!1)})()},[a.latitude,a.longitude,a.location,a.date,a.time]),i?e.jsx("div",{className:"text-sm text-muted-foreground",children:"Loading weather..."}):s?e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-2xl",children:s.icon}),e.jsxs("div",{children:[e.jsxs("div",{className:"font-medium",children:[s.temperature,"Â°F"]}),e.jsx("div",{className:"text-sm text-muted-foreground",children:s.description})]})]}),e.jsxs("div",{className:"text-right text-sm text-muted-foreground",children:[e.jsxs("div",{children:["Humidity: ",s.humidity,"%"]}),e.jsxs("div",{children:["Wind: ",s.windSpeed," mph"]})]})]}),s.alerts&&s.alerts.length>0&&e.jsx("div",{className:"space-y-1",children:s.alerts.map((a,s)=>e.jsx("div",{className:"text-xs bg-yellow-50 text-yellow-800 p-2 rounded",children:a},s))}),e.jsx("div",{className:"text-xs text-muted-foreground",children:Ie.getWeatherRecommendation(s)})]}):e.jsx("div",{className:"text-sm text-muted-foreground",children:"Weather unavailable"})}function Fe(){const a=u(),{gameId:s}=p(),{user:t}=I(),{data:i,isLoading:n}=le(s||""),{data:r=[],isLoading:l}=oe(s||""),{toggleJoin:o,isLoading:c,getButtonText:d}=ce(),{navigateToUser:m}=de(),[h,g]=x.useState(!1),[j,C]=x.useState(!1),[k,S]=x.useState(!1),[P,A]=x.useState(!1),[M,T]=x.useState(!1),[G,U]=x.useState(!1),[_,J]=x.useState(!1),[H,Y]=x.useState({title:"",description:"",location:"",duration:60,maxPlayers:0,cost:""}),[q,me]=x.useState(""),ve=x.useMemo(()=>r&&i?r.map(e=>({...e,isHost:e.id===i?.creator_id})):[],[r,i?.creator_id]),we=x.useMemo(()=>i?he(i.date,i.time):{label:"",aria:""},[i?.date,i?.time]),Ie=x.useMemo(()=>i?xe(i.date,i.time):{date:"",time:""},[i?.date,i?.time]),Fe=!!i&&i.currentPlayers>=i.maxPlayers,ze=i?i.tags:void 0,We=t&&i&&(i.creatorId===t.id||i.createdBy===t.id);if(x.useMemo(()=>{if(!i)return!1;return new Date(`${i.date} ${i.time}`)<new Date},[i?.date,i?.time]),x.useMemo(()=>!(!t||!i)&&(i.isJoined||We),[t,i?.isJoined,We]),n)return e.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx(K,{className:"w-8 h-8 animate-spin mx-auto mb-4"}),e.jsx("p",{className:"text-muted-foreground",children:"Loading game details..."})]})});if(!i)return e.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("h1",{className:"text-2xl mb-4",children:"Game not found"}),e.jsx("p",{className:"text-muted-foreground mb-4",children:"The game you're looking for doesn't exist or has been removed."}),e.jsx(y,{onClick:()=>a("/"),children:"Go Home"})]})});return e.jsxs("div",{className:"min-h-screen bg-background",children:[e.jsx("div",{className:"sticky top-0 bg-background/95 backdrop-blur-sm border-b border-border z-10",children:e.jsxs("div",{className:"flex items-center justify-between px-4 py-4",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(y,{variant:"ghost",size:"icon",onClick:()=>{a(-1)},"aria-label":"Go back",children:e.jsx(V,{className:"w-5 h-5"})}),e.jsxs("div",{role:"text","aria-label":`Event: ${i.title}. ${we.aria}`,children:[e.jsx("h1",{className:"text-xl font-semibold line-clamp-2",children:i.title}),e.jsx("p",{className:"text-sm text-muted-foreground",children:we.label})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(y,{variant:"ghost",size:"icon",onClick:async()=>{S(!0)},"data-action":"share","aria-label":"Share game",title:"Share game (U)",children:e.jsx(Q,{className:"w-5 h-5"})}),e.jsxs(ue,{onOpenChange:e=>{},children:[e.jsx(pe,{asChild:!0,children:e.jsx("div",{children:e.jsx(y,{variant:"ghost",size:"icon","aria-label":"Game options",onClick:e=>{e.stopPropagation()},style:{display:We?"flex":"none"},children:e.jsx(Z,{className:"w-5 h-5"})})})}),e.jsxs(ge,{align:"end",className:"z-[99999] relative",children:[e.jsxs(je,{onClick:e=>{e.stopPropagation(),Y({title:i.title,description:i.description,location:i.location,duration:i.duration||60,maxPlayers:i.maxPlayers,cost:i.cost}),A(!0)},children:[e.jsx(X,{className:"w-4 h-4 mr-2"}),"Edit Game"]}),e.jsxs(je,{onClick:e=>{e.stopPropagation(),T(!0)},className:"text-destructive focus:text-destructive",children:[e.jsx(ee,{className:"w-4 h-4 mr-2"}),"Cancel Game"]})]})]}),e.jsx(y,{variant:"ghost",size:"icon","aria-label":"Report game",children:e.jsx(ae,{className:"w-5 h-5"})})]})]})}),e.jsxs("div",{className:"px-4 py-6 space-y-6",id:"main-content",children:[e.jsxs(f,{children:[i.imageUrl&&e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"aspect-video overflow-hidden rounded-t-lg",children:e.jsx(re,{src:i.imageUrl,alt:`${i.sport} game`,className:"w-full h-full object-cover"})}),e.jsx("div",{className:"absolute top-4 right-4",children:e.jsx(b,{className:`${i.sportColor} text-white border-none`,children:i.sport})})]}),!i.imageUrl&&e.jsx("div",{className:"p-4 border-b",children:e.jsx(b,{className:`${i.sportColor} text-white border-none`,children:i.sport})}),e.jsxs(N,{className:"p-6",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-6",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(E,{className:"w-5 h-5 text-muted-foreground"}),e.jsxs("div",{children:[e.jsx("div",{children:Ie.date}),e.jsx("div",{className:"text-sm text-muted-foreground",children:Ie.time})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(L,{className:"w-5 h-5 text-muted-foreground"}),e.jsxs("div",{children:[e.jsx("div",{children:"2 hours"}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"Duration"})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(se,{className:"w-5 h-5 text-muted-foreground"}),e.jsxs("div",{children:[e.jsx("div",{children:i.cost}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"Cost"})]})]})]}),e.jsx("div",{className:"flex flex-wrap gap-2 mb-6",children:Array.isArray(ze)&&ze.map(a=>e.jsx(b,{variant:"secondary",children:a},a))}),e.jsx(y,{onClick:async()=>{c||(t?o(i):C(!0))},disabled:!i.isJoined&&Fe||c,className:"w-full h-12",variant:i.isJoined?"outline":"default","data-action":"join-game",title:(i.isJoined?"Leave":"Join")+" game (J)",children:c?e.jsxs(e.Fragment,{children:[e.jsx(K,{className:"w-4 h-4 mr-2 animate-spin"}),i.isJoined?"Leaving...":"Joining..."]}):Fe&&!i.isJoined?"Game is Full":t?d(i):"Join Game - Sign Up"})]})]}),e.jsxs(f,{children:[e.jsx(v,{children:e.jsxs(w,{className:"flex items-center gap-2",children:[e.jsx(D,{className:"w-5 h-5"}),"Location"]})}),e.jsx(N,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{children:e.jsx("div",{children:i.location})}),e.jsx("div",{className:"aspect-video bg-muted rounded-lg flex items-center justify-center",children:i.latitude&&i.longitude||i.location?e.jsx("iframe",{src:`https://www.google.com/maps/embed/v1/place?key=AIzaSyCs_MsE3qt74h6eIR04QJqmf2FYgSys4UQ&q=${i.latitude&&i.longitude?`${i.latitude},${i.longitude}`:encodeURIComponent(i.location)}&zoom=15`,width:"100%",height:"100%",style:{border:0},allowFullScreen:!0,loading:"lazy",referrerPolicy:"no-referrer-when-downgrade",className:"rounded-lg",title:"Game location map"}):e.jsxs("div",{className:"text-center text-muted-foreground",children:[e.jsx(D,{className:"w-8 h-8 mx-auto mb-2"}),e.jsx("p",{children:"Map not available"})]})}),e.jsxs(y,{variant:"outline",className:"w-full",onClick:()=>{const e=i.location||"Location not specified",a=encodeURIComponent(e),s=`https://maps.google.com/maps?q=${a}&t=m&z=16`;try{if(navigator.userAgent.match(/(iPhone|iPad|iPod|Android)/)){const e=`maps://maps.google.com/maps?q=${a}`;window.location.href=e,setTimeout(()=>{window.open(s,"_blank")},1e3)}else window.open(s,"_blank");O.success("Opening directions...")}catch(t){O.error("Failed to open directions")}},"data-action":"directions",title:"Get directions (L)",children:[e.jsx(te,{className:"w-4 h-4 mr-2"}),"Get Directions"]})]})})]}),(i.latitude&&i.longitude||i.location)&&e.jsxs(f,{children:[e.jsx(v,{children:e.jsx(w,{className:"flex items-center gap-2",children:"â˜€ï¸ Weather Forecast"})}),e.jsx(N,{children:e.jsx(Re,{game:i})})]}),e.jsxs(f,{children:[e.jsx(v,{children:e.jsx(w,{children:"About This Game"})}),e.jsx(N,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsx("p",{className:"text-sm leading-relaxed "+(h?"":"line-clamp-3"),children:i.description}),i.description.length>150&&e.jsx(y,{variant:"ghost",size:"sm",onClick:()=>g(!h),className:"p-0 h-auto",children:h?"Show less":"Show more"}),e.jsxs("div",{children:[e.jsx("h4",{className:"mb-2",children:"Requirements"}),e.jsx("ul",{className:"space-y-1",children:["Athletic shoes required","Bring water bottle","No experience necessary"].map((a,s)=>e.jsxs("li",{className:"text-sm text-muted-foreground flex items-start gap-2",children:[e.jsx("span",{className:"w-1 h-1 bg-muted-foreground rounded-full mt-2 flex-shrink-0"}),a]},s))})]})]})})]}),e.jsxs(f,{children:[e.jsx(v,{children:e.jsx(w,{children:"Game Host"})}),e.jsx(N,{children:e.jsx("div",{className:"flex items-center justify-between",children:e.jsx("div",{className:"flex items-center gap-3",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(R,{userId:i.creatorId||i.creatorData?.id,src:i.creatorData?.avatar,alt:i.creatorData?.name||i.createdBy||"Unknown",size:"md"}),e.jsxs("div",{children:[e.jsx("button",{onClick:()=>m(i.creatorId||i.creatorData?.id),className:"hover:text-primary transition-colors cursor-pointer font-medium","data-action":"view-profile",children:i.creatorData?.name||i.createdBy||"Unknown"}),e.jsxs("div",{className:"flex items-center gap-1 text-sm text-muted-foreground",children:[e.jsx(B,{className:"w-3 h-3 fill-current text-warning"}),i.creatorData?.rating||"4.5"]})]})]})})})})]}),e.jsxs(f,{children:[e.jsx(v,{children:e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs(w,{children:["Players (",ve.length,"/",i.maxPlayers,")"]})})}),e.jsx(N,{children:e.jsx("div",{className:"space-y-3",children:ve.map((a,s)=>e.jsxs("div",{children:[e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(R,{userId:a.id,src:a.avatar,alt:a.name,size:"md"}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:()=>{m(a.id)},className:"hover:text-primary transition-colors cursor-pointer font-medium","data-action":"view-profile",children:a.name}),a.isHost&&e.jsx(b,{variant:"secondary",className:"text-xs px-2 py-0",children:"Host"})]}),e.jsxs("div",{className:"flex items-center gap-1 text-sm text-muted-foreground",children:[e.jsx(B,{className:"w-3 h-3 fill-current text-warning"}),a.rating]})]})]})}),s<ve.length-1&&e.jsx(F,{className:"mt-3"})]},a.id))})})]}),i.isJoined&&e.jsx(z,{className:"border-success text-success-foreground",children:e.jsx(W,{children:"You're joined! See you on the field!"})})]}),e.jsx(Se,{isOpen:j,onClose:()=>C(!1),gameTitle:i.title,gameId:i.id,onJoinSuccess:async()=>{C(!1),s&&i&&o(i)}}),e.jsx($e,{isOpen:k,onClose:()=>S(!1),game:i}),e.jsx(fe,{open:P,onOpenChange:A,children:e.jsxs(ye,{className:"sm:max-w-[425px]",children:[e.jsxs(Ne,{children:[e.jsx(Ce,{children:"Edit Game"}),e.jsx(ke,{children:"Make changes to your game. Participants will be notified of any updates."})]}),e.jsxs("div",{className:"grid gap-4 py-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{htmlFor:"edit-title",className:"text-sm font-medium",children:"Title"}),e.jsx(ie,{id:"edit-title",value:H.title,onChange:e=>Y(a=>({...a,title:e.target.value})),placeholder:"Game title"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{htmlFor:"edit-description",className:"text-sm font-medium",children:"Description"}),e.jsx(ne,{id:"edit-description",value:H.description,onChange:e=>Y(a=>({...a,description:e.target.value})),placeholder:"Game description",rows:3})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{htmlFor:"edit-location",className:"text-sm font-medium",children:"Location"}),e.jsx(ie,{id:"edit-location",value:H.location,onChange:e=>Y(a=>({...a,location:e.target.value})),placeholder:"Game location"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{htmlFor:"edit-duration",className:"text-sm font-medium",children:"Duration (minutes)"}),e.jsx(ie,{id:"edit-duration",type:"number",min:"15",max:"480",value:H.duration,onChange:e=>Y(a=>({...a,duration:parseInt(e.target.value)||60})),placeholder:"60"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{htmlFor:"edit-maxPlayers",className:"text-sm font-medium",children:"Max Players"}),e.jsx(ie,{id:"edit-maxPlayers",type:"number",min:"2",max:"50",value:H.maxPlayers,onChange:e=>Y(a=>({...a,maxPlayers:parseInt(e.target.value)||0}))})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{htmlFor:"edit-cost",className:"text-sm font-medium",children:"Cost"}),e.jsx(ie,{id:"edit-cost",value:H.cost,onChange:e=>Y(a=>({...a,cost:e.target.value})),placeholder:"FREE or $10"})]})]})]}),e.jsxs(be,{children:[e.jsx(y,{variant:"outline",onClick:()=>A(!1),children:"Cancel"}),e.jsx(y,{onClick:async()=>{if(s){J(!0);try{await $.updateGame(s,H),O.success("Game updated successfully"),A(!1),window.location.reload()}catch(e){O.error("Failed to update game",{description:e.message||"Please try again later"})}finally{J(!1)}}},disabled:_,children:_?e.jsxs(e.Fragment,{children:[e.jsx(K,{className:"w-4 h-4 mr-2 animate-spin"}),"Saving..."]}):"Save Changes"})]})]})}),e.jsx(fe,{open:M,onOpenChange:T,children:e.jsxs(ye,{className:"sm:max-w-[425px]",children:[e.jsxs(Ne,{children:[e.jsx(Ce,{children:"Cancel Game"}),e.jsx(ke,{children:"This action cannot be undone. All participants will be notified of the cancellation."})]}),e.jsx("div",{className:"grid gap-4 py-4",children:e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{htmlFor:"delete-reason",className:"text-sm font-medium",children:"Reason for cancellation (optional)"}),e.jsx(ne,{id:"delete-reason",value:q,onChange:e=>me(e.target.value),placeholder:"Let participants know why the game is cancelled...",rows:3})]})}),e.jsxs(be,{children:[e.jsx(y,{variant:"outline",onClick:()=>T(!1),children:"Keep Game"}),e.jsx(y,{variant:"destructive",onClick:async()=>{if(s){J(!0);try{await $.deleteGame(s,q),O.success("Game cancelled successfully"),T(!1),a("/")}catch(e){O.error("Failed to cancel game",{description:e.message||"Please try again later"})}finally{J(!1)}}},disabled:_,children:_?e.jsxs(e.Fragment,{children:[e.jsx(K,{className:"w-4 h-4 mr-2 animate-spin"}),"Cancelling..."]}):"Cancel Game"})]})]})}),e.jsx(Pe,{isOpen:G,onClose:()=>U(!1),gameId:s,gameTitle:i?.title||"",players:ve})]})}export{Fe as default};
//# sourceMappingURL=GameDetails-B0AAlPoa.js.map
