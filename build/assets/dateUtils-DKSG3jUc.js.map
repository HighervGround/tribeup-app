{"version":3,"file":"dateUtils-DKSG3jUc.js","sources":["../../src/lib/dateUtils.ts"],"sourcesContent":["// Utility functions for consistent event date/time formatting\n\nfunction toLocalDate(date: Date) {\n  // Normalize to local midnight for comparisons\n  return new Date(date.getFullYear(), date.getMonth(), date.getDate());\n}\n\nfunction safeParse(dateStr?: string, timeStr?: string): Date | null {\n  if (!dateStr && !timeStr) return null;\n  // Try ISO first\n  if (dateStr && !timeStr) {\n    const d = new Date(dateStr);\n    return isNaN(d.getTime()) ? null : d;\n  }\n  if (!dateStr && timeStr) {\n    const d = new Date(timeStr);\n    return isNaN(d.getTime()) ? null : d;\n  }\n  // Combine date and time into local date\n  try {\n    // Support formats like 2025-08-28 and 8:30 PM\n    const [y, m, d] = (dateStr as string).split('-').map(Number);\n    if (!y || !m || !d) throw new Error('bad date');\n    let hours = 0, minutes = 0;\n    if (timeStr) {\n      const match = (timeStr as string).trim().match(/^(\\d{1,2})(?::(\\d{2}))?\\s*(AM|PM)?$/i);\n      if (match) {\n        hours = parseInt(match[1], 10);\n        minutes = match[2] ? parseInt(match[2], 10) : 0;\n        const meridiem = match[3]?.toUpperCase();\n        if (meridiem) {\n          if (meridiem === 'PM' && hours < 12) hours += 12;\n          if (meridiem === 'AM' && hours === 12) hours = 0;\n        }\n      }\n    }\n    const dt = new Date(y, m - 1, d, hours, minutes);\n    return isNaN(dt.getTime()) ? null : dt;\n  } catch {\n    return null;\n  }\n}\n\nfunction formatTime(dt: Date, locale?: string) {\n  return new Intl.DateTimeFormat(locale || undefined, {\n    hour: 'numeric',\n    minute: '2-digit',\n    hour12: true\n  }).format(dt);\n}\n\nfunction formatMonthDay(dt: Date, locale?: string) {\n  return new Intl.DateTimeFormat(locale || undefined, {\n    month: 'short',\n    day: 'numeric'\n  }).format(dt);\n}\n\nexport function formatEventHeader(dateStr?: string, timeStr?: string, locale?: string) {\n  const now = new Date();\n  const parsed = safeParse(dateStr, timeStr);\n  if (!parsed) {\n    // Fallback to simple join if parsing fails\n    const datePart = dateStr || '';\n    const timePart = timeStr || '';\n    return {\n      label: [datePart, timePart].filter(Boolean).join(' · '),\n      aria: `Event ${[datePart, timePart].filter(Boolean).join(' at ')}`,\n      isPast: false,\n      isToday: false,\n      date: datePart,\n      time: timePart,\n    };\n  }\n\n  const today = toLocalDate(now);\n  const eventDate = toLocalDate(parsed);\n  const diffDays = Math.round((eventDate.getTime() - today.getTime()) / 86400000);\n\n  const timeLabel = timeStr ? formatTime(parsed, locale) : '';\n  let dateLabel = '';\n  let isToday = false;\n\n  if (diffDays === 0) {\n    dateLabel = 'Today';\n    isToday = true;\n  } else if (diffDays === 1) {\n    dateLabel = 'Tomorrow';\n  } else {\n    dateLabel = formatMonthDay(parsed, locale);\n  }\n\n  const label = [dateLabel, timeLabel].filter(Boolean).join(' · ');\n  const aria = `Event ${dateLabel}${timeLabel ? ` at ${timeLabel}` : ''}`;\n  const isPast = parsed.getTime() < now.getTime();\n\n  return {\n    label,\n    aria,\n    isPast,\n    isToday,\n    date: dateLabel,\n    time: timeLabel,\n  };\n}\n\nexport function formatCalendarInfo(dateStr?: string, timeStr?: string, locale?: string) {\n  const parsed = safeParse(dateStr, timeStr);\n  if (!parsed) {\n    return { date: dateStr || '', time: timeStr || '' };\n  }\n  return {\n    date: formatMonthDay(parsed, locale),\n    time: formatTime(parsed, locale),\n  };\n}\n\n// Convert 24-hour time string to 12-hour format\nexport function formatTimeString(timeStr: string): string {\n  if (!timeStr) return '';\n  \n  try {\n    // Parse time string like \"14:30\" or \"14:30:00\"\n    const [hours, minutes] = timeStr.split(':').map(Number);\n    if (isNaN(hours) || isNaN(minutes)) return timeStr;\n    \n    const date = new Date();\n    date.setHours(hours, minutes, 0, 0);\n    \n    return new Intl.DateTimeFormat('en-US', {\n      hour: 'numeric',\n      minute: '2-digit',\n      hour12: true\n    }).format(date);\n  } catch {\n    return timeStr; // Return original if parsing fails\n  }\n}\n"],"names":["toLocalDate","date","Date","getFullYear","getMonth","getDate","safeParse","dateStr","timeStr","d","isNaN","getTime","y","m","split","map","Number","Error","hours","minutes","match","trim","parseInt","meridiem","toUpperCase","dt","formatTime","locale","Intl","DateTimeFormat","hour","minute","hour12","format","formatMonthDay","month","day","formatEventHeader","now","parsed","datePart","timePart","label","filter","Boolean","join","aria","isPast","isToday","time","today","eventDate","diffDays","Math","round","timeLabel","dateLabel","formatCalendarInfo","formatTimeString","setHours"],"mappings":"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"}