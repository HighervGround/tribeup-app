import{j as e}from"./ui-Bqrh-KgM.js";import{e as s,r as a}from"./vendor-CVaDA-xz.js";import{C as t,a as l,u as i,B as r}from"./index-Dn2wyjF3.js";import{u as n}from"./useGames-CLXKBZLD.js";import{U as c}from"./UnifiedGameCard-D0t6nFAy.js";import{S as d}from"./skeleton-k2aeeVMy.js";import{R as m,P as o}from"./utils-CNK9eq93.js";import"./data-D6RrWw63.js";import"./ImageWithFallback-B7gg3TPo.js";import"./useGameJoinToggle-DMCoFyaE.js";import"./dateUtils-DKSG3jUc.js";function x(){return e.jsx(t,{className:"w-full",children:e.jsx(l,{className:"p-4",children:e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"space-y-2 flex-1",children:[e.jsx(d,{className:"h-5 w-3/4"}),e.jsx(d,{className:"h-4 w-1/2"})]}),e.jsx(d,{className:"h-8 w-16"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(d,{className:"h-4 w-4"}),e.jsx(d,{className:"h-4 w-2/3"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(d,{className:"h-4 w-4"}),e.jsx(d,{className:"h-4 w-1/3"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(d,{className:"h-4 w-4"}),e.jsx(d,{className:"h-4 w-1/4"})]})]}),e.jsx(d,{className:"h-4 w-full"}),e.jsx(d,{className:"h-4 w-3/4"}),e.jsxs("div",{className:"flex items-center justify-between pt-2",children:[e.jsx(d,{className:"h-6 w-20"}),e.jsx(d,{className:"h-8 w-16"})]})]})})})}function h(){const t=s(),{user:l}=i(),{data:d=[],isLoading:h,error:j,refetch:g}=n(),[u,N]=a.useState(!1),[f,p]=a.useState(!1);a.useMemo(()=>l?.preferences?.sports??[],[l]);const{onlineCount:v}={onlineUsers:[],onlineCount:0,isLoading:!1,error:null,isRealtime:!1,isPolling:!1,connectionStatus:"closed"},b=a.useMemo(()=>{const e=new Date,s=new Date(e);s.setDate(e.getDate()-e.getDay()),s.setHours(0,0,0,0);const a=new Date(s);a.setDate(s.getDate()+6),a.setHours(23,59,59,999);const t=d.filter(e=>{const t=new Date(e.date);return t>=s&&t<=a}).length;return{totalGames:d.length,thisWeekGames:t,onlinePlayers:v}},[d,v]),w=async()=>{if(!u){p(!1),N(!0);try{await g()}finally{N(!1)}}},y=d.map(e=>{const s=new Date(e.date),a=new Date,t=new Date(a);t.setDate(t.getDate()+1);let l="future",i=s.getTime();return s.toDateString()===a.toDateString()?(l="today",i=0):s.toDateString()===t.toDateString()&&(l="tomorrow",i=1),{...e,category:l,sortOrder:i,gameDate:s}}).sort((e,s)=>e.sortOrder!==s.sortOrder?e.sortOrder-s.sortOrder:e.gameDate.getTime()-s.gameDate.getTime());return h&&0===d.length?e.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary mx-auto mb-4"}),e.jsx("p",{className:"text-muted-foreground",children:"Loading games..."})]})}):f&&0===d.length?e.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center",children:e.jsxs("div",{className:"text-center space-y-3",children:[e.jsx("p",{className:"text-muted-foreground",children:"Connection issues detected. Showing sample games."}),e.jsxs(r,{onClick:w,variant:"outline",children:[e.jsx(m,{className:"w-4 h-4 mr-2"})," Try Again"]})]})}):e.jsx("div",{className:"min-h-screen bg-background",children:e.jsx("div",{className:"max-w-7xl mx-auto p-4 md:p-6",children:e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-12 gap-6",children:[e.jsxs("div",{className:"lg:col-span-8",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl md:text-3xl font-bold",children:"TribeUp"}),e.jsx("p",{className:"text-muted-foreground",children:"Find your next game"})]}),e.jsx("div",{className:"flex gap-2",children:e.jsxs(r,{onClick:()=>t("/create-game"),className:"bg-gradient-to-r from-blue-500 to-cyan-500 hover:from-blue-600 hover:to-cyan-600 text-white font-semibold",children:[e.jsx(o,{className:"w-4 h-4 mr-2"}),"Create Game"]})})]}),e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h2",{className:"text-lg md:text-xl font-semibold",children:"Upcoming Games"}),e.jsxs(r,{variant:"outline",size:"sm",onClick:w,disabled:h,className:"hidden md:flex",children:[e.jsx(m,{className:"w-4 h-4 mr-2 "+(h?"animate-spin":"")}),"Refresh"]}),e.jsx(r,{variant:"ghost",size:"sm",onClick:w,disabled:h,className:"md:hidden","aria-label":"Refresh games",children:e.jsx(m,{className:"w-4 h-4 "+(h?"animate-spin":"")})})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:h?Array.from({length:6}).map((s,a)=>e.jsx(x,{},a)):y.map(s=>e.jsx("div",{children:e.jsx(c,{game:s,variant:"simple",onSelect:()=>{return e=s.id,void t(`/game/${e}`);var e}})},s.id))})]}),e.jsx("div",{className:"hidden lg:block lg:col-span-4",children:e.jsxs("div",{className:"bg-card rounded-lg p-6 sticky top-6",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Quick Stats"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-muted-foreground",children:"Active Games"}),e.jsx("span",{className:"font-semibold",children:b.totalGames})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-muted-foreground",children:"Players Online"}),e.jsx("span",{className:"font-semibold",children:b.onlinePlayers})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-muted-foreground",children:"This Week"}),e.jsx("span",{className:"font-semibold",children:b.thisWeekGames})]})]})]})}),e.jsx("div",{className:"lg:col-span-4 space-y-6",children:e.jsxs("div",{className:"grid grid-cols-2 lg:grid-cols-1 gap-4",children:[e.jsxs("div",{className:"bg-card rounded-lg p-4 text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-primary",children:b.onlinePlayers}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"Players Online"})]}),e.jsxs("div",{className:"bg-card rounded-lg p-4 text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-primary",children:b.thisWeekGames}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"This Week"})]})]})})]})})})}export{h as default};
//# sourceMappingURL=HomeScreen-DrrKfqv8.js.map
